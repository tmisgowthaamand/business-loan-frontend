import ps,{Component as ms}from"react";import xe,{forwardRef as hs,useCallback as Xe,useContext as fs,useEffect as Cs,useImperativeHandle as gs,useMemo as et,useRef as ne,useState as Ge}from"react";import{BaseComponentWrapper as ys,GridCoreCreator as vs,VanillaFrameworkOverrides as ws,_combineAttributesAndGridOptions as Rs,_getGridOption as tt,_getGridRegisteredModules as bs,_isClientSideRowModel as Ss,_isServerSideRowModel as Ps,_observeResize as Es,_processOnChange as ks,_warn as Dt}from"ag-grid-community";import be,{forwardRef as Fs,useCallback as Ms,useContext as As,useImperativeHandle as xs,useLayoutEffect as Gs,useMemo as st,useRef as De,useState as Se}from"react";import{_toString as Ds}from"ag-grid-community";import Bt from"react";var Q=Bt.createContext({}),It=Bt.createContext("default"),Le=(e,t,s,r)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const l=e.newAgStackInstance();let c,a,o=!1;return l.then(p=>{if(o){t.destroyBean(p);return}c=p,a=c.getGui(),s.appendChild(a),Ot(r,c)}),()=>{o=!0,c&&(a?.remove(),t.destroyBean(c),r&&Ot(r,void 0))}},Ot=(e,t)=>{if(e)if(e instanceof Function)e(t);else{const s=e;s.current=t}};import rt from"react";import Bs from"react-dom";var oe=(...e)=>e.filter(s=>s!=null&&s!=="").join(" "),ae=class ls{constructor(...t){this.classesMap={};for(const s of t)this.classesMap[s]=!0}setClass(t,s){if(!!this.classesMap[t]==s)return this;const n=new ls;return n.classesMap={...this.classesMap},n.classesMap[t]=s,n}toString(){return Object.keys(this.classesMap).filter(s=>this.classesMap[s]).join(" ")}},Be=e=>{const t=()=>typeof Symbol=="function"&&Symbol.for,s=()=>t()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===s()},Ct=rt.version?.split(".")[0],Wt=Ct==="16"||Ct==="17";function Is(){return Ct==="19"}var nt=!1;function Os(e){return nt||setTimeout(()=>nt=!1,0),nt=!0,e()}var ze=(e,t)=>{!Wt&&e&&!nt?Bs.flushSync(t):t()},Ws=e=>{Wt?e():rt.startTransition(e)};function Ts(e,t,s){return rt.useSyncExternalStore?rt.useSyncExternalStore(e,t):s}function ot(e,t,s){if(t==null||e==null)return t;if(e===t||t.length===0&&e.length===0)return e;if(s||e.length===0&&t.length>0||e.length>0&&t.length===0)return t;const r=[],n=[],l=new Map,c=new Map;for(let a=0;a<t.length;a++){const o=t[a];c.set(o.instanceId,o)}for(let a=0;a<e.length;a++){const o=e[a];l.set(o.instanceId,o),c.has(o.instanceId)&&r.push(o)}for(let a=0;a<t.length;a++){const o=t[a],p=o.instanceId;l.has(p)||n.push(o)}return r.length===e.length&&n.length===0?e:r.length===0&&n.length===t.length?t:r.length===0?n:n.length===0?r:[...r,...n]}var Tt=Fs((e,t)=>{const{registry:s,context:r}=As(Q),n=De(null),l=De(null),c=De(null),a=De(null),o=De(null),p=De(),[u,b]=Se(),[g,h]=Se(),[v,y]=Se(),[f,i]=Se(()=>new ae),[S,G]=Se(()=>new ae("ag-hidden")),[w,C]=Se(()=>new ae("ag-hidden")),[U,M]=Se(()=>new ae("ag-invisible"));xs(t,()=>({refresh(){return!1}})),Gs(()=>Le(u,r,l.current),[u]);const _=Ms(O=>{if(n.current=O,!O||r.isDestroyed()){p.current=r.destroyBean(p.current);return}const P={setInnerRenderer:(E,N)=>{b(E),y(N)},setChildCount:E=>h(E),toggleCss:(E,N)=>i(k=>k.setClass(E,N)),setContractedDisplayed:E=>C(N=>N.setClass("ag-hidden",!E)),setExpandedDisplayed:E=>G(N=>N.setClass("ag-hidden",!E)),setCheckboxVisible:E=>M(N=>N.setClass("ag-invisible",!E)),setCheckboxSpacing:E=>M(N=>N.setClass("ag-group-checkbox-spacing",E))},T=s.createDynamicBean("groupCellRendererCtrl",!0);T&&(p.current=r.createBean(T),p.current.init(P,O,c.current,a.current,o.current,Tt,e))},[]),B=st(()=>`ag-cell-wrapper ${f.toString()}`,[f]),F=st(()=>`ag-group-expanded ${S.toString()}`,[S]),d=st(()=>`ag-group-contracted ${w.toString()}`,[w]),m=st(()=>`ag-group-checkbox ${U.toString()}`,[U]),D=u?.componentFromFramework,z=D?u.componentClass:void 0,R=u==null&&v!=null,j=Ds(v);return be.createElement("span",{className:B,ref:_,...e.colDef?{}:{role:p.current?.getCellAriaRole()}},be.createElement("span",{className:F,ref:a}),be.createElement("span",{className:d,ref:o}),be.createElement("span",{className:m,ref:c}),be.createElement("span",{className:"ag-group-value",ref:l},R?j:D?be.createElement(z,{...u.params}):null),be.createElement("span",{className:"ag-group-child-count"},g))}),Nt=Tt;import{AgPromise as gt}from"ag-grid-community";import Ht,{memo as Ns,useEffect as Hs,useState as Us}from"react";import{createContext as _s}from"react";var je=_s({setMethods:()=>{}}),Vs=e=>{const{initialProps:t,addUpdateCallback:s,CustomComponentClass:r,setMethods:n}=e,[{key:l,...c},a]=Us(t);return Hs(()=>{s(o=>a(o))},[]),Ht.createElement(je.Provider,{value:{setMethods:n}},Ht.createElement(r,{key:l,...c}))},Ls=Ns(Vs);import{createElement as zs}from"react";import{createPortal as js}from"react-dom";import{AgPromise as yt}from"ag-grid-community";var $s=0;function Ut(){return`agPortalKey_${++$s}`}var _t=class{constructor(e,t,s,r){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=s,this.suppressFallbackMethods=!!r,this.statelessComponent=this.isStateless(this.reactComponent),this.key=Ut(),this.portalKey=Ut(),this.instanceCreated=this.isStatelessComponent()?yt.resolve(!1):new yt(n=>{this.resolveInstanceCreated=n})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),s=document.createElement(t||"div");return s.classList.add("ag-react-container"),e.reactContainer=s,s}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&t[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,t){const s=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!s){setTimeout(()=>this.callMethod(e,t));return}const r=s[e];if(r)return r.apply(s,t);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,t&&t[0]?t[0]:{})}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new yt(t=>this.createReactComponent(t))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=t=>{this.componentInstance=t,this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=js(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return zs(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const s=this[`${e}Component`];if(!this.suppressFallbackMethods&&s)return s.bind(this)(t)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function at(e,t,s){for(const r of e){const n=t[r];n&&(s[r]=n)}}var se=class extends _t{constructor(){super(...arguments),this.awaitUpdateCallback=new gt(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=Ls}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:s=>this.setMethods(s),addUpdateCallback:s=>{this.updateCallback=()=>(s(this.getProps()),new gt(r=>{setTimeout(()=>{r()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,at(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new gt(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},Ks=class extends se{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Js=class extends se{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},qs=class extends se{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:s,shake:r}=this;return e.label=t,e.icon=s,e.shake=r,e}};import{AgPromise as Vt}from"ag-grid-community";var Qs=class extends se{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new Vt(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){this.expectingNewMethods===!1&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback(),this.resolveFilterPassCallback?.(),this.resolveFilterPassCallback=void 0}updateModel(e){this.resolveFilterPassCallback?.();const t=new Vt(s=>{this.resolveFilterPassCallback=s});this.setModel(e).then(()=>{t.then(()=>{this.sourceParams.filterChangedCallback()})})}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,e}};import{AgPromise as Ys}from"ag-grid-community";var Zs=class extends se{constructor(){super(...arguments),this.awaitSetMethodsCallback=new Ys(e=>{this.resolveSetMethodsCallback=e})}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const t=this.providedMethods;t?t.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiDetached","onNewRowsLoaded","onAnyFilterChanged"]}setMethods(e){super.setMethods(e),this.resolveSetMethodsCallback()}};import{AgPromise as Xs}from"ag-grid-community";function Lt(e,t){e.parentFilterInstance(s=>{(s.setModel(t)||Xs.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var er=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=s=>this.updateModel(s)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){at(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),Lt(this.floatingFilterParams,e)}},tr=class extends se{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),Lt(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},sr=class extends se{refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}},rr=class extends se{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},nr=class extends se{refresh(e){this.sourceParams=e,this.refreshProps()}},or=class extends se{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},ar=class extends se{refresh(e){this.sourceParams=e,this.refreshProps()}},cr=class extends se{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},ir=class extends se{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};import{AgPromise as lr,_warn as ur}from"ag-grid-community";function dr(e,t){(e?.getInstance?.()??lr.resolve(void 0)).then(r=>t(r))}function ct(){ur(231)}var pr=1e3,mr=class{constructor(e,t,s){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=s||pr}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,s){this.portals=[...this.portals,e],this.waitForInstance(t,s),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,s=Date.now()){if(this.destroyed){t(null);return}if(e.rendered())t(e);else{if(Date.now()-s>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){ze(!0,()=>this.refresher()),e.rendered()&&t(e);return}window.setTimeout(()=>{this.waitForInstance(e,t,s)})}}};import $e,{memo as hr,useCallback as it,useEffect as fr,useMemo as vt,useRef as Ie,useState as Pe}from"react";import{GridCtrl as Cr}from"ag-grid-community";import Ke,{memo as gr,useCallback as yr,useContext as vr,useMemo as ie,useRef as ue,useState as Z}from"react";import{CssClassManager as wr,FakeHScrollComp as Rr,FakeVScrollComp as br,GridBodyCtrl as Sr,_observeResize as Pr,_setAriaColCount as Er,_setAriaRowCount as kr}from"ag-grid-community";import lt,{memo as Fr,useCallback as Mr,useContext as Ar,useMemo as zt,useRef as jt,useState as $t}from"react";import{GridHeaderCtrl as xr}from"ag-grid-community";import Je,{memo as Gr,useCallback as Dr,useContext as Br,useRef as wt,useState as Kt}from"react";import{HeaderRowContainerCtrl as Ir}from"ag-grid-community";import ut,{memo as Or,useCallback as Jt,useContext as Wr,useMemo as Rt,useRef as bt,useState as dt}from"react";import{_EmptyBean as Tr}from"ag-grid-community";import qe,{memo as Nr,useCallback as Hr,useContext as Ur,useEffect as _r,useLayoutEffect as Vr,useMemo as Lr,useRef as Oe,useState as qt}from"react";import{CssClassManager as zr,_EmptyBean as jr,_removeAriaSort as $r,_setAriaSort as Kr}from"ag-grid-community";var Jr=({ctrl:e})=>{const t=e.isAlive(),{context:s}=Ur(Q),[r,n]=qt(),[l,c]=qt(),a=Oe(),o=Oe(null),p=Oe(null),u=Oe(null),b=Oe(),g=Oe();t&&!g.current&&(g.current=new zr(()=>o.current));const h=Hr(i=>{if(o.current=i,!i||!e.isAlive()||s.isDestroyed()){a.current=s.destroyBean(a.current);return}a.current=s.createBean(new jr);const S=()=>{const w=e.getSelectAllGui();w&&(p.current?.insertAdjacentElement("afterend",w),a.current.addDestroyFunc(()=>w.remove()))},G={setWidth:w=>{o.current&&(o.current.style.width=w)},toggleCss:(w,C)=>g.current.toggleCss(w,C),setUserStyles:w=>c(w),setAriaSort:w=>{o.current&&(w?Kr(o.current,w):$r(o.current))},setUserCompDetails:w=>n(w),getUserCompInstance:()=>b.current||void 0,refreshSelectAllGui:S,removeSelectAllGui:()=>e.getSelectAllGui()?.remove()};e.setComp(G,i,p.current,u.current,a.current),S()},[]);Vr(()=>Le(r,s,u.current,b),[r]),_r(()=>{e.setDragSource(o.current)},[r]);const v=Lr(()=>!!(r?.componentFromFramework&&Be(r.componentClass)),[r]),y=r?.componentFromFramework,f=r?.componentClass;return qe.createElement("div",{ref:h,style:l,className:"ag-header-cell",role:"columnheader"},qe.createElement("div",{ref:p,className:"ag-header-cell-resize",role:"presentation"}),qe.createElement("div",{ref:u,className:"ag-header-cell-comp-wrapper",role:"presentation"},y?v?qe.createElement(f,{...r.params}):qe.createElement(f,{...r.params,ref:b}):null))},qr=Nr(Jr);import Ee,{memo as Qr,useCallback as Yr,useContext as Zr,useEffect as Xr,useLayoutEffect as en,useMemo as We,useRef as ke,useState as ve}from"react";import{AgPromise as tn,_EmptyBean as sn}from"ag-grid-community";var rn=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t}getProps(){return this.floatingFilterParams}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){at(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}},nn=({ctrl:e})=>{const{context:t,gos:s}=Zr(Q),[r,n]=ve(),[l,c]=ve(()=>new ae("ag-header-cell","ag-floating-filter")),[a,o]=ve(()=>new ae),[p,u]=ve(()=>new ae("ag-floating-filter-button","ag-hidden")),[b,g]=ve("false"),[h,v]=ve(),[,y]=ve(1),f=ke(),i=ke(null),S=ke(null),G=ke(null),w=ke(null),C=ke(),U=ke(),M=E=>{E!=null&&C.current&&C.current(E)},_=Yr(E=>{if(i.current=E,!E||!e.isAlive()||t.isDestroyed()){f.current=t.destroyBean(f.current);return}f.current=t.createBean(new sn),U.current=new tn(k=>{C.current=k});const N={toggleCss:(k,I)=>c($=>$.setClass(k,I)),setUserStyles:k=>n(k),addOrRemoveBodyCssClass:(k,I)=>o($=>$.setClass(k,I)),setButtonWrapperDisplayed:k=>{u(I=>I.setClass("ag-hidden",!k)),g(k?"false":"true")},setWidth:k=>{i.current&&(i.current.style.width=k)},setCompDetails:k=>v(k),getFloatingFilterComp:()=>U.current?U.current:null,setMenuIcon:k=>w.current?.appendChild(k)};e.setComp(N,E,w.current,S.current,f.current)},[]);en(()=>Le(h,t,S.current,M),[h]);const B=We(()=>l.toString(),[l]),F=We(()=>a.toString(),[a]),d=We(()=>p.toString(),[p]),m=We(()=>!!(h&&h.componentFromFramework&&Be(h.componentClass)),[h]),D=We(()=>s.get("reactiveCustomComponents"),[]),z=We(()=>s.get("enableFilterHandlers"),[]),[R,j]=ve();Xr(()=>{if(h?.componentFromFramework)if(D){const E=z?rn:er,N=new E(h.params,()=>y(k=>k+1));M(N),j(N)}else ct()},[h]);const O=R?.getProps(),P=h?.componentFromFramework,T=h?.componentClass;return Ee.createElement("div",{ref:_,style:r,className:B,role:"gridcell"},Ee.createElement("div",{ref:S,className:F,role:"presentation"},P?D?O&&Ee.createElement(je.Provider,{value:{setMethods:E=>R.setMethods(E)}},Ee.createElement(T,{...O})):Ee.createElement(T,{...h.params,ref:m?()=>{}:M}):null),Ee.createElement("div",{ref:G,"aria-hidden":b,className:d,role:"presentation"},Ee.createElement("button",{ref:w,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},on=Qr(nn);import Qe,{memo as an,useCallback as cn,useContext as ln,useEffect as un,useLayoutEffect as dn,useMemo as St,useRef as Ye,useState as Te}from"react";import{_EmptyBean as pn}from"ag-grid-community";var mn=({ctrl:e})=>{const{context:t}=ln(Q),[s,r]=Te(),[n,l]=Te(()=>new ae),[c,a]=Te(()=>new ae),[o,p]=Te("false"),[u,b]=Te(),[g,h]=Te(),v=Ye(),y=Ye(null),f=Ye(null),i=Ye(null),S=Ye(),G=cn(B=>{if(y.current=B,!B||!e.isAlive()||t.isDestroyed()){v.current=t.destroyBean(v.current);return}v.current=t.createBean(new pn);const F={setWidth:d=>{y.current&&(y.current.style.width=d)},toggleCss:(d,m)=>l(D=>D.setClass(d,m)),setUserStyles:d=>r(d),setHeaderWrapperHidden:d=>{const m=i.current;m&&(d?m.style.setProperty("display","none"):m.style.removeProperty("display"))},setHeaderWrapperMaxHeight:d=>{const m=i.current;m&&(d!=null?m.style.setProperty("max-height",`${d}px`):m.style.removeProperty("max-height"),m.classList.toggle("ag-header-cell-comp-wrapper-limited-height",d!=null))},setUserCompDetails:d=>h(d),setResizableDisplayed:d=>{a(m=>m.setClass("ag-hidden",!d)),p(d?"false":"true")},setAriaExpanded:d=>b(d),getUserCompInstance:()=>S.current||void 0};e.setComp(F,B,f.current,i.current,v.current)},[]);dn(()=>Le(g,t,i.current),[g]),un(()=>{y.current&&e.setDragSource(y.current)},[g]);const w=St(()=>!!(g?.componentFromFramework&&Be(g.componentClass)),[g]),C=St(()=>"ag-header-group-cell "+n.toString(),[n]),U=St(()=>"ag-header-cell-resize "+c.toString(),[c]),M=g?.componentFromFramework,_=g?.componentClass;return Qe.createElement("div",{ref:G,style:s,className:C,role:"columnheader","aria-expanded":u},Qe.createElement("div",{ref:i,className:"ag-header-cell-comp-wrapper",role:"presentation"},M?w?Qe.createElement(_,{...g.params}):Qe.createElement(_,{...g.params,ref:S}):null),Qe.createElement("div",{ref:f,"aria-hidden":o,className:U}))},hn=an(mn),fn=({ctrl:e})=>{const{gos:t,context:s}=Wr(Q),{topOffset:r,rowHeight:n}=Rt(()=>e.getTopAndHeight(),[]),l=Rt(()=>t.get("tabIndex"),[]),[c,a]=dt(()=>e.getAriaRowIndex()),o=e.headerRowClass,[p,u]=dt(()=>n+"px"),[b,g]=dt(()=>r+"px"),h=bt(null),[v,y]=dt(()=>e.getUpdatedHeaderCtrls()),f=bt(),i=bt(null),S=Jt(C=>{if(i.current=C,!C||!e.isAlive()||s.isDestroyed()){f.current=s.destroyBean(f.current);return}f.current=s.createBean(new Tr);const U={setHeight:M=>u(M),setTop:M=>g(M),setHeaderCtrls:(M,_,B)=>{const F=h.current,d=ot(F,M,_);d!==F&&(h.current=d,ze(B,()=>y(d)))},setWidth:M=>{i.current&&(i.current.style.width=M)},setRowIndex:M=>{a(M)}};e.setComp(U,f.current,!1)},[]),G=Rt(()=>({height:p,top:b}),[p,b]),w=Jt(C=>{switch(e.type){case"group":return ut.createElement(hn,{ctrl:C,key:C.instanceId});case"filter":return ut.createElement(on,{ctrl:C,key:C.instanceId});default:return ut.createElement(qr,{ctrl:C,key:C.instanceId})}},[]);return ut.createElement("div",{ref:S,className:o,role:"row",style:G,tabIndex:l,"aria-rowindex":c},v.map(w))},Cn=Or(fn),gn=({pinned:e})=>{const[t,s]=Kt(!0),[r,n]=Kt([]),{context:l}=Br(Q),c=wt(null),a=wt(null),o=wt(),p=e==="left",u=e==="right",b=!p&&!u,g=Dr(y=>{if(c.current=y,!y||l.isDestroyed()){o.current=l.destroyBean(o.current);return}o.current=l.createBean(new Ir(e));const f={setDisplayed:s,setCtrls:i=>n(i),setCenterWidth:i=>{a.current&&(a.current.style.width=i)},setViewportScrollLeft:i=>{c.current&&(c.current.scrollLeft=i)},setPinnedContainerWidth:i=>{c.current&&(c.current.style.width=i,c.current.style.minWidth=i,c.current.style.maxWidth=i)}};o.current.setComp(f,c.current)},[]),h=t?"":"ag-hidden",v=()=>r.map(y=>Je.createElement(Cn,{ctrl:y,key:y.instanceId}));return p?Je.createElement("div",{ref:g,className:"ag-pinned-left-header "+h,"aria-hidden":!t,role:"rowgroup"},v()):u?Je.createElement("div",{ref:g,className:"ag-pinned-right-header "+h,"aria-hidden":!t,role:"rowgroup"},v()):b?Je.createElement("div",{ref:g,className:"ag-header-viewport "+h,role:"rowgroup",tabIndex:-1},Je.createElement("div",{ref:a,className:"ag-header-container",role:"presentation"},v())):null},Pt=Gr(gn),yn=()=>{const[e,t]=$t(()=>new ae),[s,r]=$t(),{context:n}=Ar(Q),l=jt(null),c=jt(),a=Mr(u=>{if(l.current=u,!u||n.isDestroyed()){c.current=n.destroyBean(c.current);return}c.current=n.createBean(new xr);const b={toggleCss:(g,h)=>t(v=>v.setClass(g,h)),setHeightAndMinHeight:g=>r(g)};c.current.setComp(b,u,u)},[]),o=zt(()=>"ag-header "+e.toString(),[e]),p=zt(()=>({height:s,minHeight:s}),[s]);return lt.createElement("div",{ref:a,className:o,style:p,role:"presentation"},lt.createElement(Pt,{pinned:"left"}),lt.createElement(Pt,{pinned:null}),lt.createElement(Pt,{pinned:"right"}))},vn=Fr(yn);import{useEffect as wn}from"react";var Rn=(e,t)=>{wn(()=>{const s=t.current;if(s){const r=s.parentElement;if(r){const n=document.createComment(e);return r.insertBefore(n,s),()=>{n.remove()}}}},[e])},Fe=Rn;import Ze,{memo as bn,useCallback as Ne,useContext as Sn,useMemo as pt,useRef as he,useState as Qt}from"react";import{RowContainerCtrl as Pn,_getRowContainerClass as En,_getRowContainerOptions as kn,_getRowSpanContainerClass as Fn,_getRowViewportClass as Mn}from"ag-grid-community";import mt,{memo as An,useCallback as Yt,useContext as Zt,useEffect as Xt,useLayoutEffect as xn,useMemo as es,useRef as de,useState as fe}from"react";import{CssClassManager as Gn,_EmptyBean as Dn}from"ag-grid-community";import pe,{Suspense as Bn,memo as In,useCallback as He,useContext as On,useLayoutEffect as Et,useMemo as ht,useRef as ce,useState as Ce}from"react";import{CssClassManager as Wn,_EmptyBean as Tn,_removeFromParent as Nn}from"ag-grid-community";import{AgPromise as Hn}from"ag-grid-community";var Un=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new Hn(s=>{this.resolveInstanceCreated=s}),this.onValueChange=s=>this.updateValue(s),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){at(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached","getValidationErrors","getValidationElement"]}updateValue(e){this.value=e,this.refreshProps()}};import Ue from"react";import{memo as _n,useContext as Vn,useLayoutEffect as Ln,useState as zn}from"react";import{createPortal as jn}from"react-dom";import{_getActiveDomElement as $n}from"ag-grid-community";import{useEffect as Kn,useRef as ft,useState as Jn}from"react";var qn=e=>{const t=ft(e),s=ft(),r=ft(!1),n=ft(!1),[,l]=Jn(0);r.current&&(n.current=!0),Kn(()=>(r.current||(s.current=t.current(),r.current=!0),l(c=>c+1),()=>{n.current&&s.current?.()}),[])},Qn=e=>{const[t,s]=zn(),r=Vn(Q),{context:n,popupSvc:l,gos:c,editSvc:a}=r,{editDetails:o,cellCtrl:p,eParentCell:u}=e;return qn(()=>{const{compDetails:b}=o,g=c.get("stopEditingWhenCellsLoseFocus");let h,v;if(!n.isDestroyed()){v=n.createBean(a.createPopupEditorWrapper(b.params));const y=v.getGui();if(e.jsChildComp){const C=e.jsChildComp.getGui();C&&y.appendChild(C)}const{column:f,rowNode:i}=p,S={column:f,rowNode:i,type:"popupCellEditor",eventSource:u,ePopup:y,position:o.popupPosition,keepWithinBounds:!0},G=l?.positionPopupByComponent.bind(l,S),w=l?.addPopup({modal:g,eChild:y,closeOnEsc:!0,closedCallback:()=>{p.onPopupEditorClosed()},anchorToElement:u,positionCallback:G,ariaOwns:u});h=w?w.hideFunc:void 0,s(v),e.jsChildComp?.afterGuiAttached?.()}return()=>{h?.(),n.destroyBean(v)}}),Ln(()=>()=>{p.isCellFocused()&&t?.getGui().contains($n(r))&&u.focus({preventScroll:!0})},[t]),t&&e.wrappedContent?jn(e.wrappedContent,t.getGui()):null},ts=_n(Qn),Yn=(e,t,s)=>{const{compProxy:r}=e;s(r);const n=r.getProps(),l=Be(t);return Ue.createElement(je.Provider,{value:{setMethods:c=>r.setMethods(c)}},l?Ue.createElement(t,{...n}):Ue.createElement(t,{...n,ref:c=>r.setRef(c)}))},ss=(e,t,s)=>e.compProxy?Yn(e,t,s):Ue.createElement(t,{...e.compDetails.params,ref:s}),Zn=(e,t,s,r,n)=>{const l=e.compDetails,c=l.componentClass,a=l.componentFromFramework&&!e.popup,o=l.componentFromFramework&&e.popup,p=!l.componentFromFramework&&e.popup;return a?ss(e,c,t):o?Ue.createElement(ts,{editDetails:e,cellCtrl:r,eParentCell:s,wrappedContent:ss(e,c,t)}):p&&n?Ue.createElement(ts,{editDetails:e,cellCtrl:r,eParentCell:s,jsChildComp:n}):null};import{useCallback as Xn,useContext as eo,useEffect as rs}from"react";var to=(e,t,s,r,n,l)=>{const{context:c}=eo(Q),a=Xn(()=>{const o=n.current;if(!o)return;const p=o.getGui();p&&p.parentElement&&p.remove(),c.destroyBean(o),n.current=void 0},[]);rs(()=>{const o=e!=null,p=e?.compDetails&&!e.compDetails.componentFromFramework,u=t&&s==null;if(!(o&&p&&!u)){a();return}const g=e.compDetails;if(n.current){const v=n.current,f=v.refresh!=null&&e.force==!1?v.refresh(g.params):!1;if(f===!0||f===void 0)return;a()}g.newAgStackInstance().then(v=>{if(!v)return;const y=v.getGui();if(!y)return;(t?s:l.current).appendChild(y),n.current=v})},[e,t,r]),rs(()=>a,[])},ns=to;import kt,{useMemo as so,useRef as ro}from"react";var no=({cellCtrl:e,parent:t})=>{const s=ro(),r=so(()=>{const{loadingComp:n}=e.getDeferLoadingCellRenderer();return n?{value:void 0,compDetails:n,force:!1}:void 0},[e]);if(ns(r,!1,void 0,1,s,t),r?.compDetails?.componentFromFramework){const n=r.compDetails.componentClass;return kt.createElement(n,{...r.compDetails.params})}return kt.createElement(kt.Fragment,null)},oo=({cellCtrl:e,printLayout:t,editingCell:s})=>{const r=On(Q),{context:n}=r,{column:{colIdSanitised:l},instanceId:c}=e,a=ce(),[o,p]=Ce(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[u,b]=Ce(),[g,h]=Ce(1),[v,y]=Ce(),[f,i]=Ce(!1),[S,G]=Ce(!1),[w,C]=Ce(!1),[U,M]=Ce(),_=ht(()=>e.isForceWrapper(),[e]),B=ht(()=>e.getCellAriaRole(),[e]),F=ce(null),d=ce(null),m=ce(null),D=ce(),z=ce(),R=ce(),j=ce([]),O=ce(),P=ce(),[T,E]=Ce(0),N=He(x=>{P.current=x,E(H=>H+1)},[]),k=o!=null&&(f||w||S)&&(u==null||!!u.popup),I=_||k,$=ht(()=>e.getCellValueClass(),[e]),le=He(x=>{if(z.current=x,x){const H=x.isCancelBeforeStart&&x.isCancelBeforeStart();setTimeout(()=>{H?(e.stopEditing(!0),e.focusCell(!0)):(e.cellEditorAttached(),e.enableEditorTooltipFeature(x))})}},[e]),X=ce();X.current||(X.current=new Wn(()=>F.current)),ns(o,I,P.current,T,D,F);const we=ce();Et(()=>{const x=we.current,H=o;if(we.current=o,x==null||x.compDetails==null||H==null||H.compDetails==null)return;O.current?.refreshVisibility();const K=x.compDetails,q=H.compDetails;if(K.componentClass!=q.componentClass||m.current?.refresh==null)return;m.current.refresh(q.params)!=!0&&h(W=>W+1)},[o]),Et(()=>{if(!(u&&!u.compDetails.componentFromFramework)||n.isDestroyed())return;const H=u.compDetails,K=u.popup===!0,q=H.newAgStackInstance();return q.then(A=>{if(!A)return;const W=A.getGui();le(A),K||((_?R:F).current?.appendChild(W),A.afterGuiAttached?.()),M(A)}),()=>{q.then(A=>{const W=A.getGui();e.disableEditorTooltipFeature(),n.destroyBean(A),le(void 0),M(void 0),W?.remove()})}},[u]);const Ve=He(x=>{if(R.current=x,!x||n.isDestroyed()||!e.isAlive()){const q=j.current;j.current=[];for(const A of q)A();return}let H;const K=q=>{q&&(x.insertAdjacentElement("afterbegin",q.getGui()),j.current.push(()=>{Nn(q.getGui()),n.destroyBean(q),O.current===H&&(O.current=void 0)}))};f&&K(e.createSelectionCheckbox()),w&&K(e.createDndSource()),S&&(H=e.createRowDragComp(),O.current=H,H&&(K(H),H.refreshVisibility()))},[e,n,w,S,f]),Me=He(()=>{const x=!e.isCellSpanning()||d.current,H=F.current;if(!H||!x||!e||!e.isAlive()||n.isDestroyed()){a.current=n.destroyBean(a.current);return}a.current=n.createBean(new Tn);const K={toggleCss:(A,W)=>X.current.toggleCss(A,W),setUserStyles:A=>y(A),getFocusableElement:()=>F.current,setIncludeSelection:A=>i(A),setIncludeRowDrag:A=>G(A),setIncludeDndSource:A=>C(A),getCellEditor:()=>z.current??null,getCellRenderer:()=>m.current??D.current,getParentOfValue:()=>P.current??R.current??F.current,setRenderDetails:(A,W,Y)=>{const ye=()=>{p(J=>J?.compDetails!==A||J?.value!==W||J?.force!==Y?{value:W,compDetails:A,force:Y}:J)};if(A?.params?.deferRender&&!e.rowNode.group){const{loadingComp:J,onReady:Ae}=e.getDeferLoadingCellRenderer();if(J){p({value:void 0,compDetails:J,force:!1}),Ae.then(()=>Ws(ye));return}}ye()},setEditDetails:(A,W,Y,ye)=>{if(A){let J;A.componentFromFramework&&(ye?J=new Un(A.params,()=>h(Ae=>Ae+1)):ct()),b({compDetails:A,popup:W,popupPosition:Y,compProxy:J}),W||p(void 0)}else e.hasBrowserFocus()&&K.getFocusableElement().focus({preventScroll:!0}),z.current=void 0,b(void 0)},refreshEditStyles:(A,W)=>{if(!F.current)return;const{current:Y}=X;Y.toggleCss("ag-cell-value",!I),Y.toggleCss("ag-cell-inline-editing",!!A&&!W),Y.toggleCss("ag-cell-popup-editing",!!A&&!!W),Y.toggleCss("ag-cell-not-inline-editing",!A||!!W)}},q=R.current||void 0;e.setComp(K,H,d.current??void 0,q,t,s,a.current)},[]),V=He(x=>{F.current=x,Me()},[]),Re=He(x=>{d.current=x,Me()},[]),ee=ht(()=>!!(o?.compDetails?.componentFromFramework&&Be(o.compDetails.componentClass)),[o]);Et(()=>{if(!F.current)return;const{current:x}=X;x.toggleCss("ag-cell-value",!I),x.toggleCss("ag-cell-inline-editing",!!u&&!u.popup),x.toggleCss("ag-cell-popup-editing",!!u&&!!u.popup),x.toggleCss("ag-cell-not-inline-editing",!u||!!u.popup)});const re=()=>{const{compDetails:x,value:H}=o;if(!x)return H?.toString?.()??H;if(x.componentFromFramework){const K=x.componentClass;return pe.createElement(Bn,{fallback:pe.createElement(no,{cellCtrl:e,parent:F})},ee?pe.createElement(K,{...x.params,key:g}):pe.createElement(K,{...x.params,key:g,ref:m}))}},me=()=>{const x=()=>o==null?null:I?pe.createElement("span",{role:"presentation",id:`cell-${c}`,className:$,ref:N},re()):re(),H=K=>Zn(K,le,F.current,e,U);return u!=null?u.popup?pe.createElement(pe.Fragment,null,x(),H(u)):H(u):x()},ge=()=>pe.createElement("div",{ref:V,style:v,role:B,"col-id":l},I?pe.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:Ve},me()):me());return e.isCellSpanning()?pe.createElement("div",{ref:Re,className:"ag-spanned-cell-wrapper",role:"presentation"},ge()):ge()},ao=In(oo),co=({rowCtrl:e,containerType:t})=>{const{context:s,gos:r,editSvc:n}=Zt(Q),l=Zt(It)==="default",c=de(),a=de(e.getDomOrder()),o=e.isFullWidth(),p=e.rowNode.displayed,[u,b]=fe(()=>p?e.rowNode.getRowIndexString():null),[g,h]=fe(()=>e.rowId),[v,y]=fe(()=>e.businessKey),[f,i]=fe(()=>e.rowStyles),S=de(null),[G,w]=fe(()=>null),[C,U]=fe(),[M,_]=fe(()=>p?e.getInitialRowTop(t):void 0),[B,F]=fe(()=>p?e.getInitialTransform(t):void 0),d=de(null),m=de(),D=de(),z=de(!1),[R,j]=fe(0);Xt(()=>{if(z.current||!C||R>10)return;const V=d.current?.firstChild;V?(e.setupDetailRowAutoHeight(V),z.current=!0):j(Re=>Re+1)},[C,R]);const O=de();O.current||(O.current=new Gn(()=>d.current));const P=de(()=>{}),T=Yt(V=>(P.current=V,()=>{P.current=()=>{}}),[]),E=Ts(T,()=>S.current,[]),N=l?E:G,k=Yt(V=>{if(d.current=V,c.current=V?s.createBean(new Dn):s.destroyBean(c.current),!V){e.unsetComp(t);return}if(!e.isAlive()||s.isDestroyed())return;const Re={setTop:_,setTransform:F,toggleCss:(ee,re)=>O.current.toggleCss(ee,re),setDomOrder:ee=>a.current=ee,setRowIndex:b,setRowId:h,setRowBusinessKey:y,setUserStyles:i,setCellCtrls:(ee,re)=>{const me=S.current,ge=ot(me,ee,a.current);ge!==me&&(S.current=ge,l?P.current():ze(re,()=>w(ge)))},showFullWidth:ee=>{D.current=ee.params,U(ee)},getFullWidthCellRenderer:()=>m.current,getFullWidthCellRendererParams:()=>D.current,refreshFullWidth:ee=>{const re=ee();return D.current=re,we.current?(U(me=>({...me,params:re})),!0):!m.current||!m.current.refresh?!1:m.current.refresh(re)}};e.setComp(Re,V,t,c.current)},[]);xn(()=>Le(C,s,d.current,m),[C]);const I=es(()=>{const V={top:M,transform:B};return Object.assign(V,f),V},[M,B,f]),$=o&&C?.componentFromFramework,le=!o&&N!=null,X=es(()=>!!(C?.componentFromFramework&&Be(C.componentClass)),[C]),we=de(!1);Xt(()=>{we.current=X&&!!C&&!!r.get("reactiveCustomComponents")},[X,C]);const Ve=()=>N?.map(V=>mt.createElement(ao,{cellCtrl:V,editingCell:n?.isEditing(V,{withOpenEditor:!0})??!1,printLayout:e.printLayout,key:V.instanceId})),Me=()=>{const V=C.componentClass;return X?mt.createElement(V,{...C.params}):mt.createElement(V,{...C.params,ref:m})};return mt.createElement("div",{ref:k,role:"row",style:I,"row-index":u,"row-id":g,"row-business-key":v},le?Ve():$?Me():null)},os=An(co),io=({name:e})=>{const{context:t,gos:s}=Sn(Q),r=pt(()=>kn(e),[e]),n=he(null),l=he(null),c=he(null),a=he([]),o=he([]),[p,u]=Qt(()=>[]),b=!!s.get("enableCellSpan")&&!!r.getSpannedRowCtrls,g=he([]),h=he([]),[v,y]=Qt(()=>[]),f=he(!1),i=he(),S=pt(()=>oe("ag-viewport",Mn(e)),[e]),G=pt(()=>oe(En(e)),[e]),w=pt(()=>oe("ag-spanning-container",Fn(e)),[e]),C=r.type==="center"||b,U=C?n:l;Fe(" AG Row Container "+e+" ",U);const M=Ne(()=>{const R=!C||n.current!=null,j=l.current!=null,O=!b||c.current!=null;return R&&j&&O},[]),_=Ne(()=>n.current==null&&l.current==null&&c.current==null,[]),B=Ne(()=>{if(_()&&(i.current=t.destroyBean(i.current)),!t.isDestroyed()&&M()){const R=P=>{const T=ot(o.current,a.current,f.current);T!==o.current&&(o.current=T,ze(P,()=>u(T)))},j=P=>{const T=ot(h.current,g.current,f.current);T!==h.current&&(h.current=T,ze(P,()=>y(T)))},O={setHorizontalScroll:P=>{n.current&&(n.current.scrollLeft=P)},setViewportHeight:P=>{n.current&&(n.current.style.height=P)},setRowCtrls:({rowCtrls:P,useFlushSync:T})=>{const E=!!T&&a.current.length>0&&P.length>0;a.current=P,R(E)},setSpannedRowCtrls:(P,T)=>{const E=!!T&&g.current.length>0&&P.length>0;g.current=P,j(E)},setDomOrder:P=>{f.current!=P&&(f.current=P,R(!1))},setContainerWidth:P=>{l.current&&(l.current.style.width=P)},setOffsetTop:P=>{l.current&&(l.current.style.transform=`translateY(${P})`)}};i.current=t.createBean(new Pn(e)),i.current.setComp(O,l.current,c.current??void 0,n.current)}},[M,_]),F=Ne(R=>{l.current=R,B()},[B]),d=Ne(R=>{c.current=R,B()},[B]),m=Ne(R=>{n.current=R,B()},[B]),D=()=>Ze.createElement("div",{className:G,ref:F,role:C?"presentation":"rowgroup"},p.map(R=>Ze.createElement(os,{rowCtrl:R,containerType:r.type,key:R.instanceId})));if(!C)return D();const z=()=>Ze.createElement("div",{className:w,ref:d,role:"presentation"},v.map(R=>Ze.createElement(os,{rowCtrl:R,containerType:r.type,key:R.instanceId})));return Ze.createElement("div",{className:S,ref:m,role:"rowgroup"},D(),b?z():null)},lo=bn(io),uo=()=>{const e=vr(Q),{context:t,overlays:s}=e,[r,n]=Z(""),[l,c]=Z(0),[a,o]=Z(0),[p,u]=Z("0px"),[b,g]=Z("0px"),[h,v]=Z("100%"),[y,f]=Z("0px"),[i,S]=Z("0px"),[G,w]=Z("100%"),[C,U]=Z(!0),[M,_]=Z(!0),[B,F]=Z(null),[d,m]=Z(""),[D,z]=Z(null),[R,j]=Z("ag-layout-normal"),O=ue();O.current||(O.current=new wr(()=>P.current));const P=ue(null),T=ue(null),E=ue(null),N=ue(null),k=ue(null),I=ue(null),$=ue(null),le=ue([]),X=ue([]);Fe(" AG Grid Body ",P),Fe(" AG Pinned Top ",T),Fe(" AG Sticky Top ",E),Fe(" AG Middle ",I),Fe(" AG Pinned Bottom ",$);const we=yr(W=>{if(P.current=W,!W||t.isDestroyed()){le.current=t.destroyBeans(le.current);for(const L of X.current)L();X.current=[];return}const Y=(L,te)=>{L.appendChild(te),X.current.push(()=>te.remove())},ye=L=>{const te=t.createBean(new L);return le.current.push(te),te},J=(L,te,ds)=>{Y(L,document.createComment(ds)),Y(L,ye(te).getGui())};J(W,Rr," AG Fake Horizontal Scroll ");const Ae=s?.getOverlayWrapperCompClass();Ae&&J(W,Ae," AG Overlay Wrapper "),k.current&&J(k.current,br," AG Fake Vertical Scroll ");const us={setRowAnimationCssOnBodyViewport:n,setColumnCount:L=>{P.current&&Er(P.current,L)},setRowCount:L=>{P.current&&kr(P.current,L)},setTopHeight:c,setBottomHeight:o,setStickyTopHeight:u,setStickyTopTop:g,setStickyTopWidth:v,setTopInvisible:U,setBottomInvisible:_,setColumnMovingCss:(L,te)=>O.current.toggleCss(L,te),updateLayoutClasses:j,setAlwaysVerticalScrollClass:F,setPinnedTopBottomOverflowY:m,setCellSelectableCss:(L,te)=>z(te?L:null),setBodyViewportWidth:L=>{I.current&&(I.current.style.width=L)},registerBodyViewportResizeListener:L=>{if(I.current){const te=Pr(e,I.current,L);X.current.push(()=>te())}},setStickyBottomHeight:f,setStickyBottomBottom:S,setStickyBottomWidth:w,setGridRootRole:L=>W.setAttribute("role",L)},Gt=t.createBean(new Sr);le.current.push(Gt),Gt.setComp(us,W,I.current,T.current,$.current,E.current,N.current)},[]),Ve=ie(()=>oe("ag-root","ag-unselectable",R),[R]),Me=ie(()=>oe("ag-body-viewport",r,R,B,D),[r,R,B,D]),V=ie(()=>oe("ag-body",R),[R]),Re=ie(()=>oe("ag-floating-top",C?"ag-invisible":null,D),[D,C]),ee=ie(()=>oe("ag-sticky-top",D),[D]),re=ie(()=>oe("ag-sticky-bottom",y==="0px"?"ag-invisible":null,D),[D,y]),me=ie(()=>oe("ag-floating-bottom",M?"ag-invisible":null,D),[D,M]),ge=ie(()=>({height:l,minHeight:l,overflowY:d}),[l,d]),x=ie(()=>({height:p,top:b,width:h}),[p,b,h]),H=ie(()=>({height:y,bottom:i,width:G}),[y,i,G]),K=ie(()=>({height:a,minHeight:a,overflowY:d}),[a,d]),q=W=>Ke.createElement(lo,{name:W,key:`${W}-container`}),A=({section:W,children:Y,className:ye,style:J})=>Ke.createElement("div",{ref:W,className:ye,role:"presentation",style:J},Y.map(q));return Ke.createElement("div",{ref:we,className:Ve},Ke.createElement(vn,null),A({section:T,className:Re,style:ge,children:["topLeft","topCenter","topRight","topFullWidth"]}),Ke.createElement("div",{className:V,ref:k,role:"presentation"},A({section:I,className:Me,children:["left","center","right","fullWidth"]})),A({section:E,className:ee,style:x,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),A({section:N,className:re,style:H,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),A({section:$,className:me,style:K,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},po=gr(uo);import Ft,{forwardRef as mo,memo as ho,useCallback as Mt,useContext as fo,useImperativeHandle as Co,useRef as At}from"react";import{TabGuardClassNames as xt,TabGuardCtrl as go}from"ag-grid-community";var yo=(e,t)=>{const{children:s,eFocusableElement:r,onTabKeyDown:n,gridCtrl:l,forceFocusOutWhenTabGuardsAreEmpty:c,isEmpty:a}=e,{context:o}=fo(Q),p=At(null),u=At(null),b=At(),g=i=>{const S=i==null?void 0:parseInt(i,10).toString();for(const G of[p,u])S===void 0?G.current?.removeAttribute("tabindex"):G.current?.setAttribute("tabindex",S)};Co(t,()=>({forceFocusOutOfContainer(i){b.current?.forceFocusOutOfContainer(i)}}));const h=Mt(()=>{const i=p.current,S=u.current;if(!i&&!S||o.isDestroyed()){b.current=o.destroyBean(b.current);return}if(i&&S){const G={setTabIndex:g};b.current=o.createBean(new go({comp:G,eTopGuard:i,eBottomGuard:S,eFocusableElement:r,onTabKeyDown:n,forceFocusOutWhenTabGuardsAreEmpty:c,focusInnerElement:w=>l.focusInnerElement(w),isEmpty:a}))}},[]),v=Mt(i=>{p.current=i,h()},[h]),y=Mt(i=>{u.current=i,h()},[h]),f=i=>{const S=i==="top"?xt.TAB_GUARD_TOP:xt.TAB_GUARD_BOTTOM;return Ft.createElement("div",{className:`${xt.TAB_GUARD} ${S}`,role:"presentation",ref:i==="top"?v:y})};return Ft.createElement(Ft.Fragment,null,f("top"),s,f("bottom"))},vo=mo(yo),wo=ho(vo),Ro=({context:e})=>{const[t,s]=Pe(""),[r,n]=Pe(""),[l,c]=Pe(null),[a,o]=Pe(null),[p,u]=Pe(!1),[b,g]=Pe(),h=Ie(),v=Ie(null),y=Ie(),[f,i]=Pe(null),S=Ie(()=>{}),G=Ie(),w=Ie([]),C=it(()=>{},[]);Fe(" AG Grid ",v);const U=it(m=>{if(v.current=m,h.current=m?e.createBean(new Cr):e.destroyBean(h.current),!m||e.isDestroyed())return;const D=h.current;S.current=D.focusInnerElement.bind(D);const z={destroyGridUi:()=>{},setRtlClass:s,forceFocusOutOfContainer:R=>{if(!R&&G.current?.isDisplayed()){G.current.forceFocusOutOfContainer(R);return}y.current?.forceFocusOutOfContainer(R)},updateLayoutClasses:n,getFocusableContainers:()=>{const R=[],j=v.current?.querySelector(".ag-root");j&&R.push({getGui:()=>j});for(const O of w.current)O.isDisplayed()&&R.push(O);return R},setCursor:c,setUserSelect:o};D.setComp(z,m,m),u(!0)},[]);fr(()=>{const m=h.current,D=v.current;if(!b||!m||!f||!D||e.isDestroyed())return;const z=[],{watermarkSelector:R,paginationSelector:j,sideBarSelector:O,statusBarSelector:P,gridHeaderDropZonesSelector:T}=m.getOptionalSelectors(),E=[];if(T){const k=e.createBean(new T.component),I=k.getGui();D.insertAdjacentElement("afterbegin",I),E.push(I),z.push(k)}if(O){const k=e.createBean(new O.component),I=k.getGui(),$=f.querySelector(".ag-tab-guard-bottom");$&&($.insertAdjacentElement("beforebegin",I),E.push(I)),z.push(k),w.current.push(k)}const N=k=>{const I=e.createBean(new k),$=I.getGui();return D.insertAdjacentElement("beforeend",$),E.push($),z.push(I),I};if(P&&N(P.component),j){const k=N(j.component);G.current=k,w.current.push(k)}return R&&N(R.component),()=>{e.destroyBeans(z);for(const k of E)k.remove()}},[b,f,e]);const M=vt(()=>oe("ag-root-wrapper",t,r),[t,r]),_=vt(()=>oe("ag-root-wrapper-body","ag-focus-managed",r),[r]),B=vt(()=>({userSelect:a??"",WebkitUserSelect:a??"",cursor:l??""}),[a,l]),F=it(m=>{y.current=m,g(m!==null)},[]),d=it(()=>!h.current?.isFocusable(),[]);return $e.createElement("div",{ref:U,className:M,style:B,role:"presentation"},$e.createElement("div",{className:_,ref:i,role:"presentation"},p&&f&&!e.isDestroyed()&&$e.createElement(Q.Provider,{value:e.getBeans()},$e.createElement(wo,{ref:F,eFocusableElement:f,onTabKeyDown:C,gridCtrl:h.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:d},$e.createElement(po,null)))))},bo=hr(Ro);import{BeanStub as So}from"ag-grid-community";var Po=class extends So{postConstruct(){if(this.beans.colAutosize){const e=this.queueResizeOperationsForTick.bind(this);this.addManagedEventListeners({rowExpansionStateChanged:e,expandOrCollapseAll:e,cellValueChanged:e,rowNodeDataChanged:e,rowDataUpdated:e})}}queueResizeOperationsForTick(){const e=this.beans.colAutosize;e.shouldQueueResizeOperations=!0,setTimeout(()=>{e.processResizeOperations()},0)}areHeaderCellsRendered(){return this.beans.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(t=>t.areCellsRendered()))}areCellsRendered(){return this.beans.rowRenderer.getAllRowCtrls().every(e=>e.isRowRendered()&&e.getAllCellCtrls().every(t=>!!t.eGui))}},as={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},Eo={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...as},cs=new Set(Object.keys(Eo)),ko=new Set(Object.keys(as)),is=e=>{const t=ne(),s=ne(null),r=ne(null),n=ne([]),l=ne([]),c=ne(e),a=ne(),o=ne(),p=ne(!1),[u,b]=Ge(void 0),[,g]=Ge(0),h=Xe(i=>{if(s.current=i,!i){for(const d of n.current)d();n.current.length=0;return}const S=e.modules||[];r.current||(r.current=new mr(()=>g(d=>d+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),n.current.push(()=>{r.current?.destroy(),r.current=null}));const G=Rs(e.gridOptions,e,Object.keys(e).filter(d=>!cs.has(d))),w=()=>{if(p.current){const d=()=>a.current?.shouldQueueUpdates()?void 0:l.current.shift();let m=d();for(;m;)m(),m=d()}},C=new xo(w);a.current=C;const U=new Po,M={providedBeanInstances:{frameworkCompWrapper:new Mo(r.current,G),renderStatus:U},modules:S,frameworkOverrides:C,setThemeOnGridDiv:!0},_=d=>{b(d),d.createBean(U),n.current.push(()=>{d.destroy()}),d.getBean("ctrlsSvc").whenReady({addDestroyFunc:m=>{n.current.push(m)}},()=>{if(d.isDestroyed())return;const m=t.current;m&&e.passGridApi?.(m)})},B=d=>{d.getBean("ctrlsSvc").whenReady({addDestroyFunc:m=>{n.current.push(m)}},()=>{for(const m of l.current)m();l.current.length=0,p.current=!0})},F=new vs;G.gridId??(G.gridId=o.current),t.current=F.create(i,G,_,B,M),n.current.push(()=>{t.current=void 0}),t.current&&(o.current=t.current.getGridId())},[]),v=et(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),y=Xe(i=>{p.current&&!a.current?.shouldQueueUpdates()?i():l.current.push(i)},[]);Cs(()=>{const i=Fo(c.current,e);c.current=e,y(()=>{t.current&&ks(i,t.current)})},[e]);const f=!xe.useSyncExternalStore||tt(e,"renderingMode")==="legacy"?"legacy":"default";return xe.createElement("div",{style:v,className:e.className,ref:h},xe.createElement(It.Provider,{value:f},u&&!u.isDestroyed()?xe.createElement(bo,{key:u.instanceId,context:u}):null,r.current?.getPortals()??null))};function Fo(e,t){const s={};for(const r of Object.keys(t)){if(cs.has(r)){ko.has(r)&&Dt(274,{prop:r});continue}const n=t[r];e[r]!==n&&(s[r]=n)}return s}var Mo=class extends ys{constructor(e,t){super(),this.parent=e,this.gridOptions=t}createWrapper(e,t){const s=this.gridOptions;if(tt(s,"reactiveCustomComponents")){const c=(a=>{switch(a){case"filter":return tt(s,"enableFilterHandlers")?Zs:Qs;case"floatingFilterComponent":return tt(s,"enableFilterHandlers")?sr:tr;case"dateComponent":return Js;case"dragAndDropImageComponent":return qs;case"loadingOverlayComponent":return nr;case"noRowsOverlayComponent":return ar;case"statusPanel":return cr;case"toolPanel":return ir;case"menuItem":return or;case"cellRenderer":return Ks;case"innerHeaderComponent":return rr}})(t.name);if(c)return new c(e,this.parent,t)}else switch(t.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":ct();break}const n=!t.cellRenderer&&t.name!=="toolPanel";return new _t(e,this.parent,t,n)}},Ao=hs((e,t)=>{const s=fs(Q),{registry:r,context:n,gos:l,rowModel:c}=s,[a,o]=Ge(()=>new ae),[p,u]=Ge(()=>new ae),[b,g]=Ge(),[h,v]=Ge(),y=ne(),f=ne(null),i=ne(),S=et(()=>bs(e.api.getGridId(),b?.rowModelType??"clientSide"),[e]),G=et(()=>a.toString()+" ag-details-row",[a]),w=et(()=>p.toString()+" ag-details-grid",[p]);t&&gs(t,()=>({refresh(){return y.current?.refresh()??!1}})),e.template&&Dt(230);const C=Xe(M=>{if(f.current=M,!M||n.isDestroyed()){y.current=n.destroyBean(y.current),i.current?.();return}const _={toggleCss:(F,d)=>o(m=>m.setClass(F,d)),toggleDetailGridCss:(F,d)=>u(m=>m.setClass(F,d)),setDetailGrid:F=>g(F),setRowData:F=>v(F),getGui:()=>f.current},B=r.createDynamicBean("detailCellRendererCtrl",!0);if(B&&(n.createBean(B),B.init(_,e),y.current=B,l.get("detailRowAutoHeight"))){const F=()=>{if(f.current==null)return;const d=f.current.clientHeight;d!=null&&d>0&&setTimeout(()=>{e.node.setRowHeight(d),(Ss(l,c)||Ps(l,c))&&c.onRowHeightChanged()},0)};i.current=Es(s,M,F),F()}},[]),U=Xe(M=>{y.current?.registerDetailWithMaster(M)},[]);return xe.createElement("div",{className:G,ref:C},b&&xe.createElement(is,{className:w,...b,modules:S,rowData:h,passGridApi:U}))}),xo=class extends ws{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:Nt,agGroupRowRenderer:Nt,agDetailCellRenderer:Ao},this.wrapIncoming=(t,s)=>s==="ensureVisible"?Os(t):t()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return Is()}},Go=class extends ms{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e;for(const t of this.apiListeners)t(e)}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return ps.createElement(is,{...this.props,passGridApi:this.setGridApi})}};import{useContext as Do}from"react";function _e(e){const{setMethods:t}=Do(je);t(e)}function Bo(e){_e(e)}function Io(e){return _e(e)}function Oo(e){return _e(e)}function Wo(e){return _e(e)}function To(e){_e(e)}function No(e){_e(e)}export{Go as AgGridReact,je as CustomComponentContext,dr as getInstance,Bo as useGridCellEditor,Io as useGridDate,Oo as useGridFilter,Wo as useGridFilterDisplay,To as useGridFloatingFilter,No as useGridMenuItem,ct as warnReactiveCustomComponents};
