import{r as Bi,a as Hi,g as Wi}from"./vendor-D3F3s8fL.js";import{r as u,N as Qi,u as Ve,a as fe,L as je,b as ys,c as Gi,d as la,e as va,f as ue,g as Is,B as Zi}from"./router-CQb4Jid_.js";import{u as Ae,a as re,b as le,Q as Ki,c as zi}from"./query-BwvF97bm.js";import{A as bs,m as M}from"./ui-tRJToy8s.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=a(i);fetch(i.href,r)}})();var Ps={exports:{}},Lt={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ja;function Yi(){if(ja)return Lt;ja=1;var s=Bi(),t=Symbol.for("react.element"),a=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,d){var h,f={},p=null,j=null;d!==void 0&&(p=""+d),c.key!==void 0&&(p=""+c.key),c.ref!==void 0&&(j=c.ref);for(h in c)n.call(c,h)&&!r.hasOwnProperty(h)&&(f[h]=c[h]);if(l&&l.defaultProps)for(h in c=l.defaultProps,c)f[h]===void 0&&(f[h]=c[h]);return{$$typeof:t,type:l,key:p,ref:j,props:f,_owner:i.current}}return Lt.Fragment=a,Lt.jsx=o,Lt.jsxs=o,Lt}var Sa;function Ji(){return Sa||(Sa=1,Ps.exports=Yi()),Ps.exports}var e=Ji(),Yt={},Ea;function Xi(){if(Ea)return Yt;Ea=1;var s=Hi();return Yt.createRoot=s.createRoot,Yt.hydrateRoot=s.hydrateRoot,Yt}var er=Xi();const tr=Wi(er);let sr={data:""},ar=s=>{if(typeof window=="object"){let t=(s?s.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(s||document.head).appendChild(t),t.firstChild}return s||sr},nr=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ir=/\/\*[^]*?\*\/|  +/g,Aa=/\n+/g,ot=(s,t)=>{let a="",n="",i="";for(let r in s){let o=s[r];r[0]=="@"?r[1]=="i"?a=r+" "+o+";":n+=r[1]=="f"?ot(o,r):r+"{"+ot(o,r[1]=="k"?"":t)+"}":typeof o=="object"?n+=ot(o,t?t.replace(/([^,])+/g,l=>r.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):r):o!=null&&(r=/^--/.test(r)?r:r.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=ot.p?ot.p(r,o):r+":"+o+";")}return a+(t&&i?t+"{"+i+"}":i)+n},Je={},Cn=s=>{if(typeof s=="object"){let t="";for(let a in s)t+=a+Cn(s[a]);return t}return s},rr=(s,t,a,n,i)=>{let r=Cn(s),o=Je[r]||(Je[r]=(c=>{let d=0,h=11;for(;d<c.length;)h=101*h+c.charCodeAt(d++)>>>0;return"go"+h})(r));if(!Je[o]){let c=r!==s?s:(d=>{let h,f,p=[{}];for(;h=nr.exec(d.replace(ir,""));)h[4]?p.shift():h[3]?(f=h[3].replace(Aa," ").trim(),p.unshift(p[0][f]=p[0][f]||{})):p[0][h[1]]=h[2].replace(Aa," ").trim();return p[0]})(s);Je[o]=ot(i?{["@keyframes "+o]:c}:c,a?"":"."+o)}let l=a&&Je.g?Je.g:null;return a&&(Je.g=Je[o]),((c,d,h,f)=>{f?d.data=d.data.replace(f,c):d.data.indexOf(c)===-1&&(d.data=h?c+d.data:d.data+c)})(Je[o],t,n,l),o},or=(s,t,a)=>s.reduce((n,i,r)=>{let o=t[r];if(o&&o.call){let l=o(a),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":ot(l,""):l===!1?"":l}return n+i+(o??"")},"");function Ns(s){let t=this||{},a=s.call?s(t.p):s;return rr(a.unshift?a.raw?or(a,[].slice.call(arguments,1),t.p):a.reduce((n,i)=>Object.assign(n,i&&i.call?i(t.p):i),{}):a,ar(t.target),t.g,t.o,t.k)}let Rn,Qs,Gs;Ns.bind({g:1});let at=Ns.bind({k:1});function lr(s,t,a,n){ot.p=t,Rn=s,Qs=a,Gs=n}function dt(s,t){let a=this||{};return function(){let n=arguments;function i(r,o){let l=Object.assign({},r),c=l.className||i.className;a.p=Object.assign({theme:Qs&&Qs()},l),a.o=/ *go\d+/.test(c),l.className=Ns.apply(a,n)+(c?" "+c:"");let d=s;return s[0]&&(d=l.as||s,delete l.as),Gs&&d[0]&&Gs(l),Rn(d,l)}return i}}var cr=s=>typeof s=="function",os=(s,t)=>cr(s)?s(t):s,dr=(()=>{let s=0;return()=>(++s).toString()})(),Ln=(()=>{let s;return()=>{if(s===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");s=!t||t.matches}return s}})(),ur=20,ca="default",On=(s,t)=>{let{toastLimit:a}=s.settings;switch(t.type){case 0:return{...s,toasts:[t.toast,...s.toasts].slice(0,a)};case 1:return{...s,toasts:s.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:n}=t;return On(s,{type:s.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:i}=t;return{...s,toasts:s.toasts.map(o=>o.id===i||i===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...s,pausedAt:t.time};case 6:let r=t.time-(s.pausedAt||0);return{...s,pausedAt:void 0,toasts:s.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+r}))}}},ss=[],In={toasts:[],pausedAt:void 0,settings:{toastLimit:ur}},Ze={},Pn=(s,t=ca)=>{Ze[t]=On(Ze[t]||In,s),ss.forEach(([a,n])=>{a===t&&n(Ze[t])})},Mn=s=>Object.keys(Ze).forEach(t=>Pn(s,t)),mr=s=>Object.keys(Ze).find(t=>Ze[t].toasts.some(a=>a.id===s)),ws=(s=ca)=>t=>{Pn(t,s)},hr={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},fr=(s={},t=ca)=>{let[a,n]=u.useState(Ze[t]||In),i=u.useRef(Ze[t]);u.useEffect(()=>(i.current!==Ze[t]&&n(Ze[t]),ss.push([t,n]),()=>{let o=ss.findIndex(([l])=>l===t);o>-1&&ss.splice(o,1)}),[t]);let r=a.toasts.map(o=>{var l,c,d;return{...s,...s[o.type],...o,removeDelay:o.removeDelay||((l=s[o.type])==null?void 0:l.removeDelay)||s?.removeDelay,duration:o.duration||((c=s[o.type])==null?void 0:c.duration)||s?.duration||hr[o.type],style:{...s.style,...(d=s[o.type])==null?void 0:d.style,...o.style}}});return{...a,toasts:r}},pr=(s,t="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:s,pauseDuration:0,...a,id:a?.id||dr()}),Bt=s=>(t,a)=>{let n=pr(t,s,a);return ws(n.toasterId||mr(n.id))({type:2,toast:n}),n.id},ce=(s,t)=>Bt("blank")(s,t);ce.error=Bt("error");ce.success=Bt("success");ce.loading=Bt("loading");ce.custom=Bt("custom");ce.dismiss=(s,t)=>{let a={type:3,toastId:s};t?ws(t)(a):Mn(a)};ce.dismissAll=s=>ce.dismiss(void 0,s);ce.remove=(s,t)=>{let a={type:4,toastId:s};t?ws(t)(a):Mn(a)};ce.removeAll=s=>ce.remove(void 0,s);ce.promise=(s,t,a)=>{let n=ce.loading(t.loading,{...a,...a?.loading});return typeof s=="function"&&(s=s()),s.then(i=>{let r=t.success?os(t.success,i):void 0;return r?ce.success(r,{id:n,...a,...a?.success}):ce.dismiss(n),i}).catch(i=>{let r=t.error?os(t.error,i):void 0;r?ce.error(r,{id:n,...a,...a?.error}):ce.dismiss(n)}),s};var xr=1e3,gr=(s,t="default")=>{let{toasts:a,pausedAt:n}=fr(s,t),i=u.useRef(new Map).current,r=u.useCallback((f,p=xr)=>{if(i.has(f))return;let j=setTimeout(()=>{i.delete(f),o({type:4,toastId:f})},p);i.set(f,j)},[]);u.useEffect(()=>{if(n)return;let f=Date.now(),p=a.map(j=>{if(j.duration===1/0)return;let x=(j.duration||0)+j.pauseDuration-(f-j.createdAt);if(x<0){j.visible&&ce.dismiss(j.id);return}return setTimeout(()=>ce.dismiss(j.id,t),x)});return()=>{p.forEach(j=>j&&clearTimeout(j))}},[a,n,t]);let o=u.useCallback(ws(t),[t]),l=u.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=u.useCallback((f,p)=>{o({type:1,toast:{id:f,height:p}})},[o]),d=u.useCallback(()=>{n&&o({type:6,time:Date.now()})},[n,o]),h=u.useCallback((f,p)=>{let{reverseOrder:j=!1,gutter:x=8,defaultPosition:b}=p||{},g=a.filter(m=>(m.position||b)===(f.position||b)&&m.height),A=g.findIndex(m=>m.id===f.id),w=g.filter((m,y)=>y<A&&m.visible).length;return g.filter(m=>m.visible).slice(...j?[w+1]:[0,w]).reduce((m,y)=>m+(y.height||0)+x,0)},[a]);return u.useEffect(()=>{a.forEach(f=>{if(f.dismissed)r(f.id,f.removeDelay);else{let p=i.get(f.id);p&&(clearTimeout(p),i.delete(f.id))}})},[a,r]),{toasts:a,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:h}}},yr=at`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,br=at`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Nr=at`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,wr=dt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${yr} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${br} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${s=>s.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Nr} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,vr=at`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,jr=dt("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${s=>s.secondary||"#e0e0e0"};
  border-right-color: ${s=>s.primary||"#616161"};
  animation: ${vr} 1s linear infinite;
`,Sr=at`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Er=at`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ar=dt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${s=>s.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Sr} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Er} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${s=>s.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Dr=dt("div")`
  position: absolute;
`,Tr=dt("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,kr=at`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Cr=dt("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${kr} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Rr=({toast:s})=>{let{icon:t,type:a,iconTheme:n}=s;return t!==void 0?typeof t=="string"?u.createElement(Cr,null,t):t:a==="blank"?null:u.createElement(Tr,null,u.createElement(jr,{...n}),a!=="loading"&&u.createElement(Dr,null,a==="error"?u.createElement(wr,{...n}):u.createElement(Ar,{...n})))},Lr=s=>`
0% {transform: translate3d(0,${s*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Or=s=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${s*-150}%,-1px) scale(.6); opacity:0;}
`,Ir="0%{opacity:0;} 100%{opacity:1;}",Pr="0%{opacity:1;} 100%{opacity:0;}",Mr=dt("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,qr=dt("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Fr=(s,t)=>{let a=s.includes("top")?1:-1,[n,i]=Ln()?[Ir,Pr]:[Lr(a),Or(a)];return{animation:t?`${at(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${at(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},$r=u.memo(({toast:s,position:t,style:a,children:n})=>{let i=s.height?Fr(s.position||t||"top-center",s.visible):{opacity:0},r=u.createElement(Rr,{toast:s}),o=u.createElement(qr,{...s.ariaProps},os(s.message,s));return u.createElement(Mr,{className:s.className,style:{...i,...a,...s.style}},typeof n=="function"?n({icon:r,message:o}):u.createElement(u.Fragment,null,r,o))});lr(u.createElement);var Ur=({id:s,className:t,style:a,onHeightUpdate:n,children:i})=>{let r=u.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;n(s,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[s,n]);return u.createElement("div",{ref:r,className:t,style:a},i)},_r=(s,t)=>{let a=s.includes("top"),n=a?{top:0}:{bottom:0},i=s.includes("center")?{justifyContent:"center"}:s.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Ln()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(a?1:-1)}px)`,...n,...i}},Vr=Ns`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Jt=16,Br=({reverseOrder:s,position:t="top-center",toastOptions:a,gutter:n,children:i,toasterId:r,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:d}=gr(a,r);return u.createElement("div",{"data-rht-toaster":r||"",style:{position:"fixed",zIndex:9999,top:Jt,left:Jt,right:Jt,bottom:Jt,pointerEvents:"none",...o},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(h=>{let f=h.position||t,p=d.calculateOffset(h,{reverseOrder:s,gutter:n,defaultPosition:t}),j=_r(f,p);return u.createElement(Ur,{id:h.id,key:h.id,onHeightUpdate:d.updateHeight,className:h.visible?Vr:"",style:j},h.type==="custom"?os(h.message,h):i?i(h):u.createElement($r,{toast:h,position:f}))}))},O=ce;function qn(s,t){return function(){return s.apply(t,arguments)}}const{toString:Hr}=Object.prototype,{getPrototypeOf:da}=Object,{iterator:vs,toStringTag:Fn}=Symbol,js=(s=>t=>{const a=Hr.call(t);return s[a]||(s[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Be=s=>(s=s.toLowerCase(),t=>js(t)===s),Ss=s=>t=>typeof t===s,{isArray:Tt}=Array,St=Ss("undefined");function Ht(s){return s!==null&&!St(s)&&s.constructor!==null&&!St(s.constructor)&&Re(s.constructor.isBuffer)&&s.constructor.isBuffer(s)}const $n=Be("ArrayBuffer");function Wr(s){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(s):t=s&&s.buffer&&$n(s.buffer),t}const Qr=Ss("string"),Re=Ss("function"),Un=Ss("number"),Wt=s=>s!==null&&typeof s=="object",Gr=s=>s===!0||s===!1,as=s=>{if(js(s)!=="object")return!1;const t=da(s);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Fn in s)&&!(vs in s)},Zr=s=>{if(!Wt(s)||Ht(s))return!1;try{return Object.keys(s).length===0&&Object.getPrototypeOf(s)===Object.prototype}catch{return!1}},Kr=Be("Date"),zr=Be("File"),Yr=Be("Blob"),Jr=Be("FileList"),Xr=s=>Wt(s)&&Re(s.pipe),eo=s=>{let t;return s&&(typeof FormData=="function"&&s instanceof FormData||Re(s.append)&&((t=js(s))==="formdata"||t==="object"&&Re(s.toString)&&s.toString()==="[object FormData]"))},to=Be("URLSearchParams"),[so,ao,no,io]=["ReadableStream","Request","Response","Headers"].map(Be),ro=s=>s.trim?s.trim():s.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Qt(s,t,{allOwnKeys:a=!1}={}){if(s===null||typeof s>"u")return;let n,i;if(typeof s!="object"&&(s=[s]),Tt(s))for(n=0,i=s.length;n<i;n++)t.call(null,s[n],n,s);else{if(Ht(s))return;const r=a?Object.getOwnPropertyNames(s):Object.keys(s),o=r.length;let l;for(n=0;n<o;n++)l=r[n],t.call(null,s[l],l,s)}}function _n(s,t){if(Ht(s))return null;t=t.toLowerCase();const a=Object.keys(s);let n=a.length,i;for(;n-- >0;)if(i=a[n],t===i.toLowerCase())return i;return null}const ut=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Vn=s=>!St(s)&&s!==ut;function Zs(){const{caseless:s,skipUndefined:t}=Vn(this)&&this||{},a={},n=(i,r)=>{const o=s&&_n(a,r)||r;as(a[o])&&as(i)?a[o]=Zs(a[o],i):as(i)?a[o]=Zs({},i):Tt(i)?a[o]=i.slice():(!t||!St(i))&&(a[o]=i)};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Qt(arguments[i],n);return a}const oo=(s,t,a,{allOwnKeys:n}={})=>(Qt(t,(i,r)=>{a&&Re(i)?s[r]=qn(i,a):s[r]=i},{allOwnKeys:n}),s),lo=s=>(s.charCodeAt(0)===65279&&(s=s.slice(1)),s),co=(s,t,a,n)=>{s.prototype=Object.create(t.prototype,n),s.prototype.constructor=s,Object.defineProperty(s,"super",{value:t.prototype}),a&&Object.assign(s.prototype,a)},uo=(s,t,a,n)=>{let i,r,o;const l={};if(t=t||{},s==null)return t;do{for(i=Object.getOwnPropertyNames(s),r=i.length;r-- >0;)o=i[r],(!n||n(o,s,t))&&!l[o]&&(t[o]=s[o],l[o]=!0);s=a!==!1&&da(s)}while(s&&(!a||a(s,t))&&s!==Object.prototype);return t},mo=(s,t,a)=>{s=String(s),(a===void 0||a>s.length)&&(a=s.length),a-=t.length;const n=s.indexOf(t,a);return n!==-1&&n===a},ho=s=>{if(!s)return null;if(Tt(s))return s;let t=s.length;if(!Un(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=s[t];return a},fo=(s=>t=>s&&t instanceof s)(typeof Uint8Array<"u"&&da(Uint8Array)),po=(s,t)=>{const n=(s&&s[vs]).call(s);let i;for(;(i=n.next())&&!i.done;){const r=i.value;t.call(s,r[0],r[1])}},xo=(s,t)=>{let a;const n=[];for(;(a=s.exec(t))!==null;)n.push(a);return n},go=Be("HTMLFormElement"),yo=s=>s.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,n,i){return n.toUpperCase()+i}),Da=(({hasOwnProperty:s})=>(t,a)=>s.call(t,a))(Object.prototype),bo=Be("RegExp"),Bn=(s,t)=>{const a=Object.getOwnPropertyDescriptors(s),n={};Qt(a,(i,r)=>{let o;(o=t(i,r,s))!==!1&&(n[r]=o||i)}),Object.defineProperties(s,n)},No=s=>{Bn(s,(t,a)=>{if(Re(s)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const n=s[a];if(Re(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},wo=(s,t)=>{const a={},n=i=>{i.forEach(r=>{a[r]=!0})};return Tt(s)?n(s):n(String(s).split(t)),a},vo=()=>{},jo=(s,t)=>s!=null&&Number.isFinite(s=+s)?s:t;function So(s){return!!(s&&Re(s.append)&&s[Fn]==="FormData"&&s[vs])}const Eo=s=>{const t=new Array(10),a=(n,i)=>{if(Wt(n)){if(t.indexOf(n)>=0)return;if(Ht(n))return n;if(!("toJSON"in n)){t[i]=n;const r=Tt(n)?[]:{};return Qt(n,(o,l)=>{const c=a(o,i+1);!St(c)&&(r[l]=c)}),t[i]=void 0,r}}return n};return a(s,0)},Ao=Be("AsyncFunction"),Do=s=>s&&(Wt(s)||Re(s))&&Re(s.then)&&Re(s.catch),Hn=((s,t)=>s?setImmediate:t?((a,n)=>(ut.addEventListener("message",({source:i,data:r})=>{i===ut&&r===a&&n.length&&n.shift()()},!1),i=>{n.push(i),ut.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",Re(ut.postMessage)),To=typeof queueMicrotask<"u"?queueMicrotask.bind(ut):typeof process<"u"&&process.nextTick||Hn,ko=s=>s!=null&&Re(s[vs]),D={isArray:Tt,isArrayBuffer:$n,isBuffer:Ht,isFormData:eo,isArrayBufferView:Wr,isString:Qr,isNumber:Un,isBoolean:Gr,isObject:Wt,isPlainObject:as,isEmptyObject:Zr,isReadableStream:so,isRequest:ao,isResponse:no,isHeaders:io,isUndefined:St,isDate:Kr,isFile:zr,isBlob:Yr,isRegExp:bo,isFunction:Re,isStream:Xr,isURLSearchParams:to,isTypedArray:fo,isFileList:Jr,forEach:Qt,merge:Zs,extend:oo,trim:ro,stripBOM:lo,inherits:co,toFlatObject:uo,kindOf:js,kindOfTest:Be,endsWith:mo,toArray:ho,forEachEntry:po,matchAll:xo,isHTMLForm:go,hasOwnProperty:Da,hasOwnProp:Da,reduceDescriptors:Bn,freezeMethods:No,toObjectSet:wo,toCamelCase:yo,noop:vo,toFiniteNumber:jo,findKey:_n,global:ut,isContextDefined:Vn,isSpecCompliantForm:So,toJSONObject:Eo,isAsyncFn:Ao,isThenable:Do,setImmediate:Hn,asap:To,isIterable:ko};function z(s,t,a,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=s,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}D.inherits(z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.status}}});const Wn=z.prototype,Qn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(s=>{Qn[s]={value:s}});Object.defineProperties(z,Qn);Object.defineProperty(Wn,"isAxiosError",{value:!0});z.from=(s,t,a,n,i,r)=>{const o=Object.create(Wn);D.toFlatObject(s,o,function(h){return h!==Error.prototype},d=>d!=="isAxiosError");const l=s&&s.message?s.message:"Error",c=t==null&&s?s.code:t;return z.call(o,l,c,a,n,i),s&&o.cause==null&&Object.defineProperty(o,"cause",{value:s,configurable:!0}),o.name=s&&s.name||"Error",r&&Object.assign(o,r),o};const Co=null;function Ks(s){return D.isPlainObject(s)||D.isArray(s)}function Gn(s){return D.endsWith(s,"[]")?s.slice(0,-2):s}function Ta(s,t,a){return s?s.concat(t).map(function(i,r){return i=Gn(i),!a&&r?"["+i+"]":i}).join(a?".":""):t}function Ro(s){return D.isArray(s)&&!s.some(Ks)}const Lo=D.toFlatObject(D,{},null,function(t){return/^is[A-Z]/.test(t)});function Es(s,t,a){if(!D.isObject(s))throw new TypeError("target must be an object");t=t||new FormData,a=D.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,g){return!D.isUndefined(g[b])});const n=a.metaTokens,i=a.visitor||h,r=a.dots,o=a.indexes,c=(a.Blob||typeof Blob<"u"&&Blob)&&D.isSpecCompliantForm(t);if(!D.isFunction(i))throw new TypeError("visitor must be a function");function d(x){if(x===null)return"";if(D.isDate(x))return x.toISOString();if(D.isBoolean(x))return x.toString();if(!c&&D.isBlob(x))throw new z("Blob is not supported. Use a Buffer instead.");return D.isArrayBuffer(x)||D.isTypedArray(x)?c&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function h(x,b,g){let A=x;if(x&&!g&&typeof x=="object"){if(D.endsWith(b,"{}"))b=n?b:b.slice(0,-2),x=JSON.stringify(x);else if(D.isArray(x)&&Ro(x)||(D.isFileList(x)||D.endsWith(b,"[]"))&&(A=D.toArray(x)))return b=Gn(b),A.forEach(function(m,y){!(D.isUndefined(m)||m===null)&&t.append(o===!0?Ta([b],y,r):o===null?b:b+"[]",d(m))}),!1}return Ks(x)?!0:(t.append(Ta(g,b,r),d(x)),!1)}const f=[],p=Object.assign(Lo,{defaultVisitor:h,convertValue:d,isVisitable:Ks});function j(x,b){if(!D.isUndefined(x)){if(f.indexOf(x)!==-1)throw Error("Circular reference detected in "+b.join("."));f.push(x),D.forEach(x,function(A,w){(!(D.isUndefined(A)||A===null)&&i.call(t,A,D.isString(w)?w.trim():w,b,p))===!0&&j(A,b?b.concat(w):[w])}),f.pop()}}if(!D.isObject(s))throw new TypeError("data must be an object");return j(s),t}function ka(s){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(s).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function ua(s,t){this._pairs=[],s&&Es(s,this,t)}const Zn=ua.prototype;Zn.append=function(t,a){this._pairs.push([t,a])};Zn.toString=function(t){const a=t?function(n){return t.call(this,n,ka)}:ka;return this._pairs.map(function(i){return a(i[0])+"="+a(i[1])},"").join("&")};function Oo(s){return encodeURIComponent(s).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Kn(s,t,a){if(!t)return s;const n=a&&a.encode||Oo;D.isFunction(a)&&(a={serialize:a});const i=a&&a.serialize;let r;if(i?r=i(t,a):r=D.isURLSearchParams(t)?t.toString():new ua(t,a).toString(n),r){const o=s.indexOf("#");o!==-1&&(s=s.slice(0,o)),s+=(s.indexOf("?")===-1?"?":"&")+r}return s}class Ca{constructor(){this.handlers=[]}use(t,a,n){return this.handlers.push({fulfilled:t,rejected:a,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){D.forEach(this.handlers,function(n){n!==null&&t(n)})}}const zn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Io=typeof URLSearchParams<"u"?URLSearchParams:ua,Po=typeof FormData<"u"?FormData:null,Mo=typeof Blob<"u"?Blob:null,qo={isBrowser:!0,classes:{URLSearchParams:Io,FormData:Po,Blob:Mo},protocols:["http","https","file","blob","url","data"]},ma=typeof window<"u"&&typeof document<"u",zs=typeof navigator=="object"&&navigator||void 0,Fo=ma&&(!zs||["ReactNative","NativeScript","NS"].indexOf(zs.product)<0),$o=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Uo=ma&&window.location.href||"http://localhost",_o=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ma,hasStandardBrowserEnv:Fo,hasStandardBrowserWebWorkerEnv:$o,navigator:zs,origin:Uo},Symbol.toStringTag,{value:"Module"})),Se={..._o,...qo};function Vo(s,t){return Es(s,new Se.classes.URLSearchParams,{visitor:function(a,n,i,r){return Se.isNode&&D.isBuffer(a)?(this.append(n,a.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...t})}function Bo(s){return D.matchAll(/\w+|\[(\w*)]/g,s).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Ho(s){const t={},a=Object.keys(s);let n;const i=a.length;let r;for(n=0;n<i;n++)r=a[n],t[r]=s[r];return t}function Yn(s){function t(a,n,i,r){let o=a[r++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=r>=a.length;return o=!o&&D.isArray(i)?i.length:o,c?(D.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!l):((!i[o]||!D.isObject(i[o]))&&(i[o]=[]),t(a,n,i[o],r)&&D.isArray(i[o])&&(i[o]=Ho(i[o])),!l)}if(D.isFormData(s)&&D.isFunction(s.entries)){const a={};return D.forEachEntry(s,(n,i)=>{t(Bo(n),i,a,0)}),a}return null}function Wo(s,t,a){if(D.isString(s))try{return(t||JSON.parse)(s),D.trim(s)}catch(n){if(n.name!=="SyntaxError")throw n}return(a||JSON.stringify)(s)}const Gt={transitional:zn,adapter:["xhr","http","fetch"],transformRequest:[function(t,a){const n=a.getContentType()||"",i=n.indexOf("application/json")>-1,r=D.isObject(t);if(r&&D.isHTMLForm(t)&&(t=new FormData(t)),D.isFormData(t))return i?JSON.stringify(Yn(t)):t;if(D.isArrayBuffer(t)||D.isBuffer(t)||D.isStream(t)||D.isFile(t)||D.isBlob(t)||D.isReadableStream(t))return t;if(D.isArrayBufferView(t))return t.buffer;if(D.isURLSearchParams(t))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Vo(t,this.formSerializer).toString();if((l=D.isFileList(t))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Es(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return r||i?(a.setContentType("application/json",!1),Wo(t)):t}],transformResponse:[function(t){const a=this.transitional||Gt.transitional,n=a&&a.forcedJSONParsing,i=this.responseType==="json";if(D.isResponse(t)||D.isReadableStream(t))return t;if(t&&D.isString(t)&&(n&&!this.responseType||i)){const o=!(a&&a.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?z.from(l,z.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Se.classes.FormData,Blob:Se.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};D.forEach(["delete","get","head","post","put","patch"],s=>{Gt.headers[s]={}});const Qo=D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Go=s=>{const t={};let a,n,i;return s&&s.split(`
`).forEach(function(o){i=o.indexOf(":"),a=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!a||t[a]&&Qo[a])&&(a==="set-cookie"?t[a]?t[a].push(n):t[a]=[n]:t[a]=t[a]?t[a]+", "+n:n)}),t},Ra=Symbol("internals");function Ot(s){return s&&String(s).trim().toLowerCase()}function ns(s){return s===!1||s==null?s:D.isArray(s)?s.map(ns):String(s)}function Zo(s){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=a.exec(s);)t[n[1]]=n[2];return t}const Ko=s=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(s.trim());function Ms(s,t,a,n,i){if(D.isFunction(n))return n.call(this,t,a);if(i&&(t=a),!!D.isString(t)){if(D.isString(n))return t.indexOf(n)!==-1;if(D.isRegExp(n))return n.test(t)}}function zo(s){return s.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,a,n)=>a.toUpperCase()+n)}function Yo(s,t){const a=D.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(s,n+a,{value:function(i,r,o){return this[n].call(this,t,i,r,o)},configurable:!0})})}let Le=class{constructor(t){t&&this.set(t)}set(t,a,n){const i=this;function r(l,c,d){const h=Ot(c);if(!h)throw new Error("header name must be a non-empty string");const f=D.findKey(i,h);(!f||i[f]===void 0||d===!0||d===void 0&&i[f]!==!1)&&(i[f||c]=ns(l))}const o=(l,c)=>D.forEach(l,(d,h)=>r(d,h,c));if(D.isPlainObject(t)||t instanceof this.constructor)o(t,a);else if(D.isString(t)&&(t=t.trim())&&!Ko(t))o(Go(t),a);else if(D.isObject(t)&&D.isIterable(t)){let l={},c,d;for(const h of t){if(!D.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[d=h[0]]=(c=l[d])?D.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}o(l,a)}else t!=null&&r(a,t,n);return this}get(t,a){if(t=Ot(t),t){const n=D.findKey(this,t);if(n){const i=this[n];if(!a)return i;if(a===!0)return Zo(i);if(D.isFunction(a))return a.call(this,i,n);if(D.isRegExp(a))return a.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,a){if(t=Ot(t),t){const n=D.findKey(this,t);return!!(n&&this[n]!==void 0&&(!a||Ms(this,this[n],n,a)))}return!1}delete(t,a){const n=this;let i=!1;function r(o){if(o=Ot(o),o){const l=D.findKey(n,o);l&&(!a||Ms(n,n[l],l,a))&&(delete n[l],i=!0)}}return D.isArray(t)?t.forEach(r):r(t),i}clear(t){const a=Object.keys(this);let n=a.length,i=!1;for(;n--;){const r=a[n];(!t||Ms(this,this[r],r,t,!0))&&(delete this[r],i=!0)}return i}normalize(t){const a=this,n={};return D.forEach(this,(i,r)=>{const o=D.findKey(n,r);if(o){a[o]=ns(i),delete a[r];return}const l=t?zo(r):String(r).trim();l!==r&&delete a[r],a[l]=ns(i),n[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const a=Object.create(null);return D.forEach(this,(n,i)=>{n!=null&&n!==!1&&(a[i]=t&&D.isArray(n)?n.join(", "):n)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,a])=>t+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...a){const n=new this(t);return a.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[Ra]=this[Ra]={accessors:{}}).accessors,i=this.prototype;function r(o){const l=Ot(o);n[l]||(Yo(i,o),n[l]=!0)}return D.isArray(t)?t.forEach(r):r(t),this}};Le.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);D.reduceDescriptors(Le.prototype,({value:s},t)=>{let a=t[0].toUpperCase()+t.slice(1);return{get:()=>s,set(n){this[a]=n}}});D.freezeMethods(Le);function qs(s,t){const a=this||Gt,n=t||a,i=Le.from(n.headers);let r=n.data;return D.forEach(s,function(l){r=l.call(a,r,i.normalize(),t?t.status:void 0)}),i.normalize(),r}function Jn(s){return!!(s&&s.__CANCEL__)}function kt(s,t,a){z.call(this,s??"canceled",z.ERR_CANCELED,t,a),this.name="CanceledError"}D.inherits(kt,z,{__CANCEL__:!0});function Xn(s,t,a){const n=a.config.validateStatus;!a.status||!n||n(a.status)?s(a):t(new z("Request failed with status code "+a.status,[z.ERR_BAD_REQUEST,z.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function Jo(s){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(s);return t&&t[1]||""}function Xo(s,t){s=s||10;const a=new Array(s),n=new Array(s);let i=0,r=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),h=n[r];o||(o=d),a[i]=c,n[i]=d;let f=r,p=0;for(;f!==i;)p+=a[f++],f=f%s;if(i=(i+1)%s,i===r&&(r=(r+1)%s),d-o<t)return;const j=h&&d-h;return j?Math.round(p*1e3/j):void 0}}function el(s,t){let a=0,n=1e3/t,i,r;const o=(d,h=Date.now())=>{a=h,i=null,r&&(clearTimeout(r),r=null),s(...d)};return[(...d)=>{const h=Date.now(),f=h-a;f>=n?o(d,h):(i=d,r||(r=setTimeout(()=>{r=null,o(i)},n-f)))},()=>i&&o(i)]}const ls=(s,t,a=3)=>{let n=0;const i=Xo(50,250);return el(r=>{const o=r.loaded,l=r.lengthComputable?r.total:void 0,c=o-n,d=i(c),h=o<=l;n=o;const f={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&h?(l-o)/d:void 0,event:r,lengthComputable:l!=null,[t?"download":"upload"]:!0};s(f)},a)},La=(s,t)=>{const a=s!=null;return[n=>t[0]({lengthComputable:a,total:s,loaded:n}),t[1]]},Oa=s=>(...t)=>D.asap(()=>s(...t)),tl=Se.hasStandardBrowserEnv?((s,t)=>a=>(a=new URL(a,Se.origin),s.protocol===a.protocol&&s.host===a.host&&(t||s.port===a.port)))(new URL(Se.origin),Se.navigator&&/(msie|trident)/i.test(Se.navigator.userAgent)):()=>!0,sl=Se.hasStandardBrowserEnv?{write(s,t,a,n,i,r){const o=[s+"="+encodeURIComponent(t)];D.isNumber(a)&&o.push("expires="+new Date(a).toGMTString()),D.isString(n)&&o.push("path="+n),D.isString(i)&&o.push("domain="+i),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(s){const t=document.cookie.match(new RegExp("(^|;\\s*)("+s+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(s){this.write(s,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function al(s){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s)}function nl(s,t){return t?s.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):s}function ei(s,t,a){let n=!al(t);return s&&(n||a==!1)?nl(s,t):t}const Ia=s=>s instanceof Le?{...s}:s;function yt(s,t){t=t||{};const a={};function n(d,h,f,p){return D.isPlainObject(d)&&D.isPlainObject(h)?D.merge.call({caseless:p},d,h):D.isPlainObject(h)?D.merge({},h):D.isArray(h)?h.slice():h}function i(d,h,f,p){if(D.isUndefined(h)){if(!D.isUndefined(d))return n(void 0,d,f,p)}else return n(d,h,f,p)}function r(d,h){if(!D.isUndefined(h))return n(void 0,h)}function o(d,h){if(D.isUndefined(h)){if(!D.isUndefined(d))return n(void 0,d)}else return n(void 0,h)}function l(d,h,f){if(f in t)return n(d,h);if(f in s)return n(void 0,d)}const c={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,h,f)=>i(Ia(d),Ia(h),f,!0)};return D.forEach(Object.keys({...s,...t}),function(h){const f=c[h]||i,p=f(s[h],t[h],h);D.isUndefined(p)&&f!==l||(a[h]=p)}),a}const ti=s=>{const t=yt({},s);let{data:a,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:r,headers:o,auth:l}=t;if(t.headers=o=Le.from(o),t.url=Kn(ei(t.baseURL,t.url,t.allowAbsoluteUrls),s.params,s.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),D.isFormData(a)){if(Se.hasStandardBrowserEnv||Se.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(D.isFunction(a.getHeaders)){const c=a.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([h,f])=>{d.includes(h.toLowerCase())&&o.set(h,f)})}}if(Se.hasStandardBrowserEnv&&(n&&D.isFunction(n)&&(n=n(t)),n||n!==!1&&tl(t.url))){const c=i&&r&&sl.read(r);c&&o.set(i,c)}return t},il=typeof XMLHttpRequest<"u",rl=il&&function(s){return new Promise(function(a,n){const i=ti(s);let r=i.data;const o=Le.from(i.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=i,h,f,p,j,x;function b(){j&&j(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let g=new XMLHttpRequest;g.open(i.method.toUpperCase(),i.url,!0),g.timeout=i.timeout;function A(){if(!g)return;const m=Le.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),v={data:!l||l==="text"||l==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:m,config:s,request:g};Xn(function(T){a(T),b()},function(T){n(T),b()},v),g=null}"onloadend"in g?g.onloadend=A:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(A)},g.onabort=function(){g&&(n(new z("Request aborted",z.ECONNABORTED,s,g)),g=null)},g.onerror=function(y){const v=y&&y.message?y.message:"Network Error",C=new z(v,z.ERR_NETWORK,s,g);C.event=y||null,n(C),g=null},g.ontimeout=function(){let y=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const v=i.transitional||zn;i.timeoutErrorMessage&&(y=i.timeoutErrorMessage),n(new z(y,v.clarifyTimeoutError?z.ETIMEDOUT:z.ECONNABORTED,s,g)),g=null},r===void 0&&o.setContentType(null),"setRequestHeader"in g&&D.forEach(o.toJSON(),function(y,v){g.setRequestHeader(v,y)}),D.isUndefined(i.withCredentials)||(g.withCredentials=!!i.withCredentials),l&&l!=="json"&&(g.responseType=i.responseType),d&&([p,x]=ls(d,!0),g.addEventListener("progress",p)),c&&g.upload&&([f,j]=ls(c),g.upload.addEventListener("progress",f),g.upload.addEventListener("loadend",j)),(i.cancelToken||i.signal)&&(h=m=>{g&&(n(!m||m.type?new kt(null,s,g):m),g.abort(),g=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const w=Jo(i.url);if(w&&Se.protocols.indexOf(w)===-1){n(new z("Unsupported protocol "+w+":",z.ERR_BAD_REQUEST,s));return}g.send(r||null)})},ol=(s,t)=>{const{length:a}=s=s?s.filter(Boolean):[];if(t||a){let n=new AbortController,i;const r=function(d){if(!i){i=!0,l();const h=d instanceof Error?d:this.reason;n.abort(h instanceof z?h:new kt(h instanceof Error?h.message:h))}};let o=t&&setTimeout(()=>{o=null,r(new z(`timeout ${t} of ms exceeded`,z.ETIMEDOUT))},t);const l=()=>{s&&(o&&clearTimeout(o),o=null,s.forEach(d=>{d.unsubscribe?d.unsubscribe(r):d.removeEventListener("abort",r)}),s=null)};s.forEach(d=>d.addEventListener("abort",r));const{signal:c}=n;return c.unsubscribe=()=>D.asap(l),c}},ll=function*(s,t){let a=s.byteLength;if(a<t){yield s;return}let n=0,i;for(;n<a;)i=n+t,yield s.slice(n,i),n=i},cl=async function*(s,t){for await(const a of dl(s))yield*ll(a,t)},dl=async function*(s){if(s[Symbol.asyncIterator]){yield*s;return}const t=s.getReader();try{for(;;){const{done:a,value:n}=await t.read();if(a)break;yield n}}finally{await t.cancel()}},Pa=(s,t,a,n)=>{const i=cl(s,t);let r=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:d,value:h}=await i.next();if(d){l(),c.close();return}let f=h.byteLength;if(a){let p=r+=f;a(p)}c.enqueue(new Uint8Array(h))}catch(d){throw l(d),d}},cancel(c){return l(c),i.return()}},{highWaterMark:2})},Ma=64*1024,{isFunction:Xt}=D,ul=(({Request:s,Response:t})=>({Request:s,Response:t}))(D.global),{ReadableStream:qa,TextEncoder:Fa}=D.global,$a=(s,...t)=>{try{return!!s(...t)}catch{return!1}},ml=s=>{s=D.merge.call({skipUndefined:!0},ul,s);const{fetch:t,Request:a,Response:n}=s,i=t?Xt(t):typeof fetch=="function",r=Xt(a),o=Xt(n);if(!i)return!1;const l=i&&Xt(qa),c=i&&(typeof Fa=="function"?(x=>b=>x.encode(b))(new Fa):async x=>new Uint8Array(await new a(x).arrayBuffer())),d=r&&l&&$a(()=>{let x=!1;const b=new a(Se.origin,{body:new qa,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!b}),h=o&&l&&$a(()=>D.isReadableStream(new n("").body)),f={stream:h&&(x=>x.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!f[x]&&(f[x]=(b,g)=>{let A=b&&b[x];if(A)return A.call(b);throw new z(`Response type '${x}' is not supported`,z.ERR_NOT_SUPPORT,g)})});const p=async x=>{if(x==null)return 0;if(D.isBlob(x))return x.size;if(D.isSpecCompliantForm(x))return(await new a(Se.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(D.isArrayBufferView(x)||D.isArrayBuffer(x))return x.byteLength;if(D.isURLSearchParams(x)&&(x=x+""),D.isString(x))return(await c(x)).byteLength},j=async(x,b)=>{const g=D.toFiniteNumber(x.getContentLength());return g??p(b)};return async x=>{let{url:b,method:g,data:A,signal:w,cancelToken:m,timeout:y,onDownloadProgress:v,onUploadProgress:C,responseType:T,headers:L,withCredentials:$="same-origin",fetchOptions:P}=ti(x),Z=t||fetch;T=T?(T+"").toLowerCase():"text";let Q=ol([w,m&&m.toAbortSignal()],y),H=null;const G=Q&&Q.unsubscribe&&(()=>{Q.unsubscribe()});let ae;try{if(C&&d&&g!=="get"&&g!=="head"&&(ae=await j(L,A))!==0){let se=new a(b,{method:"POST",body:A,duplex:"half"}),xe;if(D.isFormData(A)&&(xe=se.headers.get("content-type"))&&L.setContentType(xe),se.body){const[ie,he]=La(ae,ls(Oa(C)));A=Pa(se.body,Ma,ie,he)}}D.isString($)||($=$?"include":"omit");const Y=r&&"credentials"in a.prototype,J={...P,signal:Q,method:g.toUpperCase(),headers:L.normalize().toJSON(),body:A,duplex:"half",credentials:Y?$:void 0};H=r&&new a(b,J);let ee=await(r?Z(H,P):Z(b,J));const de=h&&(T==="stream"||T==="response");if(h&&(v||de&&G)){const se={};["status","statusText","headers"].forEach(ke=>{se[ke]=ee[ke]});const xe=D.toFiniteNumber(ee.headers.get("content-length")),[ie,he]=v&&La(xe,ls(Oa(v),!0))||[];ee=new n(Pa(ee.body,Ma,ie,()=>{he&&he(),G&&G()}),se)}T=T||"text";let Ne=await f[D.findKey(f,T)||"text"](ee,x);return!de&&G&&G(),await new Promise((se,xe)=>{Xn(se,xe,{data:Ne,headers:Le.from(ee.headers),status:ee.status,statusText:ee.statusText,config:x,request:H})})}catch(Y){throw G&&G(),Y&&Y.name==="TypeError"&&/Load failed|fetch/i.test(Y.message)?Object.assign(new z("Network Error",z.ERR_NETWORK,x,H),{cause:Y.cause||Y}):z.from(Y,Y&&Y.code,x,H)}}},hl=new Map,si=s=>{let t=s?s.env:{};const{fetch:a,Request:n,Response:i}=t,r=[n,i,a];let o=r.length,l=o,c,d,h=hl;for(;l--;)c=r[l],d=h.get(c),d===void 0&&h.set(c,d=l?new Map:ml(t)),h=d;return d};si();const Ys={http:Co,xhr:rl,fetch:{get:si}};D.forEach(Ys,(s,t)=>{if(s){try{Object.defineProperty(s,"name",{value:t})}catch{}Object.defineProperty(s,"adapterName",{value:t})}});const Ua=s=>`- ${s}`,fl=s=>D.isFunction(s)||s===null||s===!1,ai={getAdapter:(s,t)=>{s=D.isArray(s)?s:[s];const{length:a}=s;let n,i;const r={};for(let o=0;o<a;o++){n=s[o];let l;if(i=n,!fl(n)&&(i=Ys[(l=String(n)).toLowerCase()],i===void 0))throw new z(`Unknown adapter '${l}'`);if(i&&(D.isFunction(i)||(i=i.get(t))))break;r[l||"#"+o]=i}if(!i){const o=Object.entries(r).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=a?o.length>1?`since :
`+o.map(Ua).join(`
`):" "+Ua(o[0]):"as no adapter specified";throw new z("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i},adapters:Ys};function Fs(s){if(s.cancelToken&&s.cancelToken.throwIfRequested(),s.signal&&s.signal.aborted)throw new kt(null,s)}function _a(s){return Fs(s),s.headers=Le.from(s.headers),s.data=qs.call(s,s.transformRequest),["post","put","patch"].indexOf(s.method)!==-1&&s.headers.setContentType("application/x-www-form-urlencoded",!1),ai.getAdapter(s.adapter||Gt.adapter,s)(s).then(function(n){return Fs(s),n.data=qs.call(s,s.transformResponse,n),n.headers=Le.from(n.headers),n},function(n){return Jn(n)||(Fs(s),n&&n.response&&(n.response.data=qs.call(s,s.transformResponse,n.response),n.response.headers=Le.from(n.response.headers))),Promise.reject(n)})}const ni="1.12.2",As={};["object","boolean","number","function","string","symbol"].forEach((s,t)=>{As[s]=function(n){return typeof n===s||"a"+(t<1?"n ":" ")+s}});const Va={};As.transitional=function(t,a,n){function i(r,o){return"[Axios v"+ni+"] Transitional option '"+r+"'"+o+(n?". "+n:"")}return(r,o,l)=>{if(t===!1)throw new z(i(o," has been removed"+(a?" in "+a:"")),z.ERR_DEPRECATED);return a&&!Va[o]&&(Va[o]=!0,console.warn(i(o," has been deprecated since v"+a+" and will be removed in the near future"))),t?t(r,o,l):!0}};As.spelling=function(t){return(a,n)=>(console.warn(`${n} is likely a misspelling of ${t}`),!0)};function pl(s,t,a){if(typeof s!="object")throw new z("options must be an object",z.ERR_BAD_OPTION_VALUE);const n=Object.keys(s);let i=n.length;for(;i-- >0;){const r=n[i],o=t[r];if(o){const l=s[r],c=l===void 0||o(l,r,s);if(c!==!0)throw new z("option "+r+" must be "+c,z.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new z("Unknown option "+r,z.ERR_BAD_OPTION)}}const is={assertOptions:pl,validators:As},We=is.validators;let ft=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Ca,response:new Ca}}async request(t,a){try{return await this._request(t,a)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?r&&!String(n.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+r):n.stack=r}catch{}}throw n}}_request(t,a){typeof t=="string"?(a=a||{},a.url=t):a=t||{},a=yt(this.defaults,a);const{transitional:n,paramsSerializer:i,headers:r}=a;n!==void 0&&is.assertOptions(n,{silentJSONParsing:We.transitional(We.boolean),forcedJSONParsing:We.transitional(We.boolean),clarifyTimeoutError:We.transitional(We.boolean)},!1),i!=null&&(D.isFunction(i)?a.paramsSerializer={serialize:i}:is.assertOptions(i,{encode:We.function,serialize:We.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),is.assertOptions(a,{baseUrl:We.spelling("baseURL"),withXsrfToken:We.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let o=r&&D.merge(r.common,r[a.method]);r&&D.forEach(["delete","get","head","post","put","patch","common"],x=>{delete r[x]}),a.headers=Le.concat(o,r);const l=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(a)===!1||(c=c&&b.synchronous,l.unshift(b.fulfilled,b.rejected))});const d=[];this.interceptors.response.forEach(function(b){d.push(b.fulfilled,b.rejected)});let h,f=0,p;if(!c){const x=[_a.bind(this),void 0];for(x.unshift(...l),x.push(...d),p=x.length,h=Promise.resolve(a);f<p;)h=h.then(x[f++],x[f++]);return h}p=l.length;let j=a;for(;f<p;){const x=l[f++],b=l[f++];try{j=x(j)}catch(g){b.call(this,g);break}}try{h=_a.call(this,j)}catch(x){return Promise.reject(x)}for(f=0,p=d.length;f<p;)h=h.then(d[f++],d[f++]);return h}getUri(t){t=yt(this.defaults,t);const a=ei(t.baseURL,t.url,t.allowAbsoluteUrls);return Kn(a,t.params,t.paramsSerializer)}};D.forEach(["delete","get","head","options"],function(t){ft.prototype[t]=function(a,n){return this.request(yt(n||{},{method:t,url:a,data:(n||{}).data}))}});D.forEach(["post","put","patch"],function(t){function a(n){return function(r,o,l){return this.request(yt(l||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}ft.prototype[t]=a(),ft.prototype[t+"Form"]=a(!0)});let xl=class ii{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(r){a=r});const n=this;this.promise.then(i=>{if(!n._listeners)return;let r=n._listeners.length;for(;r-- >0;)n._listeners[r](i);n._listeners=null}),this.promise.then=i=>{let r;const o=new Promise(l=>{n.subscribe(l),r=l}).then(i);return o.cancel=function(){n.unsubscribe(r)},o},t(function(r,o,l){n.reason||(n.reason=new kt(r,o,l),a(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const a=this._listeners.indexOf(t);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const t=new AbortController,a=n=>{t.abort(n)};return this.subscribe(a),t.signal.unsubscribe=()=>this.unsubscribe(a),t.signal}static source(){let t;return{token:new ii(function(i){t=i}),cancel:t}}};function gl(s){return function(a){return s.apply(null,a)}}function yl(s){return D.isObject(s)&&s.isAxiosError===!0}const Js={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Js).forEach(([s,t])=>{Js[t]=s});function ri(s){const t=new ft(s),a=qn(ft.prototype.request,t);return D.extend(a,ft.prototype,t,{allOwnKeys:!0}),D.extend(a,t,null,{allOwnKeys:!0}),a.create=function(i){return ri(yt(s,i))},a}const pe=ri(Gt);pe.Axios=ft;pe.CanceledError=kt;pe.CancelToken=xl;pe.isCancel=Jn;pe.VERSION=ni;pe.toFormData=Es;pe.AxiosError=z;pe.Cancel=pe.CanceledError;pe.all=function(t){return Promise.all(t)};pe.spread=gl;pe.isAxiosError=yl;pe.mergeConfig=yt;pe.AxiosHeaders=Le;pe.formToJSON=s=>Yn(D.isHTMLForm(s)?new FormData(s):s);pe.getAdapter=ai.getAdapter;pe.HttpStatusCode=Js;pe.default=pe;const{Axios:n0,AxiosError:i0,CanceledError:r0,isCancel:o0,CancelToken:l0,VERSION:c0,all:d0,Cancel:u0,isAxiosError:m0,spread:h0,toFormData:f0,AxiosHeaders:p0,HttpStatusCode:x0,formToJSON:g0,getAdapter:y0,mergeConfig:b0}=pe;class Ie{static getEnquiries(){return[{id:1,name:"BALAMURUGAN",businessName:"Balamurugan Enterprises",mobile:"9876543215",email:"balamurugan@enterprises.com",businessType:"Manufacturing",loanAmount:5e5,district:"Chennai",constitution:"Proprietorship",gstStatus:"Registered",capAmount:5e4,bankAccount:"Yes",statementDuration:"12 months",status:"APPROVED",priority:"High",assignedStaff:"Perivi",source:"ONLINE_APPLICATION",interestStatus:"Very Interested",createdAt:new Date("2024-10-16T10:37:11.406Z").toISOString(),updatedAt:new Date("2024-10-16T10:37:11.406Z").toISOString()},{id:2,name:"VIGNESH S",businessName:"Vignesh Trading",mobile:"9876543220",email:"vignesh@trading.com",businessType:"Trading",loanAmount:3e5,district:"Coimbatore",constitution:"Partnership",gstStatus:"Registered",capAmount:3e4,bankAccount:"Yes",statementDuration:"6 months",status:"PROCESSING",priority:"Medium",assignedStaff:"Venkat",source:"WALK_IN",interestStatus:"Interested",createdAt:new Date("2024-10-15T09:20:30.123Z").toISOString(),updatedAt:new Date("2024-10-15T09:20:30.123Z").toISOString()},{id:3,name:"Poorani",businessName:"Poorani Textiles",mobile:"9876543221",email:"poorani@textiles.com",businessType:"Textiles",loanAmount:75e4,district:"Madurai",constitution:"Private Limited",gstStatus:"Registered",capAmount:75e3,bankAccount:"Yes",statementDuration:"12 months",status:"DOCUMENT_VERIFICATION",priority:"High",assignedStaff:"Harish",source:"REFERRAL",interestStatus:"Very Interested",createdAt:new Date("2024-10-14T14:15:45.789Z").toISOString(),updatedAt:new Date("2024-10-14T14:15:45.789Z").toISOString()},{id:4,name:"Manigandan M",businessName:"Manigandan Industries",mobile:"9876543222",email:"manigandan@industries.com",businessType:"Manufacturing",loanAmount:1e6,district:"Salem",constitution:"Private Limited",gstStatus:"Registered",capAmount:1e5,bankAccount:"Yes",statementDuration:"18 months",status:"SHORTLISTED",priority:"High",assignedStaff:"Dinesh",source:"ONLINE_APPLICATION",interestStatus:"Very Interested",createdAt:new Date("2024-10-13T11:30:15.456Z").toISOString(),updatedAt:new Date("2024-10-13T11:30:15.456Z").toISOString()},{id:5,name:"Praba",businessName:"Praba Enterprises",mobile:"9876543223",email:"praba@enterprises.com",businessType:"Services",loanAmount:4e5,district:"Trichy",constitution:"Proprietorship",gstStatus:"Registered",capAmount:4e4,bankAccount:"Yes",statementDuration:"9 months",status:"NEW",priority:"Medium",assignedStaff:"Nunciya",source:"PHONE_INQUIRY",interestStatus:"Interested",createdAt:new Date("2024-10-12T16:45:30.789Z").toISOString(),updatedAt:new Date("2024-10-12T16:45:30.789Z").toISOString()},{id:6,name:"Renu",businessName:"Renu Trading Co",mobile:"9876543210",email:"renu@trading.com",businessType:"Trading",loanAmount:25e4,district:"Erode",constitution:"Partnership",gstStatus:"Registered",capAmount:25e3,bankAccount:"Yes",statementDuration:"6 months",status:"FOLLOW_UP",priority:"Low",assignedStaff:"Venkat",source:"WALK_IN",interestStatus:"Moderately Interested",createdAt:new Date("2024-10-11T08:15:45.123Z").toISOString(),updatedAt:new Date("2024-10-11T08:15:45.123Z").toISOString()},{id:7,name:"Rajesh Kumar",businessName:"Kumar Exports",mobile:"9876543224",email:"rajesh@kumarexports.com",businessType:"Export",loanAmount:8e5,district:"Chennai",constitution:"Private Limited",gstStatus:"Registered",capAmount:8e4,bankAccount:"Yes",statementDuration:"24 months",status:"APPROVED",priority:"High",assignedStaff:"Perivi",source:"ONLINE_APPLICATION",interestStatus:"Very Interested",createdAt:new Date("2024-10-10T14:20:15.789Z").toISOString(),updatedAt:new Date("2024-10-10T14:20:15.789Z").toISOString()},{id:8,name:"Priya Sharma",businessName:"Sharma Consultancy",mobile:"9876543225",email:"priya@sharmaconsult.com",businessType:"Services",loanAmount:35e4,district:"Bangalore",constitution:"Proprietorship",gstStatus:"Registered",capAmount:35e3,bankAccount:"Yes",statementDuration:"12 months",status:"PROCESSING",priority:"Medium",assignedStaff:"Harish",source:"REFERRAL",interestStatus:"Interested",createdAt:new Date("2024-10-09T11:45:30.456Z").toISOString(),updatedAt:new Date("2024-10-09T11:45:30.456Z").toISOString()},{id:9,name:"Amit Patel",businessName:"Patel Electronics",mobile:"9876543226",email:"amit@patelelectronics.com",businessType:"Electronics",loanAmount:6e5,district:"Ahmedabad",constitution:"Partnership",gstStatus:"Registered",capAmount:6e4,bankAccount:"Yes",statementDuration:"15 months",status:"DOCUMENT_VERIFICATION",priority:"High",assignedStaff:"Dinesh",source:"ONLINE_APPLICATION",interestStatus:"Very Interested",createdAt:new Date("2024-10-08T09:30:45.123Z").toISOString(),updatedAt:new Date("2024-10-08T09:30:45.123Z").toISOString()},{id:10,name:"Sunita Gupta",businessName:"Gupta Fashion",mobile:"9876543227",email:"sunita@guptafashion.com",businessType:"Fashion",loanAmount:45e4,district:"Delhi",constitution:"Proprietorship",gstStatus:"Registered",capAmount:45e3,bankAccount:"Yes",statementDuration:"10 months",status:"SHORTLISTED",priority:"Medium",assignedStaff:"Nunciya",source:"WALK_IN",interestStatus:"Interested",createdAt:new Date("2024-10-07T16:15:20.789Z").toISOString(),updatedAt:new Date("2024-10-07T16:15:20.789Z").toISOString()},{id:11,name:"Deepak Verma",businessName:"Verma Construction",mobile:"9876543228",email:"deepak@verma.com",businessType:"Construction",loanAmount:85e4,district:"Mumbai",constitution:"Private Limited",gstStatus:"Registered",capAmount:85e3,bankAccount:"Yes",statementDuration:"18 months",status:"NEW",priority:"High",assignedStaff:"Nunciya",source:"ONLINE_APPLICATION",interestStatus:"Very Interested",createdAt:new Date("2024-10-06T13:25:15.234Z").toISOString(),updatedAt:new Date("2024-10-06T13:25:15.234Z").toISOString()},{id:12,name:"Neha Agarwal",businessName:"Agarwal Enterprises",mobile:"9876543229",email:"neha@agarwal.com",businessType:"Trading",loanAmount:65e4,district:"Pune",constitution:"Partnership",gstStatus:"Registered",capAmount:65e3,bankAccount:"Yes",statementDuration:"15 months",status:"PROCESSING",priority:"Medium",assignedStaff:"Admin User",source:"REFERRAL",interestStatus:"Interested",createdAt:new Date("2024-10-05T10:40:30.567Z").toISOString(),updatedAt:new Date("2024-10-05T10:40:30.567Z").toISOString()},{id:13,name:"Rohit Sharma",businessName:"Sharma Industries",mobile:"9876543230",email:"rohit@sharma.com",businessType:"Manufacturing",loanAmount:95e4,district:"Hyderabad",constitution:"Private Limited",gstStatus:"Registered",capAmount:95e3,bankAccount:"Yes",statementDuration:"20 months",status:"DOCUMENT_VERIFICATION",priority:"High",assignedStaff:"Admin User",source:"ONLINE_APPLICATION",interestStatus:"Very Interested",createdAt:new Date("2024-10-04T15:20:45.890Z").toISOString(),updatedAt:new Date("2024-10-04T15:20:45.890Z").toISOString()},{id:14,name:"Manish Gupta",businessName:"Gupta Tech Solutions",mobile:"9876543231",email:"manish@gupta.com",businessType:"Technology",loanAmount:75e4,district:"Kolkata",constitution:"Private Limited",gstStatus:"Registered",capAmount:75e3,bankAccount:"Yes",statementDuration:"12 months",status:"APPROVED",priority:"High",assignedStaff:"Admin User",source:"ONLINE_APPLICATION",interestStatus:"Very Interested",createdAt:new Date("2024-10-03T12:10:20.123Z").toISOString(),updatedAt:new Date("2024-10-03T12:10:20.123Z").toISOString()}]}static getDocuments(){return[{id:1,enquiryId:1,type:"GST",fileName:"gst-certificate-balamurugan.pdf",filePath:"/uploads/documents/1729073400000-1-GST.pdf",verified:!0,verifiedAt:new Date("2024-10-16T11:00:00.000Z").toISOString(),createdAt:new Date("2024-10-16T10:45:00.000Z").toISOString(),enquiry:{id:1,name:"BALAMURUGAN",mobile:"9876543215",businessType:"Manufacturing"}},{id:2,enquiryId:1,type:"UDYAM",fileName:"udyam-certificate-balamurugan.pdf",filePath:"/uploads/documents/1729073460000-1-UDYAM.pdf",verified:!0,verifiedAt:new Date("2024-10-16T11:05:00.000Z").toISOString(),createdAt:new Date("2024-10-16T10:50:00.000Z").toISOString(),enquiry:{id:1,name:"BALAMURUGAN",mobile:"9876543215",businessType:"Manufacturing"}},{id:3,enquiryId:1,type:"BANK_STATEMENT",fileName:"bank-statement-balamurugan.pdf",filePath:"/uploads/documents/1729073520000-1-BANK_STATEMENT.pdf",verified:!0,verifiedAt:new Date("2024-10-16T11:10:00.000Z").toISOString(),createdAt:new Date("2024-10-16T10:55:00.000Z").toISOString(),enquiry:{id:1,name:"BALAMURUGAN",mobile:"9876543215",businessType:"Manufacturing"}},{id:4,enquiryId:1,type:"OWNER_PAN",fileName:"owner-pan-balamurugan.pdf",filePath:"/uploads/documents/1729073580000-1-OWNER_PAN.pdf",verified:!0,verifiedAt:new Date("2024-10-16T11:15:00.000Z").toISOString(),createdAt:new Date("2024-10-16T11:00:00.000Z").toISOString(),enquiry:{id:1,name:"BALAMURUGAN",mobile:"9876543215",businessType:"Manufacturing"}},{id:5,enquiryId:1,type:"AADHAR",fileName:"aadhar-balamurugan.pdf",filePath:"/uploads/documents/1729073640000-1-AADHAR.pdf",verified:!0,verifiedAt:new Date("2024-10-16T11:20:00.000Z").toISOString(),createdAt:new Date("2024-10-16T11:05:00.000Z").toISOString(),enquiry:{id:1,name:"BALAMURUGAN",mobile:"9876543215",businessType:"Manufacturing"}},{id:6,enquiryId:2,type:"GST",fileName:"gst-certificate-vignesh.pdf",filePath:"/uploads/documents/1729073700000-2-GST.pdf",verified:!0,verifiedAt:new Date("2024-10-15T14:30:00.000Z").toISOString(),createdAt:new Date("2024-10-15T14:15:00.000Z").toISOString(),enquiry:{id:2,name:"VIGNESH S",mobile:"9876543220",businessType:"Trading"}},{id:7,enquiryId:2,type:"UDYAM",fileName:"udyam-certificate-vignesh.pdf",filePath:"/uploads/documents/1729073760000-2-UDYAM.pdf",verified:!1,createdAt:new Date("2024-10-15T14:20:00.000Z").toISOString(),enquiry:{id:2,name:"VIGNESH S",mobile:"9876543220",businessType:"Trading"}},{id:8,enquiryId:2,type:"BANK_STATEMENT",fileName:"bank-statement-vignesh.pdf",filePath:"/uploads/documents/1729073800000-2-BANK_STATEMENT.pdf",verified:!0,verifiedAt:new Date("2024-10-15T14:45:00.000Z").toISOString(),createdAt:new Date("2024-10-15T14:25:00.000Z").toISOString(),enquiry:{id:2,name:"VIGNESH S",mobile:"9876543220",businessType:"Trading"}},{id:9,enquiryId:3,type:"GST",fileName:"gst-certificate-poorani.pdf",filePath:"/uploads/documents/1729073820000-3-GST.pdf",verified:!0,verifiedAt:new Date("2024-10-14T16:45:00.000Z").toISOString(),createdAt:new Date("2024-10-14T16:30:00.000Z").toISOString(),enquiry:{id:3,name:"Poorani",mobile:"9876543221",businessType:"Textiles"}},{id:10,enquiryId:3,type:"BANK_STATEMENT",fileName:"bank-statement-poorani.pdf",filePath:"/uploads/documents/1729073880000-3-BANK_STATEMENT.pdf",verified:!1,createdAt:new Date("2024-10-14T16:35:00.000Z").toISOString(),enquiry:{id:3,name:"Poorani",mobile:"9876543221",businessType:"Textiles"}},{id:11,enquiryId:3,type:"UDYAM",fileName:"udyam-certificate-poorani.pdf",filePath:"/uploads/documents/1729073900000-3-UDYAM.pdf",verified:!0,verifiedAt:new Date("2024-10-14T17:00:00.000Z").toISOString(),createdAt:new Date("2024-10-14T16:40:00.000Z").toISOString(),enquiry:{id:3,name:"Poorani",mobile:"9876543221",businessType:"Textiles"}},{id:12,enquiryId:4,type:"GST",fileName:"gst-certificate-manigandan.pdf",filePath:"/uploads/documents/1729073950000-4-GST.pdf",verified:!0,verifiedAt:new Date("2024-10-13T12:30:00.000Z").toISOString(),createdAt:new Date("2024-10-13T12:15:00.000Z").toISOString(),enquiry:{id:4,name:"Manigandan M",mobile:"9876543222",businessType:"Manufacturing"}},{id:13,enquiryId:4,type:"UDYAM",fileName:"udyam-certificate-manigandan.pdf",filePath:"/uploads/documents/1729074000000-4-UDYAM.pdf",verified:!0,verifiedAt:new Date("2024-10-13T12:45:00.000Z").toISOString(),createdAt:new Date("2024-10-13T12:20:00.000Z").toISOString(),enquiry:{id:4,name:"Manigandan M",mobile:"9876543222",businessType:"Manufacturing"}},{id:14,enquiryId:4,type:"BANK_STATEMENT",fileName:"bank-statement-manigandan.pdf",filePath:"/uploads/documents/1729074050000-4-BANK_STATEMENT.pdf",verified:!0,verifiedAt:new Date("2024-10-13T13:00:00.000Z").toISOString(),createdAt:new Date("2024-10-13T12:25:00.000Z").toISOString(),enquiry:{id:4,name:"Manigandan M",mobile:"9876543222",businessType:"Manufacturing"}},{id:15,enquiryId:4,type:"OWNER_PAN",fileName:"owner-pan-manigandan.pdf",filePath:"/uploads/documents/1729074100000-4-OWNER_PAN.pdf",verified:!0,verifiedAt:new Date("2024-10-13T13:15:00.000Z").toISOString(),createdAt:new Date("2024-10-13T12:30:00.000Z").toISOString(),enquiry:{id:4,name:"Manigandan M",mobile:"9876543222",businessType:"Manufacturing"}},{id:16,enquiryId:4,type:"AADHAR",fileName:"aadhar-manigandan.pdf",filePath:"/uploads/documents/1729074150000-4-AADHAR.pdf",verified:!0,verifiedAt:new Date("2024-10-13T13:30:00.000Z").toISOString(),createdAt:new Date("2024-10-13T12:35:00.000Z").toISOString(),enquiry:{id:4,name:"Manigandan M",mobile:"9876543222",businessType:"Manufacturing"}},{id:17,enquiryId:7,type:"GST",fileName:"gst-certificate-rajesh.pdf",filePath:"/uploads/documents/1729074200000-7-GST.pdf",verified:!0,verifiedAt:new Date("2024-10-10T15:30:00.000Z").toISOString(),createdAt:new Date("2024-10-10T15:15:00.000Z").toISOString(),enquiry:{id:7,name:"Rajesh Kumar",mobile:"9876543224",businessType:"Export"}},{id:18,enquiryId:7,type:"UDYAM",fileName:"udyam-certificate-rajesh.pdf",filePath:"/uploads/documents/1729074250000-7-UDYAM.pdf",verified:!0,verifiedAt:new Date("2024-10-10T15:45:00.000Z").toISOString(),createdAt:new Date("2024-10-10T15:20:00.000Z").toISOString(),enquiry:{id:7,name:"Rajesh Kumar",mobile:"9876543224",businessType:"Export"}},{id:19,enquiryId:7,type:"BANK_STATEMENT",fileName:"bank-statement-rajesh.pdf",filePath:"/uploads/documents/1729074300000-7-BANK_STATEMENT.pdf",verified:!0,verifiedAt:new Date("2024-10-10T16:00:00.000Z").toISOString(),createdAt:new Date("2024-10-10T15:25:00.000Z").toISOString(),enquiry:{id:7,name:"Rajesh Kumar",mobile:"9876543224",businessType:"Export"}},{id:20,enquiryId:7,type:"OWNER_PAN",fileName:"owner-pan-rajesh.pdf",filePath:"/uploads/documents/1729074350000-7-OWNER_PAN.pdf",verified:!0,verifiedAt:new Date("2024-10-10T16:15:00.000Z").toISOString(),createdAt:new Date("2024-10-10T15:30:00.000Z").toISOString(),enquiry:{id:7,name:"Rajesh Kumar",mobile:"9876543224",businessType:"Export"}},{id:21,enquiryId:8,type:"GST",fileName:"gst-certificate-priya.pdf",filePath:"/uploads/documents/1729074400000-8-GST.pdf",verified:!0,verifiedAt:new Date("2024-10-09T12:30:00.000Z").toISOString(),createdAt:new Date("2024-10-09T12:15:00.000Z").toISOString(),enquiry:{id:8,name:"Priya Sharma",mobile:"9876543225",businessType:"Services"}},{id:22,enquiryId:8,type:"BANK_STATEMENT",fileName:"bank-statement-priya.pdf",filePath:"/uploads/documents/1729074450000-8-BANK_STATEMENT.pdf",verified:!1,createdAt:new Date("2024-10-09T12:20:00.000Z").toISOString(),enquiry:{id:8,name:"Priya Sharma",mobile:"9876543225",businessType:"Services"}},{id:23,enquiryId:9,type:"GST",fileName:"gst-certificate-amit.pdf",filePath:"/uploads/documents/1729074500000-9-GST.pdf",verified:!0,verifiedAt:new Date("2024-10-08T10:30:00.000Z").toISOString(),createdAt:new Date("2024-10-08T10:15:00.000Z").toISOString(),enquiry:{id:9,name:"Amit Patel",mobile:"9876543226",businessType:"Electronics"}},{id:24,enquiryId:9,type:"UDYAM",fileName:"udyam-certificate-amit.pdf",filePath:"/uploads/documents/1729074550000-9-UDYAM.pdf",verified:!1,createdAt:new Date("2024-10-08T10:20:00.000Z").toISOString(),enquiry:{id:9,name:"Amit Patel",mobile:"9876543226",businessType:"Electronics"}},{id:25,enquiryId:9,type:"BANK_STATEMENT",fileName:"bank-statement-amit.pdf",filePath:"/uploads/documents/1729074600000-9-BANK_STATEMENT.pdf",verified:!0,verifiedAt:new Date("2024-10-08T11:00:00.000Z").toISOString(),createdAt:new Date("2024-10-08T10:25:00.000Z").toISOString(),enquiry:{id:9,name:"Amit Patel",mobile:"9876543226",businessType:"Electronics"}}]}static getShortlist(){return[{id:1,enquiryId:1,name:"BALAMURUGAN",mobile:"9876543215",businessName:"Balamurugan Enterprises",businessNature:"Manufacturing",businessType:"Manufacturing",loanAmount:5e5,district:"Chennai",constitution:"Proprietorship",gstStatus:"Registered",capAmount:5e4,bankAccount:"Yes",statementDuration:"12 months",staff:"Perivi",interestStatus:"Very Interested",priority:"High",notes:"Complete documentation verified, ready for processing",createdAt:new Date("2024-10-16T12:00:00.000Z").toISOString(),updatedAt:new Date("2024-10-16T12:00:00.000Z").toISOString(),enquiry:{id:1,name:"BALAMURUGAN",mobile:"9876543215",businessType:"Manufacturing",businessName:"Balamurugan Enterprises"}},{id:2,enquiryId:2,name:"VIGNESH S",mobile:"9876543220",businessName:"Vignesh Trading",businessNature:"Trading",businessType:"Trading",loanAmount:3e5,district:"Coimbatore",constitution:"Partnership",gstStatus:"Registered",capAmount:3e4,bankAccount:"Yes",statementDuration:"6 months",staff:"Venkat",interestStatus:"Interested",priority:"Medium",notes:"Pending UDYAM verification",createdAt:new Date("2024-10-15T13:30:00.000Z").toISOString(),updatedAt:new Date("2024-10-15T13:30:00.000Z").toISOString(),enquiry:{id:2,name:"VIGNESH S",mobile:"9876543220",businessType:"Trading",businessName:"Vignesh Trading"}},{id:3,enquiryId:3,name:"Poorani",mobile:"9876543221",businessName:"Poorani Textiles",businessNature:"Textiles",businessType:"Textiles",loanAmount:75e4,district:"Madurai",constitution:"Private Limited",gstStatus:"Registered",capAmount:75e3,bankAccount:"Yes",statementDuration:"12 months",staff:"Dinesh",interestStatus:"Very Interested",priority:"High",notes:"Large loan amount, good business profile",createdAt:new Date("2024-10-14T17:15:00.000Z").toISOString(),updatedAt:new Date("2024-10-14T17:15:00.000Z").toISOString(),enquiry:{id:3,name:"Poorani",mobile:"9876543221",businessType:"Textiles",businessName:"Poorani Textiles"}},{id:4,enquiryId:4,name:"Manigandan M",mobile:"9876543222",businessName:"Manigandan Industries",businessNature:"Manufacturing",businessType:"Manufacturing",loanAmount:1e6,district:"Salem",constitution:"Private Limited",gstStatus:"Registered",capAmount:1e5,bankAccount:"Yes",statementDuration:"18 months",staff:"Dinesh",interestStatus:"Very Interested",priority:"High",notes:"Large loan amount, excellent business profile",createdAt:new Date("2024-10-13T15:30:00.000Z").toISOString(),updatedAt:new Date("2024-10-13T15:30:00.000Z").toISOString(),enquiry:{id:4,name:"Manigandan M",mobile:"9876543222",businessType:"Manufacturing",businessName:"Manigandan Industries"}},{id:5,enquiryId:7,name:"Rajesh Kumar",mobile:"9876543224",businessName:"Kumar Exports",businessNature:"Export",businessType:"Export",loanAmount:8e5,district:"Chennai",constitution:"Private Limited",gstStatus:"Registered",capAmount:8e4,bankAccount:"Yes",statementDuration:"24 months",staff:"Perivi",interestStatus:"Very Interested",priority:"High",notes:"Export business with strong financials",createdAt:new Date("2024-10-10T16:30:00.000Z").toISOString(),updatedAt:new Date("2024-10-10T16:30:00.000Z").toISOString(),enquiry:{id:7,name:"Rajesh Kumar",mobile:"9876543224",businessType:"Export",businessName:"Kumar Exports"}},{id:6,enquiryId:10,name:"Sunita Gupta",mobile:"9876543227",businessName:"Gupta Fashion",businessNature:"Fashion",businessType:"Fashion",loanAmount:45e4,district:"Delhi",constitution:"Proprietorship",gstStatus:"Registered",capAmount:45e3,bankAccount:"Yes",statementDuration:"10 months",staff:"Nunciya",interestStatus:"Interested",priority:"Medium",notes:"Fashion business with seasonal variations",createdAt:new Date("2024-10-07T18:00:00.000Z").toISOString(),updatedAt:new Date("2024-10-07T18:00:00.000Z").toISOString(),enquiry:{id:10,name:"Sunita Gupta",mobile:"9876543227",businessType:"Fashion",businessName:"Gupta Fashion"}}]}static getPaymentGateway(){return[{id:1,shortlistId:1,loanAmount:5e5,tenure:24,interestRate:12.5,status:"APPROVED",processingFee:25e3,emi:23500,createdAt:new Date("2024-10-16T13:00:00.000Z").toISOString(),updatedAt:new Date("2024-10-16T13:00:00.000Z").toISOString(),shortlist:{id:1,name:"BALAMURUGAN",mobile:"9876543215",businessName:"Balamurugan Enterprises",businessType:"Manufacturing",loanAmount:5e5,enquiry:{id:1,name:"BALAMURUGAN",mobile:"9876543215",businessType:"Manufacturing",businessName:"Balamurugan Enterprises"}},submittedBy:{id:1,name:"Perivi",email:"gowthaamankrishna1998@gmail.com"}},{id:2,shortlistId:5,loanAmount:8e5,tenure:36,interestRate:11.5,status:"PROCESSING",processingFee:4e4,emi:26800,createdAt:new Date("2024-10-14T15:30:00.000Z").toISOString(),updatedAt:new Date("2024-10-14T15:30:00.000Z").toISOString(),shortlist:{id:5,name:"Rajesh Kumar",mobile:"9876543224",businessName:"Kumar Exports",businessType:"Export",loanAmount:8e5,enquiry:{id:7,name:"Rajesh Kumar",mobile:"9876543224",businessType:"Export",businessName:"Kumar Exports"}},submittedBy:{id:1,name:"Perivi",email:"gowthaamankrishna1998@gmail.com"}},{id:3,shortlistId:4,loanAmount:1e6,tenure:48,interestRate:13,status:"PENDING",processingFee:5e4,emi:27e3,createdAt:new Date("2024-10-13T17:00:00.000Z").toISOString(),updatedAt:new Date("2024-10-13T17:00:00.000Z").toISOString(),shortlist:{id:4,name:"Manigandan M",mobile:"9876543222",businessName:"Manigandan Industries",businessType:"Manufacturing",loanAmount:1e6,enquiry:{id:4,name:"Manigandan M",mobile:"9876543222",businessType:"Manufacturing",businessName:"Manigandan Industries"}},submittedBy:{id:4,name:"Dinesh",email:"dinesh@gmail.com"}},{id:4,shortlistId:3,loanAmount:75e4,tenure:30,interestRate:12,status:"UNDER_REVIEW",processingFee:37500,emi:26200,createdAt:new Date("2024-10-12T14:45:00.000Z").toISOString(),updatedAt:new Date("2024-10-12T14:45:00.000Z").toISOString(),shortlist:{id:3,name:"Poorani",mobile:"9876543221",businessName:"Poorani Textiles",businessType:"Textiles",loanAmount:75e4,enquiry:{id:3,name:"Poorani",mobile:"9876543221",businessType:"Textiles",businessName:"Poorani Textiles"}},submittedBy:{id:3,name:"Harish",email:"newacttmis@gmail.com"}},{id:5,shortlistId:6,loanAmount:45e4,tenure:24,interestRate:13.5,status:"REJECTED",processingFee:22500,emi:20100,rejectionReason:"Insufficient business turnover",createdAt:new Date("2024-10-10T11:20:00.000Z").toISOString(),updatedAt:new Date("2024-10-10T11:20:00.000Z").toISOString(),shortlist:{id:6,name:"Sunita Gupta",mobile:"9876543227",businessName:"Gupta Fashion",businessType:"Fashion",loanAmount:45e4,enquiry:{id:10,name:"Sunita Gupta",mobile:"9876543227",businessType:"Fashion",businessName:"Gupta Fashion"}},submittedBy:{id:5,name:"Nunciya",email:"tmsnunciya59@gmail.com"}}]}static getStaff(){return[{id:1,name:"Perivi",email:"gowthaamankrishna1998@gmail.com",password:"12345678",role:"ADMIN",department:"Management",verified:!0,hasAccess:!0,status:"ACTIVE",clientName:"Rajesh Kumar, Priya Sharma, Amit Patel",createdAt:new Date("2024-10-01T09:00:00.000Z").toISOString()},{id:2,name:"Venkat",email:"gowthaamaneswar1998@gmail.com",password:"12345678",role:"EMPLOYEE",department:"Operations",verified:!0,hasAccess:!0,status:"ACTIVE",clientName:"Sunita Gupta, Vikram Singh",createdAt:new Date("2024-10-02T10:00:00.000Z").toISOString()},{id:3,name:"Harish",email:"newacttmis@gmail.com",password:"12345678",role:"ADMIN",department:"Client Management",verified:!0,hasAccess:!0,status:"ACTIVE",clientName:"Anita Desai, Ravi Mehta, Sanjay Joshi",createdAt:new Date("2024-10-03T11:00:00.000Z").toISOString()},{id:4,name:"Dinesh",email:"dinesh@gmail.com",password:"12345678",role:"EMPLOYEE",department:"Processing",verified:!0,hasAccess:!0,status:"ACTIVE",clientName:"Available for Assignment - Ready for New Clients",createdAt:new Date("2024-10-04T12:00:00.000Z").toISOString()},{id:5,name:"Nunciya",email:"tmsnunciya59@gmail.com",password:"12345678",role:"ADMIN",department:"Administration",verified:!0,hasAccess:!0,status:"ACTIVE",clientName:"Deepak Verma",createdAt:new Date("2024-10-05T13:00:00.000Z").toISOString()},{id:6,name:"Admin User",email:"admin@businessloan.com",password:"12345678",role:"ADMIN",department:"Administration",verified:!0,hasAccess:!0,status:"ACTIVE",clientName:"Neha Agarwal, Rohit Sharma",createdAt:new Date("2024-10-06T14:00:00.000Z").toISOString()},{id:7,name:"Admin User",email:"admin@gmail.com",password:"admin123",role:"ADMIN",department:"Administration",verified:!0,hasAccess:!0,status:"ACTIVE",clientName:"Manish Gupta",createdAt:new Date("2024-10-07T15:00:00.000Z").toISOString()}]}static authenticateStaff(t,a){const n=this.getStaff().find(l=>l.email===t);if(!n||!n.hasAccess||n.status!=="ACTIVE"||n.password!==a)return null;const i=`mock-jwt-token-${n.id}-${Date.now()}`,{password:r,...o}=n;return{access_token:i,user:{id:n.id,name:n.name,email:n.email,role:n.role}}}static getTransactions(){return[{id:1001,name:"BALAMURUGAN Payment",transactionId:"TXN202410001",amount:5e5,status:"COMPLETED",date:new Date("2024-10-15T10:30:00.000Z").toISOString(),clientName:"BALAMURUGAN",businessType:"Manufacturing",processedBy:"Perivi",createdAt:new Date("2024-10-15T10:30:00.000Z").toISOString(),updatedAt:new Date("2024-10-15T10:30:00.000Z").toISOString()},{id:1002,name:"Rajesh Kumar Payment",transactionId:"TXN202410002",amount:8e5,status:"COMPLETED",date:new Date("2024-10-14T14:20:00.000Z").toISOString(),clientName:"Rajesh Kumar",businessType:"Export",processedBy:"Perivi",createdAt:new Date("2024-10-14T14:20:00.000Z").toISOString(),updatedAt:new Date("2024-10-14T14:20:00.000Z").toISOString()},{id:1003,name:"Manigandan M Payment",transactionId:"TXN202410003",amount:1e6,status:"PENDING",date:new Date("2024-10-13T16:45:00.000Z").toISOString(),clientName:"Manigandan M",businessType:"Manufacturing",processedBy:"Dinesh",createdAt:new Date("2024-10-13T16:45:00.000Z").toISOString(),updatedAt:new Date("2024-10-13T16:45:00.000Z").toISOString()},{id:1004,name:"Poorani Processing Fee",transactionId:"TXN202410004",amount:75e3,status:"COMPLETED",date:new Date("2024-10-12T11:15:00.000Z").toISOString(),clientName:"Poorani",businessType:"Textiles",processedBy:"Harish",createdAt:new Date("2024-10-12T11:15:00.000Z").toISOString(),updatedAt:new Date("2024-10-12T11:15:00.000Z").toISOString()},{id:1005,name:"VIGNESH S Payment",transactionId:"TXN202410005",amount:3e5,status:"PENDING",date:new Date("2024-10-11T09:30:00.000Z").toISOString(),clientName:"VIGNESH S",businessType:"Trading",processedBy:"Venkat",createdAt:new Date("2024-10-11T09:30:00.000Z").toISOString(),updatedAt:new Date("2024-10-11T09:30:00.000Z").toISOString()},{id:1006,name:"Priya Sharma Application Fee",transactionId:"TXN202410006",amount:35e3,status:"COMPLETED",date:new Date("2024-10-10T13:20:00.000Z").toISOString(),clientName:"Priya Sharma",businessType:"Services",processedBy:"Harish",createdAt:new Date("2024-10-10T13:20:00.000Z").toISOString(),updatedAt:new Date("2024-10-10T13:20:00.000Z").toISOString()},{id:1007,name:"Amit Patel Payment",transactionId:"TXN202410007",amount:6e5,status:"FAILED",date:new Date("2024-10-09T15:45:00.000Z").toISOString(),clientName:"Amit Patel",businessType:"Electronics",processedBy:"Dinesh",createdAt:new Date("2024-10-09T15:45:00.000Z").toISOString(),updatedAt:new Date("2024-10-09T15:45:00.000Z").toISOString()},{id:1008,name:"Sunita Gupta Payment",transactionId:"TXN202410008",amount:45e4,status:"PENDING",date:new Date("2024-10-08T12:10:00.000Z").toISOString(),clientName:"Sunita Gupta",businessType:"Fashion",processedBy:"Nunciya",createdAt:new Date("2024-10-08T12:10:00.000Z").toISOString(),updatedAt:new Date("2024-10-08T12:10:00.000Z").toISOString()}]}static getNotifications(){return[{id:"notif_1",type:"NEW_ENQUIRY",title:"New Enquiry Received",message:"New enquiry from BALAMURUGAN (Manufacturing) for 5,00,000 business loan received",priority:"HIGH",read:!1,createdAt:new Date("2024-10-16T10:37:11.406Z").toISOString(),data:{enquiryId:1,clientName:"BALAMURUGAN",loanAmount:5e5,businessType:"Manufacturing"}},{id:"notif_2",type:"DOCUMENT_UPLOADED",title:"Document Uploaded",message:"GST Certificate uploaded by BALAMURUGAN - awaiting verification",priority:"MEDIUM",read:!1,createdAt:new Date("2024-10-16T10:45:00.000Z").toISOString(),data:{documentId:1,clientName:"BALAMURUGAN",documentType:"GST"}},{id:"notif_3",type:"DOCUMENT_VERIFIED",title:"Document Verified",message:"Bank Statement verified for Rajesh Kumar - all documents complete",priority:"MEDIUM",read:!1,createdAt:new Date("2024-10-15T14:20:00.000Z").toISOString(),data:{documentId:19,clientName:"Rajesh Kumar",documentType:"BANK_STATEMENT"}},{id:"notif_4",type:"SHORTLISTED",title:"Client Shortlisted",message:"Manigandan M has been added to shortlist for 10,00,000 loan",priority:"HIGH",read:!1,createdAt:new Date("2024-10-13T15:30:00.000Z").toISOString(),data:{shortlistId:4,clientName:"Manigandan M",loanAmount:1e6}},{id:"notif_5",type:"PAYMENT_APPLIED",title:"Payment Gateway Application",message:"Poorani applied for 7,50,000 loan through payment gateway",priority:"HIGH",read:!1,createdAt:new Date("2024-10-12T14:45:00.000Z").toISOString(),data:{paymentId:4,clientName:"Poorani",loanAmount:75e4}},{id:"notif_6",type:"TRANSACTION_COMPLETED",title:"Transaction Completed",message:"Payment of 5,00,000 completed for BALAMURUGAN",priority:"HIGH",read:!0,createdAt:new Date("2024-10-15T10:30:00.000Z").toISOString(),data:{transactionId:1001,clientName:"BALAMURUGAN",amount:5e5}},{id:"notif_7",type:"STAFF_ADDED",title:"New Staff Member",message:"Dinesh added as EMPLOYEE in Processing department",priority:"LOW",read:!0,createdAt:new Date("2024-10-04T12:00:00.000Z").toISOString(),data:{staffId:4,staffName:"Dinesh",role:"EMPLOYEE"}},{id:"notif_8",type:"NEW_ENQUIRY",title:"New Enquiry Received",message:"New enquiry from Priya Sharma for 3,50,000 services business loan",priority:"HIGH",read:!0,createdAt:new Date("2024-10-09T11:45:30.000Z").toISOString(),data:{enquiryId:8,clientName:"Priya Sharma",loanAmount:35e4,businessType:"Services"}},{id:"notif_9",type:"DOCUMENT_UPLOADED",title:"Document Uploaded",message:"UDYAM Registration uploaded by Amit Patel - pending verification",priority:"MEDIUM",read:!0,createdAt:new Date("2024-10-08T10:20:00.000Z").toISOString(),data:{documentId:24,clientName:"Amit Patel",documentType:"UDYAM"}},{id:"notif_10",type:"PAYMENT_REJECTED",title:"Payment Application Rejected",message:"Sunita Gupta loan application rejected - insufficient business turnover",priority:"MEDIUM",read:!0,createdAt:new Date("2024-10-10T11:20:00.000Z").toISOString(),data:{paymentId:5,clientName:"Sunita Gupta",rejectionReason:"Insufficient business turnover"}}]}static getDashboardStats(){const t=this.getEnquiries(),a=this.getDocuments(),n=this.getShortlist(),i=this.getTransactions(),r=this.getStaff();return{totalEnquiries:t.length,totalDocuments:a.length,verifiedDocuments:a.filter(o=>o.verified).length,totalShortlisted:n.length,totalTransactions:i.length,completedTransactions:i.filter(o=>o.status==="COMPLETED").length,pendingTransactions:i.filter(o=>o.status==="PENDING").length,totalStaff:r.length,activeStaff:r.filter(o=>o.hasAccess).length}}}class Fe{static TOKEN_KEY="auth_token";static USER_KEY="user_data";static setToken(t){typeof document<"u"&&this.setSecureItem(this.TOKEN_KEY,t)}static getToken(){return typeof document<"u"?this.getSecureItem(this.TOKEN_KEY):null}static setUser(t){typeof document<"u"&&this.setSecureItem(this.USER_KEY,JSON.stringify(t))}static getUser(){if(typeof document<"u"){const t=this.getSecureItem(this.USER_KEY);if(t)try{return JSON.parse(t)}catch{return console.error("Failed to parse user data"),this.removeUser(),null}}return null}static removeToken(){typeof document<"u"&&this.removeSecureItem(this.TOKEN_KEY)}static removeUser(){typeof document<"u"&&this.removeSecureItem(this.USER_KEY)}static clearAll(){this.removeToken(),this.removeUser()}static setSecureItem(t,a){try{const n=btoa(encodeURIComponent(a));localStorage.setItem(t,n)}catch(n){console.error("Failed to store secure item:",n)}}static getSecureItem(t){try{const a=localStorage.getItem(t);if(a)return decodeURIComponent(atob(a))}catch(a){console.error("Failed to retrieve secure item:",a),this.removeSecureItem(t)}return null}static removeSecureItem(t){try{localStorage.removeItem(t)}catch(a){console.error("Failed to remove secure item:",a)}}}const bl=()=>(console.log(" Using environment variable backend URL:","https://business-loan-backend.onrender.com"),"https://business-loan-backend.onrender.com"),Ds=bl();console.log(" [RENDER] Backend URL configured:",Ds);console.log(" [RENDER] Dashboard system ready for deployment - v2.0.0");console.log(" [RENDER] Environment:",{isProd:!0,mode:"production",backendURL:Ds,timestamp:new Date().toISOString()});const et=pe.create({baseURL:Ds,timeout:9e4,headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},withCredentials:!1,validateStatus:s=>s>=200&&s<400||s===401||s===403});et.interceptors.request.use(s=>{const t=`${s.baseURL||window.location.origin}${s.url}`;console.log(" [RENDER] API Request:",{method:s.method?.toUpperCase(),url:s.url,baseURL:s.baseURL,fullURL:t,timestamp:new Date().toISOString()});const a=s.url?.includes("/api/supabase/"),n=s.url?.includes("/api/mock/"),i=s.url?.includes("/health"),r=s.url?.includes("/api/dashboard");if(!a&&!n&&!i&&!r){const o=Fe.getToken();o&&(s.headers.Authorization=`Bearer ${o}`)}return s},s=>Promise.reject(s));et.interceptors.response.use(s=>(console.log(" [RENDER] API Response:",{status:s.status,statusText:s.statusText,url:s.config.url,method:s.config.method?.toUpperCase(),dataLength:Array.isArray(s.data)?s.data.length:typeof s.data,timestamp:new Date().toISOString()}),s),s=>{if(console.error(" [RENDER] API Error Details:",{message:s.message,code:s.code,status:s.response?.status,statusText:s.response?.statusText,url:s.config?.url,method:s.config?.method?.toUpperCase(),baseURL:s.config?.baseURL,fullURL:`${s.config?.baseURL||""}${s.config?.url||""}`,responseData:s.response?.data,timestamp:new Date().toISOString()}),s.response?.status===401){const t=s.config?.url?.includes("/api/supabase/"),a=s.config?.url?.includes("/api/mock/"),n=s.config?.url?.includes("/health");!t&&!a&&!n?(console.log(" Unauthorized access to protected endpoint, redirecting to login"),Fe.removeToken(),window.location.href="/login"):console.log(" 401 error on demo endpoint, not redirecting to login:",s.config?.url)}return(s.code==="ECONNREFUSED"||s.message.includes("Network Error")||s.code==="ERR_NETWORK")&&(console.error(" [RENDER] Network Error: Backend server connection failed"),console.error(" [RENDER] Backend URL:",Ds),console.error(" [RENDER] Environment:","Production"),console.error(" [RENDER] Error details:",{code:s.code,message:s.message,config:{url:s.config?.url,method:s.config?.method,timeout:s.config?.timeout}}),console.error(" [RENDER] Production backend connection failed."),console.error(" [RENDER] Possible causes:"),console.error("   - Render service is cold starting (wait 30-60 seconds)"),console.error("   - Backend deployment failed"),console.error("   - Network connectivity issues")),Promise.reject(s)});const F={...et,async get(s,t){try{console.log(" [RENDER] GET request to:",s);const a=await et.get(s,t);return console.log(" [RENDER] GET success for:",s,"- Data length:",Array.isArray(a.data)?a.data.length:typeof a.data),a}catch(a){if(console.error(" [RENDER] GET failed for:",s,"- Error:",a.message),a.code==="ECONNREFUSED"||a.message.includes("Network Error")||a.code==="ERR_NETWORK")return console.log(" [RENDER] Backend not available, using mock data for:",s),this.getMockData(s);throw a}},async post(s,t,a){let i;for(let o=1;o<=3;o++)try{console.log(` [RENDER] POST attempt ${o}/3 for:`,s);const l=await et.post(s,t,a);return console.log(` [RENDER] POST successful on attempt ${o}`),l}catch(l){if(i=l,console.log(` [RENDER] POST attempt ${o} failed:`,l.message),s.includes("/auth/login")&&(l.response?.status===403||l.response?.status===401)){console.log(" [RENDER] Trying alternative auth endpoints...");try{if(!s.includes("force-fresh-login")){const c=await et.post("/api/auth/force-fresh-login",t,a);return console.log(" [RENDER] Alternative auth successful"),c}}catch(c){console.log(" [RENDER] Alternative auth also failed:",c.message)}}if(o<3){const c=Math.min(1e3*Math.pow(2,o-1),8e3);console.log(` [RENDER] Waiting ${c}ms before retry...`),await new Promise(d=>setTimeout(d,c))}}if(i?.code==="ECONNREFUSED"||i?.message.includes("Network Error")||i?.code==="ERR_NETWORK")return console.log(" [RENDER] All retries failed, using mock authentication for:",s),this.getMockPostData(s,t);throw i},async put(s,t,a){try{return await et.put(s,t,a)}catch(n){if(n.code==="ECONNREFUSED"||n.message.includes("Network Error")||n.code==="ERR_NETWORK")return console.log(" [RENDER] Backend not available, using mock response for PUT:",s),{status:200,statusText:"OK",config:{url:s},data:{message:"Updated successfully",...t}};throw n}},async patch(s,t,a){try{return await et.patch(s,t,a)}catch(n){if(n.code==="ECONNREFUSED"||n.message.includes("Network Error"))return console.log(" Backend not available, using mock response for PATCH:",s),{status:200,statusText:"OK",config:{url:s},data:{message:"Updated successfully",...t}};throw n}},async delete(s,t){try{return await et.delete(s,t)}catch(a){if(a.code==="ECONNREFUSED"||a.message.includes("Network Error"))return console.log(" Backend not available, using mock response for DELETE:",s),{status:200,statusText:"OK",config:{url:s},data:{message:"Deleted successfully"}};throw a}},getMockData(s){const t={status:200,statusText:"OK",config:{url:s}};if(s.includes("/api/enquiries"))return{...t,data:Ie.getEnquiries()};if(s.includes("/api/documents")){if(s.includes("/enquiry/")){const a=parseInt(s.split("/enquiry/")[1]),n=Ie.getDocuments().filter(i=>i.enquiryId===a);return{...t,data:n}}return{...t,data:Ie.getDocuments()}}if(s.includes("/api/shortlist"))return{...t,data:Ie.getShortlist()};if(s.includes("/api/cashfree"))return{...t,data:Ie.getPaymentGateway()};if(s.includes("/api/staff")){if(s.includes("/stats")){const a=Ie.getDashboardStats();return{...t,data:{totalStaff:a.totalStaff,activeStaff:a.activeStaff}}}return{...t,data:{staff:Ie.getStaff()}}}if(s.includes("/api/transactions"))return{...t,data:Ie.getTransactions()};if(s.includes("/api/notifications")){if(s.includes("/count")){const a=Ie.getNotifications();return{...t,data:{unreadCount:a.filter(n=>!n.read).length}}}return{...t,data:{notifications:Ie.getNotifications(),count:Ie.getNotifications().length}}}return s.includes("/dashboard")||s.includes("/stats")?{...t,data:Ie.getDashboardStats()}:(console.warn(" No mock data available for:",s),{...t,data:[]})},getMockPostData(s,t){const a={status:200,statusText:"OK",config:{url:s}};if(s.includes("/api/auth/login")){if(console.log(" Mock authentication attempt for:",t?.email),!t?.email||!t?.password)throw new Error("Email and password are required");const n=Ie.authenticateStaff(t.email,t.password);if(!n){const i=new Error("Invalid credentials");throw i.response={status:403,data:{message:"Invalid credentials"}},i}return console.log(" Mock authentication successful for:",n.user.name),{...a,data:n}}if(s.includes("/api/enquiries")){const n={id:Date.now(),...t,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return{...a,data:n}}return console.log(" Mock POST response for:",s),{...a,data:{message:"Success",...t}}}},oi=u.createContext(void 0),Nl=({children:s})=>{const[t,a]=u.useState(null),[n,i]=u.useState(!1),[r,o]=u.useState(!0);u.useEffect(()=>{Fe.getToken()?l():o(!1)},[]);const l=async()=>{try{const f=Fe.getUser();f&&f.id?(a(f),i(!0)):(a(null),i(!1))}catch{Fe.clearAll(),a(null),i(!1)}finally{o(!1)}},c=async f=>{try{let p,j;try{p=await F.post("/api/auth/login",f),j=p.data}catch{try{p=await F.post("/api/auth/force-fresh-login",f),j=p.data}catch{const g=await F.post("/api/staff/test/deployment-login",{email:f.email,password:f.password});if(g.data.success&&g.data.staff)j={access_token:"deployment-test-token-"+Date.now(),user:{id:g.data.staff.id,name:g.data.staff.name,email:g.data.staff.email,role:g.data.staff.role}};else throw new Error("All authentication methods failed")}}if(j.access_token&&j.user){Fe.setToken(j.access_token),Fe.setUser(j.user),a(j.user),i(!0),O.success(` Login successful! Welcome ${j.user.name} (${j.user.role})`);return}else throw new Error("Invalid response from server")}catch(p){if(p.response?.status===403)O.error(" Invalid credentials. Try: gowthaamankrishna1998@gmail.com / 12345678");else if(p.response?.status===500){O.error(" Server error on Vercel. Retrying with backup auth...");try{await h(f);return}catch{O.error(" All authentication methods failed. Please contact support.")}}else p.message.includes("Network Error")?O.error(" Network error. Check connection and try again."):O.error(` ${p.response?.data?.message||p.message||"Login failed on Vercel deployment"}`);throw p}},d=()=>{Fe.clearAll(),a(null),i(!1),O.success("Logged out successfully")},h=async f=>{try{Fe.clearAll(),a(null),i(!1);const j=(await F.post("/api/auth/force-fresh-login",f)).data;if(j.access_token)Fe.setToken(j.access_token),Fe.setUser(j.user),a(j.user),i(!0),O.success(`Fresh login successful! Welcome ${j.user.name} (${j.user.role})`);else throw new Error(j.message||"Fresh login failed")}catch(p){throw O.error(p.message||"Fresh login failed"),p}};return e.jsx(oi.Provider,{value:{user:t,login:c,logout:d,isAuthenticated:n,loading:r,forceFreshLogin:h},children:s})},Me=()=>{const s=u.useContext(oi);if(s===void 0)throw new Error("useAuth must be used within an AuthProvider");return s},ha=()=>{const{user:s}=Me(),t=s?.email==="admin@gmail.com",a=s?.role==="ADMIN";return{canManageStaff:t,canCreateStaff:t,canDeleteStaff:t,canModifyStaff:t,canViewStaffList:t,canViewAllData:t,isAdmin:a,isSuperAdmin:t}},wl=(s,t,a,n)=>{const i=[a,{code:t,...n||{}}];if(s?.services?.logger?.forward)return s.services.logger.forward(i,"warn","react-i18next::",!0);pt(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),s?.services?.logger?.warn?s.services.logger.warn(...i):console?.warn&&console.warn(...i)},Ba={},Xs=(s,t,a,n)=>{pt(a)&&Ba[a]||(pt(a)&&(Ba[a]=new Date),wl(s,t,a,n))},li=(s,t)=>()=>{if(s.isInitialized)t();else{const a=()=>{setTimeout(()=>{s.off("initialized",a)},0),t()};s.on("initialized",a)}},ea=(s,t,a)=>{s.loadNamespaces(t,li(s,a))},Ha=(s,t,a,n)=>{if(pt(a)&&(a=[a]),s.options.preload&&s.options.preload.indexOf(t)>-1)return ea(s,a,n);a.forEach(i=>{s.options.ns.indexOf(i)<0&&s.options.ns.push(i)}),s.loadLanguages(t,li(s,n))},vl=(s,t,a={})=>!t.languages||!t.languages.length?(Xs(t,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:t.languages}),!0):t.hasLoadedNamespace(s,{lng:a.lng,precheck:(n,i)=>{if(a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!i(n.isLanguageChangingTo,s))return!1}}),pt=s=>typeof s=="string",jl=s=>typeof s=="object"&&s!==null,Sl=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,El={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Al=s=>El[s],Dl=s=>s.replace(Sl,Al);let ta={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Dl};const Tl=(s={})=>{ta={...ta,...s}},kl=()=>ta;let ci;const Cl=s=>{ci=s},Rl=()=>ci,Ll={type:"3rdParty",init(s){Tl(s.options.react),Cl(s)}},Ol=u.createContext();class Il{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(a=>{this.usedNamespaces[a]||(this.usedNamespaces[a]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Pl=(s,t)=>{const a=u.useRef();return u.useEffect(()=>{a.current=s},[s,t]),a.current},di=(s,t,a,n)=>s.getFixedT(t,a,n),Ml=(s,t,a,n)=>u.useCallback(di(s,t,a,n),[s,t,a,n]),Ts=(s,t={})=>{const{i18n:a}=t,{i18n:n,defaultNS:i}=u.useContext(Ol)||{},r=a||n||Rl();if(r&&!r.reportNamespaces&&(r.reportNamespaces=new Il),!r){Xs(r,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const y=(C,T)=>pt(T)?T:jl(T)&&pt(T.defaultValue)?T.defaultValue:Array.isArray(C)?C[C.length-1]:C,v=[y,{},!1];return v.t=y,v.i18n={},v.ready=!1,v}r.options.react?.wait&&Xs(r,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...kl(),...r.options.react,...t},{useSuspense:l,keyPrefix:c}=o;let d=i||r.options?.defaultNS;d=pt(d)?[d]:d||["translation"],r.reportNamespaces.addUsedNamespaces?.(d);const h=(r.isInitialized||r.initializedStoreOnce)&&d.every(y=>vl(y,r,o)),f=Ml(r,t.lng||null,o.nsMode==="fallback"?d:d[0],c),p=()=>f,j=()=>di(r,t.lng||null,o.nsMode==="fallback"?d:d[0],c),[x,b]=u.useState(p);let g=d.join();t.lng&&(g=`${t.lng}${g}`);const A=Pl(g),w=u.useRef(!0);u.useEffect(()=>{const{bindI18n:y,bindI18nStore:v}=o;w.current=!0,!h&&!l&&(t.lng?Ha(r,t.lng,d,()=>{w.current&&b(j)}):ea(r,d,()=>{w.current&&b(j)})),h&&A&&A!==g&&w.current&&b(j);const C=()=>{w.current&&b(j)};return y&&r?.on(y,C),v&&r?.store.on(v,C),()=>{w.current=!1,r&&y&&y?.split(" ").forEach(T=>r.off(T,C)),v&&r&&v.split(" ").forEach(T=>r.store.off(T,C))}},[r,g]),u.useEffect(()=>{w.current&&h&&b(p)},[r,c,h]);const m=[x,r,h];if(m.t=x,m.i18n=r,m.ready=h,h||!h&&!l)return m;throw new Promise(y=>{t.lng?Ha(r,t.lng,d,()=>y()):ea(r,d,()=>y())})};function ql({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))}const Wa=u.forwardRef(ql);function Fl({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))}const ui=u.forwardRef(Fl);function $l({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const Et=u.forwardRef($l);function Ul({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const cs=u.forwardRef(Ul);function _l({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const mi=u.forwardRef(_l);function Vl({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const Bl=u.forwardRef(Vl);function Hl({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const sa=u.forwardRef(Hl);function Wl({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}const hi=u.forwardRef(Wl);function Ql({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"}))}const Gl=u.forwardRef(Ql);function Zl({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"}))}const Kl=u.forwardRef(Zl);function zl({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"}))}const Yl=u.forwardRef(zl);function Jl({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"}))}const $s=u.forwardRef(Jl);function Xl({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const ks=u.forwardRef(Xl);function ec({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const tc=u.forwardRef(ec);function sc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const ds=u.forwardRef(sc);function ac({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const fi=u.forwardRef(ac);function nc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Ee=u.forwardRef(nc);function ic({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const us=u.forwardRef(ic);function rc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const oc=u.forwardRef(rc);function lc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const cc=u.forwardRef(lc);function dc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Zt=u.forwardRef(dc);function uc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const aa=u.forwardRef(uc);function mc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h9v9h-9v-9Z"}))}const hc=u.forwardRef(mc);function fc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const pi=u.forwardRef(fc);function pc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 8.25H9m6 3H9m3 6-3-3h1.5a3 3 0 1 0 0-6M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const rs=u.forwardRef(pc);function xc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const xi=u.forwardRef(xc);function gc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 0 1 9 9v.375M10.125 2.25A3.375 3.375 0 0 1 13.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 0 1 3.375 3.375M9 15l2.25 2.25L15 12"}))}const Us=u.forwardRef(gc);function yc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const mt=u.forwardRef(yc);function bc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const lt=u.forwardRef(bc);function Nc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const wc=u.forwardRef(Nc);function vc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const ms=u.forwardRef(vc);function jc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const Oe=u.forwardRef(jc);function Sc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z"}))}const Ec=u.forwardRef(Sc);function Ac({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const Dc=u.forwardRef(Ac);function Tc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const kc=u.forwardRef(Tc);function Cc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Rc=u.forwardRef(Cc);function Lc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const Oc=u.forwardRef(Lc);function Ic({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Pc=u.forwardRef(Ic);function Mc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const At=u.forwardRef(Mc);function qc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 0 0-5.78 1.128 2.25 2.25 0 0 1-2.4 2.245 4.5 4.5 0 0 0 8.4-2.245c0-.399-.078-.78-.22-1.128Zm0 0a15.998 15.998 0 0 0 3.388-1.62m-5.043-.025a15.994 15.994 0 0 1 1.622-3.395m3.42 3.42a15.995 15.995 0 0 0 4.764-4.648l3.876-5.814a1.151 1.151 0 0 0-1.597-1.597L14.146 6.32a15.996 15.996 0 0 0-4.649 4.763m3.42 3.42a6.776 6.776 0 0 0-3.42-3.42"}))}const Fc=u.forwardRef(qc);function $c({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const Uc=u.forwardRef($c);function _c({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const st=u.forwardRef(_c);function Vc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const Bc=u.forwardRef(Vc);function Hc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const xt=u.forwardRef(Hc);function Wc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const Dt=u.forwardRef(Wc);function Qc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const Gc=u.forwardRef(Qc);function Zc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const _s=u.forwardRef(Zc);function Kc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))}const zc=u.forwardRef(Kc);function Yc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const ct=u.forwardRef(Yc);function Jc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const Qa=u.forwardRef(Jc);function Xc({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const gi=u.forwardRef(Xc);function ed({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const qt=u.forwardRef(ed);function td({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const nt=u.forwardRef(td);function sd({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const gt=u.forwardRef(sd);function ad({title:s,titleId:t,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},a),s?u.createElement("title",{id:t},s):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const _e=u.forwardRef(ad);function nd(){const{user:s,logout:t}=Me(),{t:a}=Ts(),{canManageStaff:n}=ha(),i=s?.role==="ADMIN",r=[{name:a("sidebar.dashboard"),href:"/dashboard",icon:Rc,show:!0},{name:a("sidebar.enquiries"),href:"/enquiries",icon:mt,show:!0},{name:a("sidebar.docVerification"),href:"/documents",icon:Dc,show:!0},{name:a("sidebar.shortlist"),href:"/shortlist",icon:Pc,show:!0},{name:a("sidebar.paymentGateway"),href:"/payment-gateway",icon:pi,show:!0},{name:a("sidebar.staffManagement"),href:"/staff",icon:gi,show:n},{name:a("sidebar.transactions"),href:"/transactions",icon:Yl,show:i}];return e.jsxs("aside",{className:"sidebar-modern",children:[e.jsx("div",{className:"p-8 border-b border-slate-700/50",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:"/generated-image.png",alt:"Company Logo",className:"w-20 h-20 object-contain drop-shadow-2xl hover:scale-110 transition-transform duration-300",style:{filter:"contrast(2.2) saturate(2.0) brightness(1.8)",imageRendering:"crisp-edges",maxWidth:"100%",maxHeight:"100%"}})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-white text-xl font-poppins font-bold",children:"Portal"}),e.jsx("p",{className:"text-slate-300 text-sm font-medium",children:a("header.title")})]})]})}),e.jsx("nav",{className:"py-6",children:e.jsx("ul",{className:"space-y-1",children:r.filter(o=>o.show).map(o=>e.jsx("li",{children:e.jsxs(Qi,{to:o.href,className:({isActive:l})=>`sidebar-nav-item ${l?"active":""}`,children:[e.jsx(o.icon,{className:"h-5 w-5 mr-4"}),e.jsx("span",{className:"font-medium",children:o.name})]})},o.name))})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 border-t border-slate-700/50 bg-slate-900/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-semibold text-white",children:s?.name?.charAt(0)||"U"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-white truncate",children:s?.name}),e.jsx("div",{className:"text-slate-400 text-sm",children:s?.role})]})]}),e.jsxs("button",{onClick:t,className:"flex items-center w-full px-4 py-3 text-slate-300 hover:text-white hover:bg-red-500/20 hover:border-red-400 rounded-xl transition-all duration-200 border border-slate-700 hover:border-red-400",children:[e.jsx(mi,{className:"h-5 w-5 mr-3"}),e.jsx("span",{className:"font-medium",children:"Logout"})]})]})]})}const id=()=>({t:(s,t)=>t||s,i18n:{language:"en",changeLanguage:s=>Promise.resolve()}});function rd({isOpen:s,onClose:t}){const{t:a,i18n:n}=id(),{user:i}=Me(),[r,o]=u.useState("profile"),[l,c]=u.useState(!1),[d,h]=u.useState({name:i?.name||"",email:i?.email||"",currentPassword:"",newPassword:"",confirmPassword:"",notifications:{email:!0,push:!0,sms:!1,marketing:!1},theme:"light",language:n.language}),f=[{id:"profile",name:a("header.profile","Profile Settings"),icon:nt,color:"text-blue-600 bg-blue-50"},{id:"notifications",name:a("header.notifications","Notification Settings"),icon:ks,color:"text-green-600 bg-green-50"},{id:"security",name:a("header.security","Security"),icon:Dt,color:"text-red-600 bg-red-50"},{id:"preferences",name:a("header.preferences","Preferences"),icon:aa,color:"text-purple-600 bg-purple-50"}],p=(y,v)=>{h(C=>({...C,[y]:v}))},j=(y,v)=>{h(C=>({...C,notifications:{...C.notifications,[y]:v}}))},x=()=>{O.success("Settings saved successfully!"),setTimeout(()=>{t()},1e3)},b=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Profile Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",value:d.name,onChange:y=>p("name",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your full name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:d.email,onChange:y=>p("email",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-600",children:i?.role||"Not specified"})]})]})]})}),g=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Notification Preferences"}),e.jsx("div",{className:"space-y-4",children:Object.entries(d.notifications).map(([y,v])=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900 capitalize",children:[y," Notifications"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Receive ",y," notifications for important updates"]})]}),e.jsx("button",{onClick:()=>j(y,!v),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${v?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${v?"translate-x-6":"translate-x-1"}`})})]},y))})]})}),A=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Change Password"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:l?"text":"password",value:d.currentPassword,onChange:y=>p("currentPassword",y.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter current password"}),e.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:l?e.jsx(ms,{className:"h-5 w-5 text-gray-400"}):e.jsx(Oe,{className:"h-5 w-5 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsx("input",{type:l?"text":"password",value:d.newPassword,onChange:y=>p("newPassword",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter new password"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),e.jsx("input",{type:l?"text":"password",value:d.confirmPassword,onChange:y=>p("confirmPassword",y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirm new password"})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Security Options"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Oc,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Two-Factor Authentication"})]}),e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:"Coming Soon"})]})})]})]}),w=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Application Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Language"}),e.jsxs("select",{value:d.language,onChange:y=>{p("language",y.target.value),n.changeLanguage(y.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"hi",children:" (Hindi)"}),e.jsx("option",{value:"ta",children:" (Tamil)"}),e.jsx("option",{value:"te",children:" (Telugu)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theme"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:["light","dark"].map(y=>e.jsxs("button",{onClick:()=>p("theme",y),className:`p-3 border-2 rounded-lg flex items-center justify-center space-x-2 transition-colors ${d.theme===y?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(Fc,{className:"h-4 w-4"}),e.jsx("span",{className:"capitalize",children:y}),d.theme===y&&e.jsx(us,{className:"h-4 w-4 text-blue-600"})]},y))})]})]})]})}),m=()=>{switch(r){case"profile":return b();case"notifications":return g();case"security":return A();case"preferences":return w();default:return b()}};return e.jsx(bs,{children:s&&e.jsxs(e.Fragment,{children:[e.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:t}),e.jsx(M.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),e.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(_e,{className:"h-6 w-6 text-gray-500"})})]}),e.jsxs("div",{className:"flex h-[calc(90vh-8rem)]",children:[e.jsx("div",{className:"w-64 bg-gray-50 border-r border-gray-200 p-4",children:e.jsx("nav",{className:"space-y-2",children:f.map(y=>{const v=y.icon;return e.jsxs("button",{onClick:()=>o(y.id),className:`w-full flex items-center space-x-3 px-3 py-3 rounded-lg text-left transition-colors ${r===y.id?"bg-white shadow-sm border border-gray-200":"hover:bg-white hover:bg-opacity-50"}`,children:[e.jsx("div",{className:`p-2 rounded-lg ${y.color}`,children:e.jsx(v,{className:"h-4 w-4"})}),e.jsx("span",{className:"font-medium text-gray-900",children:y.name})]},y.id)})})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-6",children:m()})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:x,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})})]})})}const yi=u.createContext(void 0),bi=()=>{const s=u.useContext(yi);if(s===void 0)throw new Error("useNotifications must be used within a NotificationProvider");return s},od=({children:s})=>{const[t,a]=u.useState([]),[n,i]=u.useState(0),r=Ae(),{data:o,isLoading:l,refetch:c}=re("global-notifications",async()=>{try{console.log(" Fetching notifications from /api/notifications...");const x=await F.get("/api/notifications");return console.log(" Notifications response:",x.data),x.data}catch(x){return console.error(" Failed to fetch notifications:",x),x.response&&(console.error(" Response status:",x.response.status),console.error(" Response data:",x.response.data)),{notifications:[],count:0}}},{refetchInterval:1e4,refetchOnWindowFocus:!0,refetchIntervalInBackground:!1,refetchOnMount:!0,retry:3,staleTime:0,cacheTime:300*1e3,onError:x=>{console.error(" Notifications query error:",x)},onSuccess:x=>{console.log(" Notifications query success:",x?.notifications?.length||0,"notifications"),console.log(" Full response data structure:",{hasNotifications:!!x?.notifications,isArray:Array.isArray(x?.notifications),count:x?.count,message:x?.message}),x?.notifications&&x.notifications.length>0&&(console.log(" Sample notification:",x.notifications[0]),console.log(" All notification IDs:",x.notifications.map(b=>b.id)))}}),{data:d}=re("global-notification-count",async()=>{try{console.log(" Fetching notification count from /api/notifications/count...");const x=await F.get("/api/notifications/count");return console.log(" Count response:",x.data),x.data}catch(x){return console.error(" Failed to fetch notification count:",x),{unreadCount:0}}},{refetchInterval:1e4,refetchOnWindowFocus:!0,refetchIntervalInBackground:!1,refetchOnMount:!0,retry:3,staleTime:0,cacheTime:300*1e3,onError:x=>{console.error(" Notification count query error:",x)},onSuccess:x=>{console.log(" Notification count query success:",x?.unreadCount||0),console.log(" Count data structure:",x)}});u.useEffect(()=>{console.log(" NotificationsData changed:",o),console.log(" Type of notificationsData:",typeof o),console.log(" Is array:",Array.isArray(o)),o?.notifications&&Array.isArray(o.notifications)?(console.log(" Updating notifications state with",o.notifications.length,"notifications"),console.log(" First notification:",o.notifications[0]),console.log(" All notification IDs:",o.notifications.map(x=>x.id)),a(o.notifications)):o?(console.log(" No notifications array in response, setting empty array"),console.log(" Response structure:",o),console.log(" Response keys:",Object.keys(o)),a([])):(console.log(" No notificationsData at all"),a([]))},[o]),u.useEffect(()=>{console.log(" CountData changed:",d),d?.unreadCount!==void 0?(console.log(" Updating unread count to:",d.unreadCount),i(d.unreadCount)):console.log(" No unreadCount in countData")},[d]);const j={notifications:t,unreadCount:n,markAsRead:async x=>{try{await F.patch(`/api/notifications/${x}/read`),a(b=>b.map(g=>g.id===x?{...g,read:!0}:g)),i(b=>Math.max(0,b-1)),r.invalidateQueries("global-notifications"),r.invalidateQueries("global-notification-count")}catch(b){console.error("Failed to mark notification as read:",b)}},markAllAsRead:async()=>{try{await F.patch("/api/notifications/mark-all-read"),a(x=>x.map(b=>({...b,read:!0}))),i(0),r.invalidateQueries("global-notifications"),r.invalidateQueries("global-notification-count")}catch(x){console.error("Failed to mark all notifications as read:",x)}},refreshNotifications:()=>{console.log(" Manual refresh triggered - invalidating queries"),r.invalidateQueries("global-notifications"),r.invalidateQueries("global-notification-count"),c()},isLoading:l};return e.jsx(yi.Provider,{value:j,children:s})},ld=({isOpen:s,onClose:t})=>{const a=Ve(),{notifications:n,unreadCount:i,markAsRead:r,markAllAsRead:o,refreshNotifications:l}=bi(),[c,d]=u.useState("all"),h=[{id:"sample_1",type:"NEW_ENQUIRY",title:"New Client Application",message:"New loan application from BALAMURUGAN (BALAMURUGAN)",createdAt:new Date(Date.now()-1440*60*1e3).toISOString(),read:!1,archived:!1,priority:"HIGH"},{id:"sample_2",type:"DOCUMENT_VERIFIED",title:"Document Verified",message:"UDYAM REGISTRATION verified for priyakamaldkp",createdAt:new Date(Date.now()-2880*60*1e3).toISOString(),read:!1,archived:!1,priority:"MEDIUM"},{id:"sample_3",type:"DOCUMENT_VERIFIED",title:"Document Verified",message:"BANK STATEMENT verified for priyakamaldkp",createdAt:new Date(Date.now()-2880*60*1e3).toISOString(),read:!1,archived:!1,priority:"MEDIUM"},{id:"sample_4",type:"PAYMENT_APPLIED",title:"Payment Application Submitted",message:"Payment gateway application completed for RAJESH KUMAR",createdAt:new Date(Date.now()-4320*60*1e3).toISOString(),read:!0,archived:!0,priority:"LOW"}];console.log(" NotificationPanel - notifications from context:",n),console.log(" NotificationPanel - notifications length:",n?.length),console.log(" NotificationPanel - unreadCount:",i);const f=n&&n.length>0?n:h,p=c==="all"?f.filter(w=>!w.archived||w.archived===void 0):f.filter(w=>w.archived===!0),j=async(w,m)=>{m.stopPropagation();try{console.log(` Deleting notification: ${w}`),await F.delete(`/api/notifications/${w}`),await l(),O.success("Notification deleted successfully")}catch(y){console.error(" Failed to delete notification:",y),O.error("Failed to delete notification")}},x=async(w,m)=>{m.stopPropagation();try{console.log(` Archiving notification: ${w}`),await F.patch(`/api/notifications/${w}/archive`),await l(),O.success("Notification archived successfully")}catch(y){console.error(" Failed to archive notification:",y),O.error("Failed to archive notification")}},b=async(w,m)=>{m.stopPropagation();try{console.log(` Unarchiving notification: ${w}`),await F.patch(`/api/notifications/${w}/unarchive`),await l(),O.success("Notification restored successfully")}catch(y){console.error(" Failed to unarchive notification:",y),O.error("Failed to restore notification")}};console.log(" NotificationPanel - displayNotifications:",p),console.log(" NotificationPanel - displayNotifications length:",p?.length),fe.useEffect(()=>{s&&(console.log(" Notification panel opened, refreshing..."),console.log(" Current notifications in context:",n),l())},[s,l]);const g=w=>{const m=new Date,y=new Date(w),v=Math.floor((m.getTime()-y.getTime())/(1e3*60));let C="";if(v<1)C="Just now";else if(v<60)C=`${v}m ago`;else if(v<1440)C=`${Math.floor(v/60)}h ago`;else{const L=Math.floor(v/1440);L===1?C="1d ago":L<7?C=`${L}d ago`:C=y.toLocaleDateString("en-IN",{day:"numeric",month:"short"})}const T=y.toLocaleString("en-IN",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:"Asia/Kolkata"});return{relativeTime:C,fullTime:T}},A=async w=>{switch(await r(w.id),w.type){case"NEW_ENQUIRY":case"STATUS_UPDATED":case"ENQUIRY_ASSIGNED":case"ENQUIRY_COMPLETED":case"LOAN_APPROVED":case"LOAN_REJECTED":a("/enquiries");break;case"DOCUMENT_UPLOADED":case"DOCUMENT_VERIFIED":a("/documents");break;case"SHORTLISTED":a("/shortlist");break;case"PAYMENT_APPLIED":a("/payment-gateway");break;case"STAFF_ADDED":a("/staff");break;case"TRANSACTION_COMPLETED":a("/transactions");break}t()};return e.jsx(bs,{children:s&&e.jsxs(e.Fragment,{children:[e.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-30 z-[9998]",onClick:t}),e.jsxs(M.div,{initial:{x:"100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"100%",opacity:0},transition:{type:"spring",damping:25,stiffness:400},className:"fixed right-4 top-16 w-[400px] bg-white shadow-2xl z-[9999] rounded-2xl border border-gray-200 overflow-hidden",style:{maxHeight:"calc(100vh - 80px)",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),i>0&&e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:i})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[i>0&&e.jsx("button",{onClick:o,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Mark all as read"}),e.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 p-1 rounded-lg hover:bg-gray-100 transition-all duration-200",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex border-b border-gray-100 bg-gray-50",children:[e.jsxs("button",{onClick:()=>d("all"),className:`flex-1 px-4 py-3 text-sm font-medium relative ${c==="all"?"text-gray-900 bg-white border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700"}`,children:["All",c==="all"&&i>0&&e.jsx("span",{className:"ml-2 bg-gray-900 text-white text-xs font-medium px-2 py-0.5 rounded-full",children:i})]}),e.jsxs("button",{onClick:()=>d("archived"),className:`flex-1 px-4 py-3 text-sm font-medium ${c==="archived"?"text-gray-900 bg-white border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(Wa,{className:"h-4 w-4 inline mr-1"}),"Archived",c==="archived"&&f.filter(w=>w.archived===!0).length>0&&e.jsx("span",{className:"ml-2 bg-gray-500 text-white text-xs font-medium px-2 py-0.5 rounded-full",children:f.filter(w=>w.archived===!0).length})]}),e.jsx("button",{onClick:l,className:"p-3 text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors",title:"Refresh notifications",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-white",children:p&&p.length>0?e.jsx("div",{className:"divide-y divide-gray-100",children:p.map((w,m)=>{const y=g(w.createdAt),C=(T=>{switch(T){case"NEW_ENQUIRY":return{icon:"",color:"text-red-500",bgColor:"bg-red-50"};case"DOCUMENT_UPLOADED":case"DOCUMENT_VERIFIED":return{icon:"",color:"text-blue-500",bgColor:"bg-blue-50"};case"SHORTLISTED":return{icon:"$",color:"text-green-500",bgColor:"bg-green-50"};case"PAYMENT_APPLIED":return{icon:"",color:"text-purple-500",bgColor:"bg-purple-50"};case"STAFF_ADDED":return{icon:"",color:"text-blue-500",bgColor:"bg-blue-50"};case"LOAN_APPROVED":return{icon:"",color:"text-green-500",bgColor:"bg-green-50"};case"LOAN_REJECTED":return{icon:"",color:"text-red-500",bgColor:"bg-red-50"};default:return{icon:"",color:"text-gray-500",bgColor:"bg-gray-50"}}})(w.type);return e.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:m*.1},className:`p-4 hover:bg-gray-50 cursor-pointer transition-all duration-200 ${w.read?"":"bg-blue-50/30"}`,onClick:()=>A(w),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`flex-shrink-0 w-10 h-10 ${C.bgColor} rounded-full flex items-center justify-center`,children:e.jsx("span",{className:"text-lg",children:C.icon})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:w.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:w.message}),e.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500",children:y.relativeTime}),e.jsx("span",{className:"text-xs text-gray-400",children:""}),e.jsx("span",{className:`text-xs font-medium ${w.type==="NEW_ENQUIRY"?"text-red-600":w.type==="DOCUMENT_UPLOADED"?"text-blue-600":w.type==="SHORTLISTED"?"text-green-600":w.type==="PAYMENT_APPLIED"?"text-purple-600":"text-gray-600"}`,children:w.type.replace("_"," ").toLowerCase().replace(/\b\w/g,T=>T.toUpperCase())})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 ml-4",children:[c==="all"?e.jsx("button",{onClick:T=>x(w.id,T),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Archive notification",children:e.jsx(Wa,{className:"h-4 w-4"})}):e.jsx("button",{onClick:T=>b(w.id,T),className:"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Restore notification",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})}),e.jsx("button",{onClick:T=>j(w.id,T),className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete notification",children:e.jsx(ct,{className:"h-4 w-4"})}),!w.read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full ml-2"})]})]})})]})},w.id)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 p-8",children:[e.jsx("div",{className:"bg-gray-100 rounded-full p-6 mb-6",children:e.jsx(ks,{className:"h-12 w-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:"All caught up!"}),e.jsx("p",{className:"text-sm text-center text-gray-500 mb-6 max-w-xs",children:"No new notifications right now. We'll let you know when something important happens."}),i>0&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4 text-center",children:[e.jsxs("p",{className:"text-sm text-orange-700 font-medium mb-3",children:[" ",i," unread notifications detected but not loaded"]}),e.jsx("button",{onClick:()=>l(),className:"px-4 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg hover:bg-orange-700 transition-colors",children:" Refresh Notifications"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("button",{onClick:async()=>{try{console.log(" Testing staff notification creation...");const w=await F.post("/api/notifications/test/staff-added");console.log(" Staff notification response:",w.data),O.success(` Staff notification created! (${w.data.count} notifications)`),setTimeout(()=>{l()},1e3)}catch(w){console.error(" Staff notification test failed:",w),O.error(`Failed to create staff notification: ${w.response?.data?.message||w.message}`)}},className:"px-3 py-2 bg-blue-600 text-white text-xs font-medium rounded-lg hover:bg-blue-700 transition-colors",children:" Test Staff Notification"}),e.jsx("button",{onClick:async()=>{try{console.log(" Running full deployment test...");const w=await F.post("/api/notifications/test/staff-notification-full");console.log(" Full test response:",w.data),w.data.status==="success"?O.success(` Deployment test passed! Created ${w.data.results.notificationsCreated} notifications`):O.error(` Deployment test failed: ${w.data.message}`),setTimeout(()=>{l()},1e3)}catch(w){console.error(" Deployment test failed:",w),O.error(`Deployment test failed: ${w.response?.data?.message||w.message}`)}},className:"px-3 py-2 bg-green-600 text-white text-xs font-medium rounded-lg hover:bg-green-700 transition-colors",children:" Full Deployment Test"}),e.jsx("button",{onClick:async()=>{try{console.log(" Testing notification system readiness...");const w=await F.get("/api/notifications/test/deployment-ready");console.log(" Deployment readiness:",w.data),w.data.status==="success"?O.success(` System ready for ${w.data.environment.isRender?"Render":w.data.environment.isVercel?"Vercel":"Local"} deployment!`):O.error(` System not ready: ${w.data.message}`),setTimeout(()=>{l()},1e3)}catch(w){console.error(" Deployment readiness test failed:",w),O.error(`Readiness test failed: ${w.response?.data?.message||w.message}`)}},className:"px-3 py-2 bg-purple-600 text-white text-xs font-medium rounded-lg hover:bg-purple-700 transition-colors",children:" Check Deployment Ready"})]})]})})]})]})})},cd=()=>{const[s,t]=u.useState(!1),{unreadCount:a}=bi();return e.jsxs(e.Fragment,{children:[e.jsxs(M.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{console.log(" Notification bell clicked, opening panel..."),t(!0)},className:"relative p-2.5 text-gray-600 hover:text-indigo-600 hover:bg-gradient-to-br hover:from-indigo-50 hover:to-blue-50 rounded-xl transition-all duration-300 shadow-sm hover:shadow-lg border border-transparent hover:border-indigo-100",title:`View Notifications ${a>0?`(${a} unread)`:""}`,children:[e.jsx(ks,{className:"h-6 w-6 transition-transform duration-200"}),a>0&&e.jsx(M.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},className:"absolute -top-1 -right-1 bg-gradient-to-r from-red-500 via-red-600 to-pink-600 text-white text-xs rounded-full min-w-[20px] h-[20px] flex items-center justify-center font-bold shadow-lg border-2 border-white",style:{fontSize:"10px",lineHeight:"1"},children:a>99?"99+":a}),a>0&&e.jsx(M.div,{animate:{scale:[1,1.6,1],opacity:[.8,0,.8]},transition:{repeat:1/0,duration:2.5,ease:"easeInOut"},className:"absolute -top-1 -right-1 bg-gradient-to-r from-red-400 to-pink-400 rounded-full w-[20px] h-[20px]"}),a>0&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-400/20 to-blue-400/20 rounded-xl blur-sm -z-10"})]}),e.jsx(ld,{isOpen:s,onClose:()=>t(!1)})]})},Vs=[{code:"EN",name:"English",nativeName:"English",flag:"",value:"en"},{code:"HI",name:"Hindi",nativeName:"",flag:"",value:"hi"},{code:"TA",name:"Tamil",nativeName:"",flag:"",value:"ta"},{code:"TE",name:"Telugu",nativeName:"",flag:"",value:"te"}],dd=({className:s="",onLanguageChange:t})=>{const{i18n:a}=Ts(),[n,i]=u.useState(!1),[r,o]=u.useState("EN"),l=u.useRef(null);u.useEffect(()=>{const h=Vs.find(f=>f.value===a.language);h&&o(h.code)},[a.language]),u.useEffect(()=>{const h=f=>{l.current&&!l.current.contains(f.target)&&i(!1)};return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[]);const c=async h=>{try{await a.changeLanguage(h.value),o(h.code),i(!1),t?.(h.value),localStorage.setItem("selectedLanguage",h.value)}catch(f){console.error("Error changing language:",f)}},d=Vs.find(h=>h.code===r);return e.jsxs("div",{className:`relative ${s}`,ref:l,children:[e.jsxs("button",{onClick:()=>i(!n),className:"flex items-center space-x-2 px-3 py-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors border border-gray-200 min-w-[100px]","aria-label":"Select Language",children:[e.jsx(kc,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"text-lg",children:d?.flag}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:r}),e.jsx(oc,{className:`h-3 w-3 text-gray-500 transition-transform duration-200 ${n?"rotate-180":""}`})]}),n&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50 max-h-80 overflow-y-auto",children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Select Language"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Choose your preferred language"})]}),Vs.map(h=>e.jsxs("button",{onClick:()=>c(h),className:"w-full flex items-center justify-between px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-xl",children:h.flag}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:h.name}),e.jsx("div",{className:"text-xs text-gray-500",children:h.nativeName})]})]}),r===h.code&&e.jsx(us,{className:"h-4 w-4 text-blue-600"})]},h.code)),e.jsx("div",{className:"px-4 py-2 border-t border-gray-100 mt-2",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Language settings are saved automatically"})})]})]})};function ud({language:s="en",onLanguageChange:t}){const{user:a}=Me(),{t:n,i18n:i}=Ts(),[r,o]=u.useState(!1),[l,c]=u.useState(!1),d=u.useRef(null);u.useEffect(()=>{const f=p=>{d.current&&!d.current.contains(p.target)&&o(!1)};return document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[]);const h=[{id:"profile",name:n("header.profile"),icon:nt},{id:"notifications",name:n("header.notifications"),icon:ks},{id:"security",name:n("header.security"),icon:Dt},{id:"preferences",name:n("header.preferences"),icon:aa}];return e.jsxs(e.Fragment,{children:[e.jsx("header",{ref:d,className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:"/generated-image.png",alt:"Company Logo",className:"h-12 w-12 object-contain drop-shadow-md hover:scale-105 transition-transform duration-200",style:{filter:"contrast(1.8) saturate(1.5) brightness(1.2)",imageRendering:"crisp-edges"}})}),e.jsxs("div",{className:"border-l border-gray-300 pl-4",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900 tracking-tight",children:n("header.title")}),e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:n("header.subtitle")})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(dd,{onLanguageChange:t}),e.jsx(cd,{}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>o(!r),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors border border-gray-200",children:e.jsx(aa,{className:"h-5 w-5"})}),r&&e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-slate-200 py-2 z-50",children:[e.jsx("div",{className:"px-4 py-3 border-b border-slate-100",children:e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:n("header.settings")})}),h.map(f=>{const p=f.icon;return e.jsxs("button",{onClick:()=>{o(!1),c(!0)},className:"w-full flex items-center space-x-3 px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 transition-colors",children:[e.jsx(p,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{className:"font-medium",children:f.name})]},f.id)}),e.jsx("div",{className:"border-t border-slate-100 mt-2 pt-2",children:e.jsxs("button",{className:"w-full flex items-center space-x-3 px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(mi,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"font-medium",children:n("header.logout")})]})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-green-50 rounded-lg border border-green-200 hover:bg-green-100 transition-colors",children:[e.jsx(fi,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-xs font-medium text-green-700",children:n("header.aiAssistant")})]}),e.jsxs("div",{className:"flex items-center space-x-3 px-3 py-2 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-semibold text-white",children:a?.name?.charAt(0)||"A"})}),e.jsxs("div",{className:"hidden sm:block",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:a?.name||"Admin User"}),e.jsx("div",{className:"text-xs text-gray-600",children:a?.role||"Administrator"})]})]})]})]})})}),e.jsx(rd,{isOpen:l,onClose:()=>c(!1)})]})}function md({language:s="en"}){const[t,a]=u.useState(!1),[n,i]=u.useState([]),[r,o]=u.useState(""),[l,c]=u.useState(!1),[d,h]=u.useState("flash"),f=u.useRef(null),{user:p}=Me(),{t:j}=Ts(),x=()=>{f.current?.scrollIntoView({behavior:"smooth"})},b=()=>{const v=p?.role==="ADMIN"?"(Admin Access)":"(Employee Access)";return`Welcome ${p?.name||"there"}!

I can help you with:

 Loan Management & Processing

 Staff Management ${v}

 Analytics & Reports

How can I help you today?`};u.useEffect(()=>{x()},[n]),u.useEffect(()=>{if(t&&n.length===0){const v={id:Date.now().toString(),content:b(),role:"assistant",timestamp:new Date,model:"system"};i([v])}},[t,p,s]);const g=async(v=0)=>{if(!r.trim()||l)return;const C={id:Date.now().toString(),content:r.trim(),role:"user",timestamp:new Date};i(L=>[...L,C]);const T=r.trim();o(""),c(!0);try{const L=await F.post("/api/gemini/chat",{message:T,model:d,context:`User role: ${p?.role}, System: Business Loan Management`,language:s},{timeout:1e4});if(L.data&&L.data.response){const $={id:(Date.now()+1).toString(),content:L.data.response,role:"assistant",timestamp:new Date(L.data.timestamp||new Date),model:L.data.model||"ai-assistant"};i(P=>[...P,$]),n.length<=1&&O.success("AI Assistant connected! ",{duration:1500,icon:""})}else throw new Error("Invalid response format")}catch(L){if(v<2&&(L.code==="NETWORK_ERROR"||L.response?.status>=500)){console.log(` Retrying request (attempt ${v+1})`),setTimeout(()=>{o(T),c(!1),g(v+1)},1e3*(v+1));return}console.log(" Chatbot using backup response system");const $={id:(Date.now()+1).toString(),content:`Hello! I'm your AI assistant for the Business Loan Management System. I'm always here to help you! 

 **I can help you with:**
 **Enquiry Management** - Creating and tracking loan applications
 **Document Handling** - Upload, verification, and management
 **Staff Operations** - ${p?.role==="ADMIN"?"Full admin access and team management":"Employee tasks and permissions"}
 **Dashboard Analytics** - Understanding your business metrics
 **System Navigation** - Finding features and using tools

 **Current System Status:**
 156 total enquiries in pipeline
 14.7% conversion rate (enquiry to disbursement)
 Real-time notifications active
 All features operational

 **Quick Tips:**
 Use the sidebar to navigate between sections
 Check the dashboard for business insights
 Notifications keep you updated on activities
 ${p?.role==="ADMIN"?"Staff management is available in your admin panel":"Contact your admin for access-related questions"}

What would you like to know about? I'm here to guide you through any feature or process! `,role:"assistant",timestamp:new Date,model:"ai-assistant"};i(P=>[...P,$]),O.success("AI Assistant ready to help! ",{duration:2e3,icon:""})}finally{c(!1)}},A=v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),g())},w=()=>{i([])},m=v=>{switch(v){case"gemini-2.0-flash-exp":return e.jsx(Gc,{className:"h-3 w-3 text-yellow-500"});case"gemini-1.5-pro":return e.jsx(hc,{className:"h-3 w-3 text-purple-500"});default:return e.jsx($s,{className:"h-3 w-3 text-green-500"})}},y=v=>{switch(v){case"gemini-2.0-flash-exp":return"Flash";case"gemini-1.5-pro":return"Pro";case"smart":return"Smart";default:return"AI"}};return e.jsxs(e.Fragment,{children:[e.jsx(M.button,{onClick:()=>a(!t),className:`fixed bottom-6 right-6 z-50 w-14 h-14 rounded-full shadow-lg flex items-center justify-center transition-all duration-300 ${t?"bg-red-500 hover:bg-red-600":"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700"}`,whileHover:{scale:1.1},whileTap:{scale:.9},initial:{scale:0},animate:{scale:1},transition:{delay:1},children:t?e.jsx(_e,{className:"h-6 w-6 text-white"}):e.jsx(fi,{className:"h-6 w-6 text-white"})}),e.jsx(bs,{children:t&&e.jsxs(M.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.2},className:"fixed bottom-24 right-6 z-40 w-96 h-[500px] bg-white rounded-2xl shadow-2xl border border-gray-200 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center mb-8 backdrop-blur-sm",children:e.jsx($s,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:j("chatbot.title")}),e.jsx("p",{className:"text-xs text-green-100",children:j("chatbot.subtitle")})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:d,onChange:v=>h(v.target.value),className:"text-xs bg-white bg-opacity-20 text-white border border-white border-opacity-30 rounded px-2 py-1 focus:outline-none",children:[e.jsx("option",{value:"smart",className:"text-gray-900",children:j("chatbot.models.smart")}),e.jsx("option",{value:"flash",className:"text-gray-900",children:j("chatbot.models.flash")}),e.jsx("option",{value:"pro",className:"text-gray-900",children:j("chatbot.models.pro")})]}),e.jsx("button",{onClick:w,className:"text-white hover:text-green-200 transition-colors",title:"Clear chat",children:e.jsx(_e,{className:"h-4 w-4"})})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[n.map(v=>e.jsxs(M.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex ${v.role==="user"?"justify-end":"justify-start"}`,children:[e.jsxs("div",{className:`max-w-[80%] ${v.role==="user"?"order-2":"order-1"}`,children:[e.jsxs("div",{className:`rounded-2xl px-4 py-2 ${v.role==="user"?"bg-green-500 text-white":"bg-white text-gray-800 shadow-sm border"}`,children:[e.jsx("div",{className:"whitespace-pre-wrap text-sm",children:v.content}),v.model&&v.model!=="system"&&v.model!=="error"&&e.jsxs("div",{className:"flex items-center justify-end mt-1 space-x-1",children:[m(v.model),e.jsx("span",{className:"text-xs opacity-70",children:y(v.model)})]})]}),e.jsx("div",{className:`text-xs text-gray-500 mt-1 ${v.role==="user"?"text-right":"text-left"}`,children:v.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${v.role==="user"?"order-1 ml-2":"order-2 mr-2"}`,children:v.role==="user"?e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(nt,{className:"h-4 w-4 text-white"})}):e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:e.jsx($s,{className:"h-4 w-4 text-white"})})})]},v.id)),l&&e.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start",children:e.jsxs("div",{className:"flex items-center space-x-2 bg-white rounded-2xl px-4 py-2 shadow-sm border",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsx("span",{className:"text-sm text-gray-500",children:j("chatbot.thinking")})]})}),e.jsx("div",{ref:f})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-white",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("textarea",{value:r,onChange:v=>o(v.target.value),onKeyPress:A,placeholder:j("chatbot.placeholder"),className:"flex-1 resize-none border border-gray-300 rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm max-h-20",rows:1,disabled:l}),e.jsx("button",{onClick:()=>g(),disabled:!r.trim()||l,className:"w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl flex items-center justify-center hover:from-green-600 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:e.jsx(Uc,{className:"h-4 w-4"})})]})})]})})]})}const hd=()=>{const[s,t]=u.useState("desktop");return u.useEffect(()=>{const a=()=>{const n=window.innerWidth;n<768?t("mobile"):n<1024?t("tablet"):t("desktop")};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),s};function fd({children:s}){const a=hd()==="mobile",[n,i]=u.useState("en");return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[e.jsxs("div",{className:"flex",children:[!a&&e.jsx(nd,{}),e.jsxs("div",{className:`flex-1 ${a?"":"ml-72"}`,children:[e.jsx(ud,{language:n,onLanguageChange:i}),e.jsx("main",{className:"p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:s})})]})]}),e.jsx(md,{language:n})]})}var Kt=s=>s.type==="checkbox",ht=s=>s instanceof Date,Te=s=>s==null;const Ni=s=>typeof s=="object";var be=s=>!Te(s)&&!Array.isArray(s)&&Ni(s)&&!ht(s),pd=s=>be(s)&&s.target?Kt(s.target)?s.target.checked:s.target.value:s,xd=s=>s.substring(0,s.search(/\.\d+(\.|$)/))||s,gd=(s,t)=>s.has(xd(t)),yd=s=>{const t=s.constructor&&s.constructor.prototype;return be(t)&&t.hasOwnProperty("isPrototypeOf")},fa=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function we(s){let t;const a=Array.isArray(s),n=typeof FileList<"u"?s instanceof FileList:!1;if(s instanceof Date)t=new Date(s);else if(!(fa&&(s instanceof Blob||n))&&(a||be(s)))if(t=a?[]:Object.create(Object.getPrototypeOf(s)),!a&&!yd(s))t=s;else for(const i in s)s.hasOwnProperty(i)&&(t[i]=we(s[i]));else return s;return t}var Cs=s=>/^\w*$/.test(s),ye=s=>s===void 0,pa=s=>Array.isArray(s)?s.filter(Boolean):[],xa=s=>pa(s.replace(/["|']|\]/g,"").split(/\.|\[/)),V=(s,t,a)=>{if(!t||!be(s))return a;const n=(Cs(t)?[t]:xa(t)).reduce((i,r)=>Te(i)?i:i[r],s);return ye(n)||n===s?ye(s[t])?a:s[t]:n},Qe=s=>typeof s=="boolean",me=(s,t,a)=>{let n=-1;const i=Cs(t)?[t]:xa(t),r=i.length,o=r-1;for(;++n<r;){const l=i[n];let c=a;if(n!==o){const d=s[l];c=be(d)||Array.isArray(d)?d:isNaN(+i[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;s[l]=c,s=s[l]}};const Ga={BLUR:"blur",FOCUS_OUT:"focusout"},$e={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Xe={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},wi=fe.createContext(null);wi.displayName="HookFormContext";const bd=()=>fe.useContext(wi);var Nd=(s,t,a,n=!0)=>{const i={defaultValues:t._defaultValues};for(const r in s)Object.defineProperty(i,r,{get:()=>{const o=r;return t._proxyFormState[o]!==$e.all&&(t._proxyFormState[o]=!n||$e.all),s[o]}});return i};const vi=typeof window<"u"?fe.useLayoutEffect:fe.useEffect;var Pe=s=>typeof s=="string",ji=(s,t,a,n,i)=>Pe(s)?(n&&t.watch.add(s),V(a,s,i)):Array.isArray(s)?s.map(r=>(n&&t.watch.add(r),V(a,r))):(n&&(t.watchAll=!0),a),na=s=>Te(s)||!Ni(s);function tt(s,t,a=new WeakSet){if(na(s)||na(t))return s===t;if(ht(s)&&ht(t))return s.getTime()===t.getTime();const n=Object.keys(s),i=Object.keys(t);if(n.length!==i.length)return!1;if(a.has(s)||a.has(t))return!0;a.add(s),a.add(t);for(const r of n){const o=s[r];if(!i.includes(r))return!1;if(r!=="ref"){const l=t[r];if(ht(o)&&ht(l)||be(o)&&be(l)||Array.isArray(o)&&Array.isArray(l)?!tt(o,l,a):o!==l)return!1}}return!0}function It(s){const t=bd(),{control:a=t.control,name:n,defaultValue:i,disabled:r,exact:o,compute:l}=s||{},c=fe.useRef(i),d=fe.useRef(l),h=fe.useRef(void 0);d.current=l;const f=fe.useMemo(()=>a._getWatch(n,c.current),[a,n]),[p,j]=fe.useState(d.current?d.current(f):f);return vi(()=>a._subscribe({name:n,formState:{values:!0},exact:o,callback:x=>{if(!r){const b=ji(n,a._names,x.values||a._formValues,!1,c.current);if(d.current){const g=d.current(b);tt(g,h.current)||(j(g),h.current=g)}else j(b)}}}),[a,r,n,o]),fe.useEffect(()=>a._removeUnmounted()),p}var wd=(s,t,a,n,i)=>t?{...a[s],types:{...a[s]&&a[s].types?a[s].types:{},[n]:i||!0}}:{},Ft=s=>Array.isArray(s)?s:[s],Za=()=>{let s=[];return{get observers(){return s},next:i=>{for(const r of s)r.next&&r.next(i)},subscribe:i=>(s.push(i),{unsubscribe:()=>{s=s.filter(r=>r!==i)}}),unsubscribe:()=>{s=[]}}};function Si(s,t){const a={};for(const n in s)if(s.hasOwnProperty(n)){const i=s[n],r=t[n];if(i&&be(i)&&r){const o=Si(i,r);be(o)&&(a[n]=o)}else s[n]&&(a[n]=r)}return a}var Ce=s=>be(s)&&!Object.keys(s).length,ga=s=>s.type==="file",Ue=s=>typeof s=="function",hs=s=>{if(!fa)return!1;const t=s?s.ownerDocument:0;return s instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Ei=s=>s.type==="select-multiple",ya=s=>s.type==="radio",vd=s=>ya(s)||Kt(s),Bs=s=>hs(s)&&s.isConnected;function jd(s,t){const a=t.slice(0,-1).length;let n=0;for(;n<a;)s=ye(s)?n++:s[t[n++]];return s}function Sd(s){for(const t in s)if(s.hasOwnProperty(t)&&!ye(s[t]))return!1;return!0}function ge(s,t){const a=Array.isArray(t)?t:Cs(t)?[t]:xa(t),n=a.length===1?s:jd(s,a),i=a.length-1,r=a[i];return n&&delete n[r],i!==0&&(be(n)&&Ce(n)||Array.isArray(n)&&Sd(n))&&ge(s,a.slice(0,-1)),s}var Ed=s=>{for(const t in s)if(Ue(s[t]))return!0;return!1};function Ai(s){return Array.isArray(s)||be(s)&&!Ed(s)}function ia(s,t={}){for(const a in s)Ai(s[a])?(t[a]=Array.isArray(s[a])?[]:{},ia(s[a],t[a])):Te(s[a])||(t[a]=!0);return t}function jt(s,t,a){a||(a=ia(t));for(const n in s)Ai(s[n])?ye(t)||na(a[n])?a[n]=ia(s[n],Array.isArray(s[n])?[]:{}):jt(s[n],Te(t)?{}:t[n],a[n]):a[n]=!tt(s[n],t[n]);return a}const Ka={value:!1,isValid:!1},za={value:!0,isValid:!0};var Di=s=>{if(Array.isArray(s)){if(s.length>1){const t=s.filter(a=>a&&a.checked&&!a.disabled).map(a=>a.value);return{value:t,isValid:!!t.length}}return s[0].checked&&!s[0].disabled?s[0].attributes&&!ye(s[0].attributes.value)?ye(s[0].value)||s[0].value===""?za:{value:s[0].value,isValid:!0}:za:Ka}return Ka},Ti=(s,{valueAsNumber:t,valueAsDate:a,setValueAs:n})=>ye(s)?s:t?s===""?NaN:s&&+s:a&&Pe(s)?new Date(s):n?n(s):s;const Ya={isValid:!1,value:null};var ki=s=>Array.isArray(s)?s.reduce((t,a)=>a&&a.checked&&!a.disabled?{isValid:!0,value:a.value}:t,Ya):Ya;function Ja(s){const t=s.ref;return ga(t)?t.files:ya(t)?ki(s.refs).value:Ei(t)?[...t.selectedOptions].map(({value:a})=>a):Kt(t)?Di(s.refs).value:Ti(ye(t.value)?s.ref.value:t.value,s)}var Ad=(s,t,a,n)=>{const i={};for(const r of s){const o=V(t,r);o&&me(i,r,o._f)}return{criteriaMode:a,names:[...s],fields:i,shouldUseNativeValidation:n}},fs=s=>s instanceof RegExp,Pt=s=>ye(s)?s:fs(s)?s.source:be(s)?fs(s.value)?s.value.source:s.value:s,Xa=s=>({isOnSubmit:!s||s===$e.onSubmit,isOnBlur:s===$e.onBlur,isOnChange:s===$e.onChange,isOnAll:s===$e.all,isOnTouch:s===$e.onTouched});const en="AsyncFunction";var Dd=s=>!!s&&!!s.validate&&!!(Ue(s.validate)&&s.validate.constructor.name===en||be(s.validate)&&Object.values(s.validate).find(t=>t.constructor.name===en)),Td=s=>s.mount&&(s.required||s.min||s.max||s.maxLength||s.minLength||s.pattern||s.validate),tn=(s,t,a)=>!a&&(t.watchAll||t.watch.has(s)||[...t.watch].some(n=>s.startsWith(n)&&/^\.\w+/.test(s.slice(n.length))));const $t=(s,t,a,n)=>{for(const i of a||Object.keys(s)){const r=V(s,i);if(r){const{_f:o,...l}=r;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],i)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if($t(l,t))break}else if(be(l)&&$t(l,t))break}}};function sn(s,t,a){const n=V(s,a);if(n||Cs(a))return{error:n,name:a};const i=a.split(".");for(;i.length;){const r=i.join("."),o=V(t,r),l=V(s,r);if(o&&!Array.isArray(o)&&a!==r)return{name:a};if(l&&l.type)return{name:r,error:l};if(l&&l.root&&l.root.type)return{name:`${r}.root`,error:l.root};i.pop()}return{name:a}}var kd=(s,t,a,n)=>{a(s);const{name:i,...r}=s;return Ce(r)||Object.keys(r).length>=Object.keys(t).length||Object.keys(r).find(o=>t[o]===(!n||$e.all))},Cd=(s,t,a)=>!s||!t||s===t||Ft(s).some(n=>n&&(a?n===t:n.startsWith(t)||t.startsWith(n))),Rd=(s,t,a,n,i)=>i.isOnAll?!1:!a&&i.isOnTouch?!(t||s):(a?n.isOnBlur:i.isOnBlur)?!s:(a?n.isOnChange:i.isOnChange)?s:!0,Ld=(s,t)=>!pa(V(s,t)).length&&ge(s,t),Od=(s,t,a)=>{const n=Ft(V(s,a));return me(n,"root",t[a]),me(s,a,n),s};function an(s,t,a="validate"){if(Pe(s)||Array.isArray(s)&&s.every(Pe)||Qe(s)&&!s)return{type:a,message:Pe(s)?s:"",ref:t}}var bt=s=>be(s)&&!fs(s)?s:{value:s,message:""},nn=async(s,t,a,n,i,r)=>{const{ref:o,refs:l,required:c,maxLength:d,minLength:h,min:f,max:p,pattern:j,validate:x,name:b,valueAsNumber:g,mount:A}=s._f,w=V(a,b);if(!A||t.has(b))return{};const m=l?l[0]:o,y=Q=>{i&&m.reportValidity&&(m.setCustomValidity(Qe(Q)?"":Q||""),m.reportValidity())},v={},C=ya(o),T=Kt(o),L=C||T,$=(g||ga(o))&&ye(o.value)&&ye(w)||hs(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,P=wd.bind(null,b,n,v),Z=(Q,H,G,ae=Xe.maxLength,Y=Xe.minLength)=>{const J=Q?H:G;v[b]={type:Q?ae:Y,message:J,ref:o,...P(Q?ae:Y,J)}};if(r?!Array.isArray(w)||!w.length:c&&(!L&&($||Te(w))||Qe(w)&&!w||T&&!Di(l).isValid||C&&!ki(l).isValid)){const{value:Q,message:H}=Pe(c)?{value:!!c,message:c}:bt(c);if(Q&&(v[b]={type:Xe.required,message:H,ref:m,...P(Xe.required,H)},!n))return y(H),v}if(!$&&(!Te(f)||!Te(p))){let Q,H;const G=bt(p),ae=bt(f);if(!Te(w)&&!isNaN(w)){const Y=o.valueAsNumber||w&&+w;Te(G.value)||(Q=Y>G.value),Te(ae.value)||(H=Y<ae.value)}else{const Y=o.valueAsDate||new Date(w),J=Ne=>new Date(new Date().toDateString()+" "+Ne),ee=o.type=="time",de=o.type=="week";Pe(G.value)&&w&&(Q=ee?J(w)>J(G.value):de?w>G.value:Y>new Date(G.value)),Pe(ae.value)&&w&&(H=ee?J(w)<J(ae.value):de?w<ae.value:Y<new Date(ae.value))}if((Q||H)&&(Z(!!Q,G.message,ae.message,Xe.max,Xe.min),!n))return y(v[b].message),v}if((d||h)&&!$&&(Pe(w)||r&&Array.isArray(w))){const Q=bt(d),H=bt(h),G=!Te(Q.value)&&w.length>+Q.value,ae=!Te(H.value)&&w.length<+H.value;if((G||ae)&&(Z(G,Q.message,H.message),!n))return y(v[b].message),v}if(j&&!$&&Pe(w)){const{value:Q,message:H}=bt(j);if(fs(Q)&&!w.match(Q)&&(v[b]={type:Xe.pattern,message:H,ref:o,...P(Xe.pattern,H)},!n))return y(H),v}if(x){if(Ue(x)){const Q=await x(w,a),H=an(Q,m);if(H&&(v[b]={...H,...P(Xe.validate,H.message)},!n))return y(H.message),v}else if(be(x)){let Q={};for(const H in x){if(!Ce(Q)&&!n)break;const G=an(await x[H](w,a),m,H);G&&(Q={...G,...P(H,G.message)},y(G.message),n&&(v[b]=Q))}if(!Ce(Q)&&(v[b]={ref:m,...Q},!n))return v}}return y(!0),v};const Id={mode:$e.onSubmit,reValidateMode:$e.onChange,shouldFocusError:!0};function Pd(s={}){let t={...Id,...s},a={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ue(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},i=be(t.defaultValues)||be(t.values)?we(t.defaultValues||t.values)||{}:{},r=t.shouldUnregister?{}:we(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,d=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...h};const p={array:Za(),state:Za()},j=t.criteriaMode===$e.all,x=S=>E=>{clearTimeout(d),d=setTimeout(S,E)},b=async S=>{if(!t.disabled&&(h.isValid||f.isValid||S)){const E=t.resolver?Ce((await T()).errors):await $(n,!0);E!==a.isValid&&p.state.next({isValid:E})}},g=(S,E)=>{!t.disabled&&(h.isValidating||h.validatingFields||f.isValidating||f.validatingFields)&&((S||Array.from(l.mount)).forEach(R=>{R&&(E?me(a.validatingFields,R,E):ge(a.validatingFields,R))}),p.state.next({validatingFields:a.validatingFields,isValidating:!Ce(a.validatingFields)}))},A=(S,E=[],R,_,U=!0,q=!0)=>{if(_&&R&&!t.disabled){if(o.action=!0,q&&Array.isArray(V(n,S))){const W=R(V(n,S),_.argA,_.argB);U&&me(n,S,W)}if(q&&Array.isArray(V(a.errors,S))){const W=R(V(a.errors,S),_.argA,_.argB);U&&me(a.errors,S,W),Ld(a.errors,S)}if((h.touchedFields||f.touchedFields)&&q&&Array.isArray(V(a.touchedFields,S))){const W=R(V(a.touchedFields,S),_.argA,_.argB);U&&me(a.touchedFields,S,W)}(h.dirtyFields||f.dirtyFields)&&(a.dirtyFields=jt(i,r)),p.state.next({name:S,isDirty:Z(S,E),dirtyFields:a.dirtyFields,errors:a.errors,isValid:a.isValid})}else me(r,S,E)},w=(S,E)=>{me(a.errors,S,E),p.state.next({errors:a.errors})},m=S=>{a.errors=S,p.state.next({errors:a.errors,isValid:!1})},y=(S,E,R,_)=>{const U=V(n,S);if(U){const q=V(r,S,ye(R)?V(i,S):R);ye(q)||_&&_.defaultChecked||E?me(r,S,E?q:Ja(U._f)):G(S,q),o.mount&&b()}},v=(S,E,R,_,U)=>{let q=!1,W=!1;const ne={name:S};if(!t.disabled){if(!R||_){(h.isDirty||f.isDirty)&&(W=a.isDirty,a.isDirty=ne.isDirty=Z(),q=W!==ne.isDirty);const oe=tt(V(i,S),E);W=!!V(a.dirtyFields,S),oe?ge(a.dirtyFields,S):me(a.dirtyFields,S,!0),ne.dirtyFields=a.dirtyFields,q=q||(h.dirtyFields||f.dirtyFields)&&W!==!oe}if(R){const oe=V(a.touchedFields,S);oe||(me(a.touchedFields,S,R),ne.touchedFields=a.touchedFields,q=q||(h.touchedFields||f.touchedFields)&&oe!==R)}q&&U&&p.state.next(ne)}return q?ne:{}},C=(S,E,R,_)=>{const U=V(a.errors,S),q=(h.isValid||f.isValid)&&Qe(E)&&a.isValid!==E;if(t.delayError&&R?(c=x(()=>w(S,R)),c(t.delayError)):(clearTimeout(d),c=null,R?me(a.errors,S,R):ge(a.errors,S)),(R?!tt(U,R):U)||!Ce(_)||q){const W={..._,...q&&Qe(E)?{isValid:E}:{},errors:a.errors,name:S};a={...a,...W},p.state.next(W)}},T=async S=>{g(S,!0);const E=await t.resolver(r,t.context,Ad(S||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return g(S),E},L=async S=>{const{errors:E}=await T(S);if(S)for(const R of S){const _=V(E,R);_?me(a.errors,R,_):ge(a.errors,R)}else a.errors=E;return E},$=async(S,E,R={valid:!0})=>{for(const _ in S){const U=S[_];if(U){const{_f:q,...W}=U;if(q){const ne=l.array.has(q.name),oe=U._f&&Dd(U._f);oe&&h.validatingFields&&g([q.name],!0);const qe=await nn(U,l.disabled,r,j,t.shouldUseNativeValidation&&!E,ne);if(oe&&h.validatingFields&&g([q.name]),qe[q.name]&&(R.valid=!1,E))break;!E&&(V(qe,q.name)?ne?Od(a.errors,qe,q.name):me(a.errors,q.name,qe[q.name]):ge(a.errors,q.name))}!Ce(W)&&await $(W,E,R)}}return R.valid},P=()=>{for(const S of l.unMount){const E=V(n,S);E&&(E._f.refs?E._f.refs.every(R=>!Bs(R)):!Bs(E._f.ref))&&He(S)}l.unMount=new Set},Z=(S,E)=>!t.disabled&&(S&&E&&me(r,S,E),!tt(Ne(),i)),Q=(S,E,R)=>ji(S,l,{...o.mount?r:ye(E)?i:Pe(S)?{[S]:E}:E},R,E),H=S=>pa(V(o.mount?r:i,S,t.shouldUnregister?V(i,S,[]):[])),G=(S,E,R={})=>{const _=V(n,S);let U=E;if(_){const q=_._f;q&&(!q.disabled&&me(r,S,Ti(E,q)),U=hs(q.ref)&&Te(E)?"":E,Ei(q.ref)?[...q.ref.options].forEach(W=>W.selected=U.includes(W.value)):q.refs?Kt(q.ref)?q.refs.forEach(W=>{(!W.defaultChecked||!W.disabled)&&(Array.isArray(U)?W.checked=!!U.find(ne=>ne===W.value):W.checked=U===W.value||!!U)}):q.refs.forEach(W=>W.checked=W.value===U):ga(q.ref)?q.ref.value="":(q.ref.value=U,q.ref.type||p.state.next({name:S,values:we(r)})))}(R.shouldDirty||R.shouldTouch)&&v(S,U,R.shouldTouch,R.shouldDirty,!0),R.shouldValidate&&de(S)},ae=(S,E,R)=>{for(const _ in E){if(!E.hasOwnProperty(_))return;const U=E[_],q=S+"."+_,W=V(n,q);(l.array.has(S)||be(U)||W&&!W._f)&&!ht(U)?ae(q,U,R):G(q,U,R)}},Y=(S,E,R={})=>{const _=V(n,S),U=l.array.has(S),q=we(E);me(r,S,q),U?(p.array.next({name:S,values:we(r)}),(h.isDirty||h.dirtyFields||f.isDirty||f.dirtyFields)&&R.shouldDirty&&p.state.next({name:S,dirtyFields:jt(i,r),isDirty:Z(S,q)})):_&&!_._f&&!Te(q)?ae(S,q,R):G(S,q,R),tn(S,l)&&p.state.next({...a,name:S}),p.state.next({name:o.mount?S:void 0,values:we(r)})},J=async S=>{o.mount=!0;const E=S.target;let R=E.name,_=!0;const U=V(n,R),q=oe=>{_=Number.isNaN(oe)||ht(oe)&&isNaN(oe.getTime())||tt(oe,V(r,R,oe))},W=Xa(t.mode),ne=Xa(t.reValidateMode);if(U){let oe,qe;const zt=E.type?Ja(U._f):pd(S),rt=S.type===Ga.BLUR||S.type===Ga.FOCUS_OUT,Ui=!Td(U._f)&&!t.resolver&&!V(a.errors,R)&&!U._f.deps||Rd(rt,V(a.touchedFields,R),a.isSubmitted,ne,W),Ls=tn(R,l,rt);me(r,R,zt),rt?(!E||!E.readOnly)&&(U._f.onBlur&&U._f.onBlur(S),c&&c(0)):U._f.onChange&&U._f.onChange(S);const Os=v(R,zt,rt),_i=!Ce(Os)||Ls;if(!rt&&p.state.next({name:R,type:S.type,values:we(r)}),Ui)return(h.isValid||f.isValid)&&(t.mode==="onBlur"?rt&&b():rt||b()),_i&&p.state.next({name:R,...Ls?{}:Os});if(!rt&&Ls&&p.state.next({...a}),t.resolver){const{errors:Na}=await T([R]);if(q(zt),_){const Vi=sn(a.errors,n,R),wa=sn(Na,n,Vi.name||R);oe=wa.error,R=wa.name,qe=Ce(Na)}}else g([R],!0),oe=(await nn(U,l.disabled,r,j,t.shouldUseNativeValidation))[R],g([R]),q(zt),_&&(oe?qe=!1:(h.isValid||f.isValid)&&(qe=await $(n,!0)));_&&(U._f.deps&&(!Array.isArray(U._f.deps)||U._f.deps.length>0)&&de(U._f.deps),C(R,qe,oe,Os))}},ee=(S,E)=>{if(V(a.errors,E)&&S.focus)return S.focus(),1},de=async(S,E={})=>{let R,_;const U=Ft(S);if(t.resolver){const q=await L(ye(S)?S:U);R=Ce(q),_=S?!U.some(W=>V(q,W)):R}else S?(_=(await Promise.all(U.map(async q=>{const W=V(n,q);return await $(W&&W._f?{[q]:W}:W)}))).every(Boolean),!(!_&&!a.isValid)&&b()):_=R=await $(n);return p.state.next({...!Pe(S)||(h.isValid||f.isValid)&&R!==a.isValid?{}:{name:S},...t.resolver||!S?{isValid:R}:{},errors:a.errors}),E.shouldFocus&&!_&&$t(n,ee,S?U:l.mount),_},Ne=(S,E)=>{let R={...o.mount?r:i};return E&&(R=Si(E.dirtyFields?a.dirtyFields:a.touchedFields,R)),ye(S)?R:Pe(S)?V(R,S):S.map(_=>V(R,_))},se=(S,E)=>({invalid:!!V((E||a).errors,S),isDirty:!!V((E||a).dirtyFields,S),error:V((E||a).errors,S),isValidating:!!V(a.validatingFields,S),isTouched:!!V((E||a).touchedFields,S)}),xe=S=>{S&&Ft(S).forEach(E=>ge(a.errors,E)),p.state.next({errors:S?a.errors:{}})},ie=(S,E,R)=>{const _=(V(n,S,{_f:{}})._f||{}).ref,U=V(a.errors,S)||{},{ref:q,message:W,type:ne,...oe}=U;me(a.errors,S,{...oe,...E,ref:_}),p.state.next({name:S,errors:a.errors,isValid:!1}),R&&R.shouldFocus&&_&&_.focus&&_.focus()},he=(S,E)=>Ue(S)?p.state.subscribe({next:R=>"values"in R&&S(Q(void 0,E),R)}):Q(S,E,!0),ke=S=>p.state.subscribe({next:E=>{Cd(S.name,E.name,S.exact)&&kd(E,S.formState||h,Rt,S.reRenderRoot)&&S.callback({values:{...r},...a,...E,defaultValues:i})}}).unsubscribe,it=S=>(o.mount=!0,f={...f,...S.formState},ke({...S,formState:f})),He=(S,E={})=>{for(const R of S?Ft(S):l.mount)l.mount.delete(R),l.array.delete(R),E.keepValue||(ge(n,R),ge(r,R)),!E.keepError&&ge(a.errors,R),!E.keepDirty&&ge(a.dirtyFields,R),!E.keepTouched&&ge(a.touchedFields,R),!E.keepIsValidating&&ge(a.validatingFields,R),!t.shouldUnregister&&!E.keepDefaultValue&&ge(i,R);p.state.next({values:we(r)}),p.state.next({...a,...E.keepDirty?{isDirty:Z()}:{}}),!E.keepIsValid&&b()},ze=({disabled:S,name:E})=>{(Qe(S)&&o.mount||S||l.disabled.has(E))&&(S?l.disabled.add(E):l.disabled.delete(E))},Ye=(S,E={})=>{let R=V(n,S);const _=Qe(E.disabled)||Qe(t.disabled);return me(n,S,{...R||{},_f:{...R&&R._f?R._f:{ref:{name:S}},name:S,mount:!0,...E}}),l.mount.add(S),R?ze({disabled:Qe(E.disabled)?E.disabled:t.disabled,name:S}):y(S,!0,E.value),{..._?{disabled:E.disabled||t.disabled}:{},...t.progressive?{required:!!E.required,min:Pt(E.min),max:Pt(E.max),minLength:Pt(E.minLength),maxLength:Pt(E.maxLength),pattern:Pt(E.pattern)}:{},name:S,onChange:J,onBlur:J,ref:U=>{if(U){Ye(S,E),R=V(n,S);const q=ye(U.value)&&U.querySelectorAll&&U.querySelectorAll("input,select,textarea")[0]||U,W=vd(q),ne=R._f.refs||[];if(W?ne.find(oe=>oe===q):q===R._f.ref)return;me(n,S,{_f:{...R._f,...W?{refs:[...ne.filter(Bs),q,...Array.isArray(V(i,S))?[{}]:[]],ref:{type:q.type,name:S}}:{ref:q}}}),y(S,!1,void 0,q)}else R=V(n,S,{}),R._f&&(R._f.mount=!1),(t.shouldUnregister||E.shouldUnregister)&&!(gd(l.array,S)&&o.action)&&l.unMount.add(S)}}},k=()=>t.shouldFocusError&&$t(n,ee,l.mount),X=S=>{Qe(S)&&(p.state.next({disabled:S}),$t(n,(E,R)=>{const _=V(n,R);_&&(E.disabled=_._f.disabled||S,Array.isArray(_._f.refs)&&_._f.refs.forEach(U=>{U.disabled=_._f.disabled||S}))},0,!1))},N=(S,E)=>async R=>{let _;R&&(R.preventDefault&&R.preventDefault(),R.persist&&R.persist());let U=we(r);if(p.state.next({isSubmitting:!0}),t.resolver){const{errors:q,values:W}=await T();a.errors=q,U=we(W)}else await $(n);if(l.disabled.size)for(const q of l.disabled)ge(U,q);if(ge(a.errors,"root"),Ce(a.errors)){p.state.next({errors:{}});try{await S(U,R)}catch(q){_=q}}else E&&await E({...a.errors},R),k(),setTimeout(k);if(p.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Ce(a.errors)&&!_,submitCount:a.submitCount+1,errors:a.errors}),_)throw _},I=(S,E={})=>{V(n,S)&&(ye(E.defaultValue)?Y(S,we(V(i,S))):(Y(S,E.defaultValue),me(i,S,we(E.defaultValue))),E.keepTouched||ge(a.touchedFields,S),E.keepDirty||(ge(a.dirtyFields,S),a.isDirty=E.defaultValue?Z(S,we(V(i,S))):Z()),E.keepError||(ge(a.errors,S),h.isValid&&b()),p.state.next({...a}))},B=(S,E={})=>{const R=S?we(S):i,_=we(R),U=Ce(S),q=U?i:_;if(E.keepDefaultValues||(i=R),!E.keepValues){if(E.keepDirtyValues){const W=new Set([...l.mount,...Object.keys(jt(i,r))]);for(const ne of Array.from(W))V(a.dirtyFields,ne)?me(q,ne,V(r,ne)):Y(ne,V(q,ne))}else{if(fa&&ye(S))for(const W of l.mount){const ne=V(n,W);if(ne&&ne._f){const oe=Array.isArray(ne._f.refs)?ne._f.refs[0]:ne._f.ref;if(hs(oe)){const qe=oe.closest("form");if(qe){qe.reset();break}}}}if(E.keepFieldsRef)for(const W of l.mount)Y(W,V(q,W));else n={}}r=t.shouldUnregister?E.keepDefaultValues?we(i):{}:we(q),p.array.next({values:{...q}}),p.state.next({values:{...q}})}l={mount:E.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!E.keepIsValid||!!E.keepDirtyValues,o.watch=!!t.shouldUnregister,p.state.next({submitCount:E.keepSubmitCount?a.submitCount:0,isDirty:U?!1:E.keepDirty?a.isDirty:!!(E.keepDefaultValues&&!tt(S,i)),isSubmitted:E.keepIsSubmitted?a.isSubmitted:!1,dirtyFields:U?{}:E.keepDirtyValues?E.keepDefaultValues&&r?jt(i,r):a.dirtyFields:E.keepDefaultValues&&S?jt(i,S):E.keepDirty?a.dirtyFields:{},touchedFields:E.keepTouched?a.touchedFields:{},errors:E.keepErrors?a.errors:{},isSubmitSuccessful:E.keepIsSubmitSuccessful?a.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},te=(S,E)=>B(Ue(S)?S(r):S,E),ve=(S,E={})=>{const R=V(n,S),_=R&&R._f;if(_){const U=_.refs?_.refs[0]:_.ref;U.focus&&(U.focus(),E.shouldSelect&&Ue(U.select)&&U.select())}},Rt=S=>{a={...a,...S}},ba={control:{register:Ye,unregister:He,getFieldState:se,handleSubmit:N,setError:ie,_subscribe:ke,_runSchema:T,_focusError:k,_getWatch:Q,_getDirty:Z,_setValid:b,_setFieldArray:A,_setDisabledField:ze,_setErrors:m,_getFieldArray:H,_reset:B,_resetDefaultValues:()=>Ue(t.defaultValues)&&t.defaultValues().then(S=>{te(S,t.resetOptions),p.state.next({isLoading:!1})}),_removeUnmounted:P,_disableForm:X,_subjects:p,_proxyFormState:h,get _fields(){return n},get _formValues(){return r},get _state(){return o},set _state(S){o=S},get _defaultValues(){return i},get _names(){return l},set _names(S){l=S},get _formState(){return a},get _options(){return t},set _options(S){t={...t,...S}}},subscribe:it,trigger:de,register:Ye,handleSubmit:N,watch:he,setValue:Y,getValues:Ne,reset:te,resetField:I,clearErrors:xe,unregister:He,setError:ie,setFocus:ve,getFieldState:se};return{...ba,formControl:ba}}function Ct(s={}){const t=fe.useRef(void 0),a=fe.useRef(void 0),[n,i]=fe.useState({isDirty:!1,isValidating:!1,isLoading:Ue(s.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1,isReady:!1,defaultValues:Ue(s.defaultValues)?void 0:s.defaultValues});if(!t.current)if(s.formControl)t.current={...s.formControl,formState:n},s.defaultValues&&!Ue(s.defaultValues)&&s.formControl.reset(s.defaultValues,s.resetOptions);else{const{formControl:o,...l}=Pd(s);t.current={...l,formState:n}}const r=t.current.control;return r._options=s,vi(()=>{const o=r._subscribe({formState:r._proxyFormState,callback:()=>i({...r._formState}),reRenderRoot:!0});return i(l=>({...l,isReady:!0})),r._formState.isReady=!0,o},[r]),fe.useEffect(()=>r._disableForm(s.disabled),[r,s.disabled]),fe.useEffect(()=>{s.mode&&(r._options.mode=s.mode),s.reValidateMode&&(r._options.reValidateMode=s.reValidateMode)},[r,s.mode,s.reValidateMode]),fe.useEffect(()=>{s.errors&&(r._setErrors(s.errors),r._focusError())},[r,s.errors]),fe.useEffect(()=>{s.shouldUnregister&&r._subjects.state.next({values:r._getWatch()})},[r,s.shouldUnregister]),fe.useEffect(()=>{if(r._proxyFormState.isDirty){const o=r._getDirty();o!==n.isDirty&&r._subjects.state.next({isDirty:o})}},[r,n.isDirty]),fe.useEffect(()=>{s.values&&!tt(s.values,a.current)?(r._reset(s.values,{keepFieldsRef:!0,...r._options.resetOptions}),a.current=s.values,i(o=>({...o}))):r._resetDefaultValues()},[r,s.values]),fe.useEffect(()=>{r._state.mount||(r._setValid(),r._state.mount=!0),r._state.watch&&(r._state.watch=!1,r._subjects.state.next({...r._formState})),r._removeUnmounted()}),t.current.formState=Nd(n,r),t.current}const Md=()=>e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-green-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-emerald-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000"}),e.jsx("div",{className:"absolute top-40 left-40 w-80 h-80 bg-teal-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-4000"})]}),e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"max-w-4xl w-full flex bg-white rounded-3xl shadow-2xl overflow-hidden relative z-10",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-green-600 via-emerald-600 to-teal-600 p-12 flex-col justify-center relative",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-10"}),e.jsx("div",{className:"relative z-10",children:e.jsxs(M.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.3,duration:.8},children:[e.jsx("div",{className:"w-16 h-16 bg-white bg-opacity-30 rounded-2xl flex items-center justify-center mb-8 backdrop-blur-sm animate-pulse",children:e.jsx("div",{className:"w-8 h-8 bg-white bg-opacity-50 rounded"})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"h-10 bg-white bg-opacity-30 rounded-lg mb-2 animate-pulse"}),e.jsx("div",{className:"h-6 bg-white bg-opacity-20 rounded-lg w-3/4 animate-pulse"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"h-4 bg-white bg-opacity-20 rounded mb-2 animate-pulse"}),e.jsx("div",{className:"h-4 bg-white bg-opacity-20 rounded mb-2 w-5/6 animate-pulse"}),e.jsx("div",{className:"h-4 bg-white bg-opacity-20 rounded w-4/5 animate-pulse"})]}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(s=>e.jsxs("div",{className:"flex items-center animate-pulse",children:[e.jsx("div",{className:"w-2 h-2 bg-white bg-opacity-40 rounded-full mr-3"}),e.jsx("div",{className:"h-4 bg-white bg-opacity-20 rounded flex-1"})]},s))})]})})]}),e.jsxs("div",{className:"w-full lg:w-1/2 p-12 flex flex-col justify-center",children:[e.jsx(M.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{delay:.4,duration:.8},children:e.jsxs("div",{className:"text-center lg:text-left mb-8",children:[e.jsx("div",{className:"lg:hidden w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center mx-auto lg:mx-0 mb-6 shadow-lg animate-pulse",children:e.jsx("div",{className:"w-8 h-8 bg-white bg-opacity-50 rounded"})}),e.jsx("div",{className:"h-8 bg-gray-200 rounded-lg mb-2 animate-pulse"}),e.jsx("div",{className:"h-5 bg-gray-100 rounded-lg w-3/4 animate-pulse"})]})}),e.jsx(M.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"grid grid-cols-2 gap-4 mb-6",children:[1,2].map(s=>e.jsxs("div",{className:"p-4 rounded-xl border-2 border-gray-200 bg-white animate-pulse",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded mx-auto mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-1"}),e.jsx("div",{className:"h-3 bg-gray-100 rounded w-2/3 mx-auto"})]},s))}),e.jsxs(M.div,{className:"space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 animate-pulse",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded flex-1"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-1/4 animate-pulse"}),e.jsx("div",{className:"h-12 bg-gray-100 rounded-xl animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-1/4 animate-pulse"}),e.jsx("div",{className:"h-12 bg-gray-100 rounded-xl animate-pulse"})]})]}),e.jsx("div",{children:e.jsx("div",{className:"w-full h-12 bg-gray-200 rounded-xl animate-pulse"})}),e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"h-3 bg-gray-100 rounded w-2/3 mx-auto animate-pulse"})})]})]})]})]});function qd(){const[s,t]=u.useState(!1),[a,n]=u.useState(!1),[i,r]=u.useState(null),[o,l]=u.useState(!0),{login:c,isAuthenticated:d}=Me(),h=Ve(),{register:f,handleSubmit:p,setValue:j,formState:{errors:x}}=Ct();u.useEffect(()=>{const A=setTimeout(()=>{l(!1)},2e3);return()=>clearTimeout(A)},[]),u.useEffect(()=>{d&&(console.log(" User authenticated, navigating to dashboard..."),h("/dashboard"))},[d,h]);const b=A=>{r(A),j("email",""),j("password","")},g=async A=>{n(!0);try{console.log(" [VERCEL] Attempting staff login..."),await c(A),console.log(" [VERCEL] Login successful, authentication state should update...")}catch(w){console.error(" [VERCEL] Login failed:",w)}finally{n(!1)}};return o?e.jsx(Md,{}):e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-green-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-emerald-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000"}),e.jsx("div",{className:"absolute top-40 left-40 w-80 h-80 bg-teal-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-4000"})]}),e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"max-w-4xl w-full flex bg-white rounded-3xl shadow-2xl overflow-hidden relative z-10",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-green-600 via-emerald-600 to-teal-600 p-12 flex-col justify-center relative",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-10"}),e.jsx("div",{className:"relative z-10",children:e.jsxs(M.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.3,duration:.8},children:[e.jsx("div",{className:"mb-10 flex justify-center items-center",children:e.jsx("img",{src:"/generated-image.png",alt:"Company Logo",className:"w-48 h-48 object-contain hover:scale-120 transition-all duration-300",style:{filter:"contrast(3.0) saturate(2.5) brightness(2.5) drop-shadow(0 6px 12px rgba(0,0,0,0.15))",imageRendering:"crisp-edges",maxWidth:"100%",maxHeight:"100%",transform:"translateZ(0)",backfaceVisibility:"hidden"}})}),e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Welcome Back!"}),e.jsx("p",{className:"text-green-100 text-lg mb-8 leading-relaxed",children:"Sign in to access your business loan management dashboard and streamline your financial operations."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-green-100",children:[e.jsx("div",{className:"w-2 h-2 bg-green-300 rounded-full mr-3"}),e.jsx("span",{children:"Secure loan processing"})]}),e.jsxs("div",{className:"flex items-center text-green-100",children:[e.jsx("div",{className:"w-2 h-2 bg-green-300 rounded-full mr-3"}),e.jsx("span",{children:"Real-time application tracking"})]}),e.jsxs("div",{className:"flex items-center text-green-100",children:[e.jsx("div",{className:"w-2 h-2 bg-green-300 rounded-full mr-3"}),e.jsx("span",{children:"Comprehensive dashboard"})]})]})]})})]}),e.jsxs("div",{className:"w-full lg:w-1/2 p-12 flex flex-col justify-center",children:[e.jsx(M.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{delay:.4,duration:.8},children:e.jsxs("div",{className:"text-center lg:text-left mb-8",children:[e.jsx("div",{className:"lg:hidden mb-8 flex justify-center items-center",children:e.jsx("img",{src:"/generated-image.png",alt:"Company Logo",className:"w-44 h-44 object-contain hover:scale-120 transition-all duration-300",style:{filter:"contrast(3.0) saturate(2.5) brightness(2.5) drop-shadow(0 6px 12px rgba(0,0,0,0.15))",imageRendering:"crisp-edges",maxWidth:"100%",maxHeight:"100%",transform:"translateZ(0)",backfaceVisibility:"hidden"}})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Login to your account"}),e.jsx("p",{className:"text-gray-600",children:"Choose your role and enter your credentials"})]})}),e.jsxs(M.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs(M.button,{type:"button",onClick:()=>b("ADMIN"),className:`p-4 rounded-xl border-2 transition-all duration-300 ${i==="ADMIN"?"border-green-500 bg-green-50 shadow-lg ring-2 ring-green-200":"border-gray-200 bg-white hover:border-green-300 hover:shadow-md"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(Dt,{className:`h-8 w-8 mx-auto mb-2 ${i==="ADMIN"?"text-green-600":"text-gray-400"}`}),e.jsx("div",{className:`font-semibold ${i==="ADMIN"?"text-green-900":"text-gray-700"}`,children:"Admin"}),e.jsx("div",{className:`text-xs ${i==="ADMIN"?"text-green-600":"text-gray-500"}`,children:"Full Access"})]}),e.jsxs(M.button,{type:"button",onClick:()=>b("EMPLOYEE"),className:`p-4 rounded-xl border-2 transition-all duration-300 ${i==="EMPLOYEE"?"border-emerald-500 bg-emerald-50 shadow-lg ring-2 ring-emerald-200":"border-gray-200 bg-white hover:border-emerald-300 hover:shadow-md"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(nt,{className:`h-8 w-8 mx-auto mb-2 ${i==="EMPLOYEE"?"text-emerald-600":"text-gray-400"}`}),e.jsx("div",{className:`font-semibold ${i==="EMPLOYEE"?"text-emerald-900":"text-gray-700"}`,children:"Employee"}),e.jsx("div",{className:`text-xs ${i==="EMPLOYEE"?"text-emerald-600":"text-gray-500"}`,children:"Limited Access"})]})]}),e.jsxs(M.form,{className:"space-y-6",onSubmit:p(g),initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:[i&&e.jsx(M.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[i==="ADMIN"?e.jsx(Dt,{className:"h-5 w-5 text-green-600"}):e.jsx(nt,{className:"h-5 w-5 text-emerald-600"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Logging in as ",i==="ADMIN"?"Admin":"Employee"]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-2",children:"Email Address"}),e.jsx("input",{...f("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),type:"email",className:"input-field",placeholder:"Enter your email"}),x.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{...f("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),type:s?"text":"password",className:"input-field pr-12",placeholder:"Enter your password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-4 flex items-center",onClick:()=>t(!s),children:s?e.jsx(ms,{className:"h-5 w-5 text-slate-400 hover:text-slate-600"}):e.jsx(Oe,{className:"h-5 w-5 text-slate-400 hover:text-slate-600"})})]}),x.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.password.message})]})]}),e.jsx("div",{children:e.jsx(M.button,{type:"submit",disabled:a||!i,className:`w-full py-3 px-4 rounded-xl font-semibold text-white transition-all duration-300 ${i?"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 shadow-lg hover:shadow-xl":"bg-gray-300 cursor-not-allowed"} ${a?"animate-pulse":""}`,whileHover:i&&!a?{scale:1.02}:{},whileTap:i&&!a?{scale:.98}:{},children:a?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Signing in..."})]}):i?`Sign in as ${i==="ADMIN"?"Admin":"Employee"}`:"Select a role to continue"})})]})]})]})]})}class Fd{queryClient=null;isRenderEnvironment=!1;persistenceConfig;constructor(){this.isRenderEnvironment=window.location.hostname.includes("render.com")||window.location.hostname.includes("onrender.com"),this.persistenceConfig={staleTime:this.isRenderEnvironment?480*1e3:300*1e3,cacheTime:this.isRenderEnvironment?2700*1e3:1800*1e3,refetchInterval:this.isRenderEnvironment?180*1e3:300*1e3,retryAttempts:this.isRenderEnvironment?5:3,retryDelay:this.isRenderEnvironment?2e3:1e3},console.log(" [RENDER-PERSISTENCE] Service initialized:",{environment:this.isRenderEnvironment?"RENDER":"LOCAL",config:this.persistenceConfig})}setQueryClient(t){this.queryClient=t,console.log(" [RENDER-PERSISTENCE] QueryClient attached")}getQueryConfig(t,a){const n={...this.persistenceConfig,...a};return{staleTime:n.staleTime,cacheTime:n.cacheTime,refetchInterval:n.refetchInterval,refetchIntervalInBackground:!1,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchOnReconnect:!0,keepPreviousData:!0,suspense:!1,retry:(i,r)=>{if(r?.response?.status>=400&&r?.response?.status<500)return console.log(` [RENDER-PERSISTENCE] ${t}: Not retrying 4xx error`),!1;const o=i<n.retryAttempts;return console.log(` [RENDER-PERSISTENCE] ${t}: Retry ${i}/${n.retryAttempts}, will retry: ${o}`),o},retryDelay:i=>{const r=Math.min(n.retryDelay*2**i,3e4);return console.log(` [RENDER-PERSISTENCE] ${t}: Retry ${i+1} in ${r}ms`),r},onSuccess:i=>{console.log(` [RENDER-PERSISTENCE] ${t}: Data loaded successfully`,{count:Array.isArray(i)?i.length:i?.length||"N/A",timestamp:new Date().toLocaleTimeString(),environment:this.isRenderEnvironment?"RENDER":"LOCAL"})},onError:i=>{console.error(` [RENDER-PERSISTENCE] ${t}: Data load error`,{message:i.message,status:i.response?.status,statusText:i.response?.statusText,url:i.config?.url,timestamp:new Date().toLocaleTimeString()})}}}async fetchModuleData(t,a,n=[]){try{console.log(` [RENDER-PERSISTENCE] ${a}: Fetching from ${t}...`);const r=(await F.get(t)).data||n;return console.log(` [RENDER-PERSISTENCE] ${a}: Fetched ${Array.isArray(r)?r.length:"N/A"} items`),Array.isArray(r)?r:n}catch(i){if(console.error(` [RENDER-PERSISTENCE] ${a}: Fetch error`,{endpoint:t,error:i.message,status:i.response?.status}),this.queryClient){const r=this.queryClient.getQueryData([a]);if(r&&Array.isArray(r))return console.log(` [RENDER-PERSISTENCE] ${a}: Using cached data (${r.length} items)`),r}return n}}async preloadAllModules(){console.log(" [RENDER-PERSISTENCE] Preloading all modules...");const[t,a,n,i,r,o,l]=await Promise.allSettled([this.fetchModuleData("/api/enquiries","enquiries",[]),this.fetchModuleData("/api/documents","documents",[]),this.fetchModuleData("/api/shortlist","shortlist",[]),this.fetchModuleData("/api/staff","staff",[]),this.fetchModuleData("/api/cashfree","payments",[]),this.fetchModuleData("/api/transactions","transactions",[]),this.fetchModuleData("/api/notifications","notifications",[])]),c={enquiries:t.status==="fulfilled"?t.value:[],documents:a.status==="fulfilled"?a.value:[],shortlist:n.status==="fulfilled"?n.value:[],staff:i.status==="fulfilled"?this.extractStaffData(i.value):[],payments:r.status==="fulfilled"?r.value:[],transactions:o.status==="fulfilled"?o.value:[],notifications:l.status==="fulfilled"?this.extractNotificationsData(l.value):[]};return this.queryClient&&(this.queryClient.setQueryData(["enquiries"],c.enquiries),this.queryClient.setQueryData(["documents"],c.documents),this.queryClient.setQueryData(["shortlist"],c.shortlist),this.queryClient.setQueryData(["staff"],c.staff),this.queryClient.setQueryData(["payments"],c.payments),this.queryClient.setQueryData(["transactions"],c.transactions),this.queryClient.setQueryData(["notifications"],c.notifications)),console.log(" [RENDER-PERSISTENCE] All modules preloaded:",{enquiries:c.enquiries.length,documents:c.documents.length,shortlist:c.shortlist.length,staff:c.staff.length,payments:c.payments.length,transactions:c.transactions.length,notifications:c.notifications.length}),c}async refreshAllModules(){if(!this.queryClient){console.warn(" [RENDER-PERSISTENCE] QueryClient not available for refresh");return}console.log(" [RENDER-PERSISTENCE] Force refreshing all modules..."),await Promise.all([this.queryClient.invalidateQueries(["enquiries"]),this.queryClient.invalidateQueries(["documents"]),this.queryClient.invalidateQueries(["shortlist"]),this.queryClient.invalidateQueries(["staff"]),this.queryClient.invalidateQueries(["payments"]),this.queryClient.invalidateQueries(["transactions"]),this.queryClient.invalidateQueries(["notifications"]),this.queryClient.invalidateQueries(["dashboard-data"])]),console.log(" [RENDER-PERSISTENCE] All modules refreshed")}async handleAuthChange(t,a){console.log(" [RENDER-PERSISTENCE] Auth state changed:",{isLoggedIn:t,user:a?.name}),this.queryClient&&(t&&a?await this.preloadAllModules():(this.queryClient.clear(),console.log(" [RENDER-PERSISTENCE] Cache cleared on logout")))}getFallbackData(t){return{enquiries:[],documents:[],shortlist:[],staff:[{id:1,name:"Perivi",email:"gowthaamankrishna1998@gmail.com",role:"ADMIN",department:"Management"},{id:2,name:"Venkat",email:"gowthaamaneswar1998@gmail.com",role:"EMPLOYEE",department:"Operations"},{id:3,name:"Harish",email:"newacttmis@gmail.com",role:"ADMIN",department:"Client Management"}],payments:[],transactions:[],notifications:[]}[t]||[]}extractStaffData(t){return Array.isArray(t)?t:t&&typeof t=="object"&&t.staff?Array.isArray(t.staff)?t.staff:[]:[]}extractNotificationsData(t){return Array.isArray(t)?t:t&&typeof t=="object"&&t.notifications?Array.isArray(t.notifications)?t.notifications:[]:[]}shouldRefreshData(t){if(!this.queryClient)return!0;const a=this.queryClient.getQueryState([t]);if(!a?.dataUpdatedAt)return!0;const n=Date.now()-a.dataUpdatedAt,i=n>this.persistenceConfig.staleTime;return console.log(` [RENDER-PERSISTENCE] ${t}: Should refresh? ${i} (${Math.round(n/1e3)}s since update)`),i}}const Ge=new Fd,$d=()=>{const{user:s}=Me(),{data:t,isLoading:a,error:n,refetch:i}=re(["dashboard-data",s?.id],async()=>{console.log(" [RENDER] Fetching dashboard data for user:",s?.name),console.log(" [RENDER] Backend URL:",F.defaults.baseURL);const r=await Ge.fetchModuleData("/api/enquiries","enquiries",[]),l=(await Ge.fetchModuleData("/api/shortlist","shortlist",[])).length||0,c=await Ge.fetchModuleData("/api/documents","documents",[]);c.length,c.filter(T=>T.verified).length;const d=c.filter(T=>!T.verified).length||0,h=await Ge.fetchModuleData("/api/cashfree","payments",[]);h.length;const f=h.filter(T=>T.status==="TRANSACTION_DONE"||T.status==="COMPLETED").length||0,p=await Ge.fetchModuleData("/api/transactions","transactions",[]),j=p.length||0,x=p.filter(T=>T.status==="COMPLETED").length||0,b=p.filter(T=>T.status==="PENDING").length||0,g=await Ge.fetchModuleData("/api/staff","staff",[]),A=g.length||7,w=g.filter(T=>T.status==="ACTIVE"||T.hasAccess===!0).length||A,m={totalEnquiries:r.length,pendingReview:r.filter(T=>T.interestStatus==="INTERESTED"||T.interestStatus==="VERY_INTERESTED").length,approved:r.filter(T=>T.interestStatus==="APPROVED"||T.interestStatus==="SHORTLISTED").length,rejected:r.filter(T=>T.interestStatus==="NOT_INTERESTED"||T.interestStatus==="REJECTED").length,documentsAwaiting:d,clientsShortlisted:l,paymentGatewayComplete:f,totalTransactions:j,completedTransactions:x,pendingTransactions:b,totalRevenue:f*5e5,monthlyGrowth:r.length>0?Math.round(Math.random()*20+5):0,activeStaff:w};console.log(" [RENDER] Final dashboard stats:",m);const y=r.length,v=[{stage:"Initial Enquiry",count:m.totalEnquiries,percentage:y>0?100:0,color:"bg-blue-500"},{stage:"Documents Awaiting Verification",count:m.documentsAwaiting,percentage:y>0?Math.round(m.documentsAwaiting/y*100):0,color:"bg-indigo-500"},{stage:"Under Review",count:m.pendingReview,percentage:y>0?Math.round(m.pendingReview/y*100):0,color:"bg-purple-500"},{stage:"Approved",count:m.approved,percentage:y>0?Math.round(m.approved/y*100):0,color:"bg-green-500"},{stage:"Loan Disbursed",count:m.paymentGatewayComplete,percentage:y>0?Math.round(m.paymentGatewayComplete/y*100):0,color:"bg-emerald-500"},{stage:"Transactions Completed",count:m.completedTransactions,percentage:y>0?Math.round(m.completedTransactions/y*100):0,color:"bg-teal-500"}],C=r.sort((T,L)=>new Date(L.createdAt).getTime()-new Date(T.createdAt).getTime()).slice(0,10).map(T=>{let L="Unassigned";return T.staff?.name?L=T.staff.name:T.assignedStaff?L=T.assignedStaff:T.staffId&&(L={1:"Perivi (Admin)",2:"Venkat (Employee)",3:"Harish (Admin)",4:"Pankil (Admin)",5:"Dinesh (Employee)",6:"Nunciya (Admin)",7:"Admin User (System Admin)"}[T.staffId]||`Staff ID: ${T.staffId}`),{id:T.id,name:T.name||T.businessName||`Client ${T.id}`,mobile:T.mobile||"N/A",businessType:T.businessType||"General Business",interestStatus:T.interestStatus||"INTERESTED",createdAt:T.createdAt||new Date().toISOString(),staff:{name:L}}});return{stats:m,enquiryFunnel:v,recentEnquiries:C}},{...Ge.getQueryConfig("dashboard",{refetchInterval:240*1e3}),enabled:!!s});return{data:t||{stats:{totalEnquiries:0,pendingReview:0,approved:0,rejected:0,documentsAwaiting:0,clientsShortlisted:0,paymentGatewayComplete:0,totalTransactions:0,completedTransactions:0,pendingTransactions:0,totalRevenue:0,monthlyGrowth:0,activeStaff:7},enquiryFunnel:[{stage:"Initial Enquiry",count:0,percentage:0,color:"bg-blue-500"},{stage:"Documents Awaiting Verification",count:0,percentage:0,color:"bg-indigo-500"},{stage:"Under Review",count:0,percentage:0,color:"bg-purple-500"},{stage:"Approved",count:0,percentage:0,color:"bg-green-500"},{stage:"Loan Disbursed",count:0,percentage:0,color:"bg-emerald-500"},{stage:"Transactions Completed",count:0,percentage:0,color:"bg-teal-500"}],recentEnquiries:[]},loading:a,error:n,refetch:i}},Ud=()=>{const{user:s}=Me(),{data:t,isLoading:a,error:n,refetch:i}=re(["individual-dashboard",s?.id,s?.email],async()=>{if(console.log(" [RENDER] Fetching individual dashboard for staff:",s?.name,"(",s?.email,")"),console.log(" [RENDER] User role:",s?.role,"ID:",s?.id),!s)throw new Error("User not authenticated");let r=[];try{console.log(" [RENDER] Fetching enquiries for staff assignment filtering...");const $=(await F.get("/api/enquiries")).data||[];console.log(" [RENDER] Total enquiries fetched:",$.length),r=$.filter(P=>{const Z=P.staffId===s.id,Q=P.assignedStaff===s.name||P.staff?.name===s.name,H=P.staff?.email===s.email;if(s.role==="ADMIN"||s.email==="admin@gmail.com"||s.email==="admin@businessloan.com"||["gowthaamankrishna1998@gmail.com","newacttmis@gmail.com","tmsnunciya59@gmail.com"].includes(s.email))return!0;const ae=Z||Q||H;return ae&&console.log(" [RENDER] Enquiry assigned to",s.name,":",P.name),ae}),console.log(" [RENDER] Staff",s.name,"assigned enquiries:",r.length),r.length>0&&console.log(" [RENDER] Sample assigned enquiry:",r[0])}catch(L){console.error(" [RENDER] Enquiries fetch error:",L.message),r=[]}let o=[];try{console.log(" [RENDER] Fetching documents for staff processing...");const $=(await F.get("/api/documents")).data||[];console.log(" [RENDER] Total documents fetched:",$.length),o=$.filter(P=>{const Z=P.verifiedBy===s.name||P.uploadedBy?.name===s.name||P.staffId===s.id;return s.role==="ADMIN"||s.email==="admin@gmail.com"||s.email==="admin@businessloan.com"||["gowthaamankrishna1998@gmail.com","newacttmis@gmail.com","tmsnunciya59@gmail.com"].includes(s.email)?!0:Z}),console.log(" [RENDER] Staff",s.name,"processed documents:",o.length)}catch(L){console.error(" [RENDER] Documents fetch error:",L.message),o=[]}let l=[];try{console.log(" [RENDER] Fetching shortlists for staff management...");const $=(await F.get("/api/shortlist")).data||[];console.log(" [RENDER] Total shortlists fetched:",$.length),l=$.filter(P=>{const Z=P.createdBy===s.name||P.staffId===s.id||P.staff===s.name;return s.role==="ADMIN"||s.email==="admin@gmail.com"||s.email==="admin@businessloan.com"||["gowthaamankrishna1998@gmail.com","newacttmis@gmail.com","tmsnunciya59@gmail.com"].includes(s.email)?!0:Z}),console.log(" [RENDER] Staff",s.name,"managed shortlists:",l.length)}catch(L){console.error(" [RENDER] Shortlists fetch error:",L.message),l=[]}let c=[];try{console.log(" [RENDER] Fetching payment applications for staff processing...");let L;try{L=await F.get("/api/cashfree/applications")}catch{console.log(" [RENDER] Trying alternative payment endpoint..."),L=await F.get("/api/cashfree")}const $=L.data||[];console.log(" [RENDER] Total payment applications fetched:",$.length),c=$.filter(P=>{const Z=P.submittedBy?.name===s.name||P.submittedBy?.email===s.email||P.staffId===s.id;return s.role==="ADMIN"||s.email==="admin@gmail.com"||s.email==="admin@businessloan.com"||["gowthaamankrishna1998@gmail.com","newacttmis@gmail.com","tmsnunciya59@gmail.com"].includes(s.email)?!0:Z}),console.log(" [RENDER] Staff",s.name,"handled payments:",c.length)}catch(L){console.error(" [RENDER] Payments fetch error:",L.message),c=[]}const d=new Date,h=new Date(d.setDate(d.getDate()-d.getDay())),f=new Date(h);f.setDate(f.getDate()-7);const p=new Date(d.getFullYear(),d.getMonth(),1),j=r.filter(L=>new Date(L.createdAt)>=h).length,x=r.filter(L=>{const $=new Date(L.createdAt);return $>=f&&$<h}).length,b=r.filter(L=>new Date(L.createdAt)>=p).length,g=o.filter(L=>L.verified).length,A=o.filter(L=>!L.verified).length,w=c.filter(L=>L.status==="COMPLETED"||L.status==="TRANSACTION_DONE").length,m=c.filter(L=>L.status==="PENDING"||L.status==="PROCESSING").length,y={myEnquiries:r.length,myDocumentsProcessed:g,myShortlisted:l.length,myPaymentApplications:c.length,myCompletedTasks:g+l.length+w,myPendingTasks:A+m,totalClientsHandled:r.length,successRate:r.length>0?Math.round(w/r.length*100):0,thisMonthEnquiries:b,thisWeekEnquiries:j};console.log(" [RENDER] Individual dashboard stats for",s.name,":",y);const v=[...r.slice(0,3).map(L=>({id:L.id,type:"ENQUIRY",clientName:L.name||L.businessName||"Unknown Client",action:"New enquiry received",timestamp:L.createdAt,status:L.interestStatus||"PENDING"})),...o.slice(0,2).map(L=>({id:L.id,type:"DOCUMENT",clientName:L.enquiry?.name||"Unknown Client",action:L.verified?"Document verified":"Document uploaded",timestamp:L.createdAt,status:L.verified?"VERIFIED":"PENDING"})),...l.slice(0,2).map(L=>({id:L.id,type:"SHORTLIST",clientName:L.name||"Unknown Client",action:"Added to shortlist",timestamp:L.createdAt,status:L.interestStatus||"ACTIVE"})),...c.slice(0,2).map(L=>({id:L.id,type:"PAYMENT",clientName:L.shortlist?.name||"Unknown Client",action:"Payment application processed",timestamp:L.createdAt,status:L.status||"PENDING"}))].sort((L,$)=>new Date($.timestamp).getTime()-new Date(L.timestamp).getTime()).slice(0,8),C=r.map(L=>({id:L.id,name:L.name||L.businessName||"Unknown Client",mobile:L.mobile||"N/A",businessType:L.businessType||"General Business",status:L.interestStatus||"INTERESTED",lastActivity:L.createdAt,documentsCount:o.filter($=>$.enquiryId===L.id).length,isShortlisted:l.some($=>$.enquiryId===L.id),hasPaymentApplication:c.some($=>$.shortlist?.enquiry?.id===L.id)})),T={thisWeek:j,lastWeek:x,growth:x>0?Math.round((j-x)/x*100):0};return{stats:y,recentActivities:v,myClients:C,performanceMetrics:T}},{enabled:!!s,staleTime:120*1e3,cacheTime:900*1e3,refetchInterval:90*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchIntervalInBackground:!1,retry:(r,o)=>o?.response?.status>=400&&o?.response?.status<500?!1:r<2,retryDelay:r=>Math.min(1e3*2**r,8e3),onSuccess:r=>{console.log(" [RENDER] Individual dashboard updated successfully for",s?.name,":",{myEnquiries:r.stats.myEnquiries,documentsProcessed:r.stats.myDocumentsProcessed,myShortlisted:r.stats.myShortlisted,myPayments:r.stats.myPaymentApplications,completedTasks:r.stats.myCompletedTasks,pendingTasks:r.stats.myPendingTasks,successRate:r.stats.successRate,totalClients:r.stats.totalClientsHandled,role:s?.role,isAdmin:s?.role==="ADMIN",timestamp:new Date().toLocaleTimeString(),environment:"RENDER"})},onError:r=>{console.error(" [RENDER] Individual dashboard fetch error for",s?.name,":",{message:r.message,status:r.response?.status,statusText:r.response?.statusText,url:r.config?.url})}});return{data:t||{stats:{myEnquiries:0,myDocumentsProcessed:0,myShortlisted:0,myPaymentApplications:0,myCompletedTasks:0,myPendingTasks:0,totalClientsHandled:0,successRate:0,thisMonthEnquiries:0,thisWeekEnquiries:0},recentActivities:[],myClients:[],performanceMetrics:{thisWeek:0,lastWeek:0,growth:0}},loading:a,error:n,refetch:i}};function _d({onSwitchToGlobal:s}){const{user:t}=Me(),{data:a,loading:n,refetch:i}=Ud(),r=l=>{switch(l?.toLowerCase()){case"completed":case"verified":case"approved":return"bg-green-100 text-green-800";case"interested":case"active":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"not_interested":case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},o=l=>{switch(l){case"ENQUIRY":return mt;case"DOCUMENT":return Ee;case"SHORTLIST":return _s;case"PAYMENT":return rs;default:return mt}};return n?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((l,c)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded-xl"},c))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"h-96 bg-gray-200 rounded-xl"}),e.jsx("div",{className:"h-96 bg-gray-200 rounded-xl"})]})]})}):e.jsxs("div",{className:"p-8 space-y-8 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 min-h-screen",children:[e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-600 rounded-2xl p-8 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:s,className:"bg-white bg-opacity-10 rounded-xl p-4 border border-white border-opacity-20 hover:bg-opacity-20 transition-all duration-200 cursor-pointer",title:"Switch to Global Dashboard",children:[e.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Global Dashboard"}),e.jsx("p",{className:"text-blue-200 text-sm",children:"System Overview"})]}),e.jsxs("div",{className:"bg-white bg-opacity-20 rounded-xl p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-1",children:"My Dashboard"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Personal Stats"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center justify-end space-x-2 mb-1",children:[e.jsx(Qa,{className:"h-5 w-5 text-yellow-300"}),e.jsxs("p",{className:"text-blue-100 text-sm",children:["Success Rate: ",a.stats.successRate,"%"]})]}),e.jsxs("p",{className:"text-blue-200 text-xs",children:[a.stats.totalClientsHandled," clients handled  Role: ",t?.role]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[s&&e.jsxs("button",{onClick:s,className:"inline-flex items-center px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-white transition-all duration-200",title:"Switch to Global Dashboard",children:[e.jsx(tc,{className:"h-4 w-4 mr-2"}),"Global Dashboard"]}),e.jsxs("button",{onClick:()=>i(),disabled:n,className:`inline-flex items-center px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-white transition-all duration-200 ${n?"opacity-50 cursor-not-allowed":""}`,title:"Refresh my dashboard data",children:[e.jsx("svg",{className:`h-4 w-4 mr-2 ${n?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),n?"Updating...":"Refresh"]})]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(sa,{className:"h-5 w-5 text-green-300"}),e.jsxs("span",{className:"text-sm",children:["Growth: ",a.performanceMetrics.growth,"%"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ec,{className:"h-5 w-5 text-orange-300"}),e.jsxs("span",{className:"text-sm",children:["This Week: ",a.performanceMetrics.thisWeek," enquiries"]})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[{title:"My Enquiries",value:a.stats.myEnquiries,icon:mt,color:"from-blue-500 to-blue-600",change:`+${a.stats.thisWeekEnquiries} this week`,trend:"up"},{title:"Documents Processed",value:a.stats.myDocumentsProcessed,icon:Ee,color:"from-green-500 to-emerald-600",change:"Verified",trend:"up"},{title:"Clients Shortlisted",value:a.stats.myShortlisted,icon:_s,color:"from-yellow-500 to-orange-500",change:"Active",trend:"up"},{title:"Payment Applications",value:a.stats.myPaymentApplications,icon:rs,color:"from-purple-500 to-indigo-600",change:"Processed",trend:"up"},{title:"Pending Tasks",value:a.stats.myPendingTasks,icon:Zt,color:"from-red-500 to-pink-600",change:"To Complete",trend:a.stats.myPendingTasks>0?"down":"up"}].map((l,c)=>{const d=l.icon;return e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:c*.1},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-r ${l.color}`,children:e.jsx(d,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:`flex items-center space-x-1 text-sm ${l.trend==="up"?"text-green-600":"text-red-600"}`,children:[l.trend==="up"?e.jsx(hi,{className:"h-4 w-4"}):e.jsx(ui,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:l.change})]})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:l.value}),e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:l.title})]},c)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(M.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"My Recent Activities"}),e.jsx(ds,{className:"h-6 w-6 text-gray-400"})]}),e.jsx("div",{className:"space-y-4",children:a.recentActivities.length>0?a.recentActivities.map((l,c)=>{const d=o(l.type);return e.jsxs(M.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4+c*.1},className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(d,{className:"h-8 w-8 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:l.action}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Client: ",l.clientName]}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(l.timestamp).toLocaleString()})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r(l.status)}`,children:l.status})})]},l.id)}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(mt,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No recent activities"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Your activities will appear here"})]})})]}),e.jsxs(M.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["My Clients (",a.myClients.length,")"]}),e.jsx(nt,{className:"h-6 w-6 text-gray-400"})]}),e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:a.myClients.length>0?a.myClients.map((l,c)=>e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5+c*.1},className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:l.name}),l.isShortlisted&&e.jsx(_s,{className:"h-4 w-4 text-yellow-500"}),l.hasPaymentApplication&&e.jsx(rs,{className:"h-4 w-4 text-green-500"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:l.mobile}),e.jsx("p",{className:"text-xs text-gray-500",children:l.businessType}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[l.documentsCount," docs"]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r(l.status)}`,children:l.status})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-1 text-blue-600 hover:text-blue-800",title:"View Client",children:e.jsx(Oe,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-1 text-indigo-600 hover:text-indigo-800",title:"Edit Client",children:e.jsx(st,{className:"h-4 w-4"})})]})]},l.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(nt,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No clients assigned"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Clients will appear here when assigned to you"})]})})]})]}),e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Performance Summary"}),e.jsx(Qa,{className:"h-6 w-6 text-yellow-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:[a.stats.successRate,"%"]}),e.jsx("div",{className:"text-sm text-blue-700 font-medium",children:"Success Rate"}),e.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"Conversion to Payment"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:a.stats.myCompletedTasks}),e.jsx("div",{className:"text-sm text-green-700 font-medium",children:"Completed Tasks"}),e.jsx("div",{className:"text-xs text-green-600 mt-1",children:"This Month"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:a.stats.thisMonthEnquiries}),e.jsx("div",{className:"text-sm text-purple-700 font-medium",children:"This Month"}),e.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"New Enquiries"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-orange-50 to-red-50 rounded-xl",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:[a.performanceMetrics.growth>0?"+":"",a.performanceMetrics.growth,"%"]}),e.jsx("div",{className:"text-sm text-orange-700 font-medium",children:"Weekly Growth"}),e.jsx("div",{className:"text-xs text-orange-600 mt-1",children:"vs Last Week"})]})]})]})]})}const rn={rolePermissions:{employee:[{feature:"Enquiry & Doc Verification",access:"Active",color:"text-green-600"},{feature:"Basic Analytics View",access:"Active",color:"text-green-600"}],admin:[{feature:"Full Access - All Features",access:"Full Access",color:"text-blue-600"},{feature:"Staff Management & System Control",access:"Full Access",color:"text-blue-600"}]}};function Vd(){const{user:s}=Me(),t=Ve(),[a,n]=u.useState("overview"),{data:i,loading:r,refetch:o}=$d(),l=x=>{console.log(" Viewing enquiry:",x.name),t(`/enquiries?view=${x.id}`)},c=x=>{console.log(" Editing enquiry:",x.name),t(`/enquiries?edit=${x.id}`)},d=x=>{console.log(" Deleting enquiry:",x.name),window.confirm(`Are you sure you want to delete enquiry for ${x.name}?`)&&O.success(`Enquiry for ${x.name} deleted successfully`)},h=()=>{console.log(" Navigating to all enquiries"),t("/enquiries")},[f,p]=u.useState(!1);if(f)return e.jsx(_d,{onSwitchToGlobal:()=>p(!1)});const j=x=>{switch(x?.toLowerCase()){case"approved":return"bg-green-100 text-green-800";case"interested":return"bg-blue-100 text-blue-800";case"not_interested":return"bg-red-100 text-red-800";case"under review":return"bg-yellow-100 text-yellow-800";case"pending documents":return"bg-orange-100 text-orange-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return r?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((x,b)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded-xl"},b))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"h-96 bg-gray-200 rounded-xl"}),e.jsx("div",{className:"h-96 bg-gray-200 rounded-xl"})]})]})}):e.jsxs("div",{className:"p-8 space-y-8 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 min-h-screen",children:[e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 rounded-2xl p-8 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"bg-white bg-opacity-20 rounded-xl p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Global Dashboard"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"System Overview"})]}),e.jsxs("button",{onClick:()=>p(!0),className:"bg-white bg-opacity-10 rounded-xl p-4 border border-white border-opacity-20 hover:bg-opacity-20 transition-all duration-200 cursor-pointer",title:"Switch to My Personal Dashboard",children:[e.jsx("h2",{className:"text-xl font-semibold mb-1",children:"My Dashboard"}),e.jsx("p",{className:"text-blue-200 text-sm",children:"Personal Stats"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center justify-end space-x-2 mb-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${r?"bg-yellow-300 animate-pulse":"bg-green-300"}`}),e.jsx("p",{className:"text-blue-100 text-sm",children:r?"Updating...":"Auto-refreshes every 10 seconds"})]}),e.jsx("p",{className:"text-blue-200 text-xs",children:i?.stats?`${i.stats.totalEnquiries} enquiries  ${i.stats.activeStaff} staff  Last updated: ${new Date().toLocaleTimeString()}`:"Loading data..."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>p(!0),className:"inline-flex items-center px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-white transition-all duration-200",title:"Switch to My Personal Dashboard",children:[e.jsx(nt,{className:"h-4 w-4 mr-2"}),"My Dashboard"]}),e.jsxs("button",{onClick:()=>o(),disabled:r,className:`inline-flex items-center px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-white transition-all duration-200 ${r?"opacity-50 cursor-not-allowed":""}`,title:"Refresh dashboard data",children:[e.jsx("svg",{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),r?"Updating...":"Refresh"]})]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(sa,{className:"h-5 w-5 text-green-300"}),e.jsxs("span",{className:"text-sm",children:["Revenue up ",i?.stats?.monthlyGrowth||0,"%"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(gi,{className:"h-5 w-5 text-blue-300"}),e.jsxs("span",{className:"text-sm",children:[i?.stats?.activeStaff||0," Active Staff"]})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[{title:"Total Enquiries",value:i.stats.totalEnquiries,icon:mt,color:"from-blue-500 to-blue-600",change:"+12%",trend:"up"},{title:"Documents Awaiting",value:i.stats.documentsAwaiting,icon:Zt,color:"from-orange-500 to-red-500",change:"+5%",trend:"up"},{title:"Clients Shortlisted",value:i.stats.clientsShortlisted,icon:Ee,color:"from-green-500 to-emerald-600",change:"+8%",trend:"up"},{title:"Payment Gateway Complete",value:i.stats.paymentGatewayComplete,icon:rs,color:"from-purple-500 to-indigo-600",change:"+15%",trend:"up"},{title:"Total Transactions",value:i.stats.totalTransactions,icon:ds,color:"from-teal-500 to-cyan-600",change:"+10%",trend:"up"}].map((x,b)=>{const g=x.icon;return e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:b*.1},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-r ${x.color}`,children:e.jsx(g,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:`flex items-center space-x-1 text-sm ${x.trend==="up"?"text-green-600":"text-red-600"}`,children:[x.trend==="up"?e.jsx(hi,{className:"h-4 w-4"}):e.jsx(ui,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:x.change})]})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:x.value}),e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:x.title})]},b)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs(M.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"lg:col-span-2 bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Enquiry Funnel"}),e.jsx(ds,{className:"h-6 w-6 text-gray-400"})]}),e.jsx("div",{className:"space-y-4",children:i.enquiryFunnel.map((x,b)=>e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:x.stage}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900",children:x.count}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",x.percentage,"%)"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx(M.div,{initial:{width:0},animate:{width:`${x.percentage}%`},transition:{delay:.5+b*.1,duration:.8},className:`h-3 rounded-full ${x.color} relative overflow-hidden`,children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent"})})})]},b))}),e.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(sa,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Conversion Rate"}),e.jsxs("p",{className:"text-xs text-blue-700",children:[(i.enquiryFunnel[4].count/i.enquiryFunnel[0].count*100).toFixed(1),"% of enquiries result in loan disbursement"]})]})]})})]}),e.jsxs(M.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Role Permissions"}),e.jsx("div",{className:"space-y-4",children:(s?.role==="ADMIN"?rn.rolePermissions.admin:rn.rolePermissions.employee).map((x,b)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:x.feature}),e.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${x.color} bg-current bg-opacity-10`,children:x.access})]},b))}),e.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ee,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:"Access Level"}),e.jsx("p",{className:"text-xs text-green-700",children:s?.role==="ADMIN"?"Full administrative access":"Employee level access"})]})]})})]})]}),e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Recent Enquiries"}),e.jsx("button",{onClick:h,className:"text-sm text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200 hover:underline",children:"View All "})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"NAME"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"CONTACT"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"BUSINESS TYPE"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"STATUS"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"DATE"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"ACTIONS"})]})}),e.jsx("tbody",{children:(i?.recentEnquiries||[]).length>0?(i?.recentEnquiries||[]).map((x,b)=>e.jsxs(M.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6+b*.1},className:"border-b border-gray-100 hover:bg-gray-50 border-l-4 border-l-blue-500",children:[e.jsxs("td",{className:"py-4 px-4",children:[e.jsx("div",{className:"font-medium text-gray-900",children:x.name||x.businessName||"N/A"}),e.jsx("div",{className:"text-sm text-gray-600",children:x.mobile})]}),e.jsx("td",{className:"py-4 px-4 text-gray-700",children:x.staff?.name||"Unassigned"}),e.jsx("td",{className:"py-4 px-4 text-gray-700",children:x.businessType||"Not specified"}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${j(x.interestStatus)}`,children:x.interestStatus})}),e.jsx("td",{className:"py-4 px-4 text-gray-600 text-sm",children:new Date(x.createdAt).toLocaleDateString()}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>l(x),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded transition-colors duration-200",title:"View Enquiry",children:e.jsx(Oe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>c(x),className:"p-1 text-indigo-600 hover:text-indigo-800 hover:bg-indigo-50 rounded transition-colors duration-200",title:"Edit Enquiry",children:e.jsx(st,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>d(x),className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-50 rounded transition-colors duration-200",title:"Delete Enquiry",children:e.jsx(ct,{className:"h-4 w-4"})})]})})]},x.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-500",children:[e.jsx(mt,{className:"h-12 w-12 text-gray-300 mb-4"}),e.jsx("p",{className:"text-lg font-medium",children:"No enquiries yet"}),e.jsx("p",{className:"text-sm",children:"New enquiries will appear here automatically"})]})})})})]})})]})]})}function Bd(){return e.jsx(Vd,{})}function Hd(){const[s,t]=u.useState(""),[a,n]=u.useState(""),[i,r]=u.useState(null),[o,l]=u.useState({isOpen:!1,enquiry:null}),c=Ae(),{data:d,isLoading:h,isFetching:f,refetch:p,error:j}=re(["enquiries",s,a],async()=>{const y=new URLSearchParams;return s&&y.append("name",s),a&&y.append("interestStatus",a),(await F.get(`/api/enquiries?${y}`)).data||[]},{staleTime:180*1e3,keepPreviousData:!0,onError:y=>{console.error("Failed to fetch enquiries:",y)},onSuccess:y=>{console.log(" Enquiries refreshed:",y?.length||0,"enquiries found"),r(new Date)}}),{data:x}=re("staff-members",async()=>{try{return(await F.get("/api/staff")).data?.staff||[]}catch{return console.log("No staff data available"),[]}},{staleTime:300*1e3}),b=le(async y=>F.delete(`/api/enquiries/${y}`),{onSuccess:(y,v)=>{O.success("Enquiry deleted successfully!"),c.setQueryData(["enquiries",s,a],C=>C&&C.filter(T=>T.id!==v)),setTimeout(()=>{c.invalidateQueries("enquiries")},100)},onError:y=>{console.error("Delete error:",y),O.error(y.response?.data?.message||"Failed to delete enquiry")}}),g=le(async({enquiryId:y,staffId:v,staffName:C})=>(console.log(" Assigning staff:",{enquiryId:y,staffId:v,staffName:C}),F.post(`/api/enquiries/${y}/assign`,{staffId:v})),{onSuccess:(y,{staffName:v})=>{console.log(" Staff assignment successful:",y.data),O.success(`Enquiry assigned to ${v} successfully!`),c.invalidateQueries(["enquiries"]),c.setQueryData(["enquiries"],C=>C&&C.map(T=>T.id===y.data.id?y.data:T))},onError:y=>{console.error(" Staff assignment error:",y),O.error(y.response?.data?.message||"Failed to assign staff member")}}),A=(y,v)=>{if(v){const C=x?.find(T=>T.name===v);C?g.mutate({enquiryId:y,staffId:C.id,staffName:C.name}):O.error("Selected staff member not found")}},w=(y,v)=>{window.confirm(`Are you sure you want to delete "${v}"? This will also delete all associated documents.`)&&b.mutate(y)},m=y=>{console.log(" Viewing enquiry:",y.name),l({isOpen:!0,enquiry:y})};return h?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Enquiries"}),e.jsxs("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[e.jsx("div",{className:"h-10 bg-gray-200 rounded w-32 animate-pulse"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-40 animate-pulse"})]})]}),e.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-48 animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 animate-pulse"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-600 to-blue-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"SL.NO"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"DATE"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"CLIENT DETAILS"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"BUSINESS NAME"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"STATUS"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"STAFF"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"ACTIONS"})]})}),e.jsx("tbody",{className:"bg-white",children:[...Array(5)].map((y,v)=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-8 animate-pulse"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 animate-pulse"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-32 animate-pulse"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 animate-pulse"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-6 bg-gray-200 rounded-full w-16 animate-pulse"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 animate-pulse"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded animate-pulse"})]})})]},v))})]})})]})]}):j&&!d?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Enquiries"}),e.jsxs(je,{to:"/enquiries/new",className:"btn-primary inline-flex items-center mt-4 sm:mt-0",children:[e.jsx(xt,{className:"h-5 w-5 mr-2"}),"Add New Enquiry"]})]}),e.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 p-8 text-center",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to load enquiries"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"There was an error loading the enquiry data. Please try again."}),e.jsx("button",{onClick:()=>p(),className:"btn-primary",children:"Try Again"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Enquiries"}),f&&e.jsxs("div",{className:"flex items-center text-blue-600",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-sm",children:"Refreshing..."})]})]}),i&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",i.toLocaleTimeString(),"  Auto-refreshes every 10 seconds"]})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[e.jsxs("button",{onClick:()=>p(),disabled:f,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",title:"Refresh enquiries",children:[e.jsx("svg",{className:`h-4 w-4 mr-1 ${f?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]}),e.jsxs("select",{value:a,onChange:y=>n(y.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"INTERESTED",children:" Interested"}),e.jsx("option",{value:"NOT_INTERESTED",children:" Not Interested"}),e.jsx("option",{value:"FOLLOW_UP_REQUIRED",children:" Follow Up Required"})]}),e.jsxs(je,{to:"/enquiries/new",className:"btn-primary inline-flex items-center whitespace-nowrap",children:[e.jsx(xt,{className:"h-5 w-5 mr-2"}),"Add New Enquiry"]})]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(At,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name...",value:s,onChange:y=>t(y.target.value),className:"input-field pl-10"})]}),e.jsxs("select",{value:a,onChange:y=>n(y.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"All Interest Status"}),e.jsx("option",{value:"INTERESTED",children:" Interested"}),e.jsx("option",{value:"NOT_INTERESTED",children:" Not Interested"}),e.jsx("option",{value:"FOLLOW_UP_REQUIRED",children:" Follow Up Required"})]}),e.jsx("button",{onClick:()=>{t(""),n(""),p()},className:"btn-secondary",children:"Clear Filters"})]})}),e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"table-modern",children:[e.jsx("div",{className:"px-8 py-6 border-b border-slate-200 bg-gradient-to-r from-slate-50 to-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"relative",children:[e.jsx(At,{className:"h-5 w-5 absolute left-4 top-3.5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search enquiries...",value:s,onChange:y=>t(y.target.value),className:"input-search w-80"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-sm font-medium text-slate-600",children:[d?.length||0," results"]}),e.jsx("div",{className:"h-4 w-px bg-slate-300"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Updated just now"})]})]})}),d&&d.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-600 to-blue-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"SL.NO"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"DATE"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"CLIENT DETAILS"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"BUSINESS NAME"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"STATUS"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"STAFF"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"ACTIONS"})]})}),e.jsx("tbody",{className:"bg-white",children:d.map((y,v)=>e.jsxs(M.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:v*.05},className:"table-row",children:[e.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:v+1})}),e.jsxs("td",{className:"px-6 py-5 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-slate-900",children:y.enquiryDate?new Date(y.enquiryDate).toLocaleDateString("en-IN"):y.createdAt?new Date(y.createdAt).toLocaleDateString("en-IN"):new Date().toLocaleDateString("en-IN")}),y.followUpDate&&e.jsxs("div",{className:"text-xs text-orange-600",children:[" Follow up: ",new Date(y.followUpDate).toLocaleDateString("en-IN")]})]}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-xs font-semibold text-white",children:y.name?.charAt(0)?.toUpperCase()||"U"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:y.name||"Unknown"}),e.jsxs("div",{className:"text-sm text-slate-500",children:[" ",y.mobile||"No mobile"]}),y.email&&e.jsxs("div",{className:"text-xs text-slate-400",children:[" ",y.email]})]})]})}),e.jsxs("td",{className:"px-6 py-5",children:[e.jsx("div",{className:"text-sm font-medium text-slate-900",children:y.businessName||y.businessType||"Not Specified"}),y.gst&&e.jsxs("div",{className:"text-xs text-slate-500",children:["GST: ",y.gst]})]}),e.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${y.interestStatus==="INTERESTED"?"bg-green-100 text-green-800":y.interestStatus==="NOT_INTERESTED"?"bg-red-100 text-red-800":y.interestStatus==="FOLLOW_UP_REQUIRED"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:y.interestStatus==="INTERESTED"?" Interested":y.interestStatus==="NOT_INTERESTED"?" Not Interested":y.interestStatus==="FOLLOW_UP_REQUIRED"?" Follow Up":" Interested"}),y.comments&&e.jsx("div",{className:"text-xs text-slate-500",children:y.comments.replace(/_/g," ")})]})}),e.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-slate-600",children:y.staff?.name||y.assignedStaff||"Unassigned"}),e.jsxs("select",{value:y.assignedStaff||"",onChange:C=>A(y.id,C.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 bg-white text-slate-600 focus:outline-none focus:ring-1 focus:ring-blue-500",disabled:g.isLoading,children:[e.jsx("option",{value:"",children:"Assign to staff..."}),x&&x.map(C=>e.jsxs("option",{value:C.name,children:[C.name," - ",C.role]},C.id))]})]})}),e.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>m(y),className:"inline-flex items-center justify-center w-8 h-8 bg-blue-100 border border-blue-200 rounded-md text-blue-600 hover:bg-blue-200 hover:border-blue-300 transition-all duration-200",title:"View Enquiry",children:e.jsx(Oe,{className:"h-4 w-4"})}),e.jsx(je,{to:`/enquiries/${y.id}/edit`,className:"inline-flex items-center justify-center w-8 h-8 bg-orange-100 border border-orange-200 rounded-md text-orange-600 hover:bg-orange-200 hover:border-orange-300 transition-all duration-200",title:"Edit Enquiry",children:e.jsx(st,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>w(y.id,y.name),disabled:b.isLoading,className:"inline-flex items-center justify-center w-8 h-8 bg-red-100 border border-red-200 rounded-md text-red-600 hover:bg-red-200 hover:border-red-300 disabled:opacity-50 transition-all duration-200",title:"Delete Enquiry",children:e.jsx(ct,{className:"h-4 w-4"})})]})})]},y.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"No enquiries found."}),e.jsxs(je,{to:"/enquiries/new",className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg inline-flex items-center mt-4",children:[e.jsx(xt,{className:"h-5 w-5 mr-2"}),"Create First Enquiry"]})]})]}),o.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Enquiry Details - ",o.enquiry?.name]}),e.jsx("button",{onClick:()=>l({isOpen:!1,enquiry:null}),className:"text-gray-400 hover:text-gray-600",children:e.jsx(_e,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:o.enquiry?.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mobile"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:o.enquiry?.mobile||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Business Type"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:o.enquiry?.businessType||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"GST Number"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:o.enquiry?.gstNumber||o.enquiry?.gst||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Status & Assignment"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Interest Status"}),e.jsx("p",{className:"mt-1",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${o.enquiry?.interestStatus==="INTERESTED"?"bg-green-100 text-green-800":o.enquiry?.interestStatus==="NOT_INTERESTED"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:o.enquiry?.interestStatus||"PENDING"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assigned Staff"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:o.enquiry?.assignedStaff||o.enquiry?.staff?.name||"Unassigned"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Source"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:o.enquiry?.source||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Created Date"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:o.enquiry?.createdAt?new Date(o.enquiry.createdAt).toLocaleDateString():"N/A"})]})]})]}),o.enquiry?.comments&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Comments"}),e.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md",children:o.enquiry.comments})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t bg-gray-50",children:[e.jsx("button",{onClick:()=>l({isOpen:!1,enquiry:null}),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"}),e.jsx(je,{to:`/enquiries/${o.enquiry?.id}/edit`,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700",onClick:()=>l({isOpen:!1,enquiry:null}),children:"Edit Enquiry"})]})]})})]})}function Hs(){const s=Ve(),{id:t}=ys(),[a]=Gi(),n=Ae(),i=!!t,r=a.get("view")==="true",{register:o,handleSubmit:l,reset:c,formState:{errors:d}}=Ct(),{data:h,isLoading:f}=re(["enquiry",t],async()=>{if(!t)return null;console.log(" Fetching enquiry data for ID:",t);const b=await F.get(`/api/enquiries/${t}`);return console.log(" Enquiry data received:",b.data),b.data},{enabled:!!t}),{data:p}=re("staff-members",async()=>{try{return(await F.get("/api/staff")).data?.staff||[]}catch{return console.log("No staff data available"),[]}},{staleTime:300*1e3}),j=le(async b=>{console.log(" Mutation executing with data:",b);const g=i?`/api/enquiries/${t}`:"/api/enquiries";console.log(" Making request to:",g);try{const A=i?await F.patch(g,b):await F.post(g,b);return console.log(" API response received:",A.data),A}catch(A){throw console.error(" API request failed:",A),console.error(" Error details:",{message:A.message,status:A.response?.status,statusText:A.response?.statusText,data:A.response?.data,config:{url:A.config?.url,method:A.config?.method,baseURL:A.config?.baseURL}}),A}},{onSuccess:b=>{console.log(" Mutation success:",b.data);const g=i?"Enquiry updated successfully!":"Enquiry created successfully!";O.success(g),i?(n.invalidateQueries(["enquiries"]),n.invalidateQueries(["enquiry",t]),n.setQueryData(["enquiries"],A=>A&&A.map(w=>w.id===parseInt(t)?{...w,...b.data}:w)),s("/enquiries")):(n.invalidateQueries(["enquiries"]),O.success("Redirecting to document verification...",{duration:2e3}),setTimeout(()=>{s("/documents/verification")},1500))},onError:b=>{console.error(" Mutation error:",b);const g=b.response?.data?.message||b.message||"Something went wrong";console.error(" Error message to show:",g),O.error(g)}});u.useEffect(()=>{if(h&&(i||r)){console.log(" Resetting form with enquiry data:",h);const b={name:h.name||"",mobile:h.mobile||"",businessType:h.businessType||h.businessName||"",gstNumber:h.gstNumber||h.gst||"",comments:h.comments||"",interestStatus:h.interestStatus||"",assignedStaff:h.assignedStaff||h.staff?.name||"",enquiryDate:h.enquiryDate?new Date(h.enquiryDate).toISOString().split("T")[0]:h.createdAt?new Date(h.createdAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],followUpDate:h.followUpDate?new Date(h.followUpDate).toISOString().split("T")[0]:"",additionalComments:h.additionalComments||""};console.log(" Form data being set:",b),c(b)}},[h,i,r,c]);const x=b=>{if(console.log(" Submitting enquiry form with data:",b),console.log(" Form validation - Name:",b.name,"Mobile:",b.mobile),console.log(" API endpoint will be:",i?`/api/enquiries/${t}`:"/api/enquiries"),!b.name?.trim()){console.error(" Validation failed: Name is empty"),O.error("Please enter a valid name");return}if(!b.mobile?.match(/^[0-9]{10}$/)){console.error(" Validation failed: Invalid mobile number:",b.mobile),O.error("Please enter a valid 10-digit mobile number");return}console.log(" Client-side validation passed"),b.assignedStaff?console.log(" Enquiry assigned to staff:",b.assignedStaff):console.log(" No staff assigned to this enquiry");const g=O.loading(i?"Updating enquiry...":"Creating enquiry...");console.log(" Starting API request..."),j.mutate(b,{onSettled:()=>{console.log(" API request completed"),O.dismiss(g)}})};return(i||r)&&f?e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{type:"button",onClick:()=>s("/enquiries"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors",children:[e.jsx(Et,{className:"h-4 w-4 mr-2"}),"Back to Enquiries"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Loading Enquiry..."}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we fetch the enquiry data"})]})]})}),e.jsx("div",{className:"card space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-2"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-2"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-2"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-2"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})]})]})})]})}):e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{type:"button",onClick:()=>s("/enquiries"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors",children:[e.jsx(Et,{className:"h-4 w-4 mr-2"}),"Back to Enquiries"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r?"View Enquiry":i?"Edit Enquiry":"New Enquiry"}),e.jsx("p",{className:"text-gray-600",children:r?"View enquiry details":i?"Update enquiry information":"Create a new business loan enquiry"})]})]})}),e.jsxs("form",{onSubmit:l(x),className:"card space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),e.jsx("input",{...o("name",{required:"Name is required"}),type:"text",className:"input-field",placeholder:"Enter full name",readOnly:r}),d.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobile Number *"}),e.jsx("input",{...o("mobile",{required:"Mobile number is required",pattern:{value:/^[0-9]{10}$/,message:"Please enter a valid 10-digit mobile number"}}),type:"tel",className:"input-field",placeholder:"Enter mobile number",readOnly:r}),d.mobile&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.mobile.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Type"}),e.jsx("input",{...o("businessType"),type:"text",className:"input-field",placeholder:"Enter business type",readOnly:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GST Number"}),e.jsx("input",{...o("gstNumber"),type:"text",className:"input-field",placeholder:"Enter GST number (optional)",readOnly:r})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Interest Status"}),e.jsxs("select",{...o("interestStatus"),className:"input-field",disabled:r,children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"INTERESTED",children:"Interested"}),e.jsx("option",{value:"NOT_INTERESTED",children:"Not Interested"}),e.jsx("option",{value:"FOLLOW_UP_REQUIRED",children:"Follow Up Required"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comments Status"}),e.jsxs("select",{...o("comments"),className:"input-field",disabled:r,children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"NO_RESPONSE",children:"No Response"}),e.jsx("option",{value:"CHAT_CALL1_COMPLETED",children:"First Call Completed"}),e.jsx("option",{value:"SECOND_CALL_COMPLETED",children:"Second Call Completed"}),e.jsx("option",{value:"THIRD_CALL_COMPLETED",children:"Third Call Completed"}),e.jsx("option",{value:"ELIGIBLE",children:"Eligible"}),e.jsx("option",{value:"NOT_ELIGIBLE",children:"Not Eligible"}),e.jsx("option",{value:"NO_GST",children:"No GST"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to Staff Member"}),e.jsxs("select",{...o("assignedStaff"),className:"input-field",disabled:r,children:[e.jsx("option",{value:"",children:"Select staff member (optional)"}),p&&p.map(b=>e.jsxs("option",{value:b.name,children:[b.name," - ",b.role]},b.id))]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Select a staff member to assign this enquiry to"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enquiry Date *"}),e.jsx("input",{...o("enquiryDate",{required:"Enquiry date is required"}),type:"date",className:"input-field",defaultValue:new Date().toISOString().split("T")[0],readOnly:r}),d.enquiryDate&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.enquiryDate.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Follow Up Date"}),e.jsx("input",{...o("followUpDate"),type:"date",className:"input-field",placeholder:"Select follow up date (optional)",readOnly:r}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Set a date for follow up if required"})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Comments"}),e.jsx("textarea",{...o("additionalComments"),rows:4,className:"input-field resize-none",placeholder:"Enter any additional comments or notes about this enquiry...",readOnly:r}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Add detailed notes, conversation summary, or any other relevant information"})]})}),!r&&e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>s("/enquiries"),className:"btn-secondary",children:"Cancel"}),i&&e.jsx("button",{type:"button",onClick:()=>s(`/enquiries/${t}?view=true`),className:"btn-secondary",children:"View Mode"}),r&&e.jsx("button",{type:"button",onClick:()=>s(`/enquiries/${t}/edit`),className:"btn-secondary",children:"Edit Mode"}),e.jsx(M.button,{type:"submit",disabled:j.isLoading,className:"btn-primary disabled:opacity-50",whileHover:{scale:1.02},whileTap:{scale:.98},children:j.isLoading?i?"Updating...":"Creating...":i?"Update Enquiry":"Create Enquiry"})]})]})]})})}const Wd="modulepreload",Qd=function(s){return"/"+s},on={},Ci=function(t,a,n){let i=Promise.resolve();if(a&&a.length>0){let c=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");i=c(a.map(d=>{if(d=Qd(d),d in on)return;on[d]=!0;const h=d.endsWith(".css"),f=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const p=document.createElement("link");if(p.rel=h?"stylesheet":Wd,h||(p.as="script"),p.crossOrigin="",p.href=d,l&&p.setAttribute("nonce",l),document.head.appendChild(p),h)return new Promise((j,x)=>{p.addEventListener("load",j),p.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${d}`)))})}))}function r(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&r(l.reason);return t().catch(r)})};function ln({onUpload:s,accept:t=".pdf",maxSize:a=10*1024*1024}){const[n,i]=u.useState(null),[r,o]=u.useState(0),[l,c]=u.useState(!1),[d,h]=u.useState(!1),f=b=>{if(b.size>a){alert(`File size must be less than ${a/(1024*1024)}MB`);return}if(b.type!=="application/pdf"){alert("Only PDF files are allowed");return}i(b),h(!0),o(0);const g=setInterval(()=>{o(A=>A>=100?(clearInterval(g),h(!1),s(b),100):A+10)},200)},p=b=>{b.preventDefault(),c(!1);const g=b.dataTransfer.files[0];g&&f(g)},j=b=>{b.preventDefault(),c(!0)},x=()=>{c(!1)};return e.jsxs(M.div,{className:`border-2 border-dashed p-8 rounded-lg text-center transition-colors ${l?"border-primary-500 bg-primary-50":d?"border-blue-500 bg-blue-50":"border-gray-300"} ${d?"pointer-events-none opacity-75":""}`,whileHover:{scale:d?1:1.02},transition:{duration:.3},onDrop:d?void 0:p,onDragOver:d?void 0:j,onDragLeave:d?void 0:x,children:[e.jsx(xi,{className:`h-12 w-12 mx-auto mb-4 ${d?"text-blue-500 animate-pulse":"text-gray-400"}`}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:d?"cursor-not-allowed":"cursor-pointer",children:[e.jsx("span",{className:`btn-primary ${d?"opacity-50 cursor-not-allowed":""}`,children:d?"Uploading...":"Choose File"}),e.jsx("input",{type:"file",accept:t,onChange:b=>b.target.files?.[0]&&f(b.target.files[0]),className:"hidden",disabled:d})]})}),e.jsx("p",{className:`text-gray-600 mb-2 ${d?"text-blue-600":""}`,children:d?"Processing your file...":"or drag and drop your file here"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["PDF files only  Max ",a/(1024*1024),"MB"]}),n&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:n.name}),r>0&&r<100&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"bg-gray-200 rounded-full h-2",children:e.jsx(M.div,{className:"bg-primary-600 h-2 rounded-full",initial:{width:0},animate:{width:`${r}%`},transition:{duration:.3}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[r,"% uploaded"]})]}),r===100&&e.jsx("p",{className:"text-sm text-green-600 mt-2",children:" Upload complete"})]})]})}function Ri({isOpen:s,onClose:t,documentName:a,documentType:n,documentUrl:i,documentId:r,isVerified:o,onVerify:l}){const[c,d]=u.useState(!1),[h,f]=u.useState(!0),[p,j]=u.useState(!1);console.log(" PDFViewer render:",{isOpen:s,documentName:a,documentType:n,documentUrl:i});const x=()=>{j(!p)};if(u.useEffect(()=>{const A=w=>{w.key==="Escape"&&(p?j(!1):t())};if(s)return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[s,p,t]),u.useEffect(()=>{s&&(d(!1),f(!0),j(!1))},[s]),!s)return console.log(" PDFViewer not open, returning null"),null;console.log(" PDFViewer is open, rendering modal");const g=i?(console.log(" Using backend document URL:",i),i):null;return e.jsx("div",{className:`fixed inset-0 bg-black z-[9999] flex items-center justify-center ${p?"bg-opacity-95":"bg-opacity-50 p-4"}`,onClick:t,children:e.jsxs("div",{className:`bg-white shadow-xl flex flex-col ${p?"w-full h-full":"rounded-lg max-w-4xl w-full max-h-[90vh]"}`,onClick:A=>A.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"Back to Documents",children:e.jsx(Et,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:a}),e.jsx("p",{className:"text-sm text-gray-500",children:n.replace("_"," ")})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[r&&l&&!o&&e.jsxs("button",{onClick:()=>l(r),className:"flex items-center px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition-colors",title:"Verify Document",children:[e.jsx(Ee,{className:"h-4 w-4 mr-1"})," Verify"]}),o&&e.jsxs("div",{className:"flex items-center px-3 py-1 bg-green-100 text-green-800 text-sm rounded border border-green-200",children:[e.jsx(Ee,{className:"h-4 w-4 mr-1"})," Verified"]}),e.jsx("button",{onClick:x,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:p?"Exit Fullscreen":"Enter Fullscreen",children:p?e.jsx(Gl,{className:"h-5 w-5"}):e.jsx(Kl,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>{if(g){const A=document.createElement("a");A.href=g,A.download=`${a}.pdf`,A.click()}},className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",title:"Download PDF",disabled:!g,children:" Download"}),e.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(_e,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"flex-1 p-4",children:g?e.jsxs("div",{className:"h-full",children:[h&&e.jsxs("div",{className:"mb-2 p-3 bg-blue-50 border border-blue-200 rounded text-sm flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),e.jsxs("span",{children:[" ",e.jsx("strong",{children:"Loading document:"})," ",a]})]}),c?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-8 max-w-md",children:[e.jsx(lt,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"PDF Display Error"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to display the PDF in the browser. This might be due to browser restrictions or PDF format issues."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>{d(!1),f(!0)},className:"w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:" Try Again"}),e.jsx("a",{href:g,className:"block w-full px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors text-center",download:`${a}.pdf`,children:" Download PDF"}),e.jsx("button",{onClick:()=>window.open(g,"_blank"),className:"w-full px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors",children:" Open in New Tab"})]})]})}):e.jsxs("div",{className:"h-full relative",children:[e.jsx("iframe",{src:`${g}#toolbar=1&navpanes=1&scrollbar=1&page=1&view=FitH&zoom=page-fit`,className:`w-full h-full border border-gray-300 ${p?"min-h-screen":"rounded-lg min-h-[600px]"}`,title:`${a} - PDF Viewer`,onLoad:()=>{console.log(" PDF loaded successfully from:",g),f(!1)},onError:A=>{console.error(" Failed to load PDF:",g,A),d(!0),f(!1)},allow:"fullscreen",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(lt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Your browser doesn't support inline PDF viewing."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("a",{href:g,className:"inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 mr-2",download:`${a}.pdf`,children:" Download PDF"}),e.jsx("button",{onClick:()=>window.open(g,"_blank"),className:"inline-block px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:" Open in New Tab"})]})]})}),e.jsxs("div",{className:"absolute bottom-4 right-4 bg-white rounded-lg shadow-lg p-2 flex space-x-2",children:[e.jsx("button",{onClick:()=>window.open(g,"_blank"),className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded text-sm transition-colors",title:"Open in new tab",children:""}),e.jsx("a",{href:g,download:`${a}.pdf`,className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded text-sm transition-colors",title:"Download PDF",children:""})]})]})]}):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx(lt,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Document Available"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No file URL provided for this document."}),e.jsxs("div",{className:"text-sm text-gray-500 bg-gray-50 p-4 rounded-lg",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Document:"})," ",a]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",n]}),e.jsxs("p",{children:[e.jsx("strong",{children:"File:"})," ",i||"Not specified"]})]})]})})})]})})}const es=[{value:"GST",label:"GST Certificate",required:!0},{value:"UDYAM",label:"Udyam Registration",required:!0},{value:"BANK_STATEMENT",label:"Bank Statement",required:!0},{value:"OWNER_PAN",label:"Owner PAN Card",required:!0},{value:"AADHAR",label:"Aadhar Card",required:!0},{value:"WEBSITE_GATEWAY",label:"Website & Gateway",required:!1},{value:"IE_CODE",label:"IE Code",required:!1}];function Gd({isOpen:s,onClose:t,clientId:a,clientName:n,documents:i}){const[r,o]=u.useState({isOpen:!1,documentUrl:"",documentName:"",documentType:""}),{data:l,isLoading:c,error:d}=re(["documents",a],async()=>{if(!a)return null;console.log(" Fetching documents for client ID:",a);const m=await F.get(`/api/documents/enquiry/${a}`);return console.log(" Documents response:",m.data),m.data},{enabled:s&&!!a,refetchOnWindowFocus:!1});if(!s)return null;if(c)return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading documents..."})]})});if(d)return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md",children:[e.jsx("div",{className:"text-red-500 text-center mb-4",children:""}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Documents"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Failed to load documents for this client."}),e.jsx("button",{onClick:t,className:"w-full btn-primary",children:"Close"})]})});const h=l||[],f=h.length>0?h[0].enquiry:{name:n,mobile:"",businessType:""},p=new Set(h.map(m=>m.type)),j=es.filter(m=>m.required),x=j.filter(m=>p.has(m.value)),b=j.length>0?Math.round(x.length/j.length*100):0,g=async m=>{const{getApiUrl:y}=await Ci(async()=>{const{getApiUrl:v}=await import("./config-D1vN5v8q.js");return{getApiUrl:v}},[]);o({isOpen:!0,documentUrl:y(`/api/documents/${m.id}/view`),documentName:`${m.enquiry.name} - ${es.find(v=>v.value===m.type)?.label||m.type}`,documentType:m.type})},A=()=>{o({isOpen:!1,documentUrl:"",documentName:"",documentType:""})},w=m=>{const y=h.find(C=>C.type===m);return y?{status:"uploaded",document:y,verified:y.verified}:{status:es.find(C=>C.value===m)?.required?"missing":"optional",document:null,verified:!1}};return e.jsxs(e.Fragment,{children:[e.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:t,children:e.jsxs(M.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] flex flex-col",onClick:m=>m.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:f.name}),e.jsxs("p",{className:"text-gray-600",children:[" ",f.mobile,"  ",f.businessType]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Document Portfolio"})]}),e.jsx("button",{onClick:t,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(_e,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Document Completion Status"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-indigo-600",children:[b,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Complete"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-4",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 h-3 rounded-full transition-all duration-500",style:{width:`${b}%`}})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[x.length,"/",j.length]}),e.jsx("div",{className:"text-gray-600",children:"Required Documents"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:h.filter(m=>m.verified).length}),e.jsx("div",{className:"text-gray-600",children:"Verified Documents"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:h.length}),e.jsx("div",{className:"text-gray-600",children:"Total Uploaded"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:es.map(m=>{const y=w(m.value);return e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`border-2 rounded-lg p-4 transition-all duration-200 hover:shadow-md ${y.status==="uploaded"?y.verified?"border-green-200 bg-green-50":"border-yellow-200 bg-yellow-50":y.status==="missing"?"border-red-200 bg-red-50":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(lt,{className:`h-6 w-6 mr-2 ${y.status==="uploaded"?y.verified?"text-green-600":"text-yellow-600":y.status==="missing"?"text-red-600":"text-gray-400"}`}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:m.label}),e.jsx("p",{className:"text-xs text-gray-500",children:m.required?"Required":"Optional"})]})]}),e.jsx("div",{className:"flex items-center",children:y.status==="uploaded"?y.verified?e.jsx(Ee,{className:"h-5 w-5 text-green-600"}):e.jsx(gt,{className:"h-5 w-5 text-yellow-600"}):y.status==="missing"?e.jsx(gt,{className:"h-5 w-5 text-red-600"}):e.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-gray-300"})})]}),y.document?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Status: "}),e.jsx("span",{className:`font-medium ${y.verified?"text-green-600":"text-yellow-600"}`,children:y.verified?"Verified":"Pending Verification"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Uploaded: "}),new Date(y.document.uploadedAt).toLocaleDateString()]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"By: "}),y.document.uploadedBy.name]}),e.jsxs("button",{onClick:()=>g(y.document),className:"w-full mt-3 flex items-center justify-center px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-md hover:bg-indigo-700 transition-colors",children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"View Document"]})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:`text-sm font-medium ${y.status==="missing"?"text-red-600":"text-gray-500"}`,children:y.status==="missing"?"Missing Document":"Not Required"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:y.status==="missing"?"This document needs to be uploaded":"This document is optional"})]})]},m.value)})})})]})}),e.jsx(Ri,{isOpen:r.isOpen,onClose:A,documentName:r.documentName,documentType:r.documentType,documentUrl:r.documentUrl})]})}function Zd(){const[s,t]=u.useState(""),[a,n]=u.useState(""),[i,r]=u.useState(""),[o,l]=u.useState(!1),[c,d]=u.useState({isOpen:!1,documentUrl:"",documentName:"",documentType:"",documentId:void 0,isVerified:!1}),[h,f]=u.useState({isOpen:!1,clientId:0,clientName:""}),p=Ae(),j=Ve(),{data:x,isLoading:b,error:g}=re("enquiries",async()=>{console.log(" Fetching enquiries from /enquiries...");try{const N=await F.get("/api/enquiries");return console.log(" Enquiries response:",N.data),N.data}catch(N){if(console.error(" Enquiries fetch error:",N),N.code==="ECONNREFUSED"||N.message?.includes("Network Error"))return console.log(" Backend not available, returning empty enquiries array"),[];throw N}},{staleTime:240*1e3,keepPreviousData:!0,onSuccess:N=>{console.log(" Enquiries query success:",N?.length||0,"enquiries")},onError:N=>{console.error(" Enquiries query error:",N)}}),{data:A}=re("staff-members",async()=>{try{return(await F.get("/api/staff")).data?.staff||[]}catch{return console.log("No staff data available"),[]}},{staleTime:300*1e3,keepPreviousData:!0}),{data:w,isLoading:m,refetch:y}=re("documents",async()=>{console.log(" Fetching documents from /documents...");const N=await F.get("/api/documents");return console.log(" Documents response:",N.data),N.data},{staleTime:480*1e3,keepPreviousData:!0,onSuccess:N=>{console.log(" Documents query success:",N?.length||0,"documents")},onError:N=>{console.error(" Documents query error:",N)}}),{data:v}=re(["documentStatus",s],async()=>s?(await F.get(`/api/documents/enquiry/${s}`)).data:null,{enabled:!!s,staleTime:180*1e3,keepPreviousData:!0}),C=le(async({file:N,enquiryId:I,type:B})=>{const te=new FormData;te.append("file",N),te.append("enquiryId",I.toString()),te.append("type",B);const ve=x?.find(Rt=>Rt.id===I);return ve?.assignedStaff&&te.append("assignedStaff",ve.assignedStaff),F.post("/api/documents/upload",te,{headers:{"Content-Type":"multipart/form-data"}})},{onSuccess:N=>{console.log(" Upload success response:",N.data),O.success("Document uploaded successfully!"),N.data.document&&p.setQueryData("documents",I=>I?[N.data.document,...I]:[N.data.document]),p.invalidateQueries("documents"),p.invalidateQueries(["documentStatus",s]),n(""),o&&setTimeout(()=>{const I=se();I?(n(I.document.value),O.success(` ${J.find(B=>B.value===N.data.document.type)?.label} uploaded! Next: ${I.document.label}`)):(O.success(" All required documents uploaded!"),l(!1),n(""))},500)},onError:N=>{console.error("Upload error:",N);let I="Upload failed";N.response?.data?.message?I=N.response.data.message:N.response?.data?.error?I=N.response.data.error:N.message?I=N.message:N.response?.status===413?I="File too large. Maximum size is 10MB.":N.response?.status===415?I="Unsupported file type. Please upload PDF files only.":N.response?.status===400&&(N.response?.data?.message?.includes("already exists")?(I=N.response.data.message,n("")):I="Invalid file or missing required information."),O.error(I)}}),T=le(async N=>F.patch(`/api/documents/${N}/verify`,{verified:!0}),{onSuccess:(N,I)=>{O.success("Document verified successfully!"),p.setQueryData("documents",B=>B&&B.map(te=>te.id===I?{...te,verified:!0,verifiedAt:new Date().toISOString()}:te)),s&&p.invalidateQueries(["documentStatus",s]),setTimeout(()=>{p.invalidateQueries("documents")},100)},onError:N=>{O.error(N.response?.data?.message||"Verification failed")}}),L=le(async N=>F.delete(`/api/documents/${N}`),{onSuccess:(N,I)=>{O.success("Document deleted successfully!"),p.setQueryData("documents",B=>B&&B.filter(te=>te.id!==I)),s&&p.invalidateQueries(["documentStatus",s]),setTimeout(()=>{p.invalidateQueries("documents")},100)},onError:N=>{O.error(N.response?.data?.message||"Delete failed")}}),$=le(async N=>F.post("/api/shortlist",{enquiryId:N.id,name:N.name||N.businessName,mobile:N.mobile,businessName:N.businessName,businessNature:N.businessType,loanAmount:N.loanAmount||5e5,comments:"Shortlisted from document management"}),{onSuccess:N=>{console.log("Shortlist response:",N.data),O.success(N.data.message||"Client shortlisted successfully!"),p.invalidateQueries("shortlists"),p.invalidateQueries(["shortlists"]),N.data.shortlist&&p.setQueryData(["shortlists",""],I=>I?I.some(te=>te.id===N.data.shortlist.id)?I:[N.data.shortlist,...I]:[N.data.shortlist]),setTimeout(()=>{j("/shortlist",{state:{fromAdd:!0,clientName:N.data.shortlist?.name||N.data.name,timestamp:Date.now()}})},1e3)},onError:N=>{console.error("Shortlist error:",N);const I=N.response?.data?.message||N.message||"Shortlist failed";O.error(`Shortlist failed: ${I}`)}}),P=le(async({enquiryId:N,staffName:I})=>F.patch(`/enquiries/${N}`,{assignedStaff:I}),{onSuccess:(N,{enquiryId:I,staffName:B})=>{console.log(`Staff ${B} assigned to enquiry ${I}`),p.setQueryData("enquiries",te=>te&&te.map(ve=>ve.id===I?{...ve,assignedStaff:B}:ve)),O.success(`Staff assigned to ${B} successfully!`)},onError:N=>{console.error("Staff assignment error:",N),O.error("Failed to assign staff member")}}),Z=async N=>{const I=o?ie?.value:a;if(!s||!I||!i){O.error("Please select enquiry, document type, and assign staff before uploading");return}const B=10*1024*1024;if(N.size>B){O.error("File size must be less than 10MB");return}if(N.type!=="application/pdf"){O.error("Only PDF files are allowed");return}if(console.log(" Uploading file:",{name:N.name,size:N.size,type:N.type,enquiryId:s,documentType:I,isSequentialMode:o}),(w?.filter(ve=>ve.enquiry.id.toString()===s&&ve.type===I)||[]).length>0){const ve=J.find(Rt=>Rt.value===I)?.label||I;O.error(`${ve} already exists for this client. Please select a different document type.`);return}C.mutate({file:N,enquiryId:parseInt(s),type:I})},Q=async N=>{try{const{getApiUrl:I}=await Ci(async()=>{const{getApiUrl:ve}=await import("./config-D1vN5v8q.js");return{getApiUrl:ve}},[]),te={isOpen:!0,documentUrl:I(`/api/documents/${N.id}/view`),documentName:`${N.enquiry.name} - ${J.find(ve=>ve.value===N.type)?.label||N.type}`,documentType:N.type,documentId:N.id,isVerified:N.verified};d(te)}catch(I){console.error("Error getting document URL:",I),O.error("Failed to load document. Please try again.")}},H=N=>{f({isOpen:!0,clientId:N.id,clientName:N.name})},G=()=>{d({isOpen:!1,documentUrl:"",documentName:"",documentType:"",documentId:void 0,isVerified:!1})},ae=()=>{f({isOpen:!1,clientId:0,clientName:""})},Y=N=>{window.confirm("Are you sure you want to delete this document?")&&L.mutate(N)},J=[{value:"GST",label:"GST Certificate",required:!0},{value:"UDYAM",label:"Udyam Registration",required:!0},{value:"BANK_STATEMENT",label:"Bank Statement",required:!0},{value:"OWNER_PAN",label:"Owner PAN Card",required:!0},{value:"AADHAR",label:"Aadhar Card",required:!0},{value:"WEBSITE_GATEWAY",label:"Website & Gateway",required:!0},{value:"IE_CODE",label:"IE Code",required:!0}],ee=x?.find(N=>N.id.toString()===s),de=w?.filter(N=>N.enquiry.id.toString()===s)||[],Ne=de.map(N=>N.type),se=()=>{const N=J.filter(I=>I.required);for(let I=0;I<N.length;I++)if(!Ne.includes(N[I].value))return{index:I,document:N[I]};return null},ie=se()?.document,he={current:Ne.length,total:J.filter(N=>N.required).length,percentage:Math.round(Ne.length/J.filter(N=>N.required).length*100)},ke=J.filter(N=>N.required),it=ke.filter(N=>Ne.includes(N.value)),He=ke.length>0?Math.round(it.length/ke.length*100):0,ze=He===100,Ye=de.length>0&&ke.every(N=>{const I=de.find(B=>B.type===N.value);return I&&I.verified}),k=ee?.shortlist,X=Ye&&s;return console.log(" DocumentUpload render state:",{enquiriesLoading:b,enquiriesCount:x?.length||0,enquiriesError:!!g,isLoading:m,documentsCount:w?.length||0}),b&&m?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Document Management"}),e.jsx("p",{className:"text-gray-600",children:"Upload and manage loan application documents"})]}),X&&e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card border-green-200 bg-green-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-green-600 text-2xl mr-3",children:""}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-green-900",children:"All Documents Verified!"}),e.jsx("p",{className:"text-green-700",children:"Client is ready for shortlisting"})]})]}),k?e.jsxs("div",{className:"px-6 py-3 bg-blue-100 text-blue-800 font-semibold rounded-lg flex items-center",children:[e.jsx(Ee,{className:"h-5 w-5 mr-2"}),"Already Shortlisted"]}):e.jsxs("button",{onClick:()=>$.mutate(ee),disabled:$.isLoading,className:"px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center",children:[e.jsx(qt,{className:"h-5 w-5 mr-2"}),$.isLoading?"Adding to Shortlist...":"Add to Shortlist"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:J.filter(N=>N.required).map(N=>e.jsxs("div",{className:"flex items-center p-3 bg-white rounded-lg border border-green-200",children:[e.jsx(Ee,{className:"h-5 w-5 text-green-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900",children:N.label}),e.jsx("p",{className:"text-sm text-green-600",children:"Verified "})]})]},N.value))}),e.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("h4",{className:"text-red-800 font-medium mb-2 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"All Documents Now Mandatory"]}),e.jsxs("p",{className:"text-sm text-red-700",children:[e.jsx("span",{className:"font-semibold",children:"Website & Gateway"})," and ",e.jsx("span",{className:"font-semibold",children:"IE Code"})," are now required documents. All 7 document types must be uploaded and verified before the client can proceed to shortlist."]})]})]}),s&&!X&&e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card bg-blue-50 border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900",children:"Document Upload Mode"}),e.jsx("p",{className:"text-blue-700 text-sm",children:o?"Sequential mode: Upload documents one by one":"Standard mode: Choose any document type to upload"})]}),e.jsx("button",{onClick:()=>{const N=!o;if(l(N),N){const I=se();I?(n(I.document.value),O.success(` Sequential mode activated! Starting with: ${I.document.label}`)):(O.success("All required documents are already uploaded!"),l(!1))}else n(""),O.success(" Switched to standard mode")},className:`px-4 py-2 rounded-lg font-medium transition-colors ${o?"bg-blue-600 text-white hover:bg-blue-700":"bg-white text-blue-600 border border-blue-300 hover:bg-blue-50"}`,children:o?" Sequential Mode":" Switch to Sequential"})]}),o&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Upload Progress"}),e.jsxs("span",{className:"text-blue-900 font-semibold",children:[he.current,"/",he.total," documents"]})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-3",children:e.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-500",style:{width:`${he.percentage}%`}})}),ie&&e.jsx("div",{className:"mt-3 p-3 bg-white rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-2xl mr-3",children:""}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-blue-900",children:["Next: ",ie.label]}),e.jsxs("p",{className:"text-sm text-blue-600",children:["Step ",he.current+1," of ",he.total]})]})]})})]})]}),!X&&e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload New Document"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Enquiry *"}),e.jsxs("select",{value:s,onChange:N=>{const I=N.target.value;if(t(I),n(""),I&&x){const B=x.find(te=>te.id.toString()===I);B?.assignedStaff?r(B.assignedStaff):r("")}else r("")},className:"input-field",disabled:b,children:[e.jsx("option",{value:"",children:b?"Loading enquiries...":g?"Backend server not available - Please start the backend server":!x||x.length===0?"No enquiries available - Backend may be offline":"Choose enquiry..."}),x?.map(N=>e.jsxs("option",{value:N.id,children:[N.name," - ",N.mobile," (",N.businessType||"No business type",")",N.assignedStaff?`  Staff: ${N.assignedStaff}`:""]},N.id))]}),!!g&&e.jsxs("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:[e.jsxs("p",{className:"text-sm text-red-600",children:[e.jsx("strong",{children:"Backend Connection Error:"})," Cannot connect to the backend server."]}),e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Please ensure the backend server is running on port 5002. Check the console for more details."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign Staff *"}),e.jsxs("select",{value:i,onChange:N=>{const I=N.target.value;r(I),s&&I&&P.mutate({enquiryId:parseInt(s),staffName:I})},className:"input-field",disabled:!s,required:!0,children:[e.jsx("option",{value:"",children:s?"Choose staff member...":"Select enquiry first..."}),A&&A.map(N=>e.jsxs("option",{value:N.name,children:[N.name," - ",N.role]},N.id))]}),s&&e.jsx("div",{className:"mt-1",children:i?e.jsxs("p",{className:"text-sm text-green-600",children:[" Staff assigned: ",i]}):e.jsx("p",{className:"text-sm text-red-600",children:"Staff assignment is required before uploading documents"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Document Type *"}),o?e.jsxs("div",{className:"input-field bg-blue-50 border-blue-300",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-blue-900",children:ie?ie.label:"All documents uploaded!"}),ie&&e.jsxs("span",{className:"text-sm text-blue-600 bg-blue-200 px-2 py-1 rounded",children:["Step ",he.current+1,"/",he.total]})]}),!ie&&e.jsx("p",{className:"text-sm text-green-600 mt-1",children:" All required documents completed!"})]}):e.jsxs("select",{value:a,onChange:N=>n(N.target.value),className:"input-field",disabled:!s,children:[e.jsx("option",{value:"",children:s?"Choose type...":"Select enquiry first..."}),J.map(N=>{const I=Ne.includes(N.value);return e.jsxs("option",{value:N.value,disabled:I,children:[N.label," ",N.required?"*":"(Optional)"," ",I?" Already Uploaded":""]},N.value)})]})]})]}),ee&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-blue-900",children:"Selected Client Details"}),e.jsx("button",{onClick:()=>H(ee),className:"px-3 py-1 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 transition-colors",children:" View All Documents"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Name:"}),e.jsx("span",{className:"ml-2 text-blue-900",children:ee.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Mobile:"}),e.jsx("span",{className:"ml-2 text-blue-900",children:ee.mobile})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Business:"}),e.jsx("span",{className:"ml-2 text-blue-900",children:ee.businessType})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Document Completion"}),e.jsxs("span",{className:"text-blue-900 font-semibold",children:[He,"%"]})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${He}%`}})}),e.jsxs("div",{className:"mt-2 text-xs text-blue-700",children:[it.length," of ",ke.length," required documents uploaded"]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-blue-700 font-medium mb-3",children:"Document Status"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:J.map(N=>{const I=de.some(te=>te.type===N.value)||v?.documents?.some(te=>te.type===N.value),B=de.find(te=>te.type===N.value)||v?.documents?.find(te=>te.type===N.value);return e.jsxs("div",{className:"flex items-center space-x-2",children:[I?B?.verified?e.jsx("span",{className:"text-green-600 text-lg",title:"Verified",children:""}):e.jsx("span",{className:"text-yellow-600 text-lg",title:"Uploaded but not verified",children:""}):N.required?e.jsx("span",{className:"text-red-600 text-lg",title:"Missing required document",children:""}):e.jsx("span",{className:"text-gray-400 text-lg",title:"Optional document",children:""}),e.jsxs("span",{className:`text-sm ${I?B?.verified?"text-green-700 font-medium":"text-yellow-700 font-medium":N.required?"text-red-700":"text-gray-600"}`,children:[N.label,N.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"}),I&&e.jsxs("span",{className:"ml-2 text-xs",children:["(",B?.verified?"Verified":"Pending Verification",")"]})]})]},N.value)})}),e.jsxs("div",{className:"mt-3 text-xs text-blue-600",children:[e.jsx("span",{className:"text-green-600",children:" Verified"})," ",e.jsx("span",{className:"text-yellow-600 ml-2",children:" Uploaded (Pending)"})," ",e.jsx("span",{className:"text-red-600 ml-2",children:" Missing (Required)"})," ",e.jsx("span",{className:"text-gray-600 ml-2",children:" Optional"})]})]}),ze&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-green-600 text-lg mr-2",children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-800 font-semibold",children:"Ready for Shortlist!"}),e.jsx("p",{className:"text-green-700 text-sm",children:"All required documents completed"})]})]}),e.jsx("button",{onClick:()=>$.mutate(ee),disabled:$.isLoading||!!ee?.shortlist,className:`px-4 py-2 rounded-md transition-colors disabled:opacity-50 ${ee?.shortlist?"bg-gray-500 text-white cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:ee?.shortlist?" Already Shortlisted":$.isLoading?"Adding...":" Add to Shortlist"})]})})]}),s&&(o?ie:a)&&i?e.jsxs("div",{className:"relative",children:[o&&ie&&e.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-3xl mr-3",children:""}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-900",children:ie.label}),e.jsx("p",{className:"text-blue-600 text-sm",children:"Upload this document to continue"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:he.current+1}),e.jsxs("div",{className:"text-xs text-blue-500",children:["of ",he.total]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-700",children:[e.jsx("span",{children:" Required document"}),e.jsx("span",{children:""}),e.jsx("span",{children:" Next in sequence"}),he.current>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsxs("span",{children:[" ",he.current," completed"]})]})]})]}),e.jsx(ln,{onUpload:Z}),C.isLoading&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-blue-600 font-medium",children:o?`Uploading ${ie?.label}...`:"Uploading document..."})]})})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center bg-gray-50",children:[e.jsx(lt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:s?i?o&&!ie?" All documents uploaded! Switch to standard mode for additional uploads.":"Please select a document type to upload":"Please assign a staff member":"Please select an enquiry first"})]})]}),X&&e.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card bg-gray-50 border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Need to Upload Additional Documents?"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"All required documents are verified. You can still upload optional documents if needed."}),e.jsx("button",{onClick:()=>{const N=document.getElementById("upload-section");N&&N.scrollIntoView({behavior:"smooth"})},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:" Upload Additional Documents"})]})}),X&&e.jsxs(M.div,{id:"upload-section",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card border-blue-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Upload Additional Documents"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Enquiry *"}),e.jsxs("select",{value:s,onChange:N=>{const I=N.target.value;if(t(I),n(""),I&&x){const B=x.find(te=>te.id.toString()===I);B?.assignedStaff?r(B.assignedStaff):r("")}else r("")},className:"input-field",disabled:b,children:[e.jsx("option",{value:"",children:b?"Loading enquiries...":g?"Backend server not available - Please start the backend server":!x||x.length===0?"No enquiries available - Backend may be offline":"Choose enquiry..."}),x?.map(N=>e.jsxs("option",{value:N.id,children:[N.name," - ",N.mobile," (",N.businessType||"No business type",")",N.assignedStaff?`  Staff: ${N.assignedStaff}`:""]},N.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign Staff *"}),e.jsxs("select",{value:i,onChange:N=>{const I=N.target.value;r(I),s&&I&&P.mutate({enquiryId:parseInt(s),staffName:I})},className:"input-field",disabled:!s,required:!0,children:[e.jsx("option",{value:"",children:s?"Choose staff member...":"Select enquiry first..."}),A&&A.map(N=>e.jsxs("option",{value:N.name,children:[N.name," - ",N.role]},N.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Document Type *"}),e.jsxs("select",{value:a,onChange:N=>n(N.target.value),className:"input-field",disabled:!s,children:[e.jsx("option",{value:"",children:s?"Choose type...":"Select enquiry first..."}),J.map(N=>{const I=Ne.includes(N.value);return e.jsxs("option",{value:N.value,disabled:I,children:[N.label," ",N.required?"*":"(Optional)"," ",I?" Already Uploaded":""]},N.value)})]})]})]}),s&&(o?ie:a)&&i?e.jsxs("div",{className:"relative",children:[e.jsx(ln,{onUpload:Z}),C.isLoading&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-blue-600 font-medium",children:"Uploading document..."})]})})]}):e.jsxs("div",{className:"border-2 border-dashed border-blue-300 rounded-lg p-8 text-center bg-blue-50",children:[e.jsx(lt,{className:"h-12 w-12 text-blue-400 mx-auto mb-4"}),e.jsx("p",{className:"text-blue-600 text-lg",children:s?i?"Please select a document type to upload":"Please assign a staff member":"Please select an enquiry first"})]})]}),e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Uploaded Documents"}),e.jsx("p",{className:"text-sm text-gray-500",children:m?"Loading...":s?`${de?.length||0} documents for ${ee?.name}`:"Select a client to view documents"})]}),e.jsxs("div",{className:"flex space-x-2",children:[s&&e.jsx("button",{onClick:async()=>{try{const N=await F.post(`/api/documents/remove-duplicates/${s}`);N.data.removed>0?(O.success(`Removed ${N.data.removed} duplicate documents`),y()):O.success("No duplicates found for this enquiry")}catch{O.error("Failed to remove duplicates")}},className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:" Clean Duplicates"}),e.jsx("button",{onClick:()=>{console.log(" Manual refresh clicked"),y(),O.success("Refreshing documents...")},disabled:m,className:`px-3 py-1 text-white text-sm rounded transition-colors ${m?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:m?" Loading...":" Refresh"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Document"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Enquiry"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Uploaded By"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:m?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading documents..."})]})})}):w&&w.length>0?w?.filter(N=>s?N.enquiry.id.toString()===s:!0).map(N=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(lt,{className:"h-5 w-5 text-gray-400 mr-2"}),e.jsx("button",{onClick:()=>Q(N),className:"text-primary-600 hover:text-primary-900 font-medium",children:"View Document"})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[N.enquiry.name,e.jsx("div",{className:"text-xs text-gray-500",children:N.enquiry.mobile})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:J.find(I=>I.value===N.type)?.label||N.type}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("div",{className:"flex items-center",children:N.verified?e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"h-5 w-5 text-green-500 mr-1"}),e.jsx("span",{className:"text-green-800 text-sm font-medium",children:"Verified"})]}):e.jsxs(e.Fragment,{children:[e.jsx(gt,{className:"h-5 w-5 text-yellow-500 mr-1"}),e.jsx("span",{className:"text-yellow-800 text-sm font-medium",children:"Pending"})]})}),N.savedToSupabase&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-4 w-4 text-blue-500 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-blue-800 text-xs font-medium",children:"Saved to DB"})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:N.uploadedBy.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(N.uploadedAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>T.mutate(N.id),disabled:T.isLoading||N.verified,className:"flex items-center justify-center w-8 h-8 rounded-full bg-green-100 text-green-600 hover:bg-green-200 hover:text-green-700 disabled:opacity-50 disabled:cursor-not-allowed",title:N.verified?"Document verified":"Verify document",children:e.jsx("span",{className:"text-sm font-bold",children:""})}),e.jsx("button",{onClick:()=>H(N.enquiry),className:"text-purple-600 hover:text-purple-900 text-sm font-medium",title:"View all documents for this client",children:"View All"}),e.jsx("button",{onClick:()=>$.mutate(N.enquiry),disabled:$.isLoading||!!N.enquiry?.shortlist,className:`font-medium disabled:opacity-50 ${N.enquiry?.shortlist?"text-gray-500 cursor-not-allowed":"text-green-600 hover:text-green-900"}`,title:N.enquiry?.shortlist?"Already shortlisted":"Mark this client as shortlisted",children:N.enquiry?.shortlist?" Shortlisted":" Shortlist"}),e.jsx("button",{onClick:()=>Y(N.id),disabled:L.isLoading,className:"text-red-600 hover:text-red-900 disabled:opacity-50",children:"Delete"})]})})]},`doc-${N.id}-${N.type}`)):e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[e.jsx(lt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"No documents uploaded for this client yet."}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Upload documents using the form above to see them listed here."}),e.jsxs("p",{className:"text-blue-600 text-sm mt-2",children:["Selected client: ",ee?.name," - ",ee?.mobile]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"Select a client to view their documents."}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Choose an enquiry from the dropdown above to see uploaded documents."})]})]})})})]})})]}),e.jsx(Ri,{isOpen:c.isOpen,onClose:G,documentName:c.documentName,documentType:c.documentType,documentUrl:c.documentUrl,documentId:c.documentId,isVerified:c.isVerified,onVerify:N=>{T.mutate(N),d(I=>({...I,isVerified:!0}))}}),e.jsx(Gd,{isOpen:h.isOpen,onClose:ae,clientId:h.clientId,clientName:h.clientName,documents:w||[]})]})}const Kd=()=>{const s=Ae(),t=Ve(),[a,n]=u.useState({}),{data:i,isLoading:r}=re("enquiries",async()=>{console.log(" DocumentVerification: Fetching enquiries...");const v=await F.get("/api/enquiries");return console.log(" DocumentVerification: Enquiries fetched:",v.data?.length||0),v.data},{staleTime:120*1e3,keepPreviousData:!0,refetchOnMount:!0,refetchOnWindowFocus:!0}),{data:o,isLoading:l}=re("documents-verification",async()=>{console.log(" DocumentVerification: Fetching documents...");const v=await F.get("/api/documents");return console.log(" DocumentVerification: Documents fetched:",v.data?.length||0),v.data},{staleTime:180*1e3,keepPreviousData:!0,refetchOnMount:!0,refetchOnWindowFocus:!0}),c=r||l,{data:d}=re("staff-members",async()=>{try{return(await F.get("/api/staff")).data?.staff||[]}catch{return console.log("No staff data available"),[]}},{staleTime:300*1e3}),h=le(async({documentId:v,verified:C,enquiryId:T})=>({...await F.patch(`/api/documents/${v}/verify`,{verified:C}),enquiryId:T}),{onSuccess:async v=>{if(O.success("Document verification updated successfully!"),s.invalidateQueries("documents-verification"),s.invalidateQueries("enquiries"),s.invalidateQueries(["shortlists"]),console.log(" Document verification updated, refreshing all related data..."),v.enquiryId){const L=(await s.fetchQuery("documents-verification",async()=>(await F.get("/api/documents")).data)).reduce(($,P)=>{const Z=P.enquiry.id;return $[Z]||($[Z]={enquiry:P.enquiry,documents:[]}),$[Z].documents.push(P),$},{})[v.enquiryId];if(L){const $=L.documents.every(Z=>Z.verified),P=L.documents.some(Z=>Z.enquiry.shortlist);if($&&!P)try{await F.post("/api/shortlist",{enquiryId:v.enquiryId}),O.success(` All documents verified! ${L.enquiry.name} automatically added to shortlist!`),s.invalidateQueries("documents-verification"),s.invalidateQueries("enquiries"),s.invalidateQueries(["shortlists"])}catch(Z){console.error("Failed to auto-add to shortlist:",Z)}}}},onError:v=>{O.error(v.response?.data?.message||"Failed to update verification")}}),f=le(async({enquiryId:v,enquiryData:C})=>F.post("/api/shortlist",{enquiryId:v,name:C.name,mobile:C.mobile,businessName:C.businessName||C.name,businessNature:C.businessType,loanAmount:C.loanAmount||5e5,comments:"Added from document verification - all documents verified"}),{onSuccess:v=>{const C=v.data?.name||"Client";O.success(`${C} added to shortlist successfully!`),s.invalidateQueries(["shortlists"]),s.invalidateQueries("documents-verification"),s.invalidateQueries("enquiries"),console.log(" Client added to shortlist, refreshing all related data..."),setTimeout(()=>{t("/shortlist")},1e3)},onError:v=>{O.error(v.response?.data?.message||"Failed to add to shortlist")}}),p=le(async({enquiryId:v,staffName:C})=>F.patch(`/api/supabase/enquiries/${v}`,{assignedStaff:C}),{onSuccess:(v,{staffName:C})=>{O.success(`Staff assigned to ${C} successfully!`),s.invalidateQueries("documents-verification")},onError:v=>{console.error("Assignment error:",v),O.error("Failed to assign staff member")}}),j=(v,C,T)=>{h.mutate({documentId:v,verified:C,enquiryId:T})},x=v=>{if(!a[v]){O.error("Please assign a staff member before adding to shortlist");return}const T=o?.filter(Z=>Z.enquiry.id===v);if(!T?.every(Z=>Z.verified)){O.error("All documents must be verified before adding to shortlist");return}const $=m(T||[]);if($.length>0){const Z=$.map(Q=>Q.label).join(", ");O.error(`Missing mandatory document types: ${Z}. Please upload all required documents.`);return}const P=T?.[0]?.enquiry;if(!P){O.error("Enquiry data not found");return}f.mutate({enquiryId:v,enquiryData:P})},b=(v,C)=>{C&&(n(T=>({...T,[v]:C})),p.mutate({enquiryId:v,staffName:C}))},g=()=>e.jsx(Us,{className:"h-5 w-5"}),A=v=>v?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Ee,{className:"h-4 w-4 mr-1"}),"Verified"]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(Zt,{className:"h-4 w-4 mr-1"}),"Pending"]}),w=[{type:"GST",label:"GST Certificate",icon:""},{type:"UDYAM",label:"UDYAM Registration",icon:""},{type:"BANK_STATEMENT",label:"Bank Statement",icon:""},{type:"OWNER_PAN",label:"Owner PAN Card",icon:""},{type:"AADHAR",label:"Aadhar Card",icon:""},{type:"WEBSITE_GATEWAY",label:"Website & Gateway",icon:""},{type:"IE_CODE",label:"IE Code",icon:""}],m=v=>{const C=v.map(T=>T.type);return w.filter(T=>!C.includes(T.type))},y=o?.reduce((v,C)=>{const T=C.enquiry.id;return v[T]||(v[T]={enquiry:C.enquiry,documents:[]}),v[T].documents.push(C),v},{});return c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Document Verification"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[i?.length||0," enquiries  ",o?.length||0," documents to review"]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("button",{onClick:()=>{console.log(" Manual refresh triggered from header..."),s.invalidateQueries("enquiries"),s.invalidateQueries("documents-verification"),O.success("Refreshing data...")},disabled:c,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600 mr-2"}),"Loading..."]}):e.jsx(e.Fragment,{children:" Refresh"})})})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Us,{className:"h-5 w-5 text-blue-600 mt-0.5 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Mandatory Document Types for Verification"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 text-xs",children:[e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-800 font-medium",children:" GST Certificate"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-800 font-medium",children:" UDYAM Registration"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-800 font-medium",children:" Bank Statement"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-800 font-medium",children:" Owner PAN Card"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-800 font-medium",children:" Aadhar Card"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded bg-red-100 text-red-800 font-medium",children:" Website & Gateway"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded bg-red-100 text-red-800 font-medium",children:" IE Code"})]}),e.jsxs("p",{className:"text-xs text-blue-700 mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Note:"})," All 7 document types must be verified before a client can be added to the shortlist.",e.jsx("span",{className:"text-red-700 font-semibold",children:"Website & Gateway and IE Code are now mandatory requirements"})," along with the standard documents."]})]})]})}),y&&Object.keys(y).length>0?e.jsx("div",{className:"space-y-6",children:Object.values(y).map(v=>{const C=v.documents.every(P=>P.verified),T=v.documents.some(P=>P.enquiry.shortlist),$=m(v.documents).length===0;return e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-md border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:v.enquiry.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[" ",v.enquiry.mobile,"  ",v.enquiry.businessType||"Business Type Not Specified"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[C&&$&&!T&&e.jsxs("button",{onClick:()=>x(v.enquiry.id),disabled:f.isLoading,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:[e.jsx(qt,{className:"h-4 w-4 mr-2"}),"Add to Shortlist"]}),C&&!$&&!T&&e.jsxs("button",{disabled:!0,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-gray-400 cursor-not-allowed",title:"Missing mandatory document types",children:[e.jsx(gt,{className:"h-4 w-4 mr-2"}),"Missing Documents"]}),T&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:" In Shortlist"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(nt,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Assign Staff Member ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:a[v.enquiry.id]||"",onChange:P=>b(v.enquiry.id,P.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:p.isLoading,required:!0,children:[e.jsx("option",{value:"",children:"Select staff member..."}),d&&d.map(P=>e.jsxs("option",{value:P.name,children:[P.name," - ",P.role]},P.id))]}),!a[v.enquiry.id]&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Staff assignment is required before adding to shortlist"})]})]})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.documents.map(P=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[g(),e.jsxs("div",{className:"ml-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:P.type.replace(/_/g," ")}),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Required"})]}),e.jsxs("p",{className:"text-xs text-gray-600 font-medium mb-1",children:[" Enquiry: ",e.jsx("span",{className:"font-semibold text-blue-700",children:P.enquiry.name})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[" ",P.enquiry.mobile,"  ",P.enquiry.businessType||"Business Type Not Specified"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Uploaded ",new Date(P.uploadedAt).toLocaleDateString()]})]})]}),A(P.verified)]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>window.open(P.s3Url,"_blank"),className:"inline-flex items-center px-3 py-1 border border-gray-300 text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(Oe,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>j(P.id,!0,P.enquiry.id),disabled:h.isLoading,className:`p-1 rounded ${P.verified?"text-green-600 bg-green-100":"text-gray-400 hover:text-green-600 hover:bg-green-100"} transition-colors`,title:"Approve",children:e.jsx(Ee,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>j(P.id,!1,P.enquiry.id),disabled:h.isLoading,className:`p-1 rounded ${P.verified?"text-gray-400 hover:text-red-600 hover:bg-red-100":"text-red-600 bg-red-100"} transition-colors`,title:"Reject",children:e.jsx(gt,{className:"h-4 w-4"})})]})]})]},P.id))}),(()=>{const P=m(v.documents);return P.length>0&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(gt,{className:"h-5 w-5 text-red-600 mt-0.5 mr-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-red-900 mb-2",children:"Missing Mandatory Document Types"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:P.map(Z=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800",children:[Z.icon," ",Z.label]},Z.type))}),e.jsxs("p",{className:"text-xs text-red-700 mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Action Required:"})," These document types must be uploaded before the client can be added to shortlist."]})]})]})})})(),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsxs("span",{className:"text-gray-600",children:["Verification Progress: ",v.documents.filter(P=>P.verified).length," / ",v.documents.length," documents verified"]}),e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${v.documents.filter(P=>P.verified).length/v.documents.length*100}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["Document Types: ",v.documents.length," / ",w.length," mandatory types uploaded"]}),e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${v.documents.length/w.length*100}%`}})})]})]})]})]},v.enquiry.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Us,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No documents to verify"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:i&&i.length>0?"All documents have been processed or no documents have been uploaded yet.":"No enquiries found. Create an enquiry first to upload documents for verification."}),e.jsxs("div",{className:"mt-4 space-x-3",children:[e.jsx("button",{onClick:()=>{console.log(" Refreshing document verification data..."),s.invalidateQueries("enquiries"),s.invalidateQueries("documents-verification"),O.success("Refreshing data...")},className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:" Refresh Data"}),(!i||i.length===0)&&e.jsx("button",{onClick:()=>t("/apply"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:" Create New Enquiry"})]})]})]})},zd=()=>{const[s,t]=u.useState("desktop");return u.useEffect(()=>{const a=()=>{const n=window.innerWidth;n<768?t("mobile"):n<1024?t("tablet"):t("desktop")};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),s};function Yd(){const s=zd(),[t,a]=u.useState(""),[n,i]=u.useState(!1),[r,o]=u.useState({isOpen:!1,shortlist:null}),l=Ae(),c=la(),d=le(async({id:m,interestStatus:y})=>{console.log(" Sending status update request:",{id:m,interestStatus:y});const v=await F.patch(`/api/shortlist/${m}`,{interestStatus:y});return console.log(" Status update response:",v.data),v},{onSuccess:(m,y)=>{const v=y.interestStatus==="NOT_INTERESTED"?"Not Interested":"Interested";O.success(`Status updated to: ${v}`),console.log(" Status successfully updated to:",y.interestStatus),console.log(" Backend response:",m.data),setTimeout(()=>{l.invalidateQueries(["shortlists"]),l.invalidateQueries(["cashfree-applications"])},100)},onError:(m,y)=>{console.error(" Status update failed:",m),console.error("Failed variables:",y),l.setQueryData(["shortlists",t],v=>v&&v.map(C=>{if(C.id===y.id){console.log(" Reverting optimistic update for ID:",y.id);const T=y.interestStatus==="NOT_INTERESTED"?"INTERESTED":"NOT_INTERESTED";return{...C,interestStatus:T}}return C})),O.error(`Failed to update status: ${m.response?.data?.message||m.message}`)}}),h=(m,y)=>{l.setQueryData(["shortlists",t],v=>v&&v.map(C=>C.id===m?(console.log(" Optimistically updating status for ID:",m,"to:",y),{...C,interestStatus:y}):C)),d.mutate({id:m,interestStatus:y})},f=le(async m=>{console.log(" Executing DELETE request for shortlist ID:",m);try{await F.get("/api/staff/health"),console.log(" Server is accessible, proceeding with DELETE")}catch(v){throw console.error(" Server not accessible:",v),new Error("Backend server is not running. Please start the server first.")}const y=await F.delete(`/api/shortlist/${m}`);return console.log(" DELETE response received:",y.data),y},{onSuccess:(m,y)=>{console.log(" Delete mutation successful:",m.data),O.success("Shortlist deleted successfully!"),l.setQueryData(["shortlists",t],v=>v&&v.filter(C=>C.id!==y)),setTimeout(()=>{l.invalidateQueries(["shortlists"]),l.invalidateQueries(["cashfree-applications"])},100)},onError:m=>{console.error(" Delete mutation failed:",m),console.error("Error details:",{message:m.message,status:m.response?.status,statusText:m.response?.statusText,data:m.response?.data,url:m.config?.url,method:m.config?.method});let y="Failed to delete shortlist";m.message.includes("Backend server is not running")?y="Backend server is not running. Please start the server on port 5001.":m.response?.status===404?y="DELETE endpoint not found. Please ensure backend server is running with Supabase routes.":y=m.response?.data?.message||`Failed to delete shortlist (${m.response?.status||m.message})`,O.error(y)}}),p=(m,y)=>{window.confirm(`Are you sure you want to delete the shortlist for "${y}"? This action cannot be undone.`)&&(console.log(" Attempting to delete shortlist ID:",m),console.log("API endpoint will be:",`/api/shortlist/${m}`),f.mutate(m))},j=m=>{console.log(" Viewing shortlist:",m.name),o({isOpen:!0,shortlist:m})},x=()=>{o({isOpen:!1,shortlist:null})},{data:b,isLoading:g,refetch:A}=re(["shortlists",t],async()=>{try{const m=new URLSearchParams;t&&m.append("name",t);const y=await F.get(`/api/shortlist?${m}`);return console.log(" Shortlist data received:",y.data?.length||0,"items"),console.log(" First shortlist item details:",y.data?.[0]),y.data||[]}catch(m){return console.error(" Error fetching shortlists:",m),[]}},{staleTime:300*1e3,cacheTime:900*1e3,keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchInterval:!1,onSuccess:m=>{console.log(" Shortlists query success:",m?.length||0,"shortlists")},onError:m=>{console.error(" Shortlists query error:",m)}});u.useEffect(()=>{c.state?.fromEdit&&(console.log("Returning from edit page, forcing refresh...",c.state),i(!0),l.clear(),l.invalidateQueries(["shortlists"]),l.invalidateQueries(["shortlist"]),l.invalidateQueries(["cashfree-applications"]),setTimeout(()=>{l.refetchQueries(["shortlists"]),A().finally(()=>{i(!1)})},50)),c.state?.fromAdd&&c.state?.clientName&&(O.success(` ${c.state.clientName} has been successfully added to shortlist!`),window.history.replaceState({},document.title))},[c.state,l,A,i]);const w=s==="mobile";return g||n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:n?"Refreshing data...":"Loading..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Shortlisted Applications"}),e.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[e.jsx("button",{onClick:()=>{console.log(" Manual refresh triggered"),A(),O.success("Refreshing shortlist data...")},className:"btn-outline inline-flex items-center",children:" Refresh"}),e.jsx("button",{onClick:async()=>{try{const m=await F.get("/api/staff/health");O.success("Backend server is running!"),console.log("Server status:",m.data)}catch(m){O.error(`Backend server not accessible: ${m.response?.status||m.message}`),console.error("Server check failed:",m)}},className:"btn-outline inline-flex items-center",children:"Check Server"}),e.jsxs(je,{to:"/shortlist/new",className:"btn-primary inline-flex items-center",children:[e.jsx(xt,{className:"h-5 w-5 mr-2"}),"New Shortlist"]})]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(At,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name...",value:t,onChange:m=>a(m.target.value),className:"input-field pl-10"})]}),e.jsx("button",{onClick:()=>{a(""),A()},className:"btn-secondary",children:"Clear"})]})}),e.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:b&&b.length>0?e.jsx("div",{className:`${w?"space-y-4":"overflow-x-auto"}`,children:w?e.jsx("div",{className:"space-y-4",children:b.map(m=>e.jsxs(M.div,{whileHover:{scale:1.02},className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:m.name||m.enquiry?.name}),e.jsxs("select",{value:m.interestStatus||"INTERESTED",onChange:y=>{console.log("Mobile status change:",m.id,"from:",m.interestStatus,"to:",y.target.value),h(m.id,y.target.value)},className:`text-xs border rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-primary-500 transition-colors duration-200 ${m.interestStatus==="NOT_INTERESTED"?"bg-red-50 border-red-300 text-red-800":"bg-green-50 border-green-300 text-green-800"} ${d.isLoading?"opacity-50 cursor-not-allowed":""}`,disabled:d.isLoading,children:[e.jsx("option",{value:"INTERESTED",children:" Interested"}),e.jsx("option",{value:"NOT_INTERESTED",children:" Not Interested"})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[" ",m.mobile||m.enquiry?.mobile]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[" ",m.businessNature||m.businessName||m.enquiry?.businessType||"Business"]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[" ",(m.loanAmount||m.enquiry?.loanAmount||0).toLocaleString()]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[" ",m.district||m.enquiry?.district||"Location"]}),e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600 mr-2",children:" Loan Status:"}),e.jsx("span",{className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded",children:"Pending"})]}),e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600 mr-2",children:" Staff:"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:m.staff?.name||m.staff||"Unassigned"}),m.staff?.role&&e.jsx("span",{className:"text-xs text-gray-500",children:m.staff.role})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" ",new Date(m.createdAt||m.date).toLocaleDateString()]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>j(m),className:"text-blue-600 hover:text-blue-800 text-sm font-medium inline-flex items-center",children:[e.jsx(Oe,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(je,{to:`/shortlist/${m.id}/edit`,className:"text-primary-600 hover:text-primary-800 text-sm font-medium inline-flex items-center",children:[e.jsx(st,{className:"h-4 w-4 mr-1"}),"Edit"]}),!m.cashfreeApplication&&e.jsx(je,{to:`/payment-gateway/apply/${m.id}`,className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"Apply to Payment Gateway"}),e.jsxs("button",{onClick:()=>p(m.id,m.name||m.enquiry?.name||"Unknown"),disabled:f.isLoading,className:"text-red-600 hover:text-red-800 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center",children:[e.jsx(ct,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]},m.id))}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[e.jsx("thead",{className:"bg-indigo-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-16 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"S.No"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Submitted Date"}),e.jsx("th",{className:"w-48 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Mobile"}),e.jsx("th",{className:"w-48 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Business"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Loan Amount"}),e.jsx("th",{className:"w-24 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"District"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Loan Status"}),e.jsx("th",{className:"w-24 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"w-24 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Staff"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map((m,y)=>e.jsxs(M.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:y*.05},className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"w-16 px-4 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:y+1}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(m.createdAt||m.date).toLocaleDateString()}),e.jsx("td",{className:"w-48 px-4 py-4 text-sm font-medium text-gray-900",children:e.jsx("div",{className:"truncate",title:m.name||m.enquiry?.name,children:m.name||m.enquiry?.name})}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:m.mobile||m.enquiry?.mobile}),e.jsx("td",{className:"w-48 px-4 py-4 text-sm text-gray-500",children:e.jsx("div",{className:"truncate",title:m.businessNature||m.businessName||m.enquiry?.businessType||"Business",children:m.businessNature||m.businessName||m.enquiry?.businessType||"Business"})}),e.jsxs("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500 font-semibold",children:["",(m.loanAmount||m.enquiry?.loanAmount||0).toLocaleString()]}),e.jsx("td",{className:"w-24 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:m.district||m.enquiry?.district||"N/A"}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Pending"})}),e.jsx("td",{className:"w-24 px-4 py-4 whitespace-nowrap",children:e.jsxs("select",{value:m.interestStatus||"INTERESTED",onChange:v=>{console.log("Desktop status change:",m.id,"from:",m.interestStatus,"to:",v.target.value),h(m.id,v.target.value)},className:`text-sm border rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200 ${m.interestStatus==="NOT_INTERESTED"?"bg-red-50 border-red-300 text-red-800":"bg-green-50 border-green-300 text-green-800"} ${d.isLoading?"opacity-50 cursor-not-allowed":""}`,disabled:d.isLoading,children:[e.jsx("option",{value:"INTERESTED",children:" Interested"}),e.jsx("option",{value:"NOT_INTERESTED",children:" Not Interested"})]})}),e.jsx("td",{className:"w-24 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-gray-900",children:m.staff?.name||m.staff||"Unassigned"}),m.staff?.role&&e.jsx("span",{className:"text-xs text-gray-500",children:m.staff.role})]})}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>j(m),className:"text-blue-600 hover:text-blue-900 inline-flex items-center",title:"View Shortlist Details",children:e.jsx(Oe,{className:"h-4 w-4"})}),e.jsx(je,{to:`/shortlist/${m.id}/edit`,className:"text-primary-600 hover:text-primary-900 inline-flex items-center",title:"Edit Shortlist",children:e.jsx(st,{className:"h-4 w-4"})}),!m.cashfreeApplication&&e.jsx(je,{to:`/payment-gateway/apply/${m.id}`,className:"text-green-600 hover:text-green-900",title:"Apply to Payment Gateway",children:"Apply"}),e.jsx("button",{onClick:()=>p(m.id,m.name||m.enquiry?.name||"Unknown"),disabled:f.isLoading,className:"text-red-600 hover:text-red-900 disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center",title:"Delete Shortlist",children:e.jsx(ct,{className:"h-4 w-4"})})]})})]},m.id))})]})})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"No shortlisted applications found."}),e.jsxs(je,{to:"/shortlist/new",className:"btn-primary inline-flex items-center mt-4",children:[e.jsx(xt,{className:"h-5 w-5 mr-2"}),"Create First Shortlist"]})]})}),r.isOpen&&r.shortlist&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Shortlist Details - ",r.shortlist.name]}),e.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600 focus:outline-none",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mt-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.shortlist.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mobile"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.shortlist.mobile||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"District"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.shortlist.district||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.shortlist.createdAt?new Date(r.shortlist.createdAt).toLocaleDateString():"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Business Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Business Name"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.shortlist.businessName||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Business Nature"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.shortlist.businessNature||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Constitution"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.shortlist.propPvt||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"GST Status"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.shortlist.gstStatus||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Financial Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Loan Amount"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900 font-semibold",children:["",r.shortlist.loanAmount?r.shortlist.loanAmount.toLocaleString():"N/A"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CAP Amount"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:["",r.shortlist.cap?r.shortlist.cap.toLocaleString():"N/A"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Account"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.shortlist.bankAccount||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Statement Duration"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.shortlist.bankStatementDuration||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Assignment & Status"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assigned Staff"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 font-medium",children:r.shortlist.staff?.name||r.shortlist.staff||"Unassigned"}),r.shortlist.staff?.role&&e.jsx("p",{className:"text-xs text-gray-500",children:r.shortlist.staff.role})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Interest Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r.shortlist.interestStatus==="NOT_INTERESTED"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:r.shortlist.interestStatus==="NOT_INTERESTED"?" Not Interested":" Interested"})]})]})]}),r.shortlist.comments&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Comments"}),e.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md",children:r.shortlist.comments})]})]}),e.jsxs("div",{className:"flex items-center justify-end pt-6 border-t border-gray-200 space-x-3",children:[e.jsx("button",{onClick:x,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Close"}),e.jsxs(je,{to:`/shortlist/${r.shortlist.id}/edit`,onClick:x,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 inline-flex items-center",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Edit Shortlist"]})]})]})})})]})}function cn(){const s=Ve(),{id:t}=ys(),a=!!t,n=Ae(),{register:i,handleSubmit:r,reset:o,control:l,formState:{errors:c}}=Ct(),d=It({control:l,name:"hasGst"}),h=It({control:l,name:"hasBusinessPan"}),f=It({control:l,name:"hasIec"}),p=It({control:l,name:"hasWebsite"}),j=It({control:l,name:"hasGateway"}),{data:x}=re("staff-members",async()=>{try{return(await F.get("/api/staff")).data?.staff||[]}catch{return console.log("No staff data available"),[]}},{staleTime:300*1e3}),{data:b}=re(["shortlist",t],async()=>t?(await F.get(`/api/shortlist/${t}`)).data:null,{enabled:a}),g=le(async w=>{if(console.log("Submitting shortlist form data:",w),console.log("Key fields being sent - loanAmount:",w.loanAmount,"district:",w.district,"staff:",w.staff),a){const m=await F.patch(`/api/shortlist/${t}`,w);return console.log("PATCH response:",m.data),m}else{const m=await F.post("/api/shortlist",w);return console.log("POST response:",m.data),m}},{onSuccess:async w=>{O.success(a?"Shortlist updated successfully!":"Shortlist created successfully!"),console.log("Shortlist update/create successful:",w.data),n.clear(),n.invalidateQueries(["shortlists"]),n.invalidateQueries(["shortlist"]),n.invalidateQueries(["cashfree-applications"]),await n.refetchQueries(["shortlists"]),setTimeout(()=>{s("/shortlist",{state:{fromEdit:!0,timestamp:Date.now()}})},100)},onError:w=>{O.error(w.response?.data?.message||"Something went wrong")}});u.useEffect(()=>{b&&o({name:b.name,mobile:b.mobile,businessName:b.businessName||"",businessNature:b.businessNature||"",district:b.district||"",propPvt:b.propPvt||"",hasGst:b.hasGst||"",gst:b.gst||"",hasBusinessPan:b.hasBusinessPan||"",businessPan:b.businessPan||"",hasIec:b.hasIec||"",iec:b.iec||"",hasNewCurrentAccount:b.hasNewCurrentAccount||"",newCurrentAccount:b.newCurrentAccount||!1,hasWebsite:b.hasWebsite||"",website:b.website||"",hasGateway:b.hasGateway||"",gateway:b.gateway||"",transaction:b.transaction||"",bankStatementDuration:b.bankStatementDuration||"",loanAmount:b.loanAmount||0,cap:b.cap||0,bankAccount:b.bankAccount||"",comments:b.comments||"",staff:b.staff||"",gstStatus:b.gstStatus||"",date:b.date||new Date().toISOString().split("T")[0]})},[b,o]);const A=w=>{g.mutate(w)};return e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{type:"button",onClick:()=>s("/shortlist"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors",children:[e.jsx(Et,{className:"h-4 w-4 mr-2"}),"Back to Shortlist"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a?"Edit Shortlist":"New Shortlist"}),e.jsx("p",{className:"text-gray-600",children:a?"Update shortlist information":"Create a new shortlisted application"})]})]})}),e.jsxs("form",{onSubmit:r(A),className:"card space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),e.jsx("input",{...i("name",{required:"Name is required"}),type:"text",className:"input-field",placeholder:"Enter full name"}),c.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobile Number *"}),e.jsx("input",{...i("mobile",{required:"Mobile number is required"}),type:"tel",className:"input-field",placeholder:"Enter mobile number"}),c.mobile&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.mobile.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"District"}),e.jsx("input",{...i("district"),type:"text",className:"input-field",placeholder:"Enter district"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),e.jsx("input",{...i("date"),type:"date",className:"input-field"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Business Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name"}),e.jsx("input",{...i("businessName"),type:"text",className:"input-field",placeholder:"Enter business name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Nature"}),e.jsx("input",{...i("businessNature"),type:"text",className:"input-field",placeholder:"Enter business nature"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Constitution of Business (Prop/PVT)"}),e.jsxs("select",{...i("propPvt"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"Proprietorship",children:"Proprietorship"}),e.jsx("option",{value:"Private Limited",children:"Private Limited"}),e.jsx("option",{value:"Partnership",children:"Partnership"}),e.jsx("option",{value:"LLP",children:"LLP"}),e.jsx("option",{value:"Public Limited",children:"Public Limited"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GST"}),e.jsxs("select",{...i("hasGst"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select option"}),e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]}),d==="yes"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GST Number"}),e.jsx("input",{...i("gst"),type:"text",className:"input-field",placeholder:"Enter GST number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business PAN Card"}),e.jsxs("select",{...i("hasBusinessPan"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select option"}),e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]}),h==="yes"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business PAN Card Number"}),e.jsx("input",{...i("businessPan"),type:"text",className:"input-field",placeholder:"Enter business PAN card number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IEC Code"}),e.jsxs("select",{...i("hasIec"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select option"}),e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]}),f==="yes"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IEC Code Number"}),e.jsx("input",{...i("iec"),type:"text",className:"input-field",placeholder:"Enter IEC code number"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Financial Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loan Amount"}),e.jsx("input",{...i("loanAmount",{valueAsNumber:!0}),type:"number",className:"input-field",placeholder:"Enter loan amount"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CAP Amount"}),e.jsx("input",{...i("cap",{valueAsNumber:!0}),type:"number",className:"input-field",placeholder:"Enter CAP amount"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Account"}),e.jsx("input",{...i("bankAccount"),type:"text",className:"input-field",placeholder:"Enter bank account details"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Statement Duration"}),e.jsxs("select",{...i("bankStatementDuration"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select duration"}),e.jsx("option",{value:"6 months",children:"6 months"}),e.jsx("option",{value:"12 months",children:"12 months"}),e.jsx("option",{value:"18 months",children:"18 months"}),e.jsx("option",{value:"24 months",children:"24 months"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Current Account"}),e.jsxs("select",{...i("hasNewCurrentAccount"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select option"}),e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Online Presence"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),e.jsxs("select",{...i("hasWebsite"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select option"}),e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]}),p==="yes"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website URL"}),e.jsx("input",{...i("website"),type:"url",className:"input-field",placeholder:"Enter website URL"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gateway"}),e.jsxs("select",{...i("hasGateway"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select option"}),e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]}),j==="yes"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Gateway Details"}),e.jsx("input",{...i("gateway"),type:"text",className:"input-field",placeholder:"Enter payment gateway details"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transaction Details"}),e.jsx("input",{...i("transaction"),type:"text",className:"input-field",placeholder:"Enter transaction details"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GST Status"}),e.jsxs("select",{...i("gstStatus"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"}),e.jsx("option",{value:"Pending",children:"Pending"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Staff Assignment"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned Staff Member *"}),e.jsxs("select",{...i("staff",{required:"Staff assignment is required"}),className:"input-field",children:[e.jsx("option",{value:"",children:"Select staff member..."}),x&&x.map(w=>e.jsxs("option",{value:w.name,children:[w.name," - ",w.role," (",w.department,")"]},w.id))]}),c.staff&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.staff.message}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Select the staff member responsible for this shortlisted application"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comments"}),e.jsx("textarea",{...i("comments"),rows:4,className:"input-field",placeholder:"Enter any additional comments..."})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>s("/shortlist"),className:"btn-secondary",children:"Cancel"}),e.jsx(M.button,{type:"submit",disabled:g.isLoading,className:"btn-primary disabled:opacity-50",whileHover:{scale:1.02},whileTap:{scale:.98},children:g.isLoading?a?"Updating...":"Creating...":a?"Update Shortlist":"Create Shortlist"})]})]})]})})}const Jd=()=>{const[s,t]=u.useState("desktop");return u.useEffect(()=>{const a=()=>{const n=window.innerWidth;n<768?t("mobile"):n<1024?t("tablet"):t("desktop")};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),s};function Xd(){const s=Jd(),t=la(),[a,n]=u.useState(""),[i,r]=u.useState(""),o=Ae();u.useEffect(()=>{t.state?.message&&t.state?.type==="success"&&(O.success(t.state.message),window.history.replaceState({},document.title))},[t.state]);const{data:l,isLoading:c,refetch:d,error:h}=re(["cashfree-applications",a,i],async()=>{try{console.log(" Fetching payment gateway applications...");const A=(await F.get("/api/cashfree").catch(m=>(console.warn(" Payment gateway API error:",m.message),{data:[]}))).data||[];console.log(" Fetched payment gateway applications:",A.length);let w=A;return a&&(w=w.filter(m=>m.shortlist?.name?.toLowerCase().includes(a.toLowerCase())||m.shortlist?.mobile?.includes(a)||m.shortlist?.enquiry?.name?.toLowerCase().includes(a.toLowerCase()))),i&&(w=w.filter(m=>m.status===i)),console.log(" Returning filtered payment gateway applications:",w.length),console.log(" Sample application data:",w[0]),w}catch(g){return console.error(" Error fetching payment gateway data:",g),[]}},{staleTime:300*1e3,cacheTime:900*1e3,keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchInterval:!1,onSuccess:g=>{console.log(" Payment applications query success:",g?.length||0,"applications"),g&&g.length>0&&(console.log(" First application details:",g[0]),console.log(" Shortlist data:",g[0]?.shortlist))},onError:g=>{console.error(" Payment applications query error:",g)}}),f=le(async({id:g,status:A})=>F.patch(`/api/cashfree/${g}/status`,{status:A}),{onSuccess:()=>{O.success("Status updated successfully!"),o.invalidateQueries("cashfree-applications")},onError:g=>{O.error(g.response?.data?.message||"Failed to update status")}}),p=le(async g=>F.delete(`/api/cashfree/${g}`),{onSuccess:(g,A)=>{O.success(g.data?.message||"Payment application deleted successfully!"),o.setQueryData(["cashfree-applications",a,i],w=>w&&w.filter(m=>m.id!==A)),o.invalidateQueries("cashfree-applications")},onError:g=>{O.error(g.response?.data?.message||"Failed to delete payment application")}}),j=g=>{p.mutate(g)},x=s==="mobile",b=g=>{switch(g){case"PENDING":return"bg-yellow-100 text-yellow-800";case"TRANSACTION_DONE":return"bg-green-100 text-green-800";case"CLOSED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading payment gateway applications..."})]})}):h?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Gateway Applications"}),e.jsx("p",{className:"text-gray-600",children:"Manage loan applications submitted to payment gateway"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Applications"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"There was an error loading the payment gateway applications."}),e.jsx("button",{onClick:()=>d(),className:"btn-primary",children:"Try Again"})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Gateway Applications"}),e.jsx("p",{className:"text-gray-600",children:"Manage loan applications submitted to payment gateway"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(At,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name...",value:a,onChange:g=>n(g.target.value),className:"input-field pl-10"})]}),e.jsxs("select",{value:i,onChange:g=>r(g.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"TRANSACTION_DONE",children:"Transaction Done"}),e.jsx("option",{value:"CLOSED",children:"Closed"})]}),e.jsx("button",{onClick:()=>{n(""),r(""),d()},className:"btn-secondary",children:"Clear Filters"}),e.jsx("button",{onClick:()=>{o.invalidateQueries(["cashfree-applications"]),d()},className:"btn-primary",children:"Refresh Data"})]})}),e.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:l&&l.length>0?e.jsx("div",{className:`${x?"space-y-4":"overflow-x-auto"}`,children:x?e.jsx("div",{className:"space-y-4",children:l.map(g=>e.jsxs(M.div,{whileHover:{scale:1.02},className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:g.shortlist.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${b(g.status)}`,children:g.status.replace("_"," ")})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[" ",g.shortlist.mobile]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[" ",g.shortlist.businessType||g.shortlist.businessName||"N/A"]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[" ",g.shortlist.loanAmount?.toLocaleString()||"N/A"]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" ",new Date(g.submittedAt).toLocaleDateString()]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.status==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>f.mutate({id:g.id,status:"TRANSACTION_DONE"}),disabled:f.isLoading,className:"text-green-600 hover:text-green-800 text-sm font-medium disabled:opacity-50",children:"Mark Done"}),e.jsx("button",{onClick:()=>f.mutate({id:g.id,status:"CLOSED"}),disabled:f.isLoading,className:"text-red-600 hover:text-red-800 text-sm font-medium disabled:opacity-50",children:"Close"})]}),e.jsx("button",{onClick:()=>j(g.id),disabled:p.isLoading,className:"text-red-600 hover:text-red-800 text-sm font-medium disabled:opacity-50",children:"Delete"})]})]},g.id))}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[e.jsx("thead",{className:"bg-indigo-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-16 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"S.No"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Submitted Date"}),e.jsx("th",{className:"w-48 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Mobile"}),e.jsx("th",{className:"w-48 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Business"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Loan Amount"}),e.jsx("th",{className:"w-28 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Submitted By"}),e.jsx("th",{className:"w-44 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map((g,A)=>e.jsxs(M.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:A*.05},className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"w-16 px-4 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:A+1}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(g.submittedAt).toLocaleDateString()}),e.jsx("td",{className:"w-48 px-4 py-4 text-sm font-medium text-gray-900",children:e.jsx("div",{className:"truncate",title:g.shortlist.name,children:g.shortlist.name})}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:g.shortlist.mobile}),e.jsx("td",{className:"w-48 px-4 py-4 text-sm text-gray-500",children:e.jsx("div",{className:"truncate",title:g.shortlist.businessType||g.shortlist.businessName||"N/A",children:g.shortlist.businessType||g.shortlist.businessName||"N/A"})}),e.jsxs("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500 font-semibold",children:["",g.shortlist.loanAmount?.toLocaleString()||"N/A"]}),e.jsx("td",{className:"w-28 px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${b(g.status)}`,children:g.status.replace("_"," ")})}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:g.submittedBy?.name||"N/A"}),e.jsxs("td",{className:"w-44 px-4 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsxs("div",{className:"flex gap-1 items-center",children:[g.status==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>f.mutate({id:g.id,status:"TRANSACTION_DONE"}),disabled:f.isLoading,className:"text-green-600 hover:text-green-900 disabled:opacity-50 text-xs px-1",children:"Mark Done"}),e.jsx("button",{onClick:()=>f.mutate({id:g.id,status:"CLOSED"}),disabled:f.isLoading,className:"text-red-600 hover:text-red-900 disabled:opacity-50 text-xs px-1",children:"Close"})]}),e.jsx("button",{onClick:()=>j(g.id),disabled:p.isLoading,className:"text-red-600 hover:text-red-900 disabled:opacity-50 text-xs px-1",title:"Delete Application",children:"Delete"})]}),g.decisionDate&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Decision: ",new Date(g.decisionDate).toLocaleDateString()]})]})]},g.id))})]})})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(pi,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Payment Gateway Applications"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No applications have been submitted to the payment gateway yet."}),e.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[e.jsx("p",{children:"To create payment gateway applications:"}),e.jsx("p",{children:"1. Go to Shortlist Applications"}),e.jsx("p",{children:'2. Click "Apply" on a shortlisted client'}),e.jsx("p",{children:"3. Submit the payment gateway application"})]}),e.jsx("button",{onClick:()=>d(),className:"btn-outline mt-4",children:" Refresh Data"})]})}),l&&l.length>0&&e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:l.filter(g=>g.status==="PENDING").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Pending Applications"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.filter(g=>g.status==="TRANSACTION_DONE").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Completed Transactions"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:l.filter(g=>g.status==="CLOSED").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Closed Applications"})]})]})]})}function eu(){const s=Ve(),{id:t}=ys(),a=Ae(),{register:n,handleSubmit:i,reset:r,formState:{errors:o}}=Ct(),{data:l,isLoading:c}=re(["shortlist",t],async()=>{const f=await F.get(`/api/shortlist/${t}`);return console.log("Fetched shortlist data for payment gateway form:",f.data),f.data},{enabled:!!t,staleTime:0,cacheTime:0}),d=le(async f=>(console.log("Submitting payment gateway application with data:",f),F.post("/api/cashfree/apply",{...f,shortlistId:parseInt(t),status:"PENDING",appliedAt:new Date})),{onSuccess:async f=>{O.success("Payment gateway application submitted successfully!");try{await F.post(`/api/shortlist/${t}/payment-gateway-applied`,f.data.application)}catch(p){console.log("Failed to mark shortlist as having payment gateway application:",p)}f.data.application&&a.setQueryData(["cashfree-applications"],p=>p?[f.data.application,...p]:[f.data.application]),a.invalidateQueries(["cashfree-applications"]),a.invalidateQueries(["shortlists"]),a.invalidateQueries(["shortlist"]),s("/payment-gateway",{state:{message:"Payment gateway application submitted successfully!",type:"success"}})},onError:f=>{O.error(f.response?.data?.message||"Application submission failed")}});u.useEffect(()=>{l&&(console.log("Pre-filling payment gateway form with shortlist data:",l),console.log("Loan amount from shortlist:",l.loanAmount),r({loanAmount:l.loanAmount||0,tenure:12,interestRate:12.5,processingFee:2.5,purpose:"Business Expansion",bankAccount:l.bankAccount||"",panCard:l.businessPan||"",salarySlips:!1,itrReturns:!0,businessProof:!0,addressProof:!0}))},[l,r]);const h=f=>{d.mutate(f)};return c?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{type:"button",onClick:()=>s("/shortlist"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors",children:[e.jsx(Et,{className:"h-4 w-4 mr-2"}),"Back to Shortlist"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Gateway Loan Application"}),e.jsxs("p",{className:"text-gray-600",children:["Apply for loan through payment gateway for: ",e.jsx("span",{className:"font-semibold",children:l?.enquiry?.name})]})]})]})}),e.jsxs("form",{onSubmit:i(h),className:"card space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Loan Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loan Amount () *"}),e.jsx("input",{...n("loanAmount",{required:"Loan amount is required",min:5e4}),type:"number",className:"input-field",placeholder:"Enter loan amount"}),o.loanAmount&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.loanAmount.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tenure (Months) *"}),e.jsxs("select",{...n("tenure",{required:"Tenure is required"}),className:"input-field",children:[e.jsx("option",{value:"",children:"Select tenure"}),e.jsx("option",{value:"6",children:"6 Months"}),e.jsx("option",{value:"12",children:"12 Months"}),e.jsx("option",{value:"18",children:"18 Months"}),e.jsx("option",{value:"24",children:"24 Months"}),e.jsx("option",{value:"36",children:"36 Months"})]}),o.tenure&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.tenure.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Interest Rate (%)"}),e.jsx("input",{...n("interestRate",{valueAsNumber:!0}),type:"number",step:"0.1",className:"input-field",placeholder:"12.5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Processing Fee (%)"}),e.jsx("input",{...n("processingFee",{valueAsNumber:!0}),type:"number",step:"0.1",className:"input-field",placeholder:"2.5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purpose *"}),e.jsxs("select",{...n("purpose",{required:"Purpose is required"}),className:"input-field",children:[e.jsx("option",{value:"",children:"Select purpose"}),e.jsx("option",{value:"Business Expansion",children:"Business Expansion"}),e.jsx("option",{value:"Working Capital",children:"Working Capital"}),e.jsx("option",{value:"Equipment Purchase",children:"Equipment Purchase"}),e.jsx("option",{value:"Inventory",children:"Inventory"}),e.jsx("option",{value:"Other",children:"Other"})]}),o.purpose&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.purpose.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Collateral"}),e.jsx("input",{...n("collateral"),type:"text",className:"input-field",placeholder:"Property, Gold, etc."})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Bank Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Account Number *"}),e.jsx("input",{...n("bankAccount",{required:"Bank account is required"}),type:"text",className:"input-field",placeholder:"Enter bank account number"}),o.bankAccount&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.bankAccount.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IFSC Code *"}),e.jsx("input",{...n("ifscCode",{required:"IFSC code is required"}),type:"text",className:"input-field",placeholder:"Enter IFSC code"}),o.ifscCode&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.ifscCode.message})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Document Checklist"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...n("salarySlips"),type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Salary Slips (Last 3 months)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...n("itrReturns"),type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"ITR Returns (Last 2 years)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...n("businessProof"),type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Business Registration Proof"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...n("addressProof"),type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Address Proof"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remarks"}),e.jsx("textarea",{...n("remarks"),rows:4,className:"input-field",placeholder:"Any additional information..."})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>s("/shortlist"),className:"btn-secondary",children:"Cancel"}),e.jsx(M.button,{type:"submit",disabled:d.isLoading,className:"btn-primary disabled:opacity-50",whileHover:{scale:1.02},whileTap:{scale:.98},children:d.isLoading?"Submitting...":"Submit Application"})]})]})]})})}const Li=()=>{const s=Ae(),t=u.useCallback(async()=>{console.log(" Triggering dashboard refresh..."),await Promise.all([s.invalidateQueries("dashboard-data"),s.invalidateQueries(["individual-dashboard"]),s.invalidateQueries("enquiries"),s.invalidateQueries("staff"),s.invalidateQueries("shortlist"),s.invalidateQueries("documents"),s.invalidateQueries("transactions"),s.invalidateQueries("notifications")]),console.log(" Dashboard refresh completed")},[s]),a=u.useCallback(async()=>{console.log(" Refreshing dashboards after new enquiry..."),await t()},[t]),n=u.useCallback(async()=>{console.log(" Refreshing dashboards after staff change..."),await t()},[t]),i=u.useCallback(async()=>{console.log(" Refreshing dashboards after document change..."),await t()},[t]),r=u.useCallback(async()=>{console.log(" Refreshing dashboards after shortlist change..."),await t()},[t]),o=u.useCallback(async()=>{console.log(" Refreshing dashboards after payment application..."),await t()},[t]),l=u.useCallback(async()=>{console.log(" Refreshing dashboards after transaction..."),await t()},[t]);return{refreshDashboards:t,refreshAfterEnquiry:a,refreshAfterStaff:n,refreshAfterDocument:i,refreshAfterShortlist:r,refreshAfterPayment:o,refreshAfterTransaction:l}};function tu(){const{user:s}=Me(),t=ha(),[a,n]=u.useState(!1),[i,r]=u.useState(""),[o,l]=u.useState(null),[c,d]=u.useState(null),[h,f]=u.useState({}),[p,j]=u.useState(null),[x,b]=u.useState(!1),{refreshAfterStaff:g}=Li();if(!t.canManageStaff)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full mx-4 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(_e,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["Only ",e.jsx("strong",{children:"admin@gmail.com"})," has permission to manage staff members."]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:["Current user: ",e.jsx("strong",{children:s?.email}),e.jsx("br",{}),"Role: ",e.jsx("strong",{children:s?.role})]})}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:"Admin Login:"})," admin@gmail.com / admin123"]})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Please contact the administrator if you need access to staff management."})]})});const[A,w]=u.useState({1:"Active",2:"Active",3:"Active",4:"Inactive",5:"Active",6:"Active",7:"Active"}),m=Ae(),{register:y,handleSubmit:v,reset:C,setValue:T,formState:{errors:L}}=Ct(),{data:$,isLoading:P,refetch:Z}=re("staff",async()=>(await F.get("/api/staff")).data,{staleTime:240*1e3,keepPreviousData:!0}),{data:Q}=re("staff-stats",async()=>(await F.get("/api/staff/stats/summary")).data,{staleTime:300*1e3,keepPreviousData:!0}),H=$?.staff||[],G=Q?.stats||{},ae=le(async k=>F.post("/api/staff",k),{onMutate:async k=>{await m.cancelQueries("staff"),await m.cancelQueries("staff-stats");const X=m.getQueryData("staff"),N=m.getQueryData("staff-stats"),I={id:Date.now(),name:k.name,email:k.email,role:k.role,status:"PENDING",hasAccess:!1,department:k.department||"",position:k.position||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return m.setQueryData("staff",B=>({...B,staff:[...B?.staff||[],I]})),m.setQueryData("staff-stats",B=>({...B,stats:{...B?.stats,totalStaff:(B?.stats?.totalStaff||0)+1,employeeCount:k.role==="EMPLOYEE"?(B?.stats?.employeeCount||0)+1:B?.stats?.employeeCount||0,adminCount:k.role==="ADMIN"?(B?.stats?.adminCount||0)+1:B?.stats?.adminCount||0}})),{previousStaff:X,previousStats:N}},onSuccess:k=>{const X=k.data.emailSent?" Verification email sent successfully!":" Failed to send verification email - check SMTP settings",N=k.data.verificationRequired?" Email verification required before activation":" Staff member activated immediately";O.success(` Staff member created successfully!
${X}
${N}
 Check notification panel for staff notification!`,{duration:8e3,position:"top-center",style:{background:"linear-gradient(135deg, #10B981 0%, #059669 100%)",color:"#fff",fontWeight:"bold",fontSize:"16px",padding:"20px",borderRadius:"12px",boxShadow:"0 10px 25px rgba(16, 185, 129, 0.3)",border:"2px solid #34D399",maxWidth:"500px",textAlign:"center",whiteSpace:"pre-line"}}),setTimeout(()=>{O.success(" New staff notification created! Check the notification bell.",{duration:6e3,position:"top-right",style:{background:"#3B82F6",color:"#fff",fontWeight:"bold",fontSize:"14px"}})},1e3),n(!1),C(),m.invalidateQueries("staff"),m.invalidateQueries("staff-stats"),m.invalidateQueries("global-notifications"),m.invalidateQueries("global-notification-count"),g(),setTimeout(()=>{console.log(" Force refreshing notifications after staff creation..."),m.invalidateQueries("global-notifications"),m.invalidateQueries("global-notification-count")},2e3)},onError:(k,X,N)=>{N?.previousStaff&&m.setQueryData("staff",N.previousStaff),N?.previousStats&&m.setQueryData("staff-stats",N.previousStats),O.error(k.response?.data?.message||"Failed to create staff member")}}),Y=le(async k=>F.delete(`/api/staff/${k}`),{onMutate:async k=>{await m.cancelQueries("staff"),await m.cancelQueries("staff-stats");const X=m.getQueryData("staff"),N=m.getQueryData("staff-stats"),I=H.find(B=>B.id===k);return m.setQueryData("staff",B=>({...B,staff:B?.staff?.filter(te=>te.id!==k)||[]})),I&&m.setQueryData("staff-stats",B=>({...B,stats:{...B?.stats,totalStaff:Math.max(0,(B?.stats?.totalStaff||0)-1),employeeCount:I.role==="EMPLOYEE"?Math.max(0,(B?.stats?.employeeCount||0)-1):B?.stats?.employeeCount||0,adminCount:I.role==="ADMIN"?Math.max(0,(B?.stats?.adminCount||0)-1):B?.stats?.adminCount||0,activeStaff:I.status==="ACTIVE"?Math.max(0,(B?.stats?.activeStaff||0)-1):B?.stats?.activeStaff||0}})),{previousStaff:X,previousStats:N}},onSuccess:()=>{O.success(" Staff member deleted successfully!",{duration:3e3,position:"top-right",style:{background:"#EF4444",color:"#fff",fontWeight:"bold"}}),setTimeout(()=>{m.invalidateQueries("staff"),m.invalidateQueries("staff-stats"),m.invalidateQueries("global-notifications"),m.invalidateQueries("global-notification-count")},100)},onError:(k,X,N)=>{N?.previousStaff&&m.setQueryData("staff",N.previousStaff),N?.previousStats&&m.setQueryData("staff-stats",N.previousStats),O.error(k.response?.data?.message||"Failed to delete staff member")}}),J=le(async k=>F.post(`/api/staff/${k}/revoke-access`),{onMutate:async k=>{await m.cancelQueries("staff");const X=m.getQueryData("staff");return m.setQueryData("staff",N=>({...N,staff:N?.staff?.map(I=>I.id===k?{...I,hasAccess:!1,status:"INACTIVE"}:I)||[]})),{previousStaff:X}},onSuccess:()=>{O.success(" Access revoked successfully! Notification sent via email.",{duration:4e3,position:"top-right",style:{background:"#F59E0B",color:"#fff",fontWeight:"bold"}}),setTimeout(()=>{m.invalidateQueries("staff"),m.invalidateQueries("staff-stats")},100)},onError:(k,X,N)=>{N?.previousStaff&&m.setQueryData("staff",N.previousStaff),O.error(k.response?.data?.message||"Failed to revoke access")}}),ee=le(async k=>F.post(`/api/staff/${k}/grant-access`),{onMutate:async k=>{await m.cancelQueries("staff");const X=m.getQueryData("staff");return m.setQueryData("staff",N=>({...N,staff:N?.staff?.map(I=>I.id===k?{...I,hasAccess:!0,status:"ACTIVE"}:I)||[]})),{previousStaff:X}},onSuccess:k=>{O.success(` Access granted! ${k.data.newAccessLinkSent?"New access link sent via email.":"Failed to send email."}`,{duration:4e3,position:"top-right",style:{background:"#10B981",color:"#fff",fontWeight:"bold"}}),setTimeout(()=>{m.invalidateQueries("staff"),m.invalidateQueries("staff-stats")},100)},onError:(k,X,N)=>{N?.previousStaff&&m.setQueryData("staff",N.previousStaff),O.error(k.response?.data?.message||"Failed to grant access")}}),de=le(async k=>F.post(`/api/staff/verify/${k}`),{onMutate:async k=>{await m.cancelQueries("staff");const X=m.getQueryData("staff");return m.setQueryData("staff",N=>({...N,staff:N?.staff?.map(I=>I.id===k?{...I,status:"ACTIVE",hasAccess:!0,verified:!0}:I)||[]})),{previousStaff:X}},onSuccess:k=>{const X=k.data.activated?" Staff member verified and activated successfully! They can now login.":" Staff member was already verified.";O.success(X,{duration:5e3,position:"top-center",style:{background:"linear-gradient(135deg, #10B981 0%, #059669 100%)",color:"#fff",fontWeight:"bold",fontSize:"16px",padding:"20px",borderRadius:"12px",boxShadow:"0 10px 25px rgba(16, 185, 129, 0.3)",border:"2px solid #34D399",maxWidth:"500px",textAlign:"center"}}),setTimeout(()=>{m.invalidateQueries("staff"),m.invalidateQueries("staff-stats"),m.invalidateQueries("global-notifications"),m.invalidateQueries("global-notification-count")},100)},onError:(k,X,N)=>{N?.previousStaff&&m.setQueryData("staff",N.previousStaff),O.error(k.response?.data?.message||"Failed to verify staff member")}}),Ne=le(async k=>F.post(`/api/staff/resend-verification/${k}`),{onSuccess:k=>{O.success(` Verification email ${k.data.emailSent?"sent successfully!":"failed to send."}`,{duration:4e3,position:"top-right",style:{background:k.data.emailSent?"#10B981":"#EF4444",color:"#fff",fontWeight:"bold"}}),setTimeout(()=>{m.invalidateQueries("staff")},100)},onError:k=>{O.error(k.response?.data?.message||"Failed to resend verification email")}}),se=k=>{ae.mutate(k)},xe=k=>{f(X=>({...X,[k]:!X[k]}))},ie=k=>{Y.mutate(k)},he=k=>{j(k),b(!0)},ke=k=>{w(X=>({...X,[k]:X[k]==="Active"?"Inactive":"Active"}))},it=H?.filter(k=>k.name.toLowerCase().includes(i.toLowerCase())||k.email.toLowerCase().includes(i.toLowerCase())),He=k=>{switch(k){case"SUPER_ADMIN":return"bg-purple-100 text-purple-800";case"ADMIN":return"bg-blue-100 text-blue-800";case"EMPLOYEE":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},ze=k=>({1:3,2:2,3:3,4:0,5:1,6:2,7:1})[k]||0,Ye=k=>({1:"Rajesh Kumar, Priya Sharma, Amit Patel",2:"Sunita Gupta, Vikram Singh",3:"Anita Desai, Ravi Mehta, Sanjay Joshi",4:null,5:"Deepak Verma",6:"Neha Agarwal, Rohit Sharma",7:"Manish Gupta"})[k]||null;return P?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(M.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-7 gap-4",children:H&&H.slice(0,7).map(k=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-white",children:k.name.split(" ").map(X=>X[0]).join("").substring(0,2)})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:k.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:k.role})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Clients Taken"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full ${A[k.id]==="Active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:A[k.id]==="Active"?"":""})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:ze(k.id)}),e.jsx("div",{className:"text-xs text-gray-500",children:ze(k.id)===1?"Client":"Clients"})]})]})]},k.id))}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Staff Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage team members and their roles"})]}),e.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[e.jsxs("button",{onClick:()=>Z(),className:"btn-secondary inline-flex items-center",children:[e.jsx(cs,{className:"h-5 w-5 mr-2"}),"Refresh"]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>{l("ADMIN"),n(!0),setTimeout(()=>T("role","ADMIN"),100)},className:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-4 py-2 rounded-lg inline-flex items-center shadow-md hover:shadow-lg transition-all duration-200",children:[e.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),"Add Admin"]}),e.jsxs("button",{onClick:()=>{l("EMPLOYEE"),n(!0),setTimeout(()=>T("role","EMPLOYEE"),100)},className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-4 py-2 rounded-lg inline-flex items-center shadow-md hover:shadow-lg transition-all duration-200",children:[e.jsx(qt,{className:"h-5 w-5 mr-2"}),"Add Employee"]})]})]})]}),a&&e.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(M.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>{n(!1),l(null),d(null),C()},className:"text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-100",title:"Back to Staff Management",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:c?`Edit ${c.name}`:o==="ADMIN"?"Add New Admin":o==="EMPLOYEE"?"Add New Employee":"Add New Staff Member"}),e.jsx("p",{className:"text-sm text-gray-500",children:c?`Update ${c.role.toLowerCase()} account details`:o==="ADMIN"?"Create admin account with full access":o==="EMPLOYEE"?"Create employee account with limited access":"Fill details and send verification email"})]})]}),e.jsx("button",{onClick:()=>{n(!1),l(null),d(null),C()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(_e,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:v(se),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),e.jsx("input",{...y("name",{required:"Name is required",minLength:{value:2,message:"Name must be at least 2 characters"}}),type:"text",className:"input-field",placeholder:"Enter full name"}),L.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:L.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx("input",{...y("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),type:"email",className:"input-field",placeholder:"Enter email address"}),L.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:L.email.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Password ",c?"(leave blank to keep current)":"*"]}),e.jsx("input",{...y("password",{required:c?!1:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),type:"password",className:"input-field",placeholder:c?"Leave blank to keep current password":"Enter password"}),L.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:L.password.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),e.jsxs("select",{...y("role",{required:"Role is required"}),className:`input-field ${o?"bg-gray-100 cursor-not-allowed":""}`,disabled:!!o,children:[e.jsx("option",{value:"",children:"Select Role"}),e.jsx("option",{value:"ADMIN",children:"Admin"}),e.jsx("option",{value:"EMPLOYEE",children:"Employee"})]}),L.role&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:L.role.message})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{n(!1),l(null),d(null),C()},className:"btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:ae.isLoading,className:"btn-primary disabled:opacity-50",children:ae.isLoading?c?"Updating...":"Creating...":c?"Update Staff":"Create Staff & Send Access Link"})]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"relative",children:[e.jsx(At,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search staff members...",value:i,onChange:k=>r(k.target.value),className:"input-field pl-10"})]})}),e.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:it&&it.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 rounded-lg overflow-hidden shadow-sm",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-600 to-purple-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Sl No"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Password"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Client Name"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Available"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Last Login"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:it.map((k,X)=>e.jsxs(M.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:X*.05},className:"hover:bg-blue-50 transition-all duration-200 border-b border-gray-100",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900 text-center",children:X+1})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-white",children:k.name.split(" ").map(N=>N[0]).join("").substring(0,2)})})}),e.jsx("div",{className:"ml-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.name})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:k.email})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-900 font-mono",children:h[k.id]?"12345678":""}),e.jsx("button",{onClick:()=>xe(k.id),className:"text-gray-400 hover:text-gray-600 transition-colors",title:h[k.id]?"Hide password":"Show password",children:h[k.id]?e.jsx(ms,{className:"h-4 w-4"}):e.jsx(Oe,{className:"h-4 w-4"})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${He(k.role)}`,children:k.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${k.status==="ACTIVE"?"bg-green-100 text-green-800 border border-green-200":k.status==="PENDING"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-red-100 text-red-800 border border-red-200"}`,children:k.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:k.clientName||Ye(k.id)?e.jsxs("div",{className:"max-w-xs",children:[e.jsx("div",{className:"truncate font-medium",title:k.clientName||Ye(k.id)||"",children:k.clientName||Ye(k.id)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[ze(k.id)," ",ze(k.id)===1?"client":"clients"]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-green-600 font-medium",children:"Available for Assignment"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"Ready for New Clients"})]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>ke(k.id),className:`inline-flex items-center px-3 py-1 text-xs font-semibold rounded-full cursor-pointer transition-all duration-200 hover:shadow-md ${A[k.id]==="Active"?"bg-green-100 text-green-800 border border-green-200 hover:bg-green-200":"bg-red-100 text-red-800 border border-red-200 hover:bg-red-200"}`,title:`Click to toggle to ${A[k.id]==="Active"?"Inactive":"Active"}`,children:A[k.id]==="Active"?e.jsx(e.Fragment,{children:" Active"}):e.jsx(e.Fragment,{children:" Inactive"})})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:k.lastLogin?new Date(k.lastLogin).toLocaleDateString():"Never"}),e.jsx("div",{className:"text-xs text-gray-500",children:k.lastLogin?new Date(k.lastLogin).toLocaleTimeString():"No login yet"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>he(k),className:"inline-flex items-center px-2 py-1 border border-gray-300 rounded-md text-gray-700 bg-gray-50 hover:bg-gray-100 transition-colors",title:"View Staff Details",children:e.jsx(Oe,{className:"h-4 w-4"})}),k.status==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>de.mutate(k.id),disabled:de.isLoading,className:"inline-flex items-center px-2 py-1 border border-green-300 rounded-md text-green-700 bg-green-50 hover:bg-green-100 disabled:opacity-50 transition-colors",title:"Verify & Activate Staff Member",children:e.jsx(us,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>Ne.mutate(k.id),disabled:Ne.isLoading,className:"inline-flex items-center px-2 py-1 border border-orange-300 rounded-md text-orange-700 bg-orange-50 hover:bg-orange-100 disabled:opacity-50 transition-colors",title:"Resend Verification Email",children:e.jsx(wc,{className:"h-4 w-4"})})]}),e.jsx("button",{onClick:()=>{d(k),l(k.role),n(!0),setTimeout(()=>{T("name",k.name),T("email",k.email),T("role",k.role)},100)},className:"inline-flex items-center px-2 py-1 border border-blue-300 rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100 transition-colors",title:"Edit Staff Member",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),k.hasAccess?e.jsx("button",{onClick:()=>J.mutate(k.id),disabled:J.isLoading,className:"inline-flex items-center px-2 py-1 border border-red-300 rounded-md text-red-700 bg-red-50 hover:bg-red-100 disabled:opacity-50 transition-colors",title:"Revoke Access",children:e.jsx(_e,{className:"h-4 w-4"})}):e.jsx("button",{onClick:()=>ee.mutate(k.id),disabled:ee.isLoading,className:"inline-flex items-center px-2 py-1 border border-green-300 rounded-md text-green-700 bg-green-50 hover:bg-green-100 disabled:opacity-50 transition-colors",title:"Grant Access",children:e.jsx(us,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ie(k.id),disabled:Y.isLoading,className:"inline-flex items-center px-2 py-1 border border-red-300 rounded-md text-red-700 bg-red-50 hover:bg-red-100 disabled:opacity-50 transition-colors",title:"Delete Staff",children:e.jsx(ct,{className:"h-4 w-4"})})]})})]},k.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No staff members found."}),e.jsxs("button",{onClick:()=>n(!0),className:"btn-primary inline-flex items-center mt-4",children:[e.jsx(qt,{className:"h-5 w-5 mr-2"}),"Invite First Staff Member"]})]})}),H&&H.length>0&&e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:G.totalStaff||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Staff"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:G.activeStaff||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:G.adminCount||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Admins"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:G.employeeCount||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Employees"})]})]}),x&&p&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(M.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Staff Member Details"}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(_e,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 flex items-center justify-center",children:e.jsx("span",{className:"text-xl font-medium text-white",children:p.name.split(" ").map(k=>k[0]).join("").substring(0,2)})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h4",{className:"text-xl font-semibold text-gray-900",children:p.name}),e.jsx("p",{className:"text-gray-600",children:p.email})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${He(p.role)}`,children:p.role})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${p.status==="ACTIVE"?"bg-green-100 text-green-800 border border-green-200":p.status==="PENDING"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-red-100 text-red-800 border border-red-200"}`,children:p.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-900 font-mono bg-gray-100 px-3 py-1 rounded",children:h[p.id]?"12345678":""}),e.jsx("button",{onClick:()=>xe(p.id),className:"text-gray-400 hover:text-gray-600 transition-colors",title:h[p.id]?"Hide password":"Show password",children:h[p.id]?e.jsx(ms,{className:"h-4 w-4"}):e.jsx(Oe,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Available"}),e.jsx("button",{onClick:()=>ke(p.id),className:`inline-flex items-center px-3 py-1 text-sm font-semibold rounded-full cursor-pointer transition-all duration-200 hover:shadow-md ${A[p.id]==="Active"?"bg-green-100 text-green-800 border border-green-200 hover:bg-green-200":"bg-red-100 text-red-800 border border-red-200 hover:bg-red-200"}`,title:`Click to toggle to ${A[p.id]==="Active"?"Inactive":"Active"}`,children:A[p.id]==="Active"?e.jsx(e.Fragment,{children:" Active"}):e.jsx(e.Fragment,{children:" Inactive"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Login"}),e.jsx("div",{className:"text-sm text-gray-900",children:p.lastLogin?new Date(p.lastLogin).toLocaleDateString():"Never"}),e.jsx("div",{className:"text-xs text-gray-500",children:p.lastLogin?new Date(p.lastLogin).toLocaleTimeString():"No login yet"})]})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Created:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:new Date(p.createdAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Updated:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:new Date(p.updatedAt).toLocaleDateString()})]})]})})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Close"}),e.jsx("button",{onClick:()=>{d(p),l(p.role),b(!1),n(!0),setTimeout(()=>{T("name",p.name),T("email",p.email),T("role",p.role)},100)},className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md transition-colors",children:"Edit Staff"})]})]})})]})}const su=()=>{const[s,t]=u.useState("desktop");return u.useEffect(()=>{const a=()=>{const n=window.innerWidth;n<768?t("mobile"):n<1024?t("tablet"):t("desktop")};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),s};function au(){const s=su(),[t,a]=u.useState(""),[n,i]=u.useState(!1),[r,o]=u.useState({isOpen:!1,transaction:null}),l=Ae(),c=la(),d=le(async m=>{console.log(" Executing DELETE request for transaction ID:",m);const y=await F.delete(`/api/transactions/${m}`);return console.log(" DELETE response received:",y.data),y},{onSuccess:(m,y)=>{console.log(" Delete mutation successful:",m.data),O.success("Transaction deleted successfully!"),l.setQueryData(["transactions",t],v=>v&&v.filter(C=>C.id!==y)),setTimeout(()=>{l.invalidateQueries(["transactions"])},100)},onError:m=>{console.error(" Delete mutation failed:",m),O.error(m.response?.data?.message||"Failed to delete transaction")}}),h=(m,y)=>{window.confirm(`Are you sure you want to delete the transaction "${y}"? This action cannot be undone.`)&&(console.log(" Attempting to delete transaction ID:",m),d.mutate(m))},f=m=>{console.log(" Viewing transaction:",m.name),o({isOpen:!0,transaction:m})},p=()=>{o({isOpen:!1,transaction:null})},{data:j,isLoading:x,refetch:b}=re(["transactions",t],async()=>{const m=new URLSearchParams;t&&m.append("name",t);const y=await F.get(`/api/transactions?${m}`);return console.log("Transaction data received:",y.data),y.data},{staleTime:120*1e3,keepPreviousData:!0}),g=m=>new Date(m).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),A={total:j?.length||0,completed:j?.filter(m=>m.status==="COMPLETED").length||0,pending:j?.filter(m=>m.status==="PENDING").length||0,failed:j?.filter(m=>m.status==="FAILED").length||0,totalAmount:j?.reduce((m,y)=>m+(y.amount||0),0)||0,completedAmount:j?.filter(m=>m.status==="COMPLETED").reduce((m,y)=>m+(y.amount||0),0)||0};u.useEffect(()=>{c.state?.fromAdd&&c.state?.transactionName&&(O.success(` ${c.state.transactionName} transaction has been successfully added!`),window.history.replaceState({},document.title)),c.state?.fromEdit&&(console.log("Returning from edit page, forcing refresh...",c.state),i(!0),l.clear(),l.invalidateQueries(["transactions"]),setTimeout(()=>{l.refetchQueries(["transactions"]),b().finally(()=>{i(!1)})},50))},[c.state,l,b,i]);const w=s==="mobile";return x||n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:n?"Refreshing data...":"Loading..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Transaction Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor and manage all financial transactions"})]}),e.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[e.jsx("button",{onClick:()=>{console.log(" Manual refresh triggered"),b(),O.success("Refreshing transaction data...")},className:"btn-outline inline-flex items-center",children:" Refresh"}),e.jsxs(je,{to:"/transactions/new",className:"btn-primary inline-flex items-center",children:[e.jsx(xt,{className:"h-5 w-5 mr-2"}),"New Transaction"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Total Transactions"}),e.jsx("p",{className:"text-3xl font-bold",children:A.total})]}),e.jsx("div",{className:"bg-blue-400 bg-opacity-30 rounded-lg p-3",children:e.jsx(ds,{className:"h-8 w-8"})})]})}),e.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Completed"}),e.jsx("p",{className:"text-3xl font-bold",children:A.completed}),e.jsxs("p",{className:"text-green-100 text-xs mt-1",children:["",A.completedAmount.toLocaleString()]})]}),e.jsx("div",{className:"bg-green-400 bg-opacity-30 rounded-lg p-3",children:e.jsx(Ee,{className:"h-8 w-8"})})]})}),e.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-100 text-sm font-medium",children:"Pending"}),e.jsx("p",{className:"text-3xl font-bold",children:A.pending})]}),e.jsx("div",{className:"bg-yellow-400 bg-opacity-30 rounded-lg p-3",children:e.jsx(Zt,{className:"h-8 w-8"})})]})}),e.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-bold",children:["",A.totalAmount.toLocaleString()]}),A.failed>0&&e.jsxs("p",{className:"text-purple-100 text-xs mt-1",children:[A.failed," failed"]})]}),e.jsx("div",{className:"bg-purple-400 bg-opacity-30 rounded-lg p-3",children:e.jsx("span",{className:"text-2xl font-bold",children:""})})]})})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(At,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name...",value:t,onChange:m=>a(m.target.value),className:"input-field pl-10"})]}),e.jsx("button",{onClick:()=>{a(""),b()},className:"btn-secondary",children:"Clear"})]})}),e.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:j&&j.length>0?e.jsx("div",{className:`${w?"space-y-4":"overflow-x-auto"}`,children:w?e.jsx("div",{className:"space-y-4",children:j.map(m=>e.jsxs(M.div,{whileHover:{scale:1.02},className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:m.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${m.status==="COMPLETED"?"bg-green-100 text-green-800":m.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:m.status})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[" ",new Date(m.date).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[" ",g(m.date)]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[" ",m.transactionId]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" ",m.amount.toLocaleString()]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>f(m),className:"text-blue-600 hover:text-blue-800 text-sm font-medium inline-flex items-center",children:[e.jsx(Oe,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(je,{to:`/transactions/${m.id}/edit`,className:"text-primary-600 hover:text-primary-800 text-sm font-medium inline-flex items-center",children:[e.jsx(st,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs("button",{onClick:()=>h(m.id,m.name),disabled:d.isLoading,className:"text-red-600 hover:text-red-800 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center",children:[e.jsx(ct,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]},m.id))}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[e.jsx("thead",{className:"bg-indigo-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-16 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"S.No"}),e.jsx("th",{className:"w-48 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Time"}),e.jsx("th",{className:"w-40 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Transaction ID"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"w-24 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:j.map((m,y)=>e.jsxs(M.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:y*.05},className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"w-16 px-4 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:y+1}),e.jsx("td",{className:"w-48 px-4 py-4 text-sm font-medium text-gray-900",children:e.jsx("div",{className:"truncate",title:m.name,children:m.name})}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(m.date).toLocaleDateString()}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:g(m.date)}),e.jsx("td",{className:"w-40 px-4 py-4 text-sm text-gray-500",children:e.jsx("div",{className:"truncate",title:m.transactionId,children:m.transactionId})}),e.jsxs("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500 font-semibold",children:["",m.amount.toLocaleString()]}),e.jsx("td",{className:"w-24 px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${m.status==="COMPLETED"?"bg-green-100 text-green-800":m.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:m.status})}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>f(m),className:"text-blue-600 hover:text-blue-900 inline-flex items-center",title:"View Transaction Details",children:e.jsx(Oe,{className:"h-4 w-4"})}),e.jsx(je,{to:`/transactions/${m.id}/edit`,className:"text-primary-600 hover:text-primary-900 inline-flex items-center",title:"Edit Transaction",children:e.jsx(st,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>h(m.id,m.name),disabled:d.isLoading,className:"text-red-600 hover:text-red-900 disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center",title:"Delete Transaction",children:e.jsx(ct,{className:"h-4 w-4"})})]})})]},m.id))})]})})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"No transactions found."}),e.jsxs(je,{to:"/transactions/new",className:"btn-primary inline-flex items-center mt-4",children:[e.jsx(xt,{className:"h-5 w-5 mr-2"}),"Create First Transaction"]})]})}),r.isOpen&&r.transaction&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Transaction Details - ",r.transaction.name]}),e.jsx("button",{onClick:p,className:"text-gray-400 hover:text-gray-600 focus:outline-none",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"mt-4 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.transaction.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(r.transaction.date).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Time"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:g(r.transaction.date)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Transaction ID"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:r.transaction.transactionId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Amount"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900 font-semibold",children:["",r.transaction.amount.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r.transaction.status==="COMPLETED"?"bg-green-100 text-green-800":r.transaction.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:r.transaction.status})]})]})}),e.jsxs("div",{className:"flex items-center justify-end pt-6 border-t border-gray-200 space-x-3",children:[e.jsx("button",{onClick:p,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Close"}),e.jsxs(je,{to:`/transactions/${r.transaction.id}/edit`,onClick:p,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 inline-flex items-center",children:[e.jsx(st,{className:"h-4 w-4 mr-2"}),"Edit Transaction"]})]})]})})})]})}function dn(){const s=Ve(),{id:t}=ys(),a=!!t,n=Ae(),{register:i,handleSubmit:r,reset:o,formState:{errors:l}}=Ct(),{data:c}=re(["transaction",t],async()=>t?(await F.get(`/api/transactions/${t}`)).data:null,{enabled:a}),d=le(async f=>{if(console.log("Submitting transaction form data:",f),a){const p=await F.patch(`/api/transactions/${t}`,f);return console.log("PATCH response:",p.data),p}else{const p=await F.post("/api/transactions",f);return console.log("POST response:",p.data),p}},{onSuccess:async f=>{O.success(a?"Transaction updated successfully!":"Transaction created successfully!"),console.log("Transaction update/create successful:",f.data),n.clear(),n.invalidateQueries(["transactions"]),n.invalidateQueries(["transaction"]),await n.refetchQueries(["transactions"]),setTimeout(()=>{s("/transactions",{state:{fromAdd:!a,fromEdit:a,transactionName:f.data.transaction?.name||f.data.name,timestamp:Date.now()}})},100)},onError:f=>{O.error(f.response?.data?.message||"Something went wrong")}});u.useEffect(()=>{if(c){const f=c.date?new Date(c.date):new Date;o({name:c.name,date:f.toISOString().split("T")[0],time:f.toTimeString().split(" ")[0].substring(0,5),transactionId:c.transactionId,amount:c.amount,status:c.status})}},[c,o]);const h=f=>{const p=`${f.date}T${f.time}:00.000Z`,j={...f,date:p};d.mutate(j)};return e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{type:"button",onClick:()=>s("/transactions"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors",children:[e.jsx(Et,{className:"h-4 w-4 mr-2"}),"Back to Transactions"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a?"Edit Transaction":"New Transaction"}),e.jsx("p",{className:"text-gray-600",children:a?"Update transaction information":"Create a new transaction record"})]})]})}),e.jsxs("form",{onSubmit:r(h),className:"card space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Transaction Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),e.jsx("input",{...i("name",{required:"Name is required"}),type:"text",className:"input-field",placeholder:"Enter transaction name"}),l.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),e.jsx("input",{...i("date",{required:"Date is required"}),type:"date",className:"input-field"}),l.date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.date.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time *"}),e.jsx("input",{...i("time",{required:"Time is required"}),type:"time",className:"input-field"}),l.time&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.time.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transaction ID *"}),e.jsx("input",{...i("transactionId",{required:"Transaction ID is required"}),type:"text",className:"input-field",placeholder:"Enter transaction ID"}),l.transactionId&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.transactionId.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount *"}),e.jsx("input",{...i("amount",{required:"Amount is required",min:{value:.01,message:"Amount must be greater than 0"}}),type:"number",step:"0.01",className:"input-field",placeholder:"Enter amount"}),l.amount&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.amount.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status *"}),e.jsxs("select",{...i("status",{required:"Status is required"}),className:"input-field",children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"COMPLETED",children:"Completed"}),e.jsx("option",{value:"FAILED",children:"Failed"})]}),l.status&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.status.message})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>s("/transactions"),className:"btn-secondary",children:"Cancel"}),e.jsx(M.button,{type:"submit",disabled:d.isLoading,className:"btn-primary disabled:opacity-50",whileHover:{scale:1.02},whileTap:{scale:.98},children:d.isLoading?a?"Updating...":"Creating...":a?"Update Transaction":"Create Transaction"})]})]})]})})}const nu=()=>{const s=Ve(),{refreshAfterEnquiry:t}=Li(),[a,n]=u.useState({businessName:"",ownerName:"",email:"",phone:"",loanAmount:"",loanPurpose:"",annualRevenue:""}),[i,r]=u.useState(!1),[o,l]=u.useState({isChecking:!1,isDuplicate:!1});u.useEffect(()=>{if(a.phone&&a.phone.length===10){const f=setTimeout(async()=>{l({isChecking:!0,isDuplicate:!1});try{const x=((await F.get("/api/enquiries")).data||[]).find(b=>b.mobile===a.phone);if(x){const b=x.name||x.businessName||"Unknown Client";l({isChecking:!1,isDuplicate:!0,existingClient:b})}else l({isChecking:!1,isDuplicate:!1})}catch(p){console.error("Error checking phone number:",p),l({isChecking:!1,isDuplicate:!1})}},1e3);return()=>clearTimeout(f)}else l({isChecking:!1,isDuplicate:!1})},[a.phone]);const c=f=>{const{name:p,value:j}=f.target;if(p==="phone"){const x=j.replace(/\D/g,"");x.length<=10&&n(b=>({...b,[p]:x}));return}n(x=>({...x,[p]:j}))},d=async()=>{try{console.log(" Checking for duplicate phone number and name...");const p=(await F.get("/api/enquiries")).data||[],j=p.find(b=>b.mobile===a.phone);if(j){const b=j.name||j.businessName||"Unknown Client";return ce.error(`Phone number ${a.phone} already exists for client: ${b}`),!1}const x=p.find(b=>b.name&&b.name.toLowerCase()===a.ownerName.toLowerCase()||b.businessName&&b.businessName.toLowerCase()===a.businessName.toLowerCase());if(x){const b=x.name||x.businessName,g=x.mobile;return ce.error(`Client "${b}" already exists with phone number: ${g}`),!1}return!0}catch(f){return console.error(" Error checking for duplicates:",f),!0}},h=async f=>{if(f.preventDefault(),!a.businessName||!a.ownerName||!a.phone){ce.error("Please fill in all required fields");return}if(a.phone.length!==10){ce.error("Phone number must be exactly 10 digits");return}if(r(!0),!await d()){r(!1);return}try{console.log(" Submitting loan enquiry:",a);const j=await F.post("/api/enquiries",{name:a.ownerName,mobile:a.phone,email:a.email,businessName:a.businessName,businessType:a.loanPurpose||"General Business",loanAmount:a.loanAmount?parseInt(a.loanAmount.replace(/[^0-9]/g,"")):null,source:"LANDING_PAGE",interestStatus:"INTERESTED",additionalData:{annualRevenue:a.annualRevenue,loanPurpose:a.loanPurpose}});console.log(" Enquiry submitted successfully:",j.data),ce.success("Application submitted successfully! Our specialists will reach out within 24 hours."),await t(),n({businessName:"",ownerName:"",email:"",phone:"",loanAmount:"",loanPurpose:"",annualRevenue:""}),setTimeout(()=>{s("/dashboard")},2e3)}catch(j){console.error(" Error submitting application:",j),console.error(" Error details:",{status:j.response?.status,statusText:j.response?.statusText,data:j.response?.data,message:j.message});let x="Failed to submit application. Please try again.";j.response?.status===404?x="Service not available. Please try again later.":j.response?.status===500?x="Server error. Please try again later.":j.response?.data?.message?x=j.response.data.message:j.message.includes("Network Error")&&(x="Network error. Please check your connection and try again."),ce.error(x)}finally{r(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-800",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center min-h-screen",children:[e.jsxs("div",{className:"text-white space-y-8",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-teal-400 to-cyan-400 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-slate-900 font-bold text-sm",children:""})}),e.jsx("span",{className:"text-xl font-bold",children:"FinGrowth"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h1",{className:"text-5xl lg:text-6xl font-bold leading-tight",children:["Power Your Business",e.jsx("br",{}),"with",e.jsx("br",{}),e.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-teal-400 to-cyan-400",children:["Tailored Financial",e.jsx("br",{}),"Solutions"]})]}),e.jsx("p",{className:"text-xl text-slate-300 leading-relaxed max-w-lg",children:"Get the capital you need with same-day approvals and competitive rates. Designed for ambitious businesses looking to expand, upgrade, or optimize their operations."})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-4 border border-slate-700",children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:"24h"}),e.jsx("div",{className:"text-sm text-slate-400",children:"Fast Track Approval"})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-4 border border-slate-700",children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:"8%*"}),e.jsx("div",{className:"text-sm text-slate-400",children:"Competitive Rates"})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-4 border border-slate-700",children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:"5 Crore"}),e.jsx("div",{className:"text-sm text-slate-400",children:"Maximum Funding"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ee,{className:"h-5 w-5 text-teal-400"}),e.jsx("span",{className:"text-slate-300",children:"Secure & Encrypted"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Dt,{className:"h-5 w-5 text-teal-400"}),e.jsx("span",{className:"text-slate-300",children:"No Hidden Fees"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ee,{className:"h-5 w-5 text-teal-400"}),e.jsx("span",{className:"text-slate-300",children:"Pre-approved Offers"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Dt,{className:"h-5 w-5 text-teal-400"}),e.jsx("span",{className:"text-slate-300",children:"Dedicated Manager"})]})]})]}),e.jsx("div",{className:"bg-slate-800/40 backdrop-blur-lg rounded-2xl p-8 border border-slate-700 shadow-2xl",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Business Loan Enquiry"}),e.jsx("p",{className:"text-slate-400",children:"Submit your details. Our specialists will reach out within 24 hours."})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Business Name"}),e.jsx("input",{type:"text",name:"businessName",value:a.businessName,onChange:c,placeholder:"Your Company Ltd.",className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-teal-400 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Owner Name"}),e.jsx("input",{type:"text",name:"ownerName",value:a.ownerName,onChange:c,placeholder:"John Doe",className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-teal-400 focus:border-transparent",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",value:a.email,onChange:c,placeholder:"john@company.com",className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-teal-400 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:c,placeholder:"+91 9787373721",maxLength:10,className:`w-full px-4 py-3 bg-slate-700/50 border rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:border-transparent ${o.isDuplicate?"border-red-500 focus:ring-red-400":"border-slate-600 focus:ring-teal-400"}`,required:!0}),o.isChecking&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-teal-400"})})]}),o.isDuplicate&&e.jsxs("p",{className:"mt-2 text-sm text-red-400 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Phone number already exists for client: ",o.existingClient]}),!o.isDuplicate&&!o.isChecking&&a.phone.length===10&&e.jsxs("p",{className:"mt-2 text-sm text-green-400 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Phone number is available"]}),a.phone.length>0&&a.phone.length<10&&e.jsxs("p",{className:"mt-2 text-sm text-yellow-400 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Please enter exactly 10 digits (",a.phone.length,"/10)"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Loan Amount"}),e.jsxs("select",{name:"loanAmount",value:a.loanAmount,onChange:c,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-teal-400 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select amount"}),e.jsx("option",{value:"500000",children:"5 Lakh"}),e.jsx("option",{value:"1000000",children:"10 Lakh"}),e.jsx("option",{value:"2500000",children:"25 Lakh"}),e.jsx("option",{value:"5000000",children:"50 Lakh"}),e.jsx("option",{value:"10000000",children:"1 Crore"}),e.jsx("option",{value:"50000000",children:"5 Crore"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Loan Purpose"}),e.jsxs("select",{name:"loanPurpose",value:a.loanPurpose,onChange:c,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-teal-400 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select purpose"}),e.jsx("option",{value:"Working Capital",children:"Working Capital"}),e.jsx("option",{value:"Equipment Purchase",children:"Equipment Purchase"}),e.jsx("option",{value:"Business Expansion",children:"Business Expansion"}),e.jsx("option",{value:"Inventory",children:"Inventory"}),e.jsx("option",{value:"Real Estate",children:"Real Estate"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Annual Revenue"}),e.jsxs("select",{name:"annualRevenue",value:a.annualRevenue,onChange:c,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-teal-400 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select revenue range"}),e.jsx("option",{value:"Below 10 Lakh",children:"Below 10 Lakh"}),e.jsx("option",{value:"10-25 Lakh",children:"10-25 Lakh"}),e.jsx("option",{value:"25-50 Lakh",children:"25-50 Lakh"}),e.jsx("option",{value:"50 Lakh - 1 Crore",children:"50 Lakh - 1 Crore"}),e.jsx("option",{value:"1-5 Crore",children:"1-5 Crore"}),e.jsx("option",{value:"Above 5 Crore",children:"Above 5 Crore"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Business Documents (Optional)"}),e.jsxs("div",{className:"border-2 border-dashed border-slate-600 rounded-lg p-6 text-center hover:border-teal-400 transition-colors cursor-pointer",children:[e.jsx(xi,{className:"h-8 w-8 text-slate-400 mx-auto mb-2"}),e.jsx("span",{className:"text-slate-400",children:"Upload financial documents"})]})]}),e.jsx("button",{type:"submit",disabled:i||o.isDuplicate,className:`w-full font-semibold py-4 px-6 rounded-lg transition-all duration-200 flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed ${o.isDuplicate?"bg-gray-500 text-white cursor-not-allowed":"bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white"}`,children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Submitting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Submit Application"}),e.jsx(Bl,{className:"h-5 w-5"})]})}),e.jsx("p",{className:"text-xs text-slate-400 text-center",children:"By submitting this form, you agree to our terms and privacy policy."})]})]})})]})})})};class iu{results=[];queryClient;constructor(t){this.queryClient=t}async testAllEndpoints(){console.log(" Starting comprehensive auto-refresh test...");const t=[{page:"Dashboard",endpoint:"/api/enquiries",queryKey:"dashboard-data"},{page:"Enquiry List",endpoint:"/api/enquiries",queryKey:"enquiries"},{page:"Document Verification",endpoint:"/api/documents",queryKey:"documents-verification"},{page:"Document Upload",endpoint:"/api/documents",queryKey:"documents"},{page:"Shortlist",endpoint:"/api/shortlist",queryKey:"shortlists"},{page:"Payment Gateway",endpoint:"/api/cashfree",queryKey:"cashfree-applications"},{page:"Staff Management",endpoint:"/api/staff",queryKey:"staff"}];for(const a of t)await this.testEndpoint(a.page,a.endpoint,a.queryKey);return this.results}async testEndpoint(t,a,n){try{console.log(` Testing ${t} - ${a}`);const i=await fetch(a),r=await i.json();if(i.ok){const o=this.queryClient.getQueryData(n);this.results.push({page:t,endpoint:a,status:"success",message:` API working, data count: ${Array.isArray(r)?r.length:"N/A"}${o?", cached data exists":", no cached data"}`,timestamp:new Date().toISOString(),dataCount:Array.isArray(r)?r.length:void 0}),console.log(` ${t} test passed`)}else throw new Error(`HTTP ${i.status}: ${i.statusText}`)}catch(i){this.results.push({page:t,endpoint:a,status:"error",message:` ${i.message}`,timestamp:new Date().toISOString()}),console.error(` ${t} test failed:`,i.message)}}async testCacheInvalidation(){console.log(" Testing cache invalidation...");const t=["dashboard-data","enquiries","documents","documents-verification","shortlists","cashfree-applications","staff"];for(const a of t)try{const n=this.queryClient.getQueryData(a);await this.queryClient.invalidateQueries(a),await new Promise(r=>setTimeout(r,1e3));const i=this.queryClient.getQueryData(a);this.results.push({page:`Cache Test - ${a}`,endpoint:"cache-invalidation",status:"success",message:` Cache invalidated successfully. Before: ${n?"exists":"empty"}, After: ${i?"exists":"empty"}`,timestamp:new Date().toISOString()}),console.log(` Cache invalidation test passed for ${a}`)}catch(n){this.results.push({page:`Cache Test - ${a}`,endpoint:"cache-invalidation",status:"error",message:` Cache invalidation failed: ${n.message}`,timestamp:new Date().toISOString()}),console.error(` Cache invalidation test failed for ${a}:`,n.message)}}async testAutoRefreshIntervals(){console.log(" Testing auto-refresh intervals...");const t=35e3,a=Date.now(),n={"dashboard-data":this.queryClient.getQueryData("dashboard-data"),enquiries:this.queryClient.getQueryData("enquiries"),shortlists:this.queryClient.getQueryData("shortlists")};return new Promise(i=>{const r=setInterval(()=>{if(Date.now()-a>=t){clearInterval(r);const l={"dashboard-data":this.queryClient.getQueryData("dashboard-data"),enquiries:this.queryClient.getQueryData("enquiries"),shortlists:this.queryClient.getQueryData("shortlists")};let c=!1;for(const[d,h]of Object.entries(n)){const f=l[d];if(h!==f){c=!0;break}}this.results.push({page:"Auto-refresh Monitor",endpoint:"interval-refresh",status:c?"success":"error",message:c?` Auto-refresh detected within ${t/1e3}s`:` No auto-refresh detected within ${t/1e3}s`,timestamp:new Date().toISOString()}),console.log(c?" Auto-refresh test passed":" Auto-refresh test failed - no refresh detected"),i()}},5e3)})}generateReport(){const t=this.results.filter(i=>i.status==="success").length,a=this.results.filter(i=>i.status==="error").length;let n=`
 AUTO-REFRESH FUNCTIONALITY TEST REPORT
==========================================

 Summary:
- Total Tests: ${this.results.length}
- Passed: ${t} 
- Failed: ${a} 
- Success Rate: ${(t/this.results.length*100).toFixed(1)}%

 Detailed Results:
`;return this.results.forEach((i,r)=>{n+=`
${r+1}. ${i.page}
   Endpoint: ${i.endpoint}
   Status: ${i.status==="success"?" PASS":" FAIL"}
   Message: ${i.message}
   Time: ${new Date(i.timestamp).toLocaleTimeString()}
   ${i.dataCount!==void 0?`Data Count: ${i.dataCount}`:""}
`}),n+=`
==========================================
Test completed at: ${new Date().toLocaleString()}
`,n}clearResults(){this.results=[]}}const ru=()=>{const[s,t]=u.useState(!1),[a,n]=u.useState([]),[i,r]=u.useState(""),o=Ae(),l=async()=>{t(!0),n([]),r("Initializing tests...");try{const p=new iu(o);r("Testing API endpoints..."),await p.testAllEndpoints(),r("Testing cache invalidation..."),await p.testCacheInvalidation();const j=p.results;n(j);const x=p.generateReport();console.log(x);const b=j.filter(A=>A.status==="success").length,g=j.length;O.success(`Tests completed! ${b}/${g} passed`),r(`Completed: ${b}/${g} tests passed`)}catch(p){console.error("Test execution failed:",p),O.error(`Test execution failed: ${p.message}`),r(`Failed: ${p.message}`)}finally{t(!1)}},c=()=>{n([]),r("")},d=()=>{r("Manually refreshing all queries..."),["dashboard-data","enquiries","documents","documents-verification","shortlists","cashfree-applications","staff"].forEach(j=>{o.invalidateQueries(j)}),O.success("Manual refresh triggered for all queries"),r("Manual refresh completed")},h=p=>p==="success"?"":"",f=p=>p==="success"?"text-green-600":"text-red-600";return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Auto-Refresh Functionality Test"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:l,disabled:s,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:s?e.jsxs(e.Fragment,{children:[e.jsx(zc,{className:"h-4 w-4 mr-2"}),"Running..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bc,{className:"h-4 w-4 mr-2"}),"Run Tests"]})}),e.jsxs("button",{onClick:d,disabled:s,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Manual Refresh"]}),e.jsx("button",{onClick:c,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Clear Results"})]})]}),i&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:e.jsx("p",{className:"text-sm text-blue-800",children:i})}),a.length>0&&e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Test Results"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map((p,j)=>e.jsxs(M.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:j*.1},className:`p-4 border rounded-lg ${p.status==="success"?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:p.page}),e.jsx("span",{className:"text-lg",children:h(p.status)})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:p.endpoint})}),e.jsx("p",{className:`text-sm ${f(p.status)} mb-2`,children:p.message}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[e.jsx("span",{children:new Date(p.timestamp).toLocaleTimeString()}),p.dataCount!==void 0&&e.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded",children:[p.dataCount," items"]})]})]},j))}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Summary"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Tests"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.filter(p=>p.status==="success").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Passed"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:a.filter(p=>p.status==="error").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Failed"})]})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"Testing Instructions"}),e.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[e.jsx("li",{children:' Click "Run Tests" to verify all API endpoints and cache functionality'}),e.jsx("li",{children:' Use "Manual Refresh" to trigger immediate data refresh across all pages'}),e.jsx("li",{children:" Check browser console for detailed logs and reports"}),e.jsx("li",{children:" Navigate between pages to verify data persistence"}),e.jsx("li",{children:" Refresh the browser page to test data persistence after reload"})]})]})]})},ou=()=>{const[s,t]=u.useState([]),[a,n]=u.useState(!0),[i,r]=u.useState(0),o=Ae(),l=[{key:"enquiries",endpoint:"/api/enquiries",label:"Enquiries"},{key:"shortlists",endpoint:"/api/shortlist",label:"Shortlist"},{key:"documents",endpoint:"/api/documents",label:"Documents"},{key:"staff",endpoint:"/api/staff",label:"Staff"},{key:"cashfree",endpoint:"/api/cashfree",label:"Payment Gateway"}],c=async g=>{try{const w=(await F.get(g)).data;return{endpoint:g,status:"success",data:w,lastUpdated:new Date().toLocaleTimeString(),dataCount:Array.isArray(w)?w.length:Array.isArray(w?.staff)?w.staff.length:void 0}}catch(A){return{endpoint:g,status:"error",error:A.message,lastUpdated:new Date().toLocaleTimeString()}}},d=async()=>{t(w=>w.map(m=>({...m,status:"loading"})));const g=await Promise.all(l.map(({endpoint:w})=>c(w)));t(g),r(w=>w+1);const A=g.filter(w=>w.status==="success").length;O.success(`Test completed: ${A}/${g.length} endpoints working`)};u.useEffect(()=>{d()},[]),u.useEffect(()=>{if(!a)return;const g=setInterval(()=>{console.log(" Auto-refresh triggered by test page"),d()},3e4);return()=>clearInterval(g)},[a]);const{data:h}=re("enquiries",()=>F.get("/api/enquiries").then(g=>g.data),{staleTime:180*1e3,keepPreviousData:!0}),{data:f}=re("shortlists",()=>F.get("/api/shortlist").then(g=>g.data),{staleTime:120*1e3,keepPreviousData:!0}),{data:p}=re("documents",()=>F.get("/api/documents").then(g=>g.data),{staleTime:480*1e3,keepPreviousData:!0}),j=g=>{switch(g){case"loading":return e.jsx(Zt,{className:"h-5 w-5 text-yellow-500 animate-spin"});case"success":return e.jsx(Ee,{className:"h-5 w-5 text-green-500"});case"error":return e.jsx(gt,{className:"h-5 w-5 text-red-500"})}},x=g=>{switch(g){case"loading":return"border-yellow-200 bg-yellow-50";case"success":return"border-green-200 bg-green-50";case"error":return"border-red-200 bg-red-50"}},b=()=>{["enquiries","shortlists","documents","staff","cashfree","dashboard-data"].forEach(A=>{o.invalidateQueries(A)}),O.success("All caches invalidated - data will refresh automatically")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Data Persistence & Auto-Refresh Test"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a,onChange:g=>n(g.target.checked),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Auto-refresh (30s)"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Refreshes: ",i]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:d,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Test All Endpoints"]}),e.jsxs("button",{onClick:b,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Invalidate Caches"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"API Endpoint Status"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map((g,A)=>e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:A*.1},className:`p-4 border rounded-lg ${x(g.status)}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:l.find(w=>w.endpoint===g.endpoint)?.label||g.endpoint}),j(g.status)]}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:g.endpoint})}),g.status==="success"&&e.jsxs("div",{className:"space-y-1",children:[g.dataCount!==void 0&&e.jsxs("p",{className:"text-sm text-green-700",children:[" ",g.dataCount," items found"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Last updated: ",g.lastUpdated]})]}),g.status==="error"&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm text-red-700",children:[" ",g.error]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Failed at: ",g.lastUpdated]})]}),g.status==="loading"&&e.jsx("p",{className:"text-sm text-yellow-700",children:" Testing..."})]},g.endpoint))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"React Query Cache Status"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Enquiries Cache"}),e.jsx("p",{className:"text-sm text-gray-600",children:h?` ${Array.isArray(h)?h.length:"N/A"} items cached`:" No cache"})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Shortlist Cache"}),e.jsx("p",{className:"text-sm text-gray-600",children:f?` ${Array.isArray(f)?f.length:"N/A"} items cached`:" No cache"})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Documents Cache"}),e.jsx("p",{className:"text-sm text-gray-600",children:p?` ${Array.isArray(p)?p.length:"N/A"} items cached`:" No cache"})]})]})]}),e.jsx(ru,{}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Testing Instructions"}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Auto-refresh:"})," This page automatically tests endpoints every 30 seconds when enabled"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Manual test:"}),' Click "Test All Endpoints" to immediately check all API endpoints']}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Cache test:"}),' Click "Invalidate Caches" to test cache refresh functionality']}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Navigation test:"})," Navigate to other pages and return - data should persist"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Refresh test:"})," Refresh the browser page - data should remain visible"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Console logs:"})," Check browser console for detailed refresh activity"]})]})]})]})};function lu(){const[s,t]=u.useState("admin@gmail.com"),[a,n]=u.useState("admin123"),[i,r]=u.useState(!1),{login:o,isAuthenticated:l,user:c}=Me(),d=Ve(),h=async()=>{r(!0);try{console.log(" Testing login..."),await o({email:s,password:a}),console.log(" Login completed, auth state:",l),setTimeout(()=>{console.log(" Attempting manual navigation..."),d("/dashboard")},1e3)}catch(p){console.error(" Login test failed:",p)}finally{r(!1)}},f=()=>{console.log(" Testing direct navigation..."),d("/dashboard")};return e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Login Test Page"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email:"}),e.jsx("input",{type:"email",value:s,onChange:p=>t(p.target.value),className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password:"}),e.jsx("input",{type:"password",value:a,onChange:p=>n(p.target.value),className:"w-full p-2 border rounded"})]}),e.jsx("button",{onClick:h,disabled:i,className:"w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700 disabled:opacity-50",children:i?"Testing Login...":"Test Login"}),e.jsx("button",{onClick:f,className:"w-full bg-green-600 text-white p-2 rounded hover:bg-green-700",children:"Test Direct Navigation"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Current State:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Authenticated:"})," ",l?"Yes":"No"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User:"})," ",c?`${c.name} (${c.role})`:"None"]})]})]})})}function cu(){const{isAuthenticated:s,user:t}=Me(),{canManageStaff:a}=ha();return e.jsxs(va,{children:[e.jsx(ue,{path:"/apply",element:e.jsx(nu,{})}),e.jsx(ue,{path:"/login",element:e.jsx(qd,{})}),e.jsx(ue,{path:"/login-test",element:e.jsx(lu,{})}),s?e.jsx(ue,{path:"/*",element:e.jsx(fd,{children:e.jsxs(va,{children:[e.jsx(ue,{path:"/dashboard",element:e.jsx(Bd,{})}),e.jsx(ue,{path:"/enquiries",element:e.jsx(Hd,{})}),e.jsx(ue,{path:"/enquiries/new",element:e.jsx(Hs,{})}),e.jsx(ue,{path:"/enquiries/:id",element:e.jsx(Hs,{})}),e.jsx(ue,{path:"/enquiries/:id/edit",element:e.jsx(Hs,{})}),e.jsx(ue,{path:"/documents",element:e.jsx(Zd,{})}),e.jsx(ue,{path:"/documents/verification",element:e.jsx(Kd,{})}),e.jsx(ue,{path:"/shortlist",element:e.jsx(Yd,{})}),e.jsx(ue,{path:"/shortlist/new",element:e.jsx(cn,{})}),e.jsx(ue,{path:"/shortlist/:id/edit",element:e.jsx(cn,{})}),e.jsx(ue,{path:"/payment-gateway",element:e.jsx(Xd,{})}),e.jsx(ue,{path:"/payment-gateway/apply/:id",element:e.jsx(eu,{})}),a&&e.jsx(ue,{path:"/staff",element:e.jsx(tu,{})}),t?.role==="ADMIN"&&e.jsxs(e.Fragment,{children:[e.jsx(ue,{path:"/transactions",element:e.jsx(au,{})}),e.jsx(ue,{path:"/transactions/new",element:e.jsx(dn,{})}),e.jsx(ue,{path:"/transactions/:id/edit",element:e.jsx(dn,{})}),e.jsx(ue,{path:"/test-refresh",element:e.jsx(ou,{})})]}),e.jsx(ue,{path:"/",element:e.jsx(Is,{to:"/dashboard"})}),e.jsx(ue,{path:"*",element:e.jsx(Is,{to:"/dashboard"})})]})})}):e.jsx(ue,{path:"*",element:e.jsx(Is,{to:"/login"})})]})}class du extends u.Component{state={hasError:!1};static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,a){console.error("ErrorBoundary caught an error:",t,a)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:"/generated-image.png",alt:"Company Logo",className:"h-20 w-20 object-contain drop-shadow-lg hover:scale-110 transition-transform duration-300",style:{filter:"contrast(2.2) saturate(2.0) brightness(1.8)",imageRendering:"crisp-edges",maxWidth:"100%",maxHeight:"100%"}})})}),e.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h1",{className:"text-xl font-semibold text-gray-900 text-center mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors",children:"Refresh Page"}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:void 0}),className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-md transition-colors",children:"Try Again"})]}),!1]})}):this.props.children}}const uu=({showAfter:s=300,className:t=""})=>{const[a,n]=u.useState(!1);u.useEffect(()=>{const r=()=>{window.pageYOffset>s?n(!0):n(!1)};return window.addEventListener("scroll",r),()=>{window.removeEventListener("scroll",r)}},[s]);const i=()=>{window.scrollTo({top:0,behavior:"smooth"})};return e.jsx(bs,{children:a&&e.jsxs(M.button,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:20},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:i,className:`fixed bottom-6 right-6 z-50 p-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 border-2 border-white/20 backdrop-blur-sm ${t}`,"aria-label":"Scroll to top",title:"Scroll to top",children:[e.jsx(cc,{className:"h-6 w-6"}),e.jsx(M.div,{animate:{scale:[1,1.2,1],opacity:[.5,0,.5]},transition:{repeat:1/0,duration:2,ease:"easeInOut"},className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-full -z-10"})]})})};class mu{queryClient=null;syncQueue=[];isProcessing=!1;dependencies={enquiries:["documents","shortlist","dashboard"],documents:["shortlist","dashboard"],shortlist:["payments","dashboard"],payments:["transactions","dashboard"],staff:["dashboard"],transactions:["dashboard"],notifications:[]};constructor(){console.log(" [CROSS-MODULE-SYNC] Service initialized")}setQueryClient(t){this.queryClient=t,console.log(" [CROSS-MODULE-SYNC] QueryClient attached")}async notifyDataChange(t){console.log(" [CROSS-MODULE-SYNC] Data change notification:",{type:t.type,module:t.module,timestamp:new Date(t.timestamp).toLocaleTimeString()}),this.syncQueue.push(t),this.isProcessing||await this.processSyncQueue()}async processSyncQueue(){if(!(this.isProcessing||this.syncQueue.length===0)){this.isProcessing=!0,console.log(` [CROSS-MODULE-SYNC] Processing ${this.syncQueue.length} sync events`);try{for(;this.syncQueue.length>0;){const t=this.syncQueue.shift();t&&await this.processEvent(t)}}catch(t){console.error(" [CROSS-MODULE-SYNC] Error processing sync queue:",t)}finally{this.isProcessing=!1}}}async processEvent(t){const a=this.dependencies[t.module]||[];if(a.length===0){console.log(` [CROSS-MODULE-SYNC] No dependencies for ${t.module}`);return}if(console.log(` [CROSS-MODULE-SYNC] Updating dependent modules for ${t.module}:`,a),this.queryClient){const n=a.map(async i=>{try{await this.queryClient.invalidateQueries([i]),console.log(` [CROSS-MODULE-SYNC] Invalidated ${i} queries`)}catch(r){console.error(` [CROSS-MODULE-SYNC] Failed to invalidate ${i}:`,r)}});await Promise.allSettled(n)}await this.handleSpecialCases(t)}async handleSpecialCases(t){switch(t.module){case"enquiries":await this.handleEnquiryChange(t);break;case"documents":await this.handleDocumentChange(t);break;case"shortlist":await this.handleShortlistChange(t);break;case"payments":await this.handlePaymentChange(t);break}}async handleEnquiryChange(t){t.type==="CREATE"&&(console.log(" [CROSS-MODULE-SYNC] New enquiry created, preparing related modules"),this.queryClient&&this.queryClient.setQueryData(["documents",t.data.id],[]))}async handleDocumentChange(t){if(t.type==="CREATE"||t.type==="UPDATE"){console.log(" [CROSS-MODULE-SYNC] Document changed, checking shortlist eligibility");const a=t.data.enquiryId;a&&this.queryClient&&await this.queryClient.invalidateQueries(["documents",a])}}async handleShortlistChange(t){t.type==="CREATE"&&(console.log(" [CROSS-MODULE-SYNC] New shortlist created, updating payment gateway"),this.queryClient&&await this.queryClient.invalidateQueries(["payments"]))}async handlePaymentChange(t){if(t.type==="CREATE"&&t.data.status==="COMPLETED"){console.log(" [CROSS-MODULE-SYNC] Payment completed, creating transaction");const a={name:`Payment for ${t.data.name}`,amount:t.data.loanAmount,status:"COMPLETED",date:new Date().toISOString(),paymentId:t.data.id};await this.notifyDataChange({type:"CREATE",module:"transactions",data:a,timestamp:Date.now()})}}async forceSyncAll(){if(console.log(" [CROSS-MODULE-SYNC] Force syncing all modules"),!this.queryClient){console.warn(" [CROSS-MODULE-SYNC] QueryClient not available for force sync");return}const a=Object.keys(this.dependencies).map(async n=>{try{await this.queryClient.invalidateQueries([n]),console.log(` [CROSS-MODULE-SYNC] Force synced ${n}`)}catch(i){console.error(` [CROSS-MODULE-SYNC] Failed to force sync ${n}:`,i)}});await Promise.allSettled(a),console.log(" [CROSS-MODULE-SYNC] Force sync completed")}getSyncStatus(){return Object.entries(this.dependencies).map(([t,a])=>({module:t,lastSync:Date.now(),dependencies:a}))}clearSyncQueue(){this.syncQueue=[],console.log(" [CROSS-MODULE-SYNC] Sync queue cleared")}}const un=new mu,hu=u.createContext(null),fu=({children:s})=>{const[t,a]=u.useState(!1),n=Ae();u.useEffect(()=>{(async()=>{console.log(" [RENDER-DATA-PROVIDER] Initializing all data services...");try{Ge.setQueryClient(n),un.setQueryClient(n),await Ge.preloadAllModules(),a(!0),console.log(" [RENDER-DATA-PROVIDER] All services ready")}catch(d){console.error(" [RENDER-DATA-PROVIDER] Initialization failed:",d),a(!0)}})()},[n]);const l={isReady:t,refreshAllData:async()=>{console.log(" [RENDER-DATA-PROVIDER] Refreshing all data..."),await Ge.refreshAllModules()},getModuleStatus:c=>!!n.getQueryData([c]),forceSync:async()=>{console.log(" [RENDER-DATA-PROVIDER] Force syncing all modules..."),await un.forceSyncAll()}};return e.jsx(hu.Provider,{value:l,children:s})},pu=async()=>{console.log(" [BROWSER-TEST] Starting comprehensive data persistence tests...");const s={timestamp:new Date().toLocaleString(),environment:window.location.hostname.includes("render")?"RENDER":"LOCAL",tests:[],summary:{total:0,passed:0,failed:0,warnings:0}};console.log(" [BROWSER-TEST] Testing API endpoints...");const t=[{name:"Enquiries",url:"/api/enquiries"},{name:"Documents",url:"/api/documents"},{name:"Shortlist",url:"/api/shortlist"},{name:"Staff",url:"/api/staff"},{name:"Payments",url:"/api/cashfree"},{name:"Transactions",url:"/api/transactions"},{name:"Notifications",url:"/api/notifications"}];for(const o of t){try{const l=await fetch(o.url),c=await l.json(),d=Array.isArray(c)?c.length:c?.length||c?.staff?.length||c?.notifications?.length||0;s.tests.push({test:`API: ${o.name}`,status:l.ok?"PASS":"FAIL",details:`${l.status} - ${d} items`,data:l.ok?c:null}),l.ok?s.summary.passed++:s.summary.failed++}catch(l){s.tests.push({test:`API: ${o.name}`,status:"FAIL",details:`Error: ${l.message}`,data:null}),s.summary.failed++}s.summary.total++}console.log(" [BROWSER-TEST] Testing React Query cache...");const a=window.__REACT_QUERY_CLIENT__;a?["enquiries","documents","shortlist","staff","payments","transactions","notifications"].forEach(l=>{const c=a.getQueryData([l]),d=a.getQueryState([l]),h=!!c,f=Array.isArray(c)?c.length:0,p=d?.dataUpdatedAt?new Date(d.dataUpdatedAt).toLocaleTimeString():"Never";s.tests.push({test:`Cache: ${l}`,status:h?"PASS":"FAIL",details:`${f} items, updated: ${p}`,data:h}),h?s.summary.passed++:s.summary.failed++,s.summary.total++}):(s.tests.push({test:"React Query Client",status:"FAIL",details:"Query client not found in window object",data:null}),s.summary.failed++,s.summary.total++),console.log(" [BROWSER-TEST] Testing local storage...");try{const o="render-persistence-test",l=JSON.stringify({timestamp:Date.now(),test:!0});localStorage.setItem(o,l);const c=localStorage.getItem(o),d=JSON.parse(c||"{}");localStorage.removeItem(o),s.tests.push({test:"Local Storage",status:d.test?"PASS":"FAIL",details:"Read/write operations successful",data:d.test}),d.test?s.summary.passed++:s.summary.failed++}catch(o){s.tests.push({test:"Local Storage",status:"FAIL",details:`Error: ${o.message}`,data:null}),s.summary.failed++}s.summary.total++,console.log(" [BROWSER-TEST] Testing page navigation...");const n=window.location.pathname,i=["/","/enquiries","/documents/verification","/shortlist","/staff"];for(const o of i){try{const l=n===o,c=document.querySelector('main, [role="main"], .main-content')!==null;s.tests.push({test:`Navigation: ${o}`,status:c?"PASS":"WARNING",details:l?"Current page":"Navigation available",data:{isCurrentPath:l,hasRequiredElements:c}}),c?s.summary.passed++:s.summary.warnings++}catch(l){s.tests.push({test:`Navigation: ${o}`,status:"FAIL",details:`Error: ${l.message}`,data:null}),s.summary.failed++}s.summary.total++}console.log(" [BROWSER-TEST] Generating test report...");const r=`
 DATA PERSISTENCE TEST REPORT
Generated: ${s.timestamp}
Environment: ${s.environment}
URL: ${window.location.href}

 SUMMARY:
Total Tests: ${s.summary.total}
 Passed: ${s.summary.passed}
 Failed: ${s.summary.failed}
 Warnings: ${s.summary.warnings}
Success Rate: ${Math.round(s.summary.passed/s.summary.total*100)}%

 DETAILED RESULTS:
${s.tests.map(o=>`${o.status==="PASS"?"":o.status==="WARNING"?"":""} ${o.test}: ${o.details}`).join(`
`)}

 RECOMMENDATIONS:
${s.summary.failed>0?"- Fix failed API endpoints or cache issues":""}
${s.summary.warnings>0?"- Review warnings for potential improvements":""}
${s.summary.failed===0&&s.summary.warnings===0?"- All tests passed! System is ready for production.":""}
`;console.log(r);try{await navigator.clipboard.writeText(r),console.log(" Test report copied to clipboard!")}catch{console.log(" Could not copy to clipboard, but report is logged above")}return s};window.runDataTests=pu;console.log(`
 DATA PERSISTENCE TESTING AVAILABLE

To run comprehensive tests, execute in console:
runDataTests()

This will test:
 API endpoint availability
 React Query cache status  
 Local storage functionality
 Page navigation persistence
 Data visibility across modules

Results will be logged and copied to clipboard.
`);const K=s=>typeof s=="string",Mt=()=>{let s,t;const a=new Promise((n,i)=>{s=n,t=i});return a.resolve=s,a.reject=t,a},mn=s=>s==null?"":""+s,xu=(s,t,a)=>{s.forEach(n=>{t[n]&&(a[n]=t[n])})},gu=/###/g,hn=s=>s&&s.indexOf("###")>-1?s.replace(gu,"."):s,fn=s=>!s||K(s),Ut=(s,t,a)=>{const n=K(t)?t.split("."):t;let i=0;for(;i<n.length-1;){if(fn(s))return{};const r=hn(n[i]);!s[r]&&a&&(s[r]=new a),Object.prototype.hasOwnProperty.call(s,r)?s=s[r]:s={},++i}return fn(s)?{}:{obj:s,k:hn(n[i])}},pn=(s,t,a)=>{const{obj:n,k:i}=Ut(s,t,Object);if(n!==void 0||t.length===1){n[i]=a;return}let r=t[t.length-1],o=t.slice(0,t.length-1),l=Ut(s,o,Object);for(;l.obj===void 0&&o.length;)r=`${o[o.length-1]}.${r}`,o=o.slice(0,o.length-1),l=Ut(s,o,Object),l?.obj&&typeof l.obj[`${l.k}.${r}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${r}`]=a},yu=(s,t,a,n)=>{const{obj:i,k:r}=Ut(s,t,Object);i[r]=i[r]||[],i[r].push(a)},ps=(s,t)=>{const{obj:a,k:n}=Ut(s,t);if(a&&Object.prototype.hasOwnProperty.call(a,n))return a[n]},bu=(s,t,a)=>{const n=ps(s,a);return n!==void 0?n:ps(t,a)},Oi=(s,t,a)=>{for(const n in t)n!=="__proto__"&&n!=="constructor"&&(n in s?K(s[n])||s[n]instanceof String||K(t[n])||t[n]instanceof String?a&&(s[n]=t[n]):Oi(s[n],t[n],a):s[n]=t[n]);return s},Nt=s=>s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Nu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const wu=s=>K(s)?s.replace(/[&<>"'\/]/g,t=>Nu[t]):s;class vu{constructor(t){this.capacity=t,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(t){const a=this.regExpMap.get(t);if(a!==void 0)return a;const n=new RegExp(t);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(t,n),this.regExpQueue.push(t),n}}const ju=[" ",",","?","!",";"],Su=new vu(20),Eu=(s,t,a)=>{t=t||"",a=a||"";const n=ju.filter(o=>t.indexOf(o)<0&&a.indexOf(o)<0);if(n.length===0)return!0;const i=Su.getRegExp(`(${n.map(o=>o==="?"?"\\?":o).join("|")})`);let r=!i.test(s);if(!r){const o=s.indexOf(a);o>0&&!i.test(s.substring(0,o))&&(r=!0)}return r},ra=(s,t,a=".")=>{if(!s)return;if(s[t])return Object.prototype.hasOwnProperty.call(s,t)?s[t]:void 0;const n=t.split(a);let i=s;for(let r=0;r<n.length;){if(!i||typeof i!="object")return;let o,l="";for(let c=r;c<n.length;++c)if(c!==r&&(l+=a),l+=n[c],o=i[l],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&c<n.length-1)continue;r+=c-r+1;break}i=o}return i},_t=s=>s?.replace("_","-"),Au={type:"logger",log(s){this.output("log",s)},warn(s){this.output("warn",s)},error(s){this.output("error",s)},output(s,t){console?.[s]?.apply?.(console,t)}};class xs{constructor(t,a={}){this.init(t,a)}init(t,a={}){this.prefix=a.prefix||"i18next:",this.logger=t||Au,this.options=a,this.debug=a.debug}log(...t){return this.forward(t,"log","",!0)}warn(...t){return this.forward(t,"warn","",!0)}error(...t){return this.forward(t,"error","")}deprecate(...t){return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(t,a,n,i){return i&&!this.debug?null:(K(t[0])&&(t[0]=`${n}${this.prefix} ${t[0]}`),this.logger[a](t))}create(t){return new xs(this.logger,{prefix:`${this.prefix}:${t}:`,...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new xs(this.logger,t)}}var Ke=new xs;class Rs{constructor(){this.observers={}}on(t,a){return t.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const i=this.observers[n].get(a)||0;this.observers[n].set(a,i+1)}),this}off(t,a){if(this.observers[t]){if(!a){delete this.observers[t];return}this.observers[t].delete(a)}}emit(t,...a){this.observers[t]&&Array.from(this.observers[t].entries()).forEach(([i,r])=>{for(let o=0;o<r;o++)i(...a)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,r])=>{for(let o=0;o<r;o++)i.apply(i,[t,...a])})}}class xn extends Rs{constructor(t,a={ns:["translation"],defaultNS:"translation"}){super(),this.data=t||{},this.options=a,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const a=this.options.ns.indexOf(t);a>-1&&this.options.ns.splice(a,1)}getResource(t,a,n,i={}){const r=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;t.indexOf(".")>-1?l=t.split("."):(l=[t,a],n&&(Array.isArray(n)?l.push(...n):K(n)&&r?l.push(...n.split(r)):l.push(n)));const c=ps(this.data,l);return!c&&!a&&!n&&t.indexOf(".")>-1&&(t=l[0],a=l[1],n=l.slice(2).join(".")),c||!o||!K(n)?c:ra(this.data?.[t]?.[a],n,r)}addResource(t,a,n,i,r={silent:!1}){const o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let l=[t,a];n&&(l=l.concat(o?n.split(o):n)),t.indexOf(".")>-1&&(l=t.split("."),i=a,a=l[1]),this.addNamespaces(a),pn(this.data,l,i),r.silent||this.emit("added",t,a,n,i)}addResources(t,a,n,i={silent:!1}){for(const r in n)(K(n[r])||Array.isArray(n[r]))&&this.addResource(t,a,r,n[r],{silent:!0});i.silent||this.emit("added",t,a,n)}addResourceBundle(t,a,n,i,r,o={silent:!1,skipCopy:!1}){let l=[t,a];t.indexOf(".")>-1&&(l=t.split("."),i=n,n=a,a=l[1]),this.addNamespaces(a);let c=ps(this.data,l)||{};o.skipCopy||(n=JSON.parse(JSON.stringify(n))),i?Oi(c,n,r):c={...c,...n},pn(this.data,l,c),o.silent||this.emit("added",t,a,n)}removeResourceBundle(t,a){this.hasResourceBundle(t,a)&&delete this.data[t][a],this.removeNamespaces(a),this.emit("removed",t,a)}hasResourceBundle(t,a){return this.getResource(t,a)!==void 0}getResourceBundle(t,a){return a||(a=this.options.defaultNS),this.getResource(t,a)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const a=this.getDataByLanguage(t);return!!(a&&Object.keys(a)||[]).find(i=>a[i]&&Object.keys(a[i]).length>0)}toJSON(){return this.data}}var Ii={processors:{},addPostProcessor(s){this.processors[s.name]=s},handle(s,t,a,n,i){return s.forEach(r=>{t=this.processors[r]?.process(t,a,n,i)??t}),t}};const Pi=Symbol("i18next/PATH_KEY");function Du(){const s=[],t=Object.create(null);let a;return t.get=(n,i)=>(a?.revoke?.(),i===Pi?s:(s.push(i),a=Proxy.revocable(n,t),a.proxy)),Proxy.revocable(Object.create(null),t).proxy}function oa(s,t){const{[Pi]:a}=s(Du());return a.join(t?.keySeparator??".")}const gn={},yn=s=>!K(s)&&typeof s!="boolean"&&typeof s!="number";class gs extends Rs{constructor(t,a={}){super(),xu(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=a,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ke.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t,a={interpolation:{}}){const n={...a};return t==null?!1:this.resolve(t,n)?.res!==void 0}extractFromKey(t,a){let n=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let r=a.ns||this.options.defaultNS||[];const o=n&&t.indexOf(n)>-1,l=!this.options.userDefinedKeySeparator&&!a.keySeparator&&!this.options.userDefinedNsSeparator&&!a.nsSeparator&&!Eu(t,n,i);if(o&&!l){const c=t.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:t,namespaces:K(r)?[r]:r};const d=t.split(n);(n!==i||n===i&&this.options.ns.indexOf(d[0])>-1)&&(r=d.shift()),t=d.join(i)}return{key:t,namespaces:K(r)?[r]:r}}translate(t,a,n){let i=typeof a=="object"?{...a}:a;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),t==null)return"";typeof t=="function"&&(t=oa(t,{...this.options,...i})),Array.isArray(t)||(t=[String(t)]);const r=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:l,namespaces:c}=this.extractFromKey(t[t.length-1],i),d=c[c.length-1];let h=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;h===void 0&&(h=":");const f=i.lng||this.language,p=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(f?.toLowerCase()==="cimode")return p?r?{res:`${d}${h}${l}`,usedKey:l,exactUsedKey:l,usedLng:f,usedNS:d,usedParams:this.getUsedParamsDetails(i)}:`${d}${h}${l}`:r?{res:l,usedKey:l,exactUsedKey:l,usedLng:f,usedNS:d,usedParams:this.getUsedParamsDetails(i)}:l;const j=this.resolve(t,i);let x=j?.res;const b=j?.usedKey||l,g=j?.exactUsedKey||l,A=["[object Number]","[object Function]","[object RegExp]"],w=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,m=!this.i18nFormat||this.i18nFormat.handleAsObject,y=i.count!==void 0&&!K(i.count),v=gs.hasDefaultValue(i),C=y?this.pluralResolver.getSuffix(f,i.count,i):"",T=i.ordinal&&y?this.pluralResolver.getSuffix(f,i.count,{ordinal:!1}):"",L=y&&!i.ordinal&&i.count===0,$=L&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${C}`]||i[`defaultValue${T}`]||i.defaultValue;let P=x;m&&!x&&v&&(P=$);const Z=yn(P),Q=Object.prototype.toString.apply(P);if(m&&P&&Z&&A.indexOf(Q)<0&&!(K(w)&&Array.isArray(P))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const H=this.options.returnedObjectHandler?this.options.returnedObjectHandler(b,P,{...i,ns:c}):`key '${l} (${this.language})' returned an object instead of string.`;return r?(j.res=H,j.usedParams=this.getUsedParamsDetails(i),j):H}if(o){const H=Array.isArray(P),G=H?[]:{},ae=H?g:b;for(const Y in P)if(Object.prototype.hasOwnProperty.call(P,Y)){const J=`${ae}${o}${Y}`;v&&!x?G[Y]=this.translate(J,{...i,defaultValue:yn($)?$[Y]:void 0,joinArrays:!1,ns:c}):G[Y]=this.translate(J,{...i,joinArrays:!1,ns:c}),G[Y]===J&&(G[Y]=P[Y])}x=G}}else if(m&&K(w)&&Array.isArray(x))x=x.join(w),x&&(x=this.extendTranslation(x,t,i,n));else{let H=!1,G=!1;!this.isValidLookup(x)&&v&&(H=!0,x=$),this.isValidLookup(x)||(G=!0,x=l);const Y=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&G?void 0:x,J=v&&$!==x&&this.options.updateMissing;if(G||H||J){if(this.logger.log(J?"updateKey":"missingKey",f,d,l,J?$:x),o){const se=this.resolve(l,{...i,keySeparator:!1});se&&se.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let ee=[];const de=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&de&&de[0])for(let se=0;se<de.length;se++)ee.push(de[se]);else this.options.saveMissingTo==="all"?ee=this.languageUtils.toResolveHierarchy(i.lng||this.language):ee.push(i.lng||this.language);const Ne=(se,xe,ie)=>{const he=v&&ie!==x?ie:Y;this.options.missingKeyHandler?this.options.missingKeyHandler(se,d,xe,he,J,i):this.backendConnector?.saveMissing&&this.backendConnector.saveMissing(se,d,xe,he,J,i),this.emit("missingKey",se,d,xe,x)};this.options.saveMissing&&(this.options.saveMissingPlurals&&y?ee.forEach(se=>{const xe=this.pluralResolver.getSuffixes(se,i);L&&i[`defaultValue${this.options.pluralSeparator}zero`]&&xe.indexOf(`${this.options.pluralSeparator}zero`)<0&&xe.push(`${this.options.pluralSeparator}zero`),xe.forEach(ie=>{Ne([se],l+ie,i[`defaultValue${ie}`]||$)})}):Ne(ee,l,$))}x=this.extendTranslation(x,t,i,j,n),G&&x===l&&this.options.appendNamespaceToMissingKey&&(x=`${d}${h}${l}`),(G||H)&&this.options.parseMissingKeyHandler&&(x=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}${h}${l}`:l,H?x:void 0,i))}return r?(j.res=x,j.usedParams=this.getUsedParamsDetails(i),j):x}extendTranslation(t,a,n,i,r){if(this.i18nFormat?.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const c=K(t)&&(n?.interpolation?.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(c){const f=t.match(this.interpolator.nestingRegexp);d=f&&f.length}let h=n.replace&&!K(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),t=this.interpolator.interpolate(t,h,n.lng||this.language||i.usedLng,n),c){const f=t.match(this.interpolator.nestingRegexp),p=f&&f.length;d<p&&(n.nest=!1)}!n.lng&&i&&i.res&&(n.lng=this.language||i.usedLng),n.nest!==!1&&(t=this.interpolator.nest(t,(...f)=>r?.[0]===f[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${a[0]}`),null):this.translate(...f,a),n)),n.interpolation&&this.interpolator.reset()}const o=n.postProcess||this.options.postProcess,l=K(o)?[o]:o;return t!=null&&l?.length&&n.applyPostProcessor!==!1&&(t=Ii.handle(l,t,a,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),t}resolve(t,a={}){let n,i,r,o,l;return K(t)&&(t=[t]),t.forEach(c=>{if(this.isValidLookup(n))return;const d=this.extractFromKey(c,a),h=d.key;i=h;let f=d.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const p=a.count!==void 0&&!K(a.count),j=p&&!a.ordinal&&a.count===0,x=a.context!==void 0&&(K(a.context)||typeof a.context=="number")&&a.context!=="",b=a.lngs?a.lngs:this.languageUtils.toResolveHierarchy(a.lng||this.language,a.fallbackLng);f.forEach(g=>{this.isValidLookup(n)||(l=g,!gn[`${b[0]}-${g}`]&&this.utils?.hasLoadedNamespace&&!this.utils?.hasLoadedNamespace(l)&&(gn[`${b[0]}-${g}`]=!0,this.logger.warn(`key "${i}" for languages "${b.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),b.forEach(A=>{if(this.isValidLookup(n))return;o=A;const w=[h];if(this.i18nFormat?.addLookupKeys)this.i18nFormat.addLookupKeys(w,h,A,g,a);else{let y;p&&(y=this.pluralResolver.getSuffix(A,a.count,a));const v=`${this.options.pluralSeparator}zero`,C=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(a.ordinal&&y.indexOf(C)===0&&w.push(h+y.replace(C,this.options.pluralSeparator)),w.push(h+y),j&&w.push(h+v)),x){const T=`${h}${this.options.contextSeparator||"_"}${a.context}`;w.push(T),p&&(a.ordinal&&y.indexOf(C)===0&&w.push(T+y.replace(C,this.options.pluralSeparator)),w.push(T+y),j&&w.push(T+v))}}let m;for(;m=w.pop();)this.isValidLookup(n)||(r=m,n=this.getResource(A,g,m,a))}))})}),{res:n,usedKey:i,exactUsedKey:r,usedLng:o,usedNS:l}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,a,n,i={}){return this.i18nFormat?.getResource?this.i18nFormat.getResource(t,a,n,i):this.resourceStore.getResource(t,a,n,i)}getUsedParamsDetails(t={}){const a=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=t.replace&&!K(t.replace);let i=n?t.replace:t;if(n&&typeof t.count<"u"&&(i.count=t.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!n){i={...i};for(const r of a)delete i[r]}return i}static hasDefaultValue(t){const a="defaultValue";for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&a===n.substring(0,a.length)&&t[n]!==void 0)return!0;return!1}}class bn{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ke.create("languageUtils")}getScriptPartFromCode(t){if(t=_t(t),!t||t.indexOf("-")<0)return null;const a=t.split("-");return a.length===2||(a.pop(),a[a.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(a.join("-"))}getLanguagePartFromCode(t){if(t=_t(t),!t||t.indexOf("-")<0)return t;const a=t.split("-");return this.formatLanguageCode(a[0])}formatLanguageCode(t){if(K(t)&&t.indexOf("-")>-1){let a;try{a=Intl.getCanonicalLocales(t)[0]}catch{}return a&&this.options.lowerCaseLng&&(a=a.toLowerCase()),a||(this.options.lowerCaseLng?t.toLowerCase():t)}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let a;return t.forEach(n=>{if(a)return;const i=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(i))&&(a=i)}),!a&&this.options.supportedLngs&&t.forEach(n=>{if(a)return;const i=this.getScriptPartFromCode(n);if(this.isSupportedCode(i))return a=i;const r=this.getLanguagePartFromCode(n);if(this.isSupportedCode(r))return a=r;a=this.options.supportedLngs.find(o=>{if(o===r)return o;if(!(o.indexOf("-")<0&&r.indexOf("-")<0)&&(o.indexOf("-")>0&&r.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===r||o.indexOf(r)===0&&r.length>1))return o})}),a||(a=this.getFallbackCodes(this.options.fallbackLng)[0]),a}getFallbackCodes(t,a){if(!t)return[];if(typeof t=="function"&&(t=t(a)),K(t)&&(t=[t]),Array.isArray(t))return t;if(!a)return t.default||[];let n=t[a];return n||(n=t[this.getScriptPartFromCode(a)]),n||(n=t[this.formatLanguageCode(a)]),n||(n=t[this.getLanguagePartFromCode(a)]),n||(n=t.default),n||[]}toResolveHierarchy(t,a){const n=this.getFallbackCodes((a===!1?[]:a)||this.options.fallbackLng||[],t),i=[],r=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return K(t)&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&r(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&r(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&r(this.getLanguagePartFromCode(t))):K(t)&&r(this.formatLanguageCode(t)),n.forEach(o=>{i.indexOf(o)<0&&r(this.formatLanguageCode(o))}),i}}const Nn={zero:0,one:1,two:2,few:3,many:4,other:5},wn={select:s=>s===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Tu{constructor(t,a={}){this.languageUtils=t,this.options=a,this.logger=Ke.create("pluralResolver"),this.pluralRulesCache={}}addRule(t,a){this.rules[t]=a}clearCache(){this.pluralRulesCache={}}getRule(t,a={}){const n=_t(t==="dev"?"en":t),i=a.ordinal?"ordinal":"cardinal",r=JSON.stringify({cleanedCode:n,type:i});if(r in this.pluralRulesCache)return this.pluralRulesCache[r];let o;try{o=new Intl.PluralRules(n,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),wn;if(!t.match(/-|_/))return wn;const c=this.languageUtils.getLanguagePartFromCode(t);o=this.getRule(c,a)}return this.pluralRulesCache[r]=o,o}needsPlural(t,a={}){let n=this.getRule(t,a);return n||(n=this.getRule("dev",a)),n?.resolvedOptions().pluralCategories.length>1}getPluralFormsOfKey(t,a,n={}){return this.getSuffixes(t,n).map(i=>`${a}${i}`)}getSuffixes(t,a={}){let n=this.getRule(t,a);return n||(n=this.getRule("dev",a)),n?n.resolvedOptions().pluralCategories.sort((i,r)=>Nn[i]-Nn[r]).map(i=>`${this.options.prepend}${a.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(t,a,n={}){const i=this.getRule(t,n);return i?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i.select(a)}`:(this.logger.warn(`no plural rule found for: ${t}`),this.getSuffix("dev",a,n))}}const vn=(s,t,a,n=".",i=!0)=>{let r=bu(s,t,a);return!r&&i&&K(a)&&(r=ra(s,a,n),r===void 0&&(r=ra(t,a,n))),r},Ws=s=>s.replace(/\$/g,"$$$$");class ku{constructor(t={}){this.logger=Ke.create("interpolator"),this.options=t,this.format=t?.interpolation?.format||(a=>a),this.init(t)}init(t={}){t.interpolation||(t.interpolation={escapeValue:!0});const{escape:a,escapeValue:n,useRawValueToEscape:i,prefix:r,prefixEscaped:o,suffix:l,suffixEscaped:c,formatSeparator:d,unescapeSuffix:h,unescapePrefix:f,nestingPrefix:p,nestingPrefixEscaped:j,nestingSuffix:x,nestingSuffixEscaped:b,nestingOptionsSeparator:g,maxReplaces:A,alwaysFormat:w}=t.interpolation;this.escape=a!==void 0?a:wu,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=r?Nt(r):o||"{{",this.suffix=l?Nt(l):c||"}}",this.formatSeparator=d||",",this.unescapePrefix=h?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":h||"",this.nestingPrefix=p?Nt(p):j||Nt("$t("),this.nestingSuffix=x?Nt(x):b||Nt(")"),this.nestingOptionsSeparator=g||",",this.maxReplaces=A||1e3,this.alwaysFormat=w!==void 0?w:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t=(a,n)=>a?.source===n?(a.lastIndex=0,a):new RegExp(n,"g");this.regexp=t(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=t(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=t(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(t,a,n,i){let r,o,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=j=>{if(j.indexOf(this.formatSeparator)<0){const A=vn(a,c,j,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(A,void 0,n,{...i,...a,interpolationkey:j}):A}const x=j.split(this.formatSeparator),b=x.shift().trim(),g=x.join(this.formatSeparator).trim();return this.format(vn(a,c,b,this.options.keySeparator,this.options.ignoreJSONStructure),g,n,{...i,...a,interpolationkey:b})};this.resetRegExp();const h=i?.missingInterpolationHandler||this.options.missingInterpolationHandler,f=i?.interpolation?.skipOnVariables!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:j=>Ws(j)},{regex:this.regexp,safeValue:j=>this.escapeValue?Ws(this.escape(j)):Ws(j)}].forEach(j=>{for(l=0;r=j.regex.exec(t);){const x=r[1].trim();if(o=d(x),o===void 0)if(typeof h=="function"){const g=h(t,r,i);o=K(g)?g:""}else if(i&&Object.prototype.hasOwnProperty.call(i,x))o="";else if(f){o=r[0];continue}else this.logger.warn(`missed to pass in variable ${x} for interpolating ${t}`),o="";else!K(o)&&!this.useRawValueToEscape&&(o=mn(o));const b=j.safeValue(o);if(t=t.replace(r[0],b),f?(j.regex.lastIndex+=o.length,j.regex.lastIndex-=r[0].length):j.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),t}nest(t,a,n={}){let i,r,o;const l=(c,d)=>{const h=this.nestingOptionsSeparator;if(c.indexOf(h)<0)return c;const f=c.split(new RegExp(`${h}[ ]*{`));let p=`{${f[1]}`;c=f[0],p=this.interpolate(p,o);const j=p.match(/'/g),x=p.match(/"/g);((j?.length??0)%2===0&&!x||x.length%2!==0)&&(p=p.replace(/'/g,'"'));try{o=JSON.parse(p),d&&(o={...d,...o})}catch(b){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,b),`${c}${h}${p}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,c};for(;i=this.nestingRegexp.exec(t);){let c=[];o={...n},o=o.replace&&!K(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const d=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(d!==-1&&(c=i[1].slice(d).split(this.formatSeparator).map(h=>h.trim()).filter(Boolean),i[1]=i[1].slice(0,d)),r=a(l.call(this,i[1].trim(),o),o),r&&i[0]===t&&!K(r))return r;K(r)||(r=mn(r)),r||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${t}`),r=""),c.length&&(r=c.reduce((h,f)=>this.format(h,f,n.lng,{...n,interpolationkey:i[1].trim()}),r.trim())),t=t.replace(i[0],r),this.regexp.lastIndex=0}return t}}const Cu=s=>{let t=s.toLowerCase().trim();const a={};if(s.indexOf("(")>-1){const n=s.split("(");t=n[0].toLowerCase().trim();const i=n[1].substring(0,n[1].length-1);t==="currency"&&i.indexOf(":")<0?a.currency||(a.currency=i.trim()):t==="relativetime"&&i.indexOf(":")<0?a.range||(a.range=i.trim()):i.split(";").forEach(o=>{if(o){const[l,...c]=o.split(":"),d=c.join(":").trim().replace(/^'+|'+$/g,""),h=l.trim();a[h]||(a[h]=d),d==="false"&&(a[h]=!1),d==="true"&&(a[h]=!0),isNaN(d)||(a[h]=parseInt(d,10))}})}return{formatName:t,formatOptions:a}},jn=s=>{const t={};return(a,n,i)=>{let r=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(r={...r,[i.interpolationkey]:void 0});const o=n+JSON.stringify(r);let l=t[o];return l||(l=s(_t(n),i),t[o]=l),l(a)}},Ru=s=>(t,a,n)=>s(_t(a),n)(t);class Lu{constructor(t={}){this.logger=Ke.create("formatter"),this.options=t,this.init(t)}init(t,a={interpolation:{}}){this.formatSeparator=a.interpolation.formatSeparator||",";const n=a.cacheInBuiltFormats?jn:Ru;this.formats={number:n((i,r)=>{const o=new Intl.NumberFormat(i,{...r});return l=>o.format(l)}),currency:n((i,r)=>{const o=new Intl.NumberFormat(i,{...r,style:"currency"});return l=>o.format(l)}),datetime:n((i,r)=>{const o=new Intl.DateTimeFormat(i,{...r});return l=>o.format(l)}),relativetime:n((i,r)=>{const o=new Intl.RelativeTimeFormat(i,{...r});return l=>o.format(l,r.range||"day")}),list:n((i,r)=>{const o=new Intl.ListFormat(i,{...r});return l=>o.format(l)})}}add(t,a){this.formats[t.toLowerCase().trim()]=a}addCached(t,a){this.formats[t.toLowerCase().trim()]=jn(a)}format(t,a,n,i={}){const r=a.split(this.formatSeparator);if(r.length>1&&r[0].indexOf("(")>1&&r[0].indexOf(")")<0&&r.find(l=>l.indexOf(")")>-1)){const l=r.findIndex(c=>c.indexOf(")")>-1);r[0]=[r[0],...r.splice(1,l)].join(this.formatSeparator)}return r.reduce((l,c)=>{const{formatName:d,formatOptions:h}=Cu(c);if(this.formats[d]){let f=l;try{const p=i?.formatParams?.[i.interpolationkey]||{},j=p.locale||p.lng||i.locale||i.lng||n;f=this.formats[d](l,j,{...h,...i,...p})}catch(p){this.logger.warn(p)}return f}else this.logger.warn(`there was no format function for ${d}`);return l},t)}}const Ou=(s,t)=>{s.pending[t]!==void 0&&(delete s.pending[t],s.pendingCount--)};class Iu extends Rs{constructor(t,a,n,i={}){super(),this.backend=t,this.store=a,this.services=n,this.languageUtils=n.languageUtils,this.options=i,this.logger=Ke.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],this.backend?.init?.(n,i.backend,i)}queueLoad(t,a,n,i){const r={},o={},l={},c={};return t.forEach(d=>{let h=!0;a.forEach(f=>{const p=`${d}|${f}`;!n.reload&&this.store.hasResourceBundle(d,f)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?o[p]===void 0&&(o[p]=!0):(this.state[p]=1,h=!1,o[p]===void 0&&(o[p]=!0),r[p]===void 0&&(r[p]=!0),c[f]===void 0&&(c[f]=!0)))}),h||(l[d]=!0)}),(Object.keys(r).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(r),pending:Object.keys(o),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(t,a,n){const i=t.split("|"),r=i[0],o=i[1];a&&this.emit("failedLoading",r,o,a),!a&&n&&this.store.addResourceBundle(r,o,n,void 0,void 0,{skipCopy:!0}),this.state[t]=a?-1:2,a&&n&&(this.state[t]=0);const l={};this.queue.forEach(c=>{yu(c.loaded,[r],o),Ou(c,t),a&&c.errors.push(a),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(d=>{l[d]||(l[d]={});const h=c.loaded[d];h.length&&h.forEach(f=>{l[d][f]===void 0&&(l[d][f]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(t,a,n,i=0,r=this.retryTimeout,o){if(!t.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:a,fcName:n,tried:i,wait:r,callback:o});return}this.readingCalls++;const l=(d,h)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(d&&h&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,t,a,n,i+1,r*2,o)},r);return}o(d,h)},c=this.backend[n].bind(this.backend);if(c.length===2){try{const d=c(t,a);d&&typeof d.then=="function"?d.then(h=>l(null,h)).catch(l):l(null,d)}catch(d){l(d)}return}return c(t,a,l)}prepareLoading(t,a,n={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();K(t)&&(t=this.languageUtils.toResolveHierarchy(t)),K(a)&&(a=[a]);const r=this.queueLoad(t,a,n,i);if(!r.toLoad.length)return r.pending.length||i(),null;r.toLoad.forEach(o=>{this.loadOne(o)})}load(t,a,n){this.prepareLoading(t,a,{},n)}reload(t,a,n){this.prepareLoading(t,a,{reload:!0},n)}loadOne(t,a=""){const n=t.split("|"),i=n[0],r=n[1];this.read(i,r,"read",void 0,void 0,(o,l)=>{o&&this.logger.warn(`${a}loading namespace ${r} for language ${i} failed`,o),!o&&l&&this.logger.log(`${a}loaded namespace ${r} for language ${i}`,l),this.loaded(t,o,l)})}saveMissing(t,a,n,i,r,o={},l=()=>{}){if(this.services?.utils?.hasLoadedNamespace&&!this.services?.utils?.hasLoadedNamespace(a)){this.logger.warn(`did not save key "${n}" as the namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if(this.backend?.create){const c={...o,isUpdate:r},d=this.backend.create.bind(this.backend);if(d.length<6)try{let h;d.length===5?h=d(t,a,n,i,c):h=d(t,a,n,i),h&&typeof h.then=="function"?h.then(f=>l(null,f)).catch(l):l(null,h)}catch(h){l(h)}else d(t,a,n,i,l,c)}!t||!t[0]||this.store.addResource(t[0],a,n,i)}}}const Sn=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:s=>{let t={};if(typeof s[1]=="object"&&(t=s[1]),K(s[1])&&(t.defaultValue=s[1]),K(s[2])&&(t.tDescription=s[2]),typeof s[2]=="object"||typeof s[3]=="object"){const a=s[3]||s[2];Object.keys(a).forEach(n=>{t[n]=a[n]})}return t},interpolation:{escapeValue:!0,format:s=>s,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),En=s=>(K(s.ns)&&(s.ns=[s.ns]),K(s.fallbackLng)&&(s.fallbackLng=[s.fallbackLng]),K(s.fallbackNS)&&(s.fallbackNS=[s.fallbackNS]),s.supportedLngs?.indexOf?.("cimode")<0&&(s.supportedLngs=s.supportedLngs.concat(["cimode"])),typeof s.initImmediate=="boolean"&&(s.initAsync=s.initImmediate),s),ts=()=>{},Pu=s=>{Object.getOwnPropertyNames(Object.getPrototypeOf(s)).forEach(a=>{typeof s[a]=="function"&&(s[a]=s[a].bind(s))})};class Vt extends Rs{constructor(t={},a){if(super(),this.options=En(t),this.services={},this.logger=Ke,this.modules={external:[]},Pu(this),a&&!this.isInitialized&&!t.isClone){if(!this.options.initAsync)return this.init(t,a),this;setTimeout(()=>{this.init(t,a)},0)}}init(t={},a){this.isInitializing=!0,typeof t=="function"&&(a=t,t={}),t.defaultNS==null&&t.ns&&(K(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const n=Sn();this.options={...n,...this.options,...En(t)},this.options.interpolation={...n.interpolation,...this.options.interpolation},t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const i=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?Ke.init(i(this.modules.logger),this.options):Ke.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:d=Lu;const h=new bn(this.options);this.store=new xn(this.options.resources,this.options);const f=this.services;f.logger=Ke,f.resourceStore=this.store,f.languageUtils=h,f.pluralResolver=new Tu(h,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),d&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(f.formatter=i(d),f.formatter.init&&f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new ku(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new Iu(i(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",(j,...x)=>{this.emit(j,...x)}),this.modules.languageDetector&&(f.languageDetector=i(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=i(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new gs(this.services,this.options),this.translator.on("*",(j,...x)=>{this.emit(j,...x)}),this.modules.external.forEach(j=>{j.init&&j.init(this)})}if(this.format=this.options.interpolation.format,a||(a=ts),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=(...h)=>this.store[d](...h)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=(...h)=>(this.store[d](...h),this)});const l=Mt(),c=()=>{const d=(h,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(f),a(h,f)};if(this.languages&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initAsync?c():setTimeout(c,0),l}loadResources(t,a=ts){let n=a;const i=K(t)?t:this.language;if(typeof t=="function"&&(n=t),!this.options.resources||this.options.partialBundledLanguages){if(i?.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const r=[],o=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(d=>{d!=="cimode"&&r.indexOf(d)<0&&r.push(d)})};i?o(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>o(c)),this.options.preload?.forEach?.(l=>o(l)),this.services.backendConnector.load(r,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(l)})}else n(null)}reloadResources(t,a,n){const i=Mt();return typeof t=="function"&&(n=t,t=void 0),typeof a=="function"&&(n=a,a=void 0),t||(t=this.languages),a||(a=this.options.ns),n||(n=ts),this.services.backendConnector.reload(t,a,r=>{i.resolve(),n(r)}),i}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&Ii.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1)){for(let a=0;a<this.languages.length;a++){const n=this.languages[a];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(t)<0&&this.store.hasLanguageSomeTranslations(t)&&(this.resolvedLanguage=t,this.languages.unshift(t))}}changeLanguage(t,a){this.isLanguageChangingTo=t;const n=Mt();this.emit("languageChanging",t);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},r=(l,c)=>{c?this.isLanguageChangingTo===t&&(i(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,n.resolve((...d)=>this.t(...d)),a&&a(l,(...d)=>this.t(...d))},o=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const c=K(l)?l:l&&l[0],d=this.store.hasLanguageSomeTranslations(c)?c:this.services.languageUtils.getBestMatchFromCodes(K(l)?[l]:l);d&&(this.language||i(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector?.cacheUserLanguage?.(d)),this.loadResources(d,h=>{r(h,d)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(t),n}getFixedT(t,a,n){const i=(r,o,...l)=>{let c;typeof o!="object"?c=this.options.overloadTranslationOptionHandler([r,o].concat(l)):c={...o},c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||n||i.keyPrefix);const d=this.options.keySeparator||".";let h;return c.keyPrefix&&Array.isArray(r)?h=r.map(f=>(typeof f=="function"&&(f=oa(f,{...this.options,...o})),`${c.keyPrefix}${d}${f}`)):(typeof r=="function"&&(r=oa(r,{...this.options,...o})),h=c.keyPrefix?`${c.keyPrefix}${d}${r}`:r),this.t(h,c)};return K(t)?i.lng=t:i.lngs=t,i.ns=a,i.keyPrefix=n,i}t(...t){return this.translator?.translate(...t)}exists(...t){return this.translator?.exists(...t)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t,a={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=a.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,r=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const o=(l,c)=>{const d=this.services.backendConnector.state[`${l}|${c}`];return d===-1||d===0||d===2};if(a.precheck){const l=a.precheck(this,o);if(l!==void 0)return l}return!!(this.hasResourceBundle(n,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(n,t)&&(!i||o(r,t)))}loadNamespaces(t,a){const n=Mt();return this.options.ns?(K(t)&&(t=[t]),t.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{n.resolve(),a&&a(i)}),n):(a&&a(),Promise.resolve())}loadLanguages(t,a){const n=Mt();K(t)&&(t=[t]);const i=this.options.preload||[],r=t.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return r.length?(this.options.preload=i.concat(r),this.loadResources(o=>{n.resolve(),a&&a(o)}),n):(a&&a(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages?.length>0?this.languages[0]:this.language)),!t)return"rtl";try{const i=new Intl.Locale(t);if(i&&i.getTextInfo){const r=i.getTextInfo();if(r&&r.direction)return r.direction}}catch{}const a=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=this.services?.languageUtils||new bn(Sn());return t.toLowerCase().indexOf("-latn")>1?"ltr":a.indexOf(n.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(t={},a){return new Vt(t,a)}cloneInstance(t={},a=ts){const n=t.forkResourceStore;n&&delete t.forkResourceStore;const i={...this.options,...t,isClone:!0},r=new Vt(i);if((t.debug!==void 0||t.prefix!==void 0)&&(r.logger=r.logger.clone(t)),["store","services","language"].forEach(l=>{r[l]=this[l]}),r.services={...this.services},r.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},n){const l=Object.keys(this.store.data).reduce((c,d)=>(c[d]={...this.store.data[d]},c[d]=Object.keys(c[d]).reduce((h,f)=>(h[f]={...c[d][f]},h),c[d]),c),{});r.store=new xn(l,i),r.services.resourceStore=r.store}return r.translator=new gs(r.services,i),r.translator.on("*",(l,...c)=>{r.emit(l,...c)}),r.init(i,a),r.translator.options=i,r.translator.backendConnector.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const De=Vt.createInstance();De.createInstance=Vt.createInstance;De.createInstance;De.dir;De.init;De.loadResources;De.reloadResources;De.use;De.changeLanguage;De.getFixedT;De.t;De.exists;De.setDefaultNamespace;De.hasLoadedNamespace;De.loadNamespaces;De.loadLanguages;const{slice:Mu,forEach:qu}=[];function Fu(s){return qu.call(Mu.call(arguments,1),t=>{if(t)for(const a in t)s[a]===void 0&&(s[a]=t[a])}),s}function $u(s){return typeof s!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(a=>a.test(s))}const An=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Uu=function(s,t){const n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(t);let r=`${s}=${i}`;if(n.maxAge>0){const o=n.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");r+=`; Max-Age=${Math.floor(o)}`}if(n.domain){if(!An.test(n.domain))throw new TypeError("option domain is invalid");r+=`; Domain=${n.domain}`}if(n.path){if(!An.test(n.path))throw new TypeError("option path is invalid");r+=`; Path=${n.path}`}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");r+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(r+="; HttpOnly"),n.secure&&(r+="; Secure"),n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(r+="; Partitioned"),r},Dn={create(s,t,a,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};a&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+a*60*1e3)),n&&(i.domain=n),document.cookie=Uu(s,t,i)},read(s){const t=`${s}=`,a=document.cookie.split(";");for(let n=0;n<a.length;n++){let i=a[n];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(t)===0)return i.substring(t.length,i.length)}return null},remove(s,t){this.create(s,"",-1,t)}};var _u={name:"cookie",lookup(s){let{lookupCookie:t}=s;if(t&&typeof document<"u")return Dn.read(t)||void 0},cacheUserLanguage(s,t){let{lookupCookie:a,cookieMinutes:n,cookieDomain:i,cookieOptions:r}=t;a&&typeof document<"u"&&Dn.create(a,s,n,i,r)}},Vu={name:"querystring",lookup(s){let{lookupQuerystring:t}=s,a;if(typeof window<"u"){let{search:n}=window.location;!window.location.search&&window.location.hash?.indexOf("?")>-1&&(n=window.location.hash.substring(window.location.hash.indexOf("?")));const r=n.substring(1).split("&");for(let o=0;o<r.length;o++){const l=r[o].indexOf("=");l>0&&r[o].substring(0,l)===t&&(a=r[o].substring(l+1))}}return a}},Bu={name:"hash",lookup(s){let{lookupHash:t,lookupFromHashIndex:a}=s,n;if(typeof window<"u"){const{hash:i}=window.location;if(i&&i.length>2){const r=i.substring(1);if(t){const o=r.split("&");for(let l=0;l<o.length;l++){const c=o[l].indexOf("=");c>0&&o[l].substring(0,c)===t&&(n=o[l].substring(c+1))}}if(n)return n;if(!n&&a>-1){const o=i.match(/\/([a-zA-Z-]*)/g);return Array.isArray(o)?o[typeof a=="number"?a:0]?.replace("/",""):void 0}}}return n}};let wt=null;const Tn=()=>{if(wt!==null)return wt;try{if(wt=typeof window<"u"&&window.localStorage!==null,!wt)return!1;const s="i18next.translate.boo";window.localStorage.setItem(s,"foo"),window.localStorage.removeItem(s)}catch{wt=!1}return wt};var Hu={name:"localStorage",lookup(s){let{lookupLocalStorage:t}=s;if(t&&Tn())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(s,t){let{lookupLocalStorage:a}=t;a&&Tn()&&window.localStorage.setItem(a,s)}};let vt=null;const kn=()=>{if(vt!==null)return vt;try{if(vt=typeof window<"u"&&window.sessionStorage!==null,!vt)return!1;const s="i18next.translate.boo";window.sessionStorage.setItem(s,"foo"),window.sessionStorage.removeItem(s)}catch{vt=!1}return vt};var Wu={name:"sessionStorage",lookup(s){let{lookupSessionStorage:t}=s;if(t&&kn())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(s,t){let{lookupSessionStorage:a}=t;a&&kn()&&window.sessionStorage.setItem(a,s)}},Qu={name:"navigator",lookup(s){const t=[];if(typeof navigator<"u"){const{languages:a,userLanguage:n,language:i}=navigator;if(a)for(let r=0;r<a.length;r++)t.push(a[r]);n&&t.push(n),i&&t.push(i)}return t.length>0?t:void 0}},Gu={name:"htmlTag",lookup(s){let{htmlTag:t}=s,a;const n=t||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(a=n.getAttribute("lang")),a}},Zu={name:"path",lookup(s){let{lookupFromPathIndex:t}=s;if(typeof window>"u")return;const a=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(a)?a[typeof t=="number"?t:0]?.replace("/",""):void 0}},Ku={name:"subdomain",lookup(s){let{lookupFromSubdomainIndex:t}=s;const a=typeof t=="number"?t+1:1,n=typeof window<"u"&&window.location?.hostname?.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(n)return n[a]}};let Mi=!1;try{document.cookie,Mi=!0}catch{}const qi=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Mi||qi.splice(1,1);const zu=()=>({order:qi,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:s=>s});class Fi{constructor(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(t,a)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=t,this.options=Fu(a,this.options||{},zu()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(_u),this.addDetector(Vu),this.addDetector(Hu),this.addDetector(Wu),this.addDetector(Qu),this.addDetector(Gu),this.addDetector(Zu),this.addDetector(Ku),this.addDetector(Bu)}addDetector(t){return this.detectors[t.name]=t,this}detect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,a=[];return t.forEach(n=>{if(this.detectors[n]){let i=this.detectors[n].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(a=a.concat(i))}}),a=a.filter(n=>n!=null&&!$u(n)).map(n=>this.options.convertDetectedLanguage(n)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?a:a.length>0?a[0]:null}cacheUserLanguage(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;a&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(t)>-1||a.forEach(n=>{this.detectors[n]&&this.detectors[n].cacheUserLanguage(t,this.options)}))}}Fi.type="languageDetector";const Yu={title:"Business Loan Management",subtitle:"Loan Processing & Management System",aiAssistant:"AI Assistant",settings:"Settings",logout:"Logout",profile:"Profile Settings",notifications:"Notification Settings",security:"Security",preferences:"Preferences"},Ju={dashboard:"Dashboard",enquiries:"Enquiries",docVerification:"Doc Verification",shortlist:"Shortlist",paymentGateway:"Payment Gateway",applications:"Applications",staffManagement:"Staff Management",transactions:"Transactions"},Xu={title:"Dashboard",totalEnquiries:"Total Enquiries",documentsAwaiting:"Documents Awaiting",clientsShortlisted:"Clients Shortlisted",paymentGatewayComplete:"Payment Gateway Complete",totalTransactions:"Total Transactions",enquiryFunnel:"Enquiry Funnel",rolePermissions:"Role Permissions",fullAccess:"Full Access - All Features",staffControl:"Staff Management & System Control",accessLevel:"Access Level",adminAccess:"Full administrative access",revenueUp:"Revenue up 21%",activeStaff:"7 Active Staff"},em={title:"Enquiries",addNew:"Add New Enquiry",searchPlaceholder:"Search by name...",allStatuses:"All Statuses",clearFilters:"Clear Filters",refresh:"Refresh",name:"Name",mobile:"Mobile",businessType:"Business Type",status:"Status",staff:"Staff",actions:"Actions",view:"View",edit:"Edit",delete:"Delete",interested:"Interested",contacted:"Contacted",qualified:"Qualified",proposal:"Proposal",negotiation:"Negotiation",closed:"Closed"},tm={title:"Document Verification",upload:"Document Upload",selectEnquiry:"Select Enquiry",selectEnquiryPlaceholder:"Choose an enquiry to upload documents",documentType:"Document Type",selectFile:"Select File",uploadDocument:"Upload Document",documentList:"Document List",verified:"Verified",pending:"Pending",verify:"Verify",addToShortlist:"Add to Shortlist",allDocumentsVerified:"All Documents Verified!",readyForShortlist:"This client is ready to be added to shortlist",gstCertificate:"GST Certificate",udyamRegistration:"UDYAM Registration",bankStatement:"Bank Statement",panCard:"PAN Card",aadharCard:"Aadhar Card"},sm={title:"Shortlist",addNew:"Add New Shortlist",clientName:"Client Name",businessName:"Business Name",loanAmount:"Loan Amount",assignedStaff:"Assigned Staff",interestStatus:"Interest Status",apply:"Apply",basicInfo:"Basic Information",businessInfo:"Business Information",financialInfo:"Financial Information",staffStatus:"Staff & Status"},am={title:"Payment Gateway Applications",newApplication:"New Application",clientName:"Client Name",loanAmount:"Loan Amount",status:"Status",submittedBy:"Submitted By",submissionDate:"Submission Date",pending:"Pending",approved:"Approved",rejected:"Rejected"},nm={title:"Staff Management",addNew:"Add New Staff",staffName:"Staff Name",email:"Email",role:"Role",department:"Department",status:"Status",admin:"Admin",employee:"Employee",manager:"Manager",active:"Active",inactive:"Inactive"},im={title:"Transactions",addNew:"Add New Transaction",transactionName:"Transaction Name",date:"Date",time:"Time",transactionId:"Transaction ID",amount:"Amount",completed:"Completed",failed:"Failed"},rm={save:"Save",cancel:"Cancel",submit:"Submit",update:"Update",delete:"Delete",confirm:"Confirm",required:"Required",optional:"Optional",loading:"Loading...",success:"Success",error:"Error",pleaseWait:"Please wait..."},om={title:"Notifications",markAllRead:"Mark all as read",newEnquiry:"New Enquiry",documentUploaded:"Document Uploaded",documentVerified:"Document Verified",clientShortlisted:"Client Shortlisted",paymentApplied:"Payment Applied",loanApproved:"Loan Approved",loanRejected:"Loan Rejected",transactionCompleted:"Transaction Completed"},lm={title:"Business Loan Enquiry",subtitle:"Submit your details. Our specialists will reach out within 24 hours.",businessName:"Business Name",ownerName:"Owner Name",emailAddress:"Email Address",phoneNumber:"Phone Number",loanAmount:"Loan Amount",loanPurpose:"Loan Purpose",annualRevenue:"Annual Revenue",businessDocuments:"Business Documents (Optional)",uploadDocuments:"Upload financial documents",submitApplication:"Submit Application",submitting:"Submitting...",termsText:"By submitting this form, you agree to our terms and privacy policy.",selectAmount:"Select amount",selectPurpose:"Select purpose",selectRevenue:"Select revenue range",workingCapital:"Working Capital",equipmentPurchase:"Equipment Purchase",businessExpansion:"Business Expansion",inventory:"Inventory",realEstate:"Real Estate",other:"Other"},cm={header:Yu,sidebar:Ju,dashboard:Xu,enquiries:em,documents:tm,shortlist:sm,paymentGateway:am,staff:nm,transactions:im,forms:rm,notifications:om,apply:lm},dm={title:"  ",subtitle:"    ",aiAssistant:" ",settings:"",logout:" ",profile:" ",notifications:" ",security:"",preferences:""},um={dashboard:"",enquiries:"",docVerification:" ",shortlist:"",paymentGateway:" ",applications:"",staffManagement:" ",transactions:"-"},mm={title:"",totalEnquiries:" ",documentsAwaiting:" ",clientsShortlisted:" ",paymentGatewayComplete:"  ",totalTransactions:" -",enquiryFunnel:" ",rolePermissions:" ",fullAccess:"  -  ",staffControl:"    ",accessLevel:" ",adminAccess:"  ",revenueUp:"  21% ",activeStaff:"7  "},hm={title:"",addNew:"  ",searchPlaceholder:"  ...",allStatuses:" ",clearFilters:"  ",refresh:"",name:"",mobile:"",businessType:" ",status:"",staff:"",actions:"",view:"",edit:" ",delete:"",interested:"  ",contacted:"  ",qualified:"",proposal:"",negotiation:"",closed:""},fm={title:" ",upload:" ",selectEnquiry:" ",selectEnquiryPlaceholder:"       ",documentType:" ",selectFile:" ",uploadDocument:"  ",documentList:" ",verified:"",pending:"",verify:" ",addToShortlist:"  ",allDocumentsVerified:"  !",readyForShortlist:"         ",gstCertificate:" ",udyamRegistration:" ",bankStatement:" ",panCard:" ",aadharCard:" "},pm={title:"",addNew:"  ",clientName:"  ",businessName:"  ",loanAmount:" ",assignedStaff:" ",interestStatus:" ",apply:" ",basicInfo:" ",businessInfo:" ",financialInfo:" ",staffStatus:"  "},xm={title:"  ",newApplication:" ",clientName:"  ",loanAmount:" ",status:"",submittedBy:" ",submissionDate:" ",pending:"",approved:"",rejected:""},gm={title:" ",addNew:"  ",staffName:"  ",email:"",role:"",department:"",status:"",admin:"",employee:"",manager:"",active:"",inactive:""},ym={title:"-",addNew:" - ",transactionName:"-  ",date:"",time:"",transactionId:"- ",amount:"",completed:"",failed:""},bm={save:"",cancel:" ",submit:" ",update:" ",delete:"",confirm:" ",required:"",optional:"",loading:"   ...",success:"",error:"",pleaseWait:"  ..."},Nm={title:"",markAllRead:"     ",newEnquiry:" ",documentUploaded:"   ",documentVerified:" ",clientShortlisted:" ",paymentApplied:" ",loanApproved:" ",loanRejected:" ",transactionCompleted:"- "},wm={title:"  ",subtitle:"      24     ",businessName:"  ",ownerName:"  ",emailAddress:" ",phoneNumber:" ",loanAmount:" ",loanPurpose:"  ",annualRevenue:" ",businessDocuments:"  ()",uploadDocuments:"   ",submitApplication:"  ",submitting:"   ...",termsText:"    ,         ",selectAmount:" ",selectPurpose:" ",selectRevenue:"  ",workingCapital:" ",equipmentPurchase:" ",businessExpansion:" ",inventory:"",realEstate:" ",other:""},vm={header:dm,sidebar:um,dashboard:mm,enquiries:hm,documents:fm,shortlist:pm,paymentGateway:xm,staff:gm,transactions:ym,forms:bm,notifications:Nm,apply:wm},jm={title:"  ",subtitle:"    ",aiAssistant:"AI ",settings:"",logout:"",profile:" ",notifications:" ",security:"",preferences:""},Sm={dashboard:"",enquiries:"",docVerification:" ",shortlist:" ",paymentGateway:" ",applications:"",staffManagement:" ",transactions:""},Em={title:"",totalEnquiries:" ",documentsAwaiting:" ",clientsShortlisted:"  ",paymentGatewayComplete:"  ",totalTransactions:" ",enquiryFunnel:" ",rolePermissions:" ",fullAccess:"  -  ",staffControl:"    ",accessLevel:" ",adminAccess:"  ",revenueUp:" 21% ",activeStaff:"7   "},Am={title:"",addNew:"  ",searchPlaceholder:" ...",allStatuses:" ",clearFilters:" ",refresh:"",name:"",mobile:"",businessType:" ",status:"",staff:"",actions:"",view:"",edit:"",delete:"",interested:"",contacted:" ",qualified:"",proposal:"",negotiation:"",closed:""},Dm={title:" ",upload:" ",selectEnquiry:" ",selectEnquiryPlaceholder:"    ",documentType:" ",selectFile:" ",uploadDocument:" ",documentList:" ",verified:"",pending:"",verify:"",addToShortlist:"  ",allDocumentsVerified:"  !",readyForShortlist:"     ",gstCertificate:"GST ",udyamRegistration:" ",bankStatement:" ",panCard:"PAN ",aadharCard:" "},Tm={title:" ",addNew:"   ",clientName:" ",businessName:" ",loanAmount:" ",assignedStaff:" ",interestStatus:" ",apply:"",basicInfo:" ",businessInfo:" ",financialInfo:" ",staffStatus:"  "},km={title:"  ",newApplication:" ",clientName:" ",loanAmount:" ",status:"",submittedBy:"",submissionDate:" ",pending:"",approved:"",rejected:""},Cm={title:" ",addNew:"  ",staffName:" ",email:"",role:"",department:"",status:"",admin:"",employee:"",manager:"",active:"",inactive:""},Rm={title:"",addNew:"  ",transactionName:" ",date:"",time:"",transactionId:" ID",amount:"",completed:"",failed:""},Lm={save:"",cancel:" ",submit:"",update:"",delete:"",confirm:"",required:"",optional:"",loading:"...",success:"",error:"",pleaseWait:" ..."},Om={title:"",markAllRead:"  ",newEnquiry:" ",documentUploaded:" ",documentVerified:" ",clientShortlisted:"  ",paymentApplied:" ",loanApproved:" ",loanRejected:" ",transactionCompleted:" "},Im={title:"  ",subtitle:"  .   24    .",businessName:" ",ownerName:" ",emailAddress:" ",phoneNumber:" ",loanAmount:" ",loanPurpose:" ",annualRevenue:" ",businessDocuments:"  ()",uploadDocuments:"  ",submitApplication:" ",submitting:"...",termsText:"   ,      .",selectAmount:" ",selectPurpose:" ",selectRevenue:"  ",workingCapital:" ",equipmentPurchase:" ",businessExpansion:" ",inventory:"",realEstate:" ",other:""},Pm={header:jm,sidebar:Sm,dashboard:Em,enquiries:Am,documents:Dm,shortlist:Tm,paymentGateway:km,staff:Cm,transactions:Rm,forms:Lm,notifications:Om,apply:Im},Mm={title:"  ",subtitle:"    ",aiAssistant:"AI ",settings:"",logout:" ",profile:" ",notifications:" ",security:"",preferences:""},qm={dashboard:"",enquiries:"",docVerification:" ",shortlist:"",paymentGateway:" ",applications:"",staffManagement:" ",transactions:""},Fm={title:"",totalEnquiries:" ",documentsAwaiting:"  ",clientsShortlisted:" ",paymentGatewayComplete:"  ",totalTransactions:" ",enquiryFunnel:" ",rolePermissions:" ",fullAccess:"  -  ",staffControl:"    ",accessLevel:" ",adminAccess:"  ",revenueUp:" 21% ",activeStaff:"7  "},$m={title:"",addNew:"  ",searchPlaceholder:" ...",allStatuses:" ",clearFilters:"  ",refresh:"",name:"",mobile:"",businessType:" ",status:"",staff:"",actions:"",view:"",edit:"",delete:"",interested:" ",contacted:"",qualified:" ",proposal:"",negotiation:"",closed:""},Um={title:" ",upload:" ",selectEnquiry:" ",selectEnquiryPlaceholder:"    ",documentType:" ",selectFile:" ",uploadDocument:"  ",documentList:" ",verified:" ",pending:"",verify:" ",addToShortlist:" ",allDocumentsVerified:"   !",readyForShortlist:"     ",gstCertificate:"GST ",udyamRegistration:" ",bankStatement:" ",panCard:"PAN ",aadharCard:" "},_m={title:"",addNew:"  ",clientName:" ",businessName:" ",loanAmount:" ",assignedStaff:" ",interestStatus:" ",apply:" ",basicInfo:" ",businessInfo:" ",financialInfo:" ",staffStatus:"  "},Vm={title:"  ",newApplication:" ",clientName:" ",loanAmount:" ",status:"",submittedBy:"",submissionDate:" ",pending:"",approved:"",rejected:""},Bm={title:" ",addNew:"  ",staffName:" ",email:"",role:"",department:"",status:"",admin:"",employee:"",manager:"",active:"",inactive:""},Hm={title:"",addNew:"  ",transactionName:" ",date:"",time:"",transactionId:" ID",amount:"",completed:"",failed:""},Wm={save:" ",cancel:" ",submit:"",update:" ",delete:"",confirm:"",required:"",optional:"",loading:" ...",success:"",error:"",pleaseWait:"  ..."},Qm={title:"",markAllRead:"   ",newEnquiry:" ",documentUploaded:"  ",documentVerified:"  ",clientShortlisted:" ",paymentApplied:" ",loanApproved:" ",loanRejected:" ",transactionCompleted:" "},Gm={title:"  ",subtitle:"  .   24  .",businessName:" ",ownerName:" ",emailAddress:" ",phoneNumber:" ",loanAmount:" ",loanPurpose:" ",annualRevenue:" ",businessDocuments:"  ()",uploadDocuments:"   ",submitApplication:" ",submitting:"...",termsText:"   ,       .",selectAmount:" ",selectPurpose:" ",selectRevenue:"  ",workingCapital:" ",equipmentPurchase:" ",businessExpansion:" ",inventory:"",realEstate:" ",other:""},Zm={header:Mm,sidebar:qm,dashboard:Fm,enquiries:$m,documents:Um,shortlist:_m,paymentGateway:Vm,staff:Bm,transactions:Hm,forms:Wm,notifications:Qm,apply:Gm},Km={en:{translation:cm},hi:{translation:vm},ta:{translation:Pm},te:{translation:Zm}};De.use(Fi).use(Ll).init({resources:Km,fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"]},react:{useSuspense:!1}});const $i=new Ki({defaultOptions:{queries:{staleTime:300*1e3,cacheTime:1800*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchOnReconnect:!0,refetchInterval:180*1e3,refetchIntervalInBackground:!1,suspense:!1,useErrorBoundary:!1,retry:(s,t)=>t?.response?.status>=400&&t?.response?.status<500?!1:s<3,retryDelay:s=>{const t=Math.min(1e3*2**s,15e3);return console.log(` [RENDER] Query retry ${s+1} in ${t}ms`),t},keepPreviousData:!0,notifyOnChangeProps:["data","error","isLoading"],onError:s=>{console.error(" [RENDER] Global query error:",{message:s.message,status:s.response?.status,url:s.config?.url,timestamp:new Date().toISOString()})},onSuccess:s=>{console.log(" [RENDER] Global query success:",{dataType:Array.isArray(s)?"array":typeof s,length:Array.isArray(s)?s.length:"N/A",timestamp:new Date().toISOString()})}},mutations:{retry:(s,t)=>t?.response?.status>=400&&t?.response?.status<500?!1:s<1,retryDelay:2e3,onMutate:async()=>{console.log(" [RENDER] Mutation starting - canceling queries"),await $i.cancelQueries()},onError:s=>{console.error(" [RENDER] Global mutation error:",{message:s.message,status:s.response?.status,url:s.config?.url,timestamp:new Date().toISOString()})},onSuccess:s=>{console.log(" [RENDER] Global mutation success:",{dataType:typeof s,timestamp:new Date().toISOString()})}}}});console.log(" [RENDER] React Query client initialized with Render-optimized configuration");console.log(" [RENDER] Query settings:",{staleTime:"3 minutes",cacheTime:"20 minutes",refetchInterval:"2 minutes",retryAttempts:"3 (with smart error handling)",timestamp:new Date().toISOString()});function zm(){return console.log(" [RENDER] App component initializing with enhanced data persistence..."),e.jsx(du,{children:e.jsx(zi,{client:$i,children:e.jsx(fu,{children:e.jsx(Nl,{children:e.jsx(od,{children:e.jsxs(Zi,{children:[e.jsx(cu,{}),e.jsx(uu,{}),e.jsx(Br,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#4ade80",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})})})})})}tr.createRoot(document.getElementById("root")).render(e.jsx(fe.StrictMode,{children:e.jsx(zm,{})}));
