var Hi=Object.defineProperty;var Gi=(t,s,a)=>s in t?Hi(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;var Qt=(t,s,a)=>(Gi(t,typeof s!="symbol"?s+"":s,a),a);import{r as u,c as Wi,b as be}from"./vendor-eca221ea.js";import{N as Zi,u as He,L as Ee,a as gs,b as Qi,c as ca,R as Ea,d as ge,e as Ps,B as zi}from"./router-2ba008ad.js";import{u as Ce,a as ue,b as fe,Q as Ki,c as Yi}from"./query-24e528e4.js";import{A as ys,m as V}from"./ui-678d8bf8.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function a(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=a(i);fetch(i.href,r)}})();var Cn={exports:{}},bs={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ji=u,Xi=Symbol.for("react.element"),er=Symbol.for("react.fragment"),tr=Object.prototype.hasOwnProperty,sr=Ji.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ar={key:!0,ref:!0,__self:!0,__source:!0};function Rn(t,s,a){var n,i={},r=null,o=null;a!==void 0&&(r=""+a),s.key!==void 0&&(r=""+s.key),s.ref!==void 0&&(o=s.ref);for(n in s)tr.call(s,n)&&!ar.hasOwnProperty(n)&&(i[n]=s[n]);if(t&&t.defaultProps)for(n in s=t.defaultProps,s)i[n]===void 0&&(i[n]=s[n]);return{$$typeof:Xi,type:t,key:r,ref:o,props:i,_owner:sr.current}}bs.Fragment=er;bs.jsx=Rn;bs.jsxs=Rn;Cn.exports=bs;var e=Cn.exports,Ws={},Aa=Wi;Ws.createRoot=Aa.createRoot,Ws.hydrateRoot=Aa.hydrateRoot;let nr={data:""},ir=t=>{if(typeof window=="object"){let s=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return s.nonce=window.__nonce__,s.parentNode||(t||document.head).appendChild(s),s.firstChild}return t||nr},rr=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,or=/\/\*[^]*?\*\/|  +/g,ka=/\n+/g,lt=(t,s)=>{let a="",n="",i="";for(let r in t){let o=t[r];r[0]=="@"?r[1]=="i"?a=r+" "+o+";":n+=r[1]=="f"?lt(o,r):r+"{"+lt(o,r[1]=="k"?"":s)+"}":typeof o=="object"?n+=lt(o,s?s.replace(/([^,])+/g,l=>r.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,d=>/&/.test(d)?d.replace(/&/g,l):l?l+" "+d:d)):r):o!=null&&(r=/^--/.test(r)?r:r.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=lt.p?lt.p(r,o):r+":"+o+";")}return a+(s&&i?s+"{"+i+"}":i)+n},Xe={},In=t=>{if(typeof t=="object"){let s="";for(let a in t)s+=a+In(t[a]);return s}return t},lr=(t,s,a,n,i)=>{let r=In(t),o=Xe[r]||(Xe[r]=(d=>{let c=0,m=11;for(;c<d.length;)m=101*m+d.charCodeAt(c++)>>>0;return"go"+m})(r));if(!Xe[o]){let d=r!==t?t:(c=>{let m,f,h=[{}];for(;m=rr.exec(c.replace(or,""));)m[4]?h.shift():m[3]?(f=m[3].replace(ka," ").trim(),h.unshift(h[0][f]=h[0][f]||{})):h[0][m[1]]=m[2].replace(ka," ").trim();return h[0]})(t);Xe[o]=lt(i?{["@keyframes "+o]:d}:d,a?"":"."+o)}let l=a&&Xe.g?Xe.g:null;return a&&(Xe.g=Xe[o]),((d,c,m,f)=>{f?c.data=c.data.replace(f,d):c.data.indexOf(d)===-1&&(c.data=m?d+c.data:c.data+d)})(Xe[o],s,n,l),o},cr=(t,s,a)=>t.reduce((n,i,r)=>{let o=s[r];if(o&&o.call){let l=o(a),d=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=d?"."+d:l&&typeof l=="object"?l.props?"":lt(l,""):l===!1?"":l}return n+i+(o??"")},"");function Ns(t){let s=this||{},a=t.call?t(s.p):t;return lr(a.unshift?a.raw?cr(a,[].slice.call(arguments,1),s.p):a.reduce((n,i)=>Object.assign(n,i&&i.call?i(s.p):i),{}):a,ir(s.target),s.g,s.o,s.k)}let Ln,Zs,Qs;Ns.bind({g:1});let nt=Ns.bind({k:1});function dr(t,s,a,n){lt.p=s,Ln=t,Zs=a,Qs=n}function ut(t,s){let a=this||{};return function(){let n=arguments;function i(r,o){let l=Object.assign({},r),d=l.className||i.className;a.p=Object.assign({theme:Zs&&Zs()},l),a.o=/ *go\d+/.test(d),l.className=Ns.apply(a,n)+(d?" "+d:""),s&&(l.ref=o);let c=t;return t[0]&&(c=l.as||t,delete l.as),Qs&&c[0]&&Qs(l),Ln(c,l)}return s?s(i):i}}var ur=t=>typeof t=="function",is=(t,s)=>ur(t)?t(s):t,mr=(()=>{let t=0;return()=>(++t).toString()})(),On=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let s=matchMedia("(prefers-reduced-motion: reduce)");t=!s||s.matches}return t}})(),hr=20,da="default",Pn=(t,s)=>{let{toastLimit:a}=t.settings;switch(s.type){case 0:return{...t,toasts:[s.toast,...t.toasts].slice(0,a)};case 1:return{...t,toasts:t.toasts.map(o=>o.id===s.toast.id?{...o,...s.toast}:o)};case 2:let{toast:n}=s;return Pn(t,{type:t.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:i}=s;return{...t,toasts:t.toasts.map(o=>o.id===i||i===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(o=>o.id!==s.toastId)};case 5:return{...t,pausedAt:s.time};case 6:let r=s.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+r}))}}},Xt=[],Mn={toasts:[],pausedAt:void 0,settings:{toastLimit:hr}},ze={},Fn=(t,s=da)=>{ze[s]=Pn(ze[s]||Mn,t),Xt.forEach(([a,n])=>{a===s&&n(ze[s])})},$n=t=>Object.keys(ze).forEach(s=>Fn(t,s)),fr=t=>Object.keys(ze).find(s=>ze[s].toasts.some(a=>a.id===t)),ws=(t=da)=>s=>{Fn(s,t)},pr={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},xr=(t={},s=da)=>{let[a,n]=u.useState(ze[s]||Mn),i=u.useRef(ze[s]);u.useEffect(()=>(i.current!==ze[s]&&n(ze[s]),Xt.push([s,n]),()=>{let o=Xt.findIndex(([l])=>l===s);o>-1&&Xt.splice(o,1)}),[s]);let r=a.toasts.map(o=>{var l,d,c;return{...t,...t[o.type],...o,removeDelay:o.removeDelay||((l=t[o.type])==null?void 0:l.removeDelay)||(t==null?void 0:t.removeDelay),duration:o.duration||((d=t[o.type])==null?void 0:d.duration)||(t==null?void 0:t.duration)||pr[o.type],style:{...t.style,...(c=t[o.type])==null?void 0:c.style,...o.style}}});return{...a,toasts:r}},gr=(t,s="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:s,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...a,id:(a==null?void 0:a.id)||mr()}),Vt=t=>(s,a)=>{let n=gr(s,t,a);return ws(n.toasterId||fr(n.id))({type:2,toast:n}),n.id},pe=(t,s)=>Vt("blank")(t,s);pe.error=Vt("error");pe.success=Vt("success");pe.loading=Vt("loading");pe.custom=Vt("custom");pe.dismiss=(t,s)=>{let a={type:3,toastId:t};s?ws(s)(a):$n(a)};pe.dismissAll=t=>pe.dismiss(void 0,t);pe.remove=(t,s)=>{let a={type:4,toastId:t};s?ws(s)(a):$n(a)};pe.removeAll=t=>pe.remove(void 0,t);pe.promise=(t,s,a)=>{let n=pe.loading(s.loading,{...a,...a==null?void 0:a.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let r=s.success?is(s.success,i):void 0;return r?pe.success(r,{id:n,...a,...a==null?void 0:a.success}):pe.dismiss(n),i}).catch(i=>{let r=s.error?is(s.error,i):void 0;r?pe.error(r,{id:n,...a,...a==null?void 0:a.error}):pe.dismiss(n)}),t};var yr=1e3,br=(t,s="default")=>{let{toasts:a,pausedAt:n}=xr(t,s),i=u.useRef(new Map).current,r=u.useCallback((f,h=yr)=>{if(i.has(f))return;let v=setTimeout(()=>{i.delete(f),o({type:4,toastId:f})},h);i.set(f,v)},[]);u.useEffect(()=>{if(n)return;let f=Date.now(),h=a.map(v=>{if(v.duration===1/0)return;let g=(v.duration||0)+v.pauseDuration-(f-v.createdAt);if(g<0){v.visible&&pe.dismiss(v.id);return}return setTimeout(()=>pe.dismiss(v.id,s),g)});return()=>{h.forEach(v=>v&&clearTimeout(v))}},[a,n,s]);let o=u.useCallback(ws(s),[s]),l=u.useCallback(()=>{o({type:5,time:Date.now()})},[o]),d=u.useCallback((f,h)=>{o({type:1,toast:{id:f,height:h}})},[o]),c=u.useCallback(()=>{n&&o({type:6,time:Date.now()})},[n,o]),m=u.useCallback((f,h)=>{let{reverseOrder:v=!1,gutter:g=8,defaultPosition:y}=h||{},x=a.filter(N=>(N.position||y)===(f.position||y)&&N.height),E=x.findIndex(N=>N.id===f.id),w=x.filter((N,j)=>j<E&&N.visible).length;return x.filter(N=>N.visible).slice(...v?[w+1]:[0,w]).reduce((N,j)=>N+(j.height||0)+g,0)},[a]);return u.useEffect(()=>{a.forEach(f=>{if(f.dismissed)r(f.id,f.removeDelay);else{let h=i.get(f.id);h&&(clearTimeout(h),i.delete(f.id))}})},[a,r]),{toasts:a,handlers:{updateHeight:d,startPause:l,endPause:c,calculateOffset:m}}},Nr=nt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,wr=nt`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,vr=nt`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,jr=ut("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Nr} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${wr} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${vr} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Sr=nt`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Er=ut("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Sr} 1s linear infinite;
`,Ar=nt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,kr=nt`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Tr=ut("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ar} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${kr} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Dr=ut("div")`
  position: absolute;
`,Cr=ut("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Rr=nt`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ir=ut("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Rr} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Lr=({toast:t})=>{let{icon:s,type:a,iconTheme:n}=t;return s!==void 0?typeof s=="string"?u.createElement(Ir,null,s):s:a==="blank"?null:u.createElement(Cr,null,u.createElement(Er,{...n}),a!=="loading"&&u.createElement(Dr,null,a==="error"?u.createElement(jr,{...n}):u.createElement(Tr,{...n})))},Or=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Pr=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,Mr="0%{opacity:0;} 100%{opacity:1;}",Fr="0%{opacity:1;} 100%{opacity:0;}",$r=ut("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,qr=ut("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Ur=(t,s)=>{let a=t.includes("top")?1:-1,[n,i]=On()?[Mr,Fr]:[Or(a),Pr(a)];return{animation:s?`${nt(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${nt(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Vr=u.memo(({toast:t,position:s,style:a,children:n})=>{let i=t.height?Ur(t.position||s||"top-center",t.visible):{opacity:0},r=u.createElement(Lr,{toast:t}),o=u.createElement(qr,{...t.ariaProps},is(t.message,t));return u.createElement($r,{className:t.className,style:{...i,...a,...t.style}},typeof n=="function"?n({icon:r,message:o}):u.createElement(u.Fragment,null,r,o))});dr(u.createElement);var Br=({id:t,className:s,style:a,onHeightUpdate:n,children:i})=>{let r=u.useCallback(o=>{if(o){let l=()=>{let d=o.getBoundingClientRect().height;n(t,d)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[t,n]);return u.createElement("div",{ref:r,className:s,style:a},i)},_r=(t,s)=>{let a=t.includes("top"),n=a?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:On()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${s*(a?1:-1)}px)`,...n,...i}},Hr=Ns`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,zt=16,Gr=({reverseOrder:t,position:s="top-center",toastOptions:a,gutter:n,children:i,toasterId:r,containerStyle:o,containerClassName:l})=>{let{toasts:d,handlers:c}=br(a,r);return u.createElement("div",{"data-rht-toaster":r||"",style:{position:"fixed",zIndex:9999,top:zt,left:zt,right:zt,bottom:zt,pointerEvents:"none",...o},className:l,onMouseEnter:c.startPause,onMouseLeave:c.endPause},d.map(m=>{let f=m.position||s,h=c.calculateOffset(m,{reverseOrder:t,gutter:n,defaultPosition:s}),v=_r(f,h);return u.createElement(Br,{id:m.id,key:m.id,onHeightUpdate:c.updateHeight,className:m.visible?Hr:"",style:v},m.type==="custom"?is(m.message,m):i?i(m):u.createElement(Vr,{toast:m,position:f}))}))},F=pe;function qn(t,s){return function(){return t.apply(s,arguments)}}const{toString:Wr}=Object.prototype,{getPrototypeOf:ua}=Object,{iterator:vs,toStringTag:Un}=Symbol,js=(t=>s=>{const a=Wr.call(s);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Ge=t=>(t=t.toLowerCase(),s=>js(s)===t),Ss=t=>s=>typeof s===t,{isArray:Tt}=Array,St=Ss("undefined");function Bt(t){return t!==null&&!St(t)&&t.constructor!==null&&!St(t.constructor)&&Ie(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Vn=Ge("ArrayBuffer");function Zr(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&Vn(t.buffer),s}const Qr=Ss("string"),Ie=Ss("function"),Bn=Ss("number"),_t=t=>t!==null&&typeof t=="object",zr=t=>t===!0||t===!1,es=t=>{if(js(t)!=="object")return!1;const s=ua(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Un in t)&&!(vs in t)},Kr=t=>{if(!_t(t)||Bt(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Yr=Ge("Date"),Jr=Ge("File"),Xr=Ge("Blob"),eo=Ge("FileList"),to=t=>_t(t)&&Ie(t.pipe),so=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||Ie(t.append)&&((s=js(t))==="formdata"||s==="object"&&Ie(t.toString)&&t.toString()==="[object FormData]"))},ao=Ge("URLSearchParams"),[no,io,ro,oo]=["ReadableStream","Request","Response","Headers"].map(Ge),lo=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ht(t,s,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),Tt(t))for(n=0,i=t.length;n<i;n++)s.call(null,t[n],n,t);else{if(Bt(t))return;const r=a?Object.getOwnPropertyNames(t):Object.keys(t),o=r.length;let l;for(n=0;n<o;n++)l=r[n],s.call(null,t[l],l,t)}}function _n(t,s){if(Bt(t))return null;s=s.toLowerCase();const a=Object.keys(t);let n=a.length,i;for(;n-- >0;)if(i=a[n],s===i.toLowerCase())return i;return null}const mt=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Hn=t=>!St(t)&&t!==mt;function zs(){const{caseless:t,skipUndefined:s}=Hn(this)&&this||{},a={},n=(i,r)=>{const o=t&&_n(a,r)||r;es(a[o])&&es(i)?a[o]=zs(a[o],i):es(i)?a[o]=zs({},i):Tt(i)?a[o]=i.slice():(!s||!St(i))&&(a[o]=i)};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&Ht(arguments[i],n);return a}const co=(t,s,a,{allOwnKeys:n}={})=>(Ht(s,(i,r)=>{a&&Ie(i)?t[r]=qn(i,a):t[r]=i},{allOwnKeys:n}),t),uo=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),mo=(t,s,a,n)=>{t.prototype=Object.create(s.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),a&&Object.assign(t.prototype,a)},ho=(t,s,a,n)=>{let i,r,o;const l={};if(s=s||{},t==null)return s;do{for(i=Object.getOwnPropertyNames(t),r=i.length;r-- >0;)o=i[r],(!n||n(o,t,s))&&!l[o]&&(s[o]=t[o],l[o]=!0);t=a!==!1&&ua(t)}while(t&&(!a||a(t,s))&&t!==Object.prototype);return s},fo=(t,s,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=s.length;const n=t.indexOf(s,a);return n!==-1&&n===a},po=t=>{if(!t)return null;if(Tt(t))return t;let s=t.length;if(!Bn(s))return null;const a=new Array(s);for(;s-- >0;)a[s]=t[s];return a},xo=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&ua(Uint8Array)),go=(t,s)=>{const n=(t&&t[vs]).call(t);let i;for(;(i=n.next())&&!i.done;){const r=i.value;s.call(t,r[0],r[1])}},yo=(t,s)=>{let a;const n=[];for(;(a=t.exec(s))!==null;)n.push(a);return n},bo=Ge("HTMLFormElement"),No=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,n,i){return n.toUpperCase()+i}),Ta=(({hasOwnProperty:t})=>(s,a)=>t.call(s,a))(Object.prototype),wo=Ge("RegExp"),Gn=(t,s)=>{const a=Object.getOwnPropertyDescriptors(t),n={};Ht(a,(i,r)=>{let o;(o=s(i,r,t))!==!1&&(n[r]=o||i)}),Object.defineProperties(t,n)},vo=t=>{Gn(t,(s,a)=>{if(Ie(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const n=t[a];if(Ie(n)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},jo=(t,s)=>{const a={},n=i=>{i.forEach(r=>{a[r]=!0})};return Tt(t)?n(t):n(String(t).split(s)),a},So=()=>{},Eo=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function Ao(t){return!!(t&&Ie(t.append)&&t[Un]==="FormData"&&t[vs])}const ko=t=>{const s=new Array(10),a=(n,i)=>{if(_t(n)){if(s.indexOf(n)>=0)return;if(Bt(n))return n;if(!("toJSON"in n)){s[i]=n;const r=Tt(n)?[]:{};return Ht(n,(o,l)=>{const d=a(o,i+1);!St(d)&&(r[l]=d)}),s[i]=void 0,r}}return n};return a(t,0)},To=Ge("AsyncFunction"),Do=t=>t&&(_t(t)||Ie(t))&&Ie(t.then)&&Ie(t.catch),Wn=((t,s)=>t?setImmediate:s?((a,n)=>(mt.addEventListener("message",({source:i,data:r})=>{i===mt&&r===a&&n.length&&n.shift()()},!1),i=>{n.push(i),mt.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",Ie(mt.postMessage)),Co=typeof queueMicrotask<"u"?queueMicrotask.bind(mt):typeof process<"u"&&process.nextTick||Wn,Ro=t=>t!=null&&Ie(t[vs]),O={isArray:Tt,isArrayBuffer:Vn,isBuffer:Bt,isFormData:so,isArrayBufferView:Zr,isString:Qr,isNumber:Bn,isBoolean:zr,isObject:_t,isPlainObject:es,isEmptyObject:Kr,isReadableStream:no,isRequest:io,isResponse:ro,isHeaders:oo,isUndefined:St,isDate:Yr,isFile:Jr,isBlob:Xr,isRegExp:wo,isFunction:Ie,isStream:to,isURLSearchParams:ao,isTypedArray:xo,isFileList:eo,forEach:Ht,merge:zs,extend:co,trim:lo,stripBOM:uo,inherits:mo,toFlatObject:ho,kindOf:js,kindOfTest:Ge,endsWith:fo,toArray:po,forEachEntry:go,matchAll:yo,isHTMLForm:bo,hasOwnProperty:Ta,hasOwnProp:Ta,reduceDescriptors:Gn,freezeMethods:vo,toObjectSet:jo,toCamelCase:No,noop:So,toFiniteNumber:Eo,findKey:_n,global:mt,isContextDefined:Hn,isSpecCompliantForm:Ao,toJSONObject:ko,isAsyncFn:To,isThenable:Do,setImmediate:Wn,asap:Co,isIterable:Ro};function ie(t,s,a,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),a&&(this.config=a),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}O.inherits(ie,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:O.toJSONObject(this.config),code:this.code,status:this.status}}});const Zn=ie.prototype,Qn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Qn[t]={value:t}});Object.defineProperties(ie,Qn);Object.defineProperty(Zn,"isAxiosError",{value:!0});ie.from=(t,s,a,n,i,r)=>{const o=Object.create(Zn);O.toFlatObject(t,o,function(m){return m!==Error.prototype},c=>c!=="isAxiosError");const l=t&&t.message?t.message:"Error",d=s==null&&t?t.code:s;return ie.call(o,l,d,a,n,i),t&&o.cause==null&&Object.defineProperty(o,"cause",{value:t,configurable:!0}),o.name=t&&t.name||"Error",r&&Object.assign(o,r),o};const Io=null;function Ks(t){return O.isPlainObject(t)||O.isArray(t)}function zn(t){return O.endsWith(t,"[]")?t.slice(0,-2):t}function Da(t,s,a){return t?t.concat(s).map(function(i,r){return i=zn(i),!a&&r?"["+i+"]":i}).join(a?".":""):s}function Lo(t){return O.isArray(t)&&!t.some(Ks)}const Oo=O.toFlatObject(O,{},null,function(s){return/^is[A-Z]/.test(s)});function Es(t,s,a){if(!O.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,a=O.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,x){return!O.isUndefined(x[y])});const n=a.metaTokens,i=a.visitor||m,r=a.dots,o=a.indexes,d=(a.Blob||typeof Blob<"u"&&Blob)&&O.isSpecCompliantForm(s);if(!O.isFunction(i))throw new TypeError("visitor must be a function");function c(g){if(g===null)return"";if(O.isDate(g))return g.toISOString();if(O.isBoolean(g))return g.toString();if(!d&&O.isBlob(g))throw new ie("Blob is not supported. Use a Buffer instead.");return O.isArrayBuffer(g)||O.isTypedArray(g)?d&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function m(g,y,x){let E=g;if(g&&!x&&typeof g=="object"){if(O.endsWith(y,"{}"))y=n?y:y.slice(0,-2),g=JSON.stringify(g);else if(O.isArray(g)&&Lo(g)||(O.isFileList(g)||O.endsWith(y,"[]"))&&(E=O.toArray(g)))return y=zn(y),E.forEach(function(N,j){!(O.isUndefined(N)||N===null)&&s.append(o===!0?Da([y],j,r):o===null?y:y+"[]",c(N))}),!1}return Ks(g)?!0:(s.append(Da(x,y,r),c(g)),!1)}const f=[],h=Object.assign(Oo,{defaultVisitor:m,convertValue:c,isVisitable:Ks});function v(g,y){if(!O.isUndefined(g)){if(f.indexOf(g)!==-1)throw Error("Circular reference detected in "+y.join("."));f.push(g),O.forEach(g,function(E,w){(!(O.isUndefined(E)||E===null)&&i.call(s,E,O.isString(w)?w.trim():w,y,h))===!0&&v(E,y?y.concat(w):[w])}),f.pop()}}if(!O.isObject(t))throw new TypeError("data must be an object");return v(t),s}function Ca(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return s[n]})}function ma(t,s){this._pairs=[],t&&Es(t,this,s)}const Kn=ma.prototype;Kn.append=function(s,a){this._pairs.push([s,a])};Kn.toString=function(s){const a=s?function(n){return s.call(this,n,Ca)}:Ca;return this._pairs.map(function(i){return a(i[0])+"="+a(i[1])},"").join("&")};function Po(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Yn(t,s,a){if(!s)return t;const n=a&&a.encode||Po;O.isFunction(a)&&(a={serialize:a});const i=a&&a.serialize;let r;if(i?r=i(s,a):r=O.isURLSearchParams(s)?s.toString():new ma(s,a).toString(n),r){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+r}return t}class Mo{constructor(){this.handlers=[]}use(s,a,n){return this.handlers.push({fulfilled:s,rejected:a,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){O.forEach(this.handlers,function(n){n!==null&&s(n)})}}const Ra=Mo,Jn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Fo=typeof URLSearchParams<"u"?URLSearchParams:ma,$o=typeof FormData<"u"?FormData:null,qo=typeof Blob<"u"?Blob:null,Uo={isBrowser:!0,classes:{URLSearchParams:Fo,FormData:$o,Blob:qo},protocols:["http","https","file","blob","url","data"]},ha=typeof window<"u"&&typeof document<"u",Ys=typeof navigator=="object"&&navigator||void 0,Vo=ha&&(!Ys||["ReactNative","NativeScript","NS"].indexOf(Ys.product)<0),Bo=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),_o=ha&&window.location.href||"http://localhost",Ho=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ha,hasStandardBrowserEnv:Vo,hasStandardBrowserWebWorkerEnv:Bo,navigator:Ys,origin:_o},Symbol.toStringTag,{value:"Module"})),Ae={...Ho,...Uo};function Go(t,s){return Es(t,new Ae.classes.URLSearchParams,{visitor:function(a,n,i,r){return Ae.isNode&&O.isBuffer(a)?(this.append(n,a.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...s})}function Wo(t){return O.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function Zo(t){const s={},a=Object.keys(t);let n;const i=a.length;let r;for(n=0;n<i;n++)r=a[n],s[r]=t[r];return s}function Xn(t){function s(a,n,i,r){let o=a[r++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),d=r>=a.length;return o=!o&&O.isArray(i)?i.length:o,d?(O.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!l):((!i[o]||!O.isObject(i[o]))&&(i[o]=[]),s(a,n,i[o],r)&&O.isArray(i[o])&&(i[o]=Zo(i[o])),!l)}if(O.isFormData(t)&&O.isFunction(t.entries)){const a={};return O.forEachEntry(t,(n,i)=>{s(Wo(n),i,a,0)}),a}return null}function Qo(t,s,a){if(O.isString(t))try{return(s||JSON.parse)(t),O.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(a||JSON.stringify)(t)}const fa={transitional:Jn,adapter:["xhr","http","fetch"],transformRequest:[function(s,a){const n=a.getContentType()||"",i=n.indexOf("application/json")>-1,r=O.isObject(s);if(r&&O.isHTMLForm(s)&&(s=new FormData(s)),O.isFormData(s))return i?JSON.stringify(Xn(s)):s;if(O.isArrayBuffer(s)||O.isBuffer(s)||O.isStream(s)||O.isFile(s)||O.isBlob(s)||O.isReadableStream(s))return s;if(O.isArrayBufferView(s))return s.buffer;if(O.isURLSearchParams(s))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let l;if(r){if(n.indexOf("application/x-www-form-urlencoded")>-1)return Go(s,this.formSerializer).toString();if((l=O.isFileList(s))||n.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Es(l?{"files[]":s}:s,d&&new d,this.formSerializer)}}return r||i?(a.setContentType("application/json",!1),Qo(s)):s}],transformResponse:[function(s){const a=this.transitional||fa.transitional,n=a&&a.forcedJSONParsing,i=this.responseType==="json";if(O.isResponse(s)||O.isReadableStream(s))return s;if(s&&O.isString(s)&&(n&&!this.responseType||i)){const o=!(a&&a.silentJSONParsing)&&i;try{return JSON.parse(s,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?ie.from(l,ie.ERR_BAD_RESPONSE,this,null,this.response):l}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ae.classes.FormData,Blob:Ae.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};O.forEach(["delete","get","head","post","put","patch"],t=>{fa.headers[t]={}});const pa=fa,zo=O.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ko=t=>{const s={};let a,n,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),a=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!a||s[a]&&zo[a])&&(a==="set-cookie"?s[a]?s[a].push(n):s[a]=[n]:s[a]=s[a]?s[a]+", "+n:n)}),s},Ia=Symbol("internals");function Rt(t){return t&&String(t).trim().toLowerCase()}function ts(t){return t===!1||t==null?t:O.isArray(t)?t.map(ts):String(t)}function Yo(t){const s=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=a.exec(t);)s[n[1]]=n[2];return s}const Jo=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ms(t,s,a,n,i){if(O.isFunction(n))return n.call(this,s,a);if(i&&(s=a),!!O.isString(s)){if(O.isString(n))return s.indexOf(n)!==-1;if(O.isRegExp(n))return n.test(s)}}function Xo(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,a,n)=>a.toUpperCase()+n)}function el(t,s){const a=O.toCamelCase(" "+s);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+a,{value:function(i,r,o){return this[n].call(this,s,i,r,o)},configurable:!0})})}class As{constructor(s){s&&this.set(s)}set(s,a,n){const i=this;function r(l,d,c){const m=Rt(d);if(!m)throw new Error("header name must be a non-empty string");const f=O.findKey(i,m);(!f||i[f]===void 0||c===!0||c===void 0&&i[f]!==!1)&&(i[f||d]=ts(l))}const o=(l,d)=>O.forEach(l,(c,m)=>r(c,m,d));if(O.isPlainObject(s)||s instanceof this.constructor)o(s,a);else if(O.isString(s)&&(s=s.trim())&&!Jo(s))o(Ko(s),a);else if(O.isObject(s)&&O.isIterable(s)){let l={},d,c;for(const m of s){if(!O.isArray(m))throw TypeError("Object iterator must return a key-value pair");l[c=m[0]]=(d=l[c])?O.isArray(d)?[...d,m[1]]:[d,m[1]]:m[1]}o(l,a)}else s!=null&&r(a,s,n);return this}get(s,a){if(s=Rt(s),s){const n=O.findKey(this,s);if(n){const i=this[n];if(!a)return i;if(a===!0)return Yo(i);if(O.isFunction(a))return a.call(this,i,n);if(O.isRegExp(a))return a.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,a){if(s=Rt(s),s){const n=O.findKey(this,s);return!!(n&&this[n]!==void 0&&(!a||Ms(this,this[n],n,a)))}return!1}delete(s,a){const n=this;let i=!1;function r(o){if(o=Rt(o),o){const l=O.findKey(n,o);l&&(!a||Ms(n,n[l],l,a))&&(delete n[l],i=!0)}}return O.isArray(s)?s.forEach(r):r(s),i}clear(s){const a=Object.keys(this);let n=a.length,i=!1;for(;n--;){const r=a[n];(!s||Ms(this,this[r],r,s,!0))&&(delete this[r],i=!0)}return i}normalize(s){const a=this,n={};return O.forEach(this,(i,r)=>{const o=O.findKey(n,r);if(o){a[o]=ts(i),delete a[r];return}const l=s?Xo(r):String(r).trim();l!==r&&delete a[r],a[l]=ts(i),n[l]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const a=Object.create(null);return O.forEach(this,(n,i)=>{n!=null&&n!==!1&&(a[i]=s&&O.isArray(n)?n.join(", "):n)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,a])=>s+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...a){const n=new this(s);return a.forEach(i=>n.set(i)),n}static accessor(s){const n=(this[Ia]=this[Ia]={accessors:{}}).accessors,i=this.prototype;function r(o){const l=Rt(o);n[l]||(el(i,o),n[l]=!0)}return O.isArray(s)?s.forEach(r):r(s),this}}As.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);O.reduceDescriptors(As.prototype,({value:t},s)=>{let a=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(n){this[a]=n}}});O.freezeMethods(As);const _e=As;function Fs(t,s){const a=this||pa,n=s||a,i=_e.from(n.headers);let r=n.data;return O.forEach(t,function(l){r=l.call(a,r,i.normalize(),s?s.status:void 0)}),i.normalize(),r}function ei(t){return!!(t&&t.__CANCEL__)}function Dt(t,s,a){ie.call(this,t??"canceled",ie.ERR_CANCELED,s,a),this.name="CanceledError"}O.inherits(Dt,ie,{__CANCEL__:!0});function ti(t,s,a){const n=a.config.validateStatus;!a.status||!n||n(a.status)?t(a):s(new ie("Request failed with status code "+a.status,[ie.ERR_BAD_REQUEST,ie.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function tl(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function sl(t,s){t=t||10;const a=new Array(t),n=new Array(t);let i=0,r=0,o;return s=s!==void 0?s:1e3,function(d){const c=Date.now(),m=n[r];o||(o=c),a[i]=d,n[i]=c;let f=r,h=0;for(;f!==i;)h+=a[f++],f=f%t;if(i=(i+1)%t,i===r&&(r=(r+1)%t),c-o<s)return;const v=m&&c-m;return v?Math.round(h*1e3/v):void 0}}function al(t,s){let a=0,n=1e3/s,i,r;const o=(c,m=Date.now())=>{a=m,i=null,r&&(clearTimeout(r),r=null),t(...c)};return[(...c)=>{const m=Date.now(),f=m-a;f>=n?o(c,m):(i=c,r||(r=setTimeout(()=>{r=null,o(i)},n-f)))},()=>i&&o(i)]}const rs=(t,s,a=3)=>{let n=0;const i=sl(50,250);return al(r=>{const o=r.loaded,l=r.lengthComputable?r.total:void 0,d=o-n,c=i(d),m=o<=l;n=o;const f={loaded:o,total:l,progress:l?o/l:void 0,bytes:d,rate:c||void 0,estimated:c&&l&&m?(l-o)/c:void 0,event:r,lengthComputable:l!=null,[s?"download":"upload"]:!0};t(f)},a)},La=(t,s)=>{const a=t!=null;return[n=>s[0]({lengthComputable:a,total:t,loaded:n}),s[1]]},Oa=t=>(...s)=>O.asap(()=>t(...s)),nl=Ae.hasStandardBrowserEnv?((t,s)=>a=>(a=new URL(a,Ae.origin),t.protocol===a.protocol&&t.host===a.host&&(s||t.port===a.port)))(new URL(Ae.origin),Ae.navigator&&/(msie|trident)/i.test(Ae.navigator.userAgent)):()=>!0,il=Ae.hasStandardBrowserEnv?{write(t,s,a,n,i,r){const o=[t+"="+encodeURIComponent(s)];O.isNumber(a)&&o.push("expires="+new Date(a).toGMTString()),O.isString(n)&&o.push("path="+n),O.isString(i)&&o.push("domain="+i),r===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function rl(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function ol(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function si(t,s,a){let n=!rl(s);return t&&(n||a==!1)?ol(t,s):s}const Pa=t=>t instanceof _e?{...t}:t;function yt(t,s){s=s||{};const a={};function n(c,m,f,h){return O.isPlainObject(c)&&O.isPlainObject(m)?O.merge.call({caseless:h},c,m):O.isPlainObject(m)?O.merge({},m):O.isArray(m)?m.slice():m}function i(c,m,f,h){if(O.isUndefined(m)){if(!O.isUndefined(c))return n(void 0,c,f,h)}else return n(c,m,f,h)}function r(c,m){if(!O.isUndefined(m))return n(void 0,m)}function o(c,m){if(O.isUndefined(m)){if(!O.isUndefined(c))return n(void 0,c)}else return n(void 0,m)}function l(c,m,f){if(f in s)return n(c,m);if(f in t)return n(void 0,c)}const d={url:r,method:r,data:r,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(c,m,f)=>i(Pa(c),Pa(m),f,!0)};return O.forEach(Object.keys({...t,...s}),function(m){const f=d[m]||i,h=f(t[m],s[m],m);O.isUndefined(h)&&f!==l||(a[m]=h)}),a}const ai=t=>{const s=yt({},t);let{data:a,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:r,headers:o,auth:l}=s;if(s.headers=o=_e.from(o),s.url=Yn(si(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),O.isFormData(a)){if(Ae.hasStandardBrowserEnv||Ae.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(O.isFunction(a.getHeaders)){const d=a.getHeaders(),c=["content-type","content-length"];Object.entries(d).forEach(([m,f])=>{c.includes(m.toLowerCase())&&o.set(m,f)})}}if(Ae.hasStandardBrowserEnv&&(n&&O.isFunction(n)&&(n=n(s)),n||n!==!1&&nl(s.url))){const d=i&&r&&il.read(r);d&&o.set(i,d)}return s},ll=typeof XMLHttpRequest<"u",cl=ll&&function(t){return new Promise(function(a,n){const i=ai(t);let r=i.data;const o=_e.from(i.headers).normalize();let{responseType:l,onUploadProgress:d,onDownloadProgress:c}=i,m,f,h,v,g;function y(){v&&v(),g&&g(),i.cancelToken&&i.cancelToken.unsubscribe(m),i.signal&&i.signal.removeEventListener("abort",m)}let x=new XMLHttpRequest;x.open(i.method.toUpperCase(),i.url,!0),x.timeout=i.timeout;function E(){if(!x)return;const N=_e.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),p={data:!l||l==="text"||l==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:N,config:t,request:x};ti(function(T){a(T),y()},function(T){n(T),y()},p),x=null}"onloadend"in x?x.onloadend=E:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(E)},x.onabort=function(){x&&(n(new ie("Request aborted",ie.ECONNABORTED,t,x)),x=null)},x.onerror=function(j){const p=j&&j.message?j.message:"Network Error",k=new ie(p,ie.ERR_NETWORK,t,x);k.event=j||null,n(k),x=null},x.ontimeout=function(){let j=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const p=i.transitional||Jn;i.timeoutErrorMessage&&(j=i.timeoutErrorMessage),n(new ie(j,p.clarifyTimeoutError?ie.ETIMEDOUT:ie.ECONNABORTED,t,x)),x=null},r===void 0&&o.setContentType(null),"setRequestHeader"in x&&O.forEach(o.toJSON(),function(j,p){x.setRequestHeader(p,j)}),O.isUndefined(i.withCredentials)||(x.withCredentials=!!i.withCredentials),l&&l!=="json"&&(x.responseType=i.responseType),c&&([h,g]=rs(c,!0),x.addEventListener("progress",h)),d&&x.upload&&([f,v]=rs(d),x.upload.addEventListener("progress",f),x.upload.addEventListener("loadend",v)),(i.cancelToken||i.signal)&&(m=N=>{x&&(n(!N||N.type?new Dt(null,t,x):N),x.abort(),x=null)},i.cancelToken&&i.cancelToken.subscribe(m),i.signal&&(i.signal.aborted?m():i.signal.addEventListener("abort",m)));const w=tl(i.url);if(w&&Ae.protocols.indexOf(w)===-1){n(new ie("Unsupported protocol "+w+":",ie.ERR_BAD_REQUEST,t));return}x.send(r||null)})},dl=(t,s)=>{const{length:a}=t=t?t.filter(Boolean):[];if(s||a){let n=new AbortController,i;const r=function(c){if(!i){i=!0,l();const m=c instanceof Error?c:this.reason;n.abort(m instanceof ie?m:new Dt(m instanceof Error?m.message:m))}};let o=s&&setTimeout(()=>{o=null,r(new ie(`timeout ${s} of ms exceeded`,ie.ETIMEDOUT))},s);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(c=>{c.unsubscribe?c.unsubscribe(r):c.removeEventListener("abort",r)}),t=null)};t.forEach(c=>c.addEventListener("abort",r));const{signal:d}=n;return d.unsubscribe=()=>O.asap(l),d}},ul=dl,ml=function*(t,s){let a=t.byteLength;if(!s||a<s){yield t;return}let n=0,i;for(;n<a;)i=n+s,yield t.slice(n,i),n=i},hl=async function*(t,s){for await(const a of fl(t))yield*ml(a,s)},fl=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:a,value:n}=await s.read();if(a)break;yield n}}finally{await s.cancel()}},Ma=(t,s,a,n)=>{const i=hl(t,s);let r=0,o,l=d=>{o||(o=!0,n&&n(d))};return new ReadableStream({async pull(d){try{const{done:c,value:m}=await i.next();if(c){l(),d.close();return}let f=m.byteLength;if(a){let h=r+=f;a(h)}d.enqueue(new Uint8Array(m))}catch(c){throw l(c),c}},cancel(d){return l(d),i.return()}},{highWaterMark:2})},Fa=64*1024,{isFunction:Kt}=O,pl=(({Request:t,Response:s})=>({Request:t,Response:s}))(O.global),{ReadableStream:$a,TextEncoder:qa}=O.global,Ua=(t,...s)=>{try{return!!t(...s)}catch{return!1}},xl=t=>{t=O.merge.call({skipUndefined:!0},pl,t);const{fetch:s,Request:a,Response:n}=t,i=s?Kt(s):typeof fetch=="function",r=Kt(a),o=Kt(n);if(!i)return!1;const l=i&&Kt($a),d=i&&(typeof qa=="function"?(g=>y=>g.encode(y))(new qa):async g=>new Uint8Array(await new a(g).arrayBuffer())),c=r&&l&&Ua(()=>{let g=!1;const y=new a(Ae.origin,{body:new $a,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!y}),m=o&&l&&Ua(()=>O.isReadableStream(new n("").body)),f={stream:m&&(g=>g.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!f[g]&&(f[g]=(y,x)=>{let E=y&&y[g];if(E)return E.call(y);throw new ie(`Response type '${g}' is not supported`,ie.ERR_NOT_SUPPORT,x)})});const h=async g=>{if(g==null)return 0;if(O.isBlob(g))return g.size;if(O.isSpecCompliantForm(g))return(await new a(Ae.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(O.isArrayBufferView(g)||O.isArrayBuffer(g))return g.byteLength;if(O.isURLSearchParams(g)&&(g=g+""),O.isString(g))return(await d(g)).byteLength},v=async(g,y)=>{const x=O.toFiniteNumber(g.getContentLength());return x??h(y)};return async g=>{let{url:y,method:x,data:E,signal:w,cancelToken:N,timeout:j,onDownloadProgress:p,onUploadProgress:k,responseType:T,headers:C,withCredentials:A="same-origin",fetchOptions:R}=ai(g),q=s||fetch;T=T?(T+"").toLowerCase():"text";let W=ul([w,N&&N.toAbortSignal()],j),_=null;const Z=W&&W.unsubscribe&&(()=>{W.unsubscribe()});let re;try{if(k&&c&&x!=="get"&&x!=="head"&&(re=await v(C,E))!==0){let z=new a(y,{method:"POST",body:E,duplex:"half"}),ee;if(O.isFormData(E)&&(ee=z.headers.get("content-type"))&&C.setContentType(ee),z.body){const[ae,me]=La(re,rs(Oa(k)));E=Ma(z.body,Fa,ae,me)}}O.isString(A)||(A=A?"include":"omit");const J=r&&"credentials"in a.prototype,se={...R,signal:W,method:x.toUpperCase(),headers:C.normalize().toJSON(),body:E,duplex:"half",credentials:J?A:void 0};_=r&&new a(y,se);let K=await(r?q(_,R):q(y,se));const ce=m&&(T==="stream"||T==="response");if(m&&(p||ce&&Z)){const z={};["status","statusText","headers"].forEach(xe=>{z[xe]=K[xe]});const ee=O.toFiniteNumber(K.headers.get("content-length")),[ae,me]=p&&La(ee,rs(Oa(p),!0))||[];K=new n(Ma(K.body,Fa,ae,()=>{me&&me(),Z&&Z()}),z)}T=T||"text";let $=await f[O.findKey(f,T)||"text"](K,g);return!ce&&Z&&Z(),await new Promise((z,ee)=>{ti(z,ee,{data:$,headers:_e.from(K.headers),status:K.status,statusText:K.statusText,config:g,request:_})})}catch(J){throw Z&&Z(),J&&J.name==="TypeError"&&/Load failed|fetch/i.test(J.message)?Object.assign(new ie("Network Error",ie.ERR_NETWORK,g,_),{cause:J.cause||J}):ie.from(J,J&&J.code,g,_)}}},gl=new Map,ni=t=>{let s=t?t.env:{};const{fetch:a,Request:n,Response:i}=s,r=[n,i,a];let o=r.length,l=o,d,c,m=gl;for(;l--;)d=r[l],c=m.get(d),c===void 0&&m.set(d,c=l?new Map:xl(s)),m=c;return c};ni();const Js={http:Io,xhr:cl,fetch:{get:ni}};O.forEach(Js,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const Va=t=>`- ${t}`,yl=t=>O.isFunction(t)||t===null||t===!1,ii={getAdapter:(t,s)=>{t=O.isArray(t)?t:[t];const{length:a}=t;let n,i;const r={};for(let o=0;o<a;o++){n=t[o];let l;if(i=n,!yl(n)&&(i=Js[(l=String(n)).toLowerCase()],i===void 0))throw new ie(`Unknown adapter '${l}'`);if(i&&(O.isFunction(i)||(i=i.get(s))))break;r[l||"#"+o]=i}if(!i){const o=Object.entries(r).map(([d,c])=>`adapter ${d} `+(c===!1?"is not supported by the environment":"is not available in the build"));let l=a?o.length>1?`since :
`+o.map(Va).join(`
`):" "+Va(o[0]):"as no adapter specified";throw new ie("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return i},adapters:Js};function $s(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Dt(null,t)}function Ba(t){return $s(t),t.headers=_e.from(t.headers),t.data=Fs.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),ii.getAdapter(t.adapter||pa.adapter,t)(t).then(function(n){return $s(t),n.data=Fs.call(t,t.transformResponse,n),n.headers=_e.from(n.headers),n},function(n){return ei(n)||($s(t),n&&n.response&&(n.response.data=Fs.call(t,t.transformResponse,n.response),n.response.headers=_e.from(n.response.headers))),Promise.reject(n)})}const ri="1.12.2",ks={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{ks[t]=function(n){return typeof n===t||"a"+(s<1?"n ":" ")+t}});const _a={};ks.transitional=function(s,a,n){function i(r,o){return"[Axios v"+ri+"] Transitional option '"+r+"'"+o+(n?". "+n:"")}return(r,o,l)=>{if(s===!1)throw new ie(i(o," has been removed"+(a?" in "+a:"")),ie.ERR_DEPRECATED);return a&&!_a[o]&&(_a[o]=!0,console.warn(i(o," has been deprecated since v"+a+" and will be removed in the near future"))),s?s(r,o,l):!0}};ks.spelling=function(s){return(a,n)=>(console.warn(`${n} is likely a misspelling of ${s}`),!0)};function bl(t,s,a){if(typeof t!="object")throw new ie("options must be an object",ie.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const r=n[i],o=s[r];if(o){const l=t[r],d=l===void 0||o(l,r,t);if(d!==!0)throw new ie("option "+r+" must be "+d,ie.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new ie("Unknown option "+r,ie.ERR_BAD_OPTION)}}const ss={assertOptions:bl,validators:ks},Ze=ss.validators;class os{constructor(s){this.defaults=s||{},this.interceptors={request:new Ra,response:new Ra}}async request(s,a){try{return await this._request(s,a)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?r&&!String(n.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+r):n.stack=r}catch{}}throw n}}_request(s,a){typeof s=="string"?(a=a||{},a.url=s):a=s||{},a=yt(this.defaults,a);const{transitional:n,paramsSerializer:i,headers:r}=a;n!==void 0&&ss.assertOptions(n,{silentJSONParsing:Ze.transitional(Ze.boolean),forcedJSONParsing:Ze.transitional(Ze.boolean),clarifyTimeoutError:Ze.transitional(Ze.boolean)},!1),i!=null&&(O.isFunction(i)?a.paramsSerializer={serialize:i}:ss.assertOptions(i,{encode:Ze.function,serialize:Ze.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),ss.assertOptions(a,{baseUrl:Ze.spelling("baseURL"),withXsrfToken:Ze.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let o=r&&O.merge(r.common,r[a.method]);r&&O.forEach(["delete","get","head","post","put","patch","common"],g=>{delete r[g]}),a.headers=_e.concat(o,r);const l=[];let d=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(a)===!1||(d=d&&y.synchronous,l.unshift(y.fulfilled,y.rejected))});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let m,f=0,h;if(!d){const g=[Ba.bind(this),void 0];for(g.unshift(...l),g.push(...c),h=g.length,m=Promise.resolve(a);f<h;)m=m.then(g[f++],g[f++]);return m}h=l.length;let v=a;for(;f<h;){const g=l[f++],y=l[f++];try{v=g(v)}catch(x){y.call(this,x);break}}try{m=Ba.call(this,v)}catch(g){return Promise.reject(g)}for(f=0,h=c.length;f<h;)m=m.then(c[f++],c[f++]);return m}getUri(s){s=yt(this.defaults,s);const a=si(s.baseURL,s.url,s.allowAbsoluteUrls);return Yn(a,s.params,s.paramsSerializer)}}O.forEach(["delete","get","head","options"],function(s){os.prototype[s]=function(a,n){return this.request(yt(n||{},{method:s,url:a,data:(n||{}).data}))}});O.forEach(["post","put","patch"],function(s){function a(n){return function(r,o,l){return this.request(yt(l||{},{method:s,headers:n?{"Content-Type":"multipart/form-data"}:{},url:r,data:o}))}}os.prototype[s]=a(),os.prototype[s+"Form"]=a(!0)});const as=os;class xa{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(r){a=r});const n=this;this.promise.then(i=>{if(!n._listeners)return;let r=n._listeners.length;for(;r-- >0;)n._listeners[r](i);n._listeners=null}),this.promise.then=i=>{let r;const o=new Promise(l=>{n.subscribe(l),r=l}).then(i);return o.cancel=function(){n.unsubscribe(r)},o},s(function(r,o,l){n.reason||(n.reason=new Dt(r,o,l),a(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const a=this._listeners.indexOf(s);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const s=new AbortController,a=n=>{s.abort(n)};return this.subscribe(a),s.signal.unsubscribe=()=>this.unsubscribe(a),s.signal}static source(){let s;return{token:new xa(function(i){s=i}),cancel:s}}}const Nl=xa;function wl(t){return function(a){return t.apply(null,a)}}function vl(t){return O.isObject(t)&&t.isAxiosError===!0}const Xs={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Xs).forEach(([t,s])=>{Xs[s]=t});const jl=Xs;function oi(t){const s=new as(t),a=qn(as.prototype.request,s);return O.extend(a,as.prototype,s,{allOwnKeys:!0}),O.extend(a,s,null,{allOwnKeys:!0}),a.create=function(i){return oi(yt(t,i))},a}const je=oi(pa);je.Axios=as;je.CanceledError=Dt;je.CancelToken=Nl;je.isCancel=ei;je.VERSION=ri;je.toFormData=Es;je.AxiosError=ie;je.Cancel=je.CanceledError;je.all=function(s){return Promise.all(s)};je.spread=wl;je.isAxiosError=vl;je.mergeConfig=yt;je.AxiosHeaders=_e;je.formToJSON=t=>Xn(O.isHTMLForm(t)?new FormData(t):t);je.getAdapter=ii.getAdapter;je.HttpStatusCode=jl;je.default=je;const Sl=je;class Pe{static getEnquiries(){return[{id:1,name:"BALAMURUGAN",businessName:"Balamurugan Enterprises",mobile:"9876543215",email:"balamurugan@enterprises.com",businessType:"Manufacturing",loanAmount:5e5,district:"Chennai",constitution:"Proprietorship",gstStatus:"Registered",capAmount:5e4,bankAccount:"Yes",statementDuration:"12 months",status:"APPROVED",priority:"High",assignedStaff:"Perivi",source:"ONLINE_APPLICATION",interestStatus:"Very Interested",createdAt:new Date("2024-10-16T10:37:11.406Z").toISOString(),updatedAt:new Date("2024-10-16T10:37:11.406Z").toISOString()},{id:2,name:"VIGNESH S",businessName:"Vignesh Trading",mobile:"9876543220",email:"vignesh@trading.com",businessType:"Trading",loanAmount:3e5,district:"Coimbatore",constitution:"Partnership",gstStatus:"Registered",capAmount:3e4,bankAccount:"Yes",statementDuration:"6 months",status:"PROCESSING",priority:"Medium",assignedStaff:"Venkat",source:"WALK_IN",interestStatus:"Interested",createdAt:new Date("2024-10-15T09:20:30.123Z").toISOString(),updatedAt:new Date("2024-10-15T09:20:30.123Z").toISOString()},{id:3,name:"Poorani",businessName:"Poorani Textiles",mobile:"9876543221",email:"poorani@textiles.com",businessType:"Textiles",loanAmount:75e4,district:"Madurai",constitution:"Private Limited",gstStatus:"Registered",capAmount:75e3,bankAccount:"Yes",statementDuration:"12 months",status:"DOCUMENT_VERIFICATION",priority:"High",assignedStaff:"Harish",source:"REFERRAL",interestStatus:"Very Interested",createdAt:new Date("2024-10-14T14:15:45.789Z").toISOString(),updatedAt:new Date("2024-10-14T14:15:45.789Z").toISOString()},{id:4,name:"Manigandan M",businessName:"Manigandan Industries",mobile:"9876543222",email:"manigandan@industries.com",businessType:"Manufacturing",loanAmount:1e6,district:"Salem",constitution:"Private Limited",gstStatus:"Registered",capAmount:1e5,bankAccount:"Yes",statementDuration:"18 months",status:"SHORTLISTED",priority:"High",assignedStaff:"Dinesh",source:"ONLINE_APPLICATION",interestStatus:"Very Interested",createdAt:new Date("2024-10-13T11:30:15.456Z").toISOString(),updatedAt:new Date("2024-10-13T11:30:15.456Z").toISOString()},{id:5,name:"Praba",businessName:"Praba Enterprises",mobile:"9876543223",email:"praba@enterprises.com",businessType:"Services",loanAmount:4e5,district:"Trichy",constitution:"Proprietorship",gstStatus:"Registered",capAmount:4e4,bankAccount:"Yes",statementDuration:"9 months",status:"NEW",priority:"Medium",assignedStaff:"Nunciya",source:"PHONE_INQUIRY",interestStatus:"Interested",createdAt:new Date("2024-10-12T16:45:30.789Z").toISOString(),updatedAt:new Date("2024-10-12T16:45:30.789Z").toISOString()},{id:6,name:"Renu",businessName:"Renu Trading Co",mobile:"9876543210",email:"renu@trading.com",businessType:"Trading",loanAmount:25e4,district:"Erode",constitution:"Partnership",gstStatus:"Registered",capAmount:25e3,bankAccount:"Yes",statementDuration:"6 months",status:"FOLLOW_UP",priority:"Low",assignedStaff:"Venkat",source:"WALK_IN",interestStatus:"Moderately Interested",createdAt:new Date("2024-10-11T08:15:45.123Z").toISOString(),updatedAt:new Date("2024-10-11T08:15:45.123Z").toISOString()},{id:7,name:"Rajesh Kumar",businessName:"Kumar Exports",mobile:"9876543224",email:"rajesh@kumarexports.com",businessType:"Export",loanAmount:8e5,district:"Chennai",constitution:"Private Limited",gstStatus:"Registered",capAmount:8e4,bankAccount:"Yes",statementDuration:"24 months",status:"APPROVED",priority:"High",assignedStaff:"Perivi",source:"ONLINE_APPLICATION",interestStatus:"Very Interested",createdAt:new Date("2024-10-10T14:20:15.789Z").toISOString(),updatedAt:new Date("2024-10-10T14:20:15.789Z").toISOString()},{id:8,name:"Priya Sharma",businessName:"Sharma Consultancy",mobile:"9876543225",email:"priya@sharmaconsult.com",businessType:"Services",loanAmount:35e4,district:"Bangalore",constitution:"Proprietorship",gstStatus:"Registered",capAmount:35e3,bankAccount:"Yes",statementDuration:"12 months",status:"PROCESSING",priority:"Medium",assignedStaff:"Harish",source:"REFERRAL",interestStatus:"Interested",createdAt:new Date("2024-10-09T11:45:30.456Z").toISOString(),updatedAt:new Date("2024-10-09T11:45:30.456Z").toISOString()},{id:9,name:"Amit Patel",businessName:"Patel Electronics",mobile:"9876543226",email:"amit@patelelectronics.com",businessType:"Electronics",loanAmount:6e5,district:"Ahmedabad",constitution:"Partnership",gstStatus:"Registered",capAmount:6e4,bankAccount:"Yes",statementDuration:"15 months",status:"DOCUMENT_VERIFICATION",priority:"High",assignedStaff:"Dinesh",source:"ONLINE_APPLICATION",interestStatus:"Very Interested",createdAt:new Date("2024-10-08T09:30:45.123Z").toISOString(),updatedAt:new Date("2024-10-08T09:30:45.123Z").toISOString()},{id:10,name:"Sunita Gupta",businessName:"Gupta Fashion",mobile:"9876543227",email:"sunita@guptafashion.com",businessType:"Fashion",loanAmount:45e4,district:"Delhi",constitution:"Proprietorship",gstStatus:"Registered",capAmount:45e3,bankAccount:"Yes",statementDuration:"10 months",status:"SHORTLISTED",priority:"Medium",assignedStaff:"Nunciya",source:"WALK_IN",interestStatus:"Interested",createdAt:new Date("2024-10-07T16:15:20.789Z").toISOString(),updatedAt:new Date("2024-10-07T16:15:20.789Z").toISOString()},{id:11,name:"Deepak Verma",businessName:"Verma Construction",mobile:"9876543228",email:"deepak@verma.com",businessType:"Construction",loanAmount:85e4,district:"Mumbai",constitution:"Private Limited",gstStatus:"Registered",capAmount:85e3,bankAccount:"Yes",statementDuration:"18 months",status:"NEW",priority:"High",assignedStaff:"Nunciya",source:"ONLINE_APPLICATION",interestStatus:"Very Interested",createdAt:new Date("2024-10-06T13:25:15.234Z").toISOString(),updatedAt:new Date("2024-10-06T13:25:15.234Z").toISOString()},{id:12,name:"Neha Agarwal",businessName:"Agarwal Enterprises",mobile:"9876543229",email:"neha@agarwal.com",businessType:"Trading",loanAmount:65e4,district:"Pune",constitution:"Partnership",gstStatus:"Registered",capAmount:65e3,bankAccount:"Yes",statementDuration:"15 months",status:"PROCESSING",priority:"Medium",assignedStaff:"Admin User",source:"REFERRAL",interestStatus:"Interested",createdAt:new Date("2024-10-05T10:40:30.567Z").toISOString(),updatedAt:new Date("2024-10-05T10:40:30.567Z").toISOString()},{id:13,name:"Rohit Sharma",businessName:"Sharma Industries",mobile:"9876543230",email:"rohit@sharma.com",businessType:"Manufacturing",loanAmount:95e4,district:"Hyderabad",constitution:"Private Limited",gstStatus:"Registered",capAmount:95e3,bankAccount:"Yes",statementDuration:"20 months",status:"DOCUMENT_VERIFICATION",priority:"High",assignedStaff:"Admin User",source:"ONLINE_APPLICATION",interestStatus:"Very Interested",createdAt:new Date("2024-10-04T15:20:45.890Z").toISOString(),updatedAt:new Date("2024-10-04T15:20:45.890Z").toISOString()},{id:14,name:"Manish Gupta",businessName:"Gupta Tech Solutions",mobile:"9876543231",email:"manish@gupta.com",businessType:"Technology",loanAmount:75e4,district:"Kolkata",constitution:"Private Limited",gstStatus:"Registered",capAmount:75e3,bankAccount:"Yes",statementDuration:"12 months",status:"APPROVED",priority:"High",assignedStaff:"Admin User",source:"ONLINE_APPLICATION",interestStatus:"Very Interested",createdAt:new Date("2024-10-03T12:10:20.123Z").toISOString(),updatedAt:new Date("2024-10-03T12:10:20.123Z").toISOString()}]}static getDocuments(){return[{id:1,enquiryId:1,type:"GST",fileName:"gst-certificate-balamurugan.pdf",filePath:"/uploads/documents/1729073400000-1-GST.pdf",verified:!0,verifiedAt:new Date("2024-10-16T11:00:00.000Z").toISOString(),createdAt:new Date("2024-10-16T10:45:00.000Z").toISOString(),enquiry:{id:1,name:"BALAMURUGAN",mobile:"9876543215",businessType:"Manufacturing"}},{id:2,enquiryId:1,type:"UDYAM",fileName:"udyam-certificate-balamurugan.pdf",filePath:"/uploads/documents/1729073460000-1-UDYAM.pdf",verified:!0,verifiedAt:new Date("2024-10-16T11:05:00.000Z").toISOString(),createdAt:new Date("2024-10-16T10:50:00.000Z").toISOString(),enquiry:{id:1,name:"BALAMURUGAN",mobile:"9876543215",businessType:"Manufacturing"}},{id:3,enquiryId:1,type:"BANK_STATEMENT",fileName:"bank-statement-balamurugan.pdf",filePath:"/uploads/documents/1729073520000-1-BANK_STATEMENT.pdf",verified:!0,verifiedAt:new Date("2024-10-16T11:10:00.000Z").toISOString(),createdAt:new Date("2024-10-16T10:55:00.000Z").toISOString(),enquiry:{id:1,name:"BALAMURUGAN",mobile:"9876543215",businessType:"Manufacturing"}},{id:4,enquiryId:1,type:"OWNER_PAN",fileName:"owner-pan-balamurugan.pdf",filePath:"/uploads/documents/1729073580000-1-OWNER_PAN.pdf",verified:!0,verifiedAt:new Date("2024-10-16T11:15:00.000Z").toISOString(),createdAt:new Date("2024-10-16T11:00:00.000Z").toISOString(),enquiry:{id:1,name:"BALAMURUGAN",mobile:"9876543215",businessType:"Manufacturing"}},{id:5,enquiryId:1,type:"AADHAR",fileName:"aadhar-balamurugan.pdf",filePath:"/uploads/documents/1729073640000-1-AADHAR.pdf",verified:!0,verifiedAt:new Date("2024-10-16T11:20:00.000Z").toISOString(),createdAt:new Date("2024-10-16T11:05:00.000Z").toISOString(),enquiry:{id:1,name:"BALAMURUGAN",mobile:"9876543215",businessType:"Manufacturing"}},{id:6,enquiryId:2,type:"GST",fileName:"gst-certificate-vignesh.pdf",filePath:"/uploads/documents/1729073700000-2-GST.pdf",verified:!0,verifiedAt:new Date("2024-10-15T14:30:00.000Z").toISOString(),createdAt:new Date("2024-10-15T14:15:00.000Z").toISOString(),enquiry:{id:2,name:"VIGNESH S",mobile:"9876543220",businessType:"Trading"}},{id:7,enquiryId:2,type:"UDYAM",fileName:"udyam-certificate-vignesh.pdf",filePath:"/uploads/documents/1729073760000-2-UDYAM.pdf",verified:!1,createdAt:new Date("2024-10-15T14:20:00.000Z").toISOString(),enquiry:{id:2,name:"VIGNESH S",mobile:"9876543220",businessType:"Trading"}},{id:8,enquiryId:2,type:"BANK_STATEMENT",fileName:"bank-statement-vignesh.pdf",filePath:"/uploads/documents/1729073800000-2-BANK_STATEMENT.pdf",verified:!0,verifiedAt:new Date("2024-10-15T14:45:00.000Z").toISOString(),createdAt:new Date("2024-10-15T14:25:00.000Z").toISOString(),enquiry:{id:2,name:"VIGNESH S",mobile:"9876543220",businessType:"Trading"}},{id:9,enquiryId:3,type:"GST",fileName:"gst-certificate-poorani.pdf",filePath:"/uploads/documents/1729073820000-3-GST.pdf",verified:!0,verifiedAt:new Date("2024-10-14T16:45:00.000Z").toISOString(),createdAt:new Date("2024-10-14T16:30:00.000Z").toISOString(),enquiry:{id:3,name:"Poorani",mobile:"9876543221",businessType:"Textiles"}},{id:10,enquiryId:3,type:"BANK_STATEMENT",fileName:"bank-statement-poorani.pdf",filePath:"/uploads/documents/1729073880000-3-BANK_STATEMENT.pdf",verified:!1,createdAt:new Date("2024-10-14T16:35:00.000Z").toISOString(),enquiry:{id:3,name:"Poorani",mobile:"9876543221",businessType:"Textiles"}},{id:11,enquiryId:3,type:"UDYAM",fileName:"udyam-certificate-poorani.pdf",filePath:"/uploads/documents/1729073900000-3-UDYAM.pdf",verified:!0,verifiedAt:new Date("2024-10-14T17:00:00.000Z").toISOString(),createdAt:new Date("2024-10-14T16:40:00.000Z").toISOString(),enquiry:{id:3,name:"Poorani",mobile:"9876543221",businessType:"Textiles"}},{id:12,enquiryId:4,type:"GST",fileName:"gst-certificate-manigandan.pdf",filePath:"/uploads/documents/1729073950000-4-GST.pdf",verified:!0,verifiedAt:new Date("2024-10-13T12:30:00.000Z").toISOString(),createdAt:new Date("2024-10-13T12:15:00.000Z").toISOString(),enquiry:{id:4,name:"Manigandan M",mobile:"9876543222",businessType:"Manufacturing"}},{id:13,enquiryId:4,type:"UDYAM",fileName:"udyam-certificate-manigandan.pdf",filePath:"/uploads/documents/1729074000000-4-UDYAM.pdf",verified:!0,verifiedAt:new Date("2024-10-13T12:45:00.000Z").toISOString(),createdAt:new Date("2024-10-13T12:20:00.000Z").toISOString(),enquiry:{id:4,name:"Manigandan M",mobile:"9876543222",businessType:"Manufacturing"}},{id:14,enquiryId:4,type:"BANK_STATEMENT",fileName:"bank-statement-manigandan.pdf",filePath:"/uploads/documents/1729074050000-4-BANK_STATEMENT.pdf",verified:!0,verifiedAt:new Date("2024-10-13T13:00:00.000Z").toISOString(),createdAt:new Date("2024-10-13T12:25:00.000Z").toISOString(),enquiry:{id:4,name:"Manigandan M",mobile:"9876543222",businessType:"Manufacturing"}},{id:15,enquiryId:4,type:"OWNER_PAN",fileName:"owner-pan-manigandan.pdf",filePath:"/uploads/documents/1729074100000-4-OWNER_PAN.pdf",verified:!0,verifiedAt:new Date("2024-10-13T13:15:00.000Z").toISOString(),createdAt:new Date("2024-10-13T12:30:00.000Z").toISOString(),enquiry:{id:4,name:"Manigandan M",mobile:"9876543222",businessType:"Manufacturing"}},{id:16,enquiryId:4,type:"AADHAR",fileName:"aadhar-manigandan.pdf",filePath:"/uploads/documents/1729074150000-4-AADHAR.pdf",verified:!0,verifiedAt:new Date("2024-10-13T13:30:00.000Z").toISOString(),createdAt:new Date("2024-10-13T12:35:00.000Z").toISOString(),enquiry:{id:4,name:"Manigandan M",mobile:"9876543222",businessType:"Manufacturing"}},{id:17,enquiryId:7,type:"GST",fileName:"gst-certificate-rajesh.pdf",filePath:"/uploads/documents/1729074200000-7-GST.pdf",verified:!0,verifiedAt:new Date("2024-10-10T15:30:00.000Z").toISOString(),createdAt:new Date("2024-10-10T15:15:00.000Z").toISOString(),enquiry:{id:7,name:"Rajesh Kumar",mobile:"9876543224",businessType:"Export"}},{id:18,enquiryId:7,type:"UDYAM",fileName:"udyam-certificate-rajesh.pdf",filePath:"/uploads/documents/1729074250000-7-UDYAM.pdf",verified:!0,verifiedAt:new Date("2024-10-10T15:45:00.000Z").toISOString(),createdAt:new Date("2024-10-10T15:20:00.000Z").toISOString(),enquiry:{id:7,name:"Rajesh Kumar",mobile:"9876543224",businessType:"Export"}},{id:19,enquiryId:7,type:"BANK_STATEMENT",fileName:"bank-statement-rajesh.pdf",filePath:"/uploads/documents/1729074300000-7-BANK_STATEMENT.pdf",verified:!0,verifiedAt:new Date("2024-10-10T16:00:00.000Z").toISOString(),createdAt:new Date("2024-10-10T15:25:00.000Z").toISOString(),enquiry:{id:7,name:"Rajesh Kumar",mobile:"9876543224",businessType:"Export"}},{id:20,enquiryId:7,type:"OWNER_PAN",fileName:"owner-pan-rajesh.pdf",filePath:"/uploads/documents/1729074350000-7-OWNER_PAN.pdf",verified:!0,verifiedAt:new Date("2024-10-10T16:15:00.000Z").toISOString(),createdAt:new Date("2024-10-10T15:30:00.000Z").toISOString(),enquiry:{id:7,name:"Rajesh Kumar",mobile:"9876543224",businessType:"Export"}},{id:21,enquiryId:8,type:"GST",fileName:"gst-certificate-priya.pdf",filePath:"/uploads/documents/1729074400000-8-GST.pdf",verified:!0,verifiedAt:new Date("2024-10-09T12:30:00.000Z").toISOString(),createdAt:new Date("2024-10-09T12:15:00.000Z").toISOString(),enquiry:{id:8,name:"Priya Sharma",mobile:"9876543225",businessType:"Services"}},{id:22,enquiryId:8,type:"BANK_STATEMENT",fileName:"bank-statement-priya.pdf",filePath:"/uploads/documents/1729074450000-8-BANK_STATEMENT.pdf",verified:!1,createdAt:new Date("2024-10-09T12:20:00.000Z").toISOString(),enquiry:{id:8,name:"Priya Sharma",mobile:"9876543225",businessType:"Services"}},{id:23,enquiryId:9,type:"GST",fileName:"gst-certificate-amit.pdf",filePath:"/uploads/documents/1729074500000-9-GST.pdf",verified:!0,verifiedAt:new Date("2024-10-08T10:30:00.000Z").toISOString(),createdAt:new Date("2024-10-08T10:15:00.000Z").toISOString(),enquiry:{id:9,name:"Amit Patel",mobile:"9876543226",businessType:"Electronics"}},{id:24,enquiryId:9,type:"UDYAM",fileName:"udyam-certificate-amit.pdf",filePath:"/uploads/documents/1729074550000-9-UDYAM.pdf",verified:!1,createdAt:new Date("2024-10-08T10:20:00.000Z").toISOString(),enquiry:{id:9,name:"Amit Patel",mobile:"9876543226",businessType:"Electronics"}},{id:25,enquiryId:9,type:"BANK_STATEMENT",fileName:"bank-statement-amit.pdf",filePath:"/uploads/documents/1729074600000-9-BANK_STATEMENT.pdf",verified:!0,verifiedAt:new Date("2024-10-08T11:00:00.000Z").toISOString(),createdAt:new Date("2024-10-08T10:25:00.000Z").toISOString(),enquiry:{id:9,name:"Amit Patel",mobile:"9876543226",businessType:"Electronics"}}]}static getShortlist(){return[{id:1,enquiryId:1,name:"BALAMURUGAN",mobile:"9876543215",businessName:"Balamurugan Enterprises",businessNature:"Manufacturing",businessType:"Manufacturing",loanAmount:5e5,district:"Chennai",constitution:"Proprietorship",gstStatus:"Registered",capAmount:5e4,bankAccount:"Yes",statementDuration:"12 months",staff:"Perivi",interestStatus:"Very Interested",priority:"High",notes:"Complete documentation verified, ready for processing",createdAt:new Date("2024-10-16T12:00:00.000Z").toISOString(),updatedAt:new Date("2024-10-16T12:00:00.000Z").toISOString(),enquiry:{id:1,name:"BALAMURUGAN",mobile:"9876543215",businessType:"Manufacturing",businessName:"Balamurugan Enterprises"}},{id:2,enquiryId:2,name:"VIGNESH S",mobile:"9876543220",businessName:"Vignesh Trading",businessNature:"Trading",businessType:"Trading",loanAmount:3e5,district:"Coimbatore",constitution:"Partnership",gstStatus:"Registered",capAmount:3e4,bankAccount:"Yes",statementDuration:"6 months",staff:"Venkat",interestStatus:"Interested",priority:"Medium",notes:"Pending UDYAM verification",createdAt:new Date("2024-10-15T13:30:00.000Z").toISOString(),updatedAt:new Date("2024-10-15T13:30:00.000Z").toISOString(),enquiry:{id:2,name:"VIGNESH S",mobile:"9876543220",businessType:"Trading",businessName:"Vignesh Trading"}},{id:3,enquiryId:3,name:"Poorani",mobile:"9876543221",businessName:"Poorani Textiles",businessNature:"Textiles",businessType:"Textiles",loanAmount:75e4,district:"Madurai",constitution:"Private Limited",gstStatus:"Registered",capAmount:75e3,bankAccount:"Yes",statementDuration:"12 months",staff:"Dinesh",interestStatus:"Very Interested",priority:"High",notes:"Large loan amount, good business profile",createdAt:new Date("2024-10-14T17:15:00.000Z").toISOString(),updatedAt:new Date("2024-10-14T17:15:00.000Z").toISOString(),enquiry:{id:3,name:"Poorani",mobile:"9876543221",businessType:"Textiles",businessName:"Poorani Textiles"}},{id:4,enquiryId:4,name:"Manigandan M",mobile:"9876543222",businessName:"Manigandan Industries",businessNature:"Manufacturing",businessType:"Manufacturing",loanAmount:1e6,district:"Salem",constitution:"Private Limited",gstStatus:"Registered",capAmount:1e5,bankAccount:"Yes",statementDuration:"18 months",staff:"Dinesh",interestStatus:"Very Interested",priority:"High",notes:"Large loan amount, excellent business profile",createdAt:new Date("2024-10-13T15:30:00.000Z").toISOString(),updatedAt:new Date("2024-10-13T15:30:00.000Z").toISOString(),enquiry:{id:4,name:"Manigandan M",mobile:"9876543222",businessType:"Manufacturing",businessName:"Manigandan Industries"}},{id:5,enquiryId:7,name:"Rajesh Kumar",mobile:"9876543224",businessName:"Kumar Exports",businessNature:"Export",businessType:"Export",loanAmount:8e5,district:"Chennai",constitution:"Private Limited",gstStatus:"Registered",capAmount:8e4,bankAccount:"Yes",statementDuration:"24 months",staff:"Perivi",interestStatus:"Very Interested",priority:"High",notes:"Export business with strong financials",createdAt:new Date("2024-10-10T16:30:00.000Z").toISOString(),updatedAt:new Date("2024-10-10T16:30:00.000Z").toISOString(),enquiry:{id:7,name:"Rajesh Kumar",mobile:"9876543224",businessType:"Export",businessName:"Kumar Exports"}},{id:6,enquiryId:10,name:"Sunita Gupta",mobile:"9876543227",businessName:"Gupta Fashion",businessNature:"Fashion",businessType:"Fashion",loanAmount:45e4,district:"Delhi",constitution:"Proprietorship",gstStatus:"Registered",capAmount:45e3,bankAccount:"Yes",statementDuration:"10 months",staff:"Nunciya",interestStatus:"Interested",priority:"Medium",notes:"Fashion business with seasonal variations",createdAt:new Date("2024-10-07T18:00:00.000Z").toISOString(),updatedAt:new Date("2024-10-07T18:00:00.000Z").toISOString(),enquiry:{id:10,name:"Sunita Gupta",mobile:"9876543227",businessType:"Fashion",businessName:"Gupta Fashion"}}]}static getPaymentGateway(){return[{id:1,shortlistId:1,loanAmount:5e5,tenure:24,interestRate:12.5,status:"APPROVED",processingFee:25e3,emi:23500,createdAt:new Date("2024-10-16T13:00:00.000Z").toISOString(),updatedAt:new Date("2024-10-16T13:00:00.000Z").toISOString(),shortlist:{id:1,name:"BALAMURUGAN",mobile:"9876543215",businessName:"Balamurugan Enterprises",businessType:"Manufacturing",loanAmount:5e5,enquiry:{id:1,name:"BALAMURUGAN",mobile:"9876543215",businessType:"Manufacturing",businessName:"Balamurugan Enterprises"}},submittedBy:{id:1,name:"Perivi",email:"gowthaamankrishna1998@gmail.com"}},{id:2,shortlistId:5,loanAmount:8e5,tenure:36,interestRate:11.5,status:"PROCESSING",processingFee:4e4,emi:26800,createdAt:new Date("2024-10-14T15:30:00.000Z").toISOString(),updatedAt:new Date("2024-10-14T15:30:00.000Z").toISOString(),shortlist:{id:5,name:"Rajesh Kumar",mobile:"9876543224",businessName:"Kumar Exports",businessType:"Export",loanAmount:8e5,enquiry:{id:7,name:"Rajesh Kumar",mobile:"9876543224",businessType:"Export",businessName:"Kumar Exports"}},submittedBy:{id:1,name:"Perivi",email:"gowthaamankrishna1998@gmail.com"}},{id:3,shortlistId:4,loanAmount:1e6,tenure:48,interestRate:13,status:"PENDING",processingFee:5e4,emi:27e3,createdAt:new Date("2024-10-13T17:00:00.000Z").toISOString(),updatedAt:new Date("2024-10-13T17:00:00.000Z").toISOString(),shortlist:{id:4,name:"Manigandan M",mobile:"9876543222",businessName:"Manigandan Industries",businessType:"Manufacturing",loanAmount:1e6,enquiry:{id:4,name:"Manigandan M",mobile:"9876543222",businessType:"Manufacturing",businessName:"Manigandan Industries"}},submittedBy:{id:4,name:"Dinesh",email:"dinesh@gmail.com"}},{id:4,shortlistId:3,loanAmount:75e4,tenure:30,interestRate:12,status:"UNDER_REVIEW",processingFee:37500,emi:26200,createdAt:new Date("2024-10-12T14:45:00.000Z").toISOString(),updatedAt:new Date("2024-10-12T14:45:00.000Z").toISOString(),shortlist:{id:3,name:"Poorani",mobile:"9876543221",businessName:"Poorani Textiles",businessType:"Textiles",loanAmount:75e4,enquiry:{id:3,name:"Poorani",mobile:"9876543221",businessType:"Textiles",businessName:"Poorani Textiles"}},submittedBy:{id:3,name:"Harish",email:"newacttmis@gmail.com"}},{id:5,shortlistId:6,loanAmount:45e4,tenure:24,interestRate:13.5,status:"REJECTED",processingFee:22500,emi:20100,rejectionReason:"Insufficient business turnover",createdAt:new Date("2024-10-10T11:20:00.000Z").toISOString(),updatedAt:new Date("2024-10-10T11:20:00.000Z").toISOString(),shortlist:{id:6,name:"Sunita Gupta",mobile:"9876543227",businessName:"Gupta Fashion",businessType:"Fashion",loanAmount:45e4,enquiry:{id:10,name:"Sunita Gupta",mobile:"9876543227",businessType:"Fashion",businessName:"Gupta Fashion"}},submittedBy:{id:5,name:"Nunciya",email:"tmsnunciya59@gmail.com"}}]}static getStaff(){return[{id:1,name:"Perivi",email:"gowthaamankrishna1998@gmail.com",password:"12345678",role:"ADMIN",department:"Management",verified:!0,hasAccess:!0,status:"ACTIVE",clientName:"Rajesh Kumar, Priya Sharma, Amit Patel",createdAt:new Date("2024-10-01T09:00:00.000Z").toISOString()},{id:2,name:"Venkat",email:"gowthaamaneswar1998@gmail.com",password:"12345678",role:"EMPLOYEE",department:"Operations",verified:!0,hasAccess:!0,status:"ACTIVE",clientName:"Sunita Gupta, Vikram Singh",createdAt:new Date("2024-10-02T10:00:00.000Z").toISOString()},{id:3,name:"Harish",email:"newacttmis@gmail.com",password:"12345678",role:"ADMIN",department:"Client Management",verified:!0,hasAccess:!0,status:"ACTIVE",clientName:"Anita Desai, Ravi Mehta, Sanjay Joshi",createdAt:new Date("2024-10-03T11:00:00.000Z").toISOString()},{id:4,name:"Dinesh",email:"dinesh@gmail.com",password:"12345678",role:"EMPLOYEE",department:"Processing",verified:!0,hasAccess:!0,status:"ACTIVE",clientName:"Available for Assignment - Ready for New Clients",createdAt:new Date("2024-10-04T12:00:00.000Z").toISOString()},{id:5,name:"Nunciya",email:"tmsnunciya59@gmail.com",password:"12345678",role:"ADMIN",department:"Administration",verified:!0,hasAccess:!0,status:"ACTIVE",clientName:"Deepak Verma",createdAt:new Date("2024-10-05T13:00:00.000Z").toISOString()},{id:6,name:"Admin User",email:"admin@businessloan.com",password:"12345678",role:"ADMIN",department:"Administration",verified:!0,hasAccess:!0,status:"ACTIVE",clientName:"Neha Agarwal, Rohit Sharma",createdAt:new Date("2024-10-06T14:00:00.000Z").toISOString()},{id:7,name:"Admin User",email:"admin@gmail.com",password:"admin123",role:"ADMIN",department:"Administration",verified:!0,hasAccess:!0,status:"ACTIVE",clientName:"Manish Gupta",createdAt:new Date("2024-10-07T15:00:00.000Z").toISOString()}]}static authenticateStaff(s,a){const n=this.getStaff().find(r=>r.email===s);return!n||!n.hasAccess||n.status!=="ACTIVE"||n.password!==a?null:{access_token:`mock-jwt-token-${n.id}-${Date.now()}`,user:{id:n.id,name:n.name,email:n.email,role:n.role}}}static getTransactions(){return[{id:1001,name:"BALAMURUGAN Payment",transactionId:"TXN202410001",amount:5e5,status:"COMPLETED",date:new Date("2024-10-15T10:30:00.000Z").toISOString(),clientName:"BALAMURUGAN",businessType:"Manufacturing",processedBy:"Perivi",createdAt:new Date("2024-10-15T10:30:00.000Z").toISOString(),updatedAt:new Date("2024-10-15T10:30:00.000Z").toISOString()},{id:1002,name:"Rajesh Kumar Payment",transactionId:"TXN202410002",amount:8e5,status:"COMPLETED",date:new Date("2024-10-14T14:20:00.000Z").toISOString(),clientName:"Rajesh Kumar",businessType:"Export",processedBy:"Perivi",createdAt:new Date("2024-10-14T14:20:00.000Z").toISOString(),updatedAt:new Date("2024-10-14T14:20:00.000Z").toISOString()},{id:1003,name:"Manigandan M Payment",transactionId:"TXN202410003",amount:1e6,status:"PENDING",date:new Date("2024-10-13T16:45:00.000Z").toISOString(),clientName:"Manigandan M",businessType:"Manufacturing",processedBy:"Dinesh",createdAt:new Date("2024-10-13T16:45:00.000Z").toISOString(),updatedAt:new Date("2024-10-13T16:45:00.000Z").toISOString()},{id:1004,name:"Poorani Processing Fee",transactionId:"TXN202410004",amount:75e3,status:"COMPLETED",date:new Date("2024-10-12T11:15:00.000Z").toISOString(),clientName:"Poorani",businessType:"Textiles",processedBy:"Harish",createdAt:new Date("2024-10-12T11:15:00.000Z").toISOString(),updatedAt:new Date("2024-10-12T11:15:00.000Z").toISOString()},{id:1005,name:"VIGNESH S Payment",transactionId:"TXN202410005",amount:3e5,status:"PENDING",date:new Date("2024-10-11T09:30:00.000Z").toISOString(),clientName:"VIGNESH S",businessType:"Trading",processedBy:"Venkat",createdAt:new Date("2024-10-11T09:30:00.000Z").toISOString(),updatedAt:new Date("2024-10-11T09:30:00.000Z").toISOString()},{id:1006,name:"Priya Sharma Application Fee",transactionId:"TXN202410006",amount:35e3,status:"COMPLETED",date:new Date("2024-10-10T13:20:00.000Z").toISOString(),clientName:"Priya Sharma",businessType:"Services",processedBy:"Harish",createdAt:new Date("2024-10-10T13:20:00.000Z").toISOString(),updatedAt:new Date("2024-10-10T13:20:00.000Z").toISOString()},{id:1007,name:"Amit Patel Payment",transactionId:"TXN202410007",amount:6e5,status:"FAILED",date:new Date("2024-10-09T15:45:00.000Z").toISOString(),clientName:"Amit Patel",businessType:"Electronics",processedBy:"Dinesh",createdAt:new Date("2024-10-09T15:45:00.000Z").toISOString(),updatedAt:new Date("2024-10-09T15:45:00.000Z").toISOString()},{id:1008,name:"Sunita Gupta Payment",transactionId:"TXN202410008",amount:45e4,status:"PENDING",date:new Date("2024-10-08T12:10:00.000Z").toISOString(),clientName:"Sunita Gupta",businessType:"Fashion",processedBy:"Nunciya",createdAt:new Date("2024-10-08T12:10:00.000Z").toISOString(),updatedAt:new Date("2024-10-08T12:10:00.000Z").toISOString()}]}static getNotifications(){return[{id:"notif_1",type:"NEW_ENQUIRY",title:"New Enquiry Received",message:"New enquiry from BALAMURUGAN (Manufacturing) for 5,00,000 business loan received",priority:"HIGH",read:!1,createdAt:new Date("2024-10-16T10:37:11.406Z").toISOString(),data:{enquiryId:1,clientName:"BALAMURUGAN",loanAmount:5e5,businessType:"Manufacturing"}},{id:"notif_2",type:"DOCUMENT_UPLOADED",title:"Document Uploaded",message:"GST Certificate uploaded by BALAMURUGAN - awaiting verification",priority:"MEDIUM",read:!1,createdAt:new Date("2024-10-16T10:45:00.000Z").toISOString(),data:{documentId:1,clientName:"BALAMURUGAN",documentType:"GST"}},{id:"notif_3",type:"DOCUMENT_VERIFIED",title:"Document Verified",message:"Bank Statement verified for Rajesh Kumar - all documents complete",priority:"MEDIUM",read:!1,createdAt:new Date("2024-10-15T14:20:00.000Z").toISOString(),data:{documentId:19,clientName:"Rajesh Kumar",documentType:"BANK_STATEMENT"}},{id:"notif_4",type:"SHORTLISTED",title:"Client Shortlisted",message:"Manigandan M has been added to shortlist for 10,00,000 loan",priority:"HIGH",read:!1,createdAt:new Date("2024-10-13T15:30:00.000Z").toISOString(),data:{shortlistId:4,clientName:"Manigandan M",loanAmount:1e6}},{id:"notif_5",type:"PAYMENT_APPLIED",title:"Payment Gateway Application",message:"Poorani applied for 7,50,000 loan through payment gateway",priority:"HIGH",read:!1,createdAt:new Date("2024-10-12T14:45:00.000Z").toISOString(),data:{paymentId:4,clientName:"Poorani",loanAmount:75e4}},{id:"notif_6",type:"TRANSACTION_COMPLETED",title:"Transaction Completed",message:"Payment of 5,00,000 completed for BALAMURUGAN",priority:"HIGH",read:!0,createdAt:new Date("2024-10-15T10:30:00.000Z").toISOString(),data:{transactionId:1001,clientName:"BALAMURUGAN",amount:5e5}},{id:"notif_7",type:"STAFF_ADDED",title:"New Staff Member",message:"Dinesh added as EMPLOYEE in Processing department",priority:"LOW",read:!0,createdAt:new Date("2024-10-04T12:00:00.000Z").toISOString(),data:{staffId:4,staffName:"Dinesh",role:"EMPLOYEE"}},{id:"notif_8",type:"NEW_ENQUIRY",title:"New Enquiry Received",message:"New enquiry from Priya Sharma for 3,50,000 services business loan",priority:"HIGH",read:!0,createdAt:new Date("2024-10-09T11:45:30.000Z").toISOString(),data:{enquiryId:8,clientName:"Priya Sharma",loanAmount:35e4,businessType:"Services"}},{id:"notif_9",type:"DOCUMENT_UPLOADED",title:"Document Uploaded",message:"UDYAM Registration uploaded by Amit Patel - pending verification",priority:"MEDIUM",read:!0,createdAt:new Date("2024-10-08T10:20:00.000Z").toISOString(),data:{documentId:24,clientName:"Amit Patel",documentType:"UDYAM"}},{id:"notif_10",type:"PAYMENT_REJECTED",title:"Payment Application Rejected",message:"Sunita Gupta loan application rejected - insufficient business turnover",priority:"MEDIUM",read:!0,createdAt:new Date("2024-10-10T11:20:00.000Z").toISOString(),data:{paymentId:5,clientName:"Sunita Gupta",rejectionReason:"Insufficient business turnover"}}]}static getDashboardStats(){const s=this.getEnquiries(),a=this.getDocuments(),n=this.getShortlist(),i=this.getTransactions(),r=this.getStaff();return{totalEnquiries:s.length,totalDocuments:a.length,verifiedDocuments:a.filter(o=>o.verified).length,totalShortlisted:n.length,totalTransactions:i.length,completedTransactions:i.filter(o=>o.status==="COMPLETED").length,pendingTransactions:i.filter(o=>o.status==="PENDING").length,totalStaff:r.length,activeStaff:r.filter(o=>o.hasAccess).length}}}const El=()=>(console.log(" Using environment variable backend URL:","https://business-loan-backend.onrender.com"),"https://business-loan-backend.onrender.com"),Ts=El();console.log(" [RENDER] Backend URL configured:",Ts);console.log(" [RENDER] Dashboard system ready for deployment - v2.0.0");console.log(" [RENDER] Environment:",{isProd:!0,mode:"production",backendURL:Ts,timestamp:new Date().toISOString()});const tt=Sl.create({baseURL:Ts,timeout:9e4,headers:{"Content-Type":"application/json","Cache-Control":"no-cache",Accept:"application/json","X-Requested-With":"XMLHttpRequest"},withCredentials:!1,validateStatus:t=>t>=200&&t<400||t===401||t===403});tt.interceptors.request.use(t=>{var o,l,d,c,m;const s=`${t.baseURL||window.location.origin}${t.url}`;console.log(" [RENDER] API Request:",{method:(o=t.method)==null?void 0:o.toUpperCase(),url:t.url,baseURL:t.baseURL,fullURL:s,timestamp:new Date().toISOString()});const a=(l=t.url)==null?void 0:l.includes("/api/supabase/"),n=(d=t.url)==null?void 0:d.includes("/api/mock/"),i=(c=t.url)==null?void 0:c.includes("/health"),r=(m=t.url)==null?void 0:m.includes("/api/dashboard");if(!a&&!n&&!i&&!r){const f=localStorage.getItem("token");f?(t.headers.Authorization=`Bearer ${f}`,console.log(" [RENDER] Added auth token to request")):console.log(" [RENDER] No auth token found - using demo mode")}else console.log(" [RENDER] Skipping auth token for endpoint:",t.url);return t},t=>(console.error(" Request interceptor error:",t),Promise.reject(t)));tt.interceptors.response.use(t=>{var s;return console.log(" [RENDER] API Response:",{status:t.status,statusText:t.statusText,url:t.config.url,method:(s=t.config.method)==null?void 0:s.toUpperCase(),dataLength:Array.isArray(t.data)?t.data.length:typeof t.data,timestamp:new Date().toISOString()}),t},t=>{var s,a,n,i,r,o,l,d,c,m,f,h,v,g,y,x,E,w,N,j;if(console.error(" [RENDER] API Error Details:",{message:t.message,code:t.code,status:(s=t.response)==null?void 0:s.status,statusText:(a=t.response)==null?void 0:a.statusText,url:(n=t.config)==null?void 0:n.url,method:(r=(i=t.config)==null?void 0:i.method)==null?void 0:r.toUpperCase(),baseURL:(o=t.config)==null?void 0:o.baseURL,fullURL:`${((l=t.config)==null?void 0:l.baseURL)||""}${((d=t.config)==null?void 0:d.url)||""}`,responseData:(c=t.response)==null?void 0:c.data,timestamp:new Date().toISOString()}),((m=t.response)==null?void 0:m.status)===401){const p=(h=(f=t.config)==null?void 0:f.url)==null?void 0:h.includes("/api/supabase/"),k=(g=(v=t.config)==null?void 0:v.url)==null?void 0:g.includes("/api/mock/"),T=(x=(y=t.config)==null?void 0:y.url)==null?void 0:x.includes("/health");!p&&!k&&!T?(console.log(" Unauthorized access to protected endpoint, redirecting to login"),localStorage.removeItem("token"),window.location.href="/login"):console.log(" 401 error on demo endpoint, not redirecting to login:",(E=t.config)==null?void 0:E.url)}return(t.code==="ECONNREFUSED"||t.message.includes("Network Error")||t.code==="ERR_NETWORK")&&(console.error(" [RENDER] Network Error: Backend server connection failed"),console.error(" [RENDER] Backend URL:",Ts),console.error(" [RENDER] Environment:","Production"),console.error(" [RENDER] Error details:",{code:t.code,message:t.message,config:{url:(w=t.config)==null?void 0:w.url,method:(N=t.config)==null?void 0:N.method,timeout:(j=t.config)==null?void 0:j.timeout}}),console.error(" [RENDER] Production backend connection failed."),console.error(" [RENDER] Possible causes:"),console.error("   - Render service is cold starting (wait 30-60 seconds)"),console.error("   - Backend deployment failed"),console.error("   - Network connectivity issues")),Promise.reject(t)});const U={...tt,async get(t,s){try{console.log(" [RENDER] GET request to:",t);const a=await tt.get(t,s);return console.log(" [RENDER] GET success for:",t,"- Data length:",Array.isArray(a.data)?a.data.length:typeof a.data),a}catch(a){if(console.error(" [RENDER] GET failed for:",t,"- Error:",a.message),a.code==="ECONNREFUSED"||a.message.includes("Network Error")||a.code==="ERR_NETWORK")return console.log(" [RENDER] Backend not available, using mock data for:",t),this.getMockData(t);throw a}},async post(t,s,a){var o,l;let i;for(let d=1;d<=3;d++)try{console.log(` [RENDER] POST attempt ${d}/3 for:`,t);const c=await tt.post(t,s,a);return console.log(` [RENDER] POST successful on attempt ${d}`),c}catch(c){if(i=c,console.log(` [RENDER] POST attempt ${d} failed:`,c.message),t.includes("/auth/login")&&(((o=c.response)==null?void 0:o.status)===403||((l=c.response)==null?void 0:l.status)===401)){console.log(" [RENDER] Trying alternative auth endpoints...");try{if(!t.includes("force-fresh-login")){const m=await tt.post("/api/auth/force-fresh-login",s,a);return console.log(" [RENDER] Alternative auth successful"),m}}catch(m){console.log(" [RENDER] Alternative auth also failed:",m.message)}}if(d<3){const m=Math.min(1e3*Math.pow(2,d-1),8e3);console.log(` [RENDER] Waiting ${m}ms before retry...`),await new Promise(f=>setTimeout(f,m))}}if((i==null?void 0:i.code)==="ECONNREFUSED"||(i==null?void 0:i.message.includes("Network Error"))||(i==null?void 0:i.code)==="ERR_NETWORK")return console.log(" [RENDER] All retries failed, using mock authentication for:",t),this.getMockPostData(t,s);throw i},async put(t,s,a){try{return await tt.put(t,s,a)}catch(n){if(n.code==="ECONNREFUSED"||n.message.includes("Network Error")||n.code==="ERR_NETWORK")return console.log(" [RENDER] Backend not available, using mock response for PUT:",t),{status:200,statusText:"OK",config:{url:t},data:{message:"Updated successfully",...s}};throw n}},async patch(t,s,a){try{return await tt.patch(t,s,a)}catch(n){if(n.code==="ECONNREFUSED"||n.message.includes("Network Error"))return console.log(" Backend not available, using mock response for PATCH:",t),{status:200,statusText:"OK",config:{url:t},data:{message:"Updated successfully",...s}};throw n}},async delete(t,s){try{return await tt.delete(t,s)}catch(a){if(a.code==="ECONNREFUSED"||a.message.includes("Network Error"))return console.log(" Backend not available, using mock response for DELETE:",t),{status:200,statusText:"OK",config:{url:t},data:{message:"Deleted successfully"}};throw a}},getMockData(t){const s={status:200,statusText:"OK",config:{url:t}};if(t.includes("/api/enquiries"))return{...s,data:Pe.getEnquiries()};if(t.includes("/api/documents")){if(t.includes("/enquiry/")){const a=parseInt(t.split("/enquiry/")[1]),n=Pe.getDocuments().filter(i=>i.enquiryId===a);return{...s,data:n}}return{...s,data:Pe.getDocuments()}}if(t.includes("/api/shortlist"))return{...s,data:Pe.getShortlist()};if(t.includes("/api/cashfree"))return{...s,data:Pe.getPaymentGateway()};if(t.includes("/api/staff")){if(t.includes("/stats")){const a=Pe.getDashboardStats();return{...s,data:{totalStaff:a.totalStaff,activeStaff:a.activeStaff}}}return{...s,data:{staff:Pe.getStaff()}}}if(t.includes("/api/transactions"))return{...s,data:Pe.getTransactions()};if(t.includes("/api/notifications")){if(t.includes("/count")){const a=Pe.getNotifications();return{...s,data:{unreadCount:a.filter(n=>!n.read).length}}}return{...s,data:{notifications:Pe.getNotifications(),count:Pe.getNotifications().length}}}return t.includes("/dashboard")||t.includes("/stats")?{...s,data:Pe.getDashboardStats()}:(console.warn(" No mock data available for:",t),{...s,data:[]})},getMockPostData(t,s){const a={status:200,statusText:"OK",config:{url:t}};if(t.includes("/api/auth/login")){if(console.log(" Mock authentication attempt for:",s==null?void 0:s.email),!(s!=null&&s.email)||!(s!=null&&s.password))throw new Error("Email and password are required");const n=Pe.authenticateStaff(s.email,s.password);if(!n){const i=new Error("Invalid credentials");throw i.response={status:403,data:{message:"Invalid credentials"}},i}return console.log(" Mock authentication successful for:",n.user.name),{...a,data:n}}if(t.includes("/api/enquiries")){const n={id:Date.now(),...s,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return{...a,data:n}}return console.log(" Mock POST response for:",t),{...a,data:{message:"Success",...s}}}},li=u.createContext(void 0),Al=({children:t})=>{const[s,a]=u.useState(null),[n,i]=u.useState(!1),[r,o]=u.useState(!0);u.useEffect(()=>{localStorage.getItem("token")?l():o(!1)},[]);const l=async()=>{try{const f=localStorage.getItem("user");if(f&&f!=="undefined"&&f!=="null")try{const h=JSON.parse(f);if(h&&h.id)a(h),i(!0);else throw new Error("Invalid user data")}catch(h){console.error(" Error parsing stored user data:",h),localStorage.removeItem("token"),localStorage.removeItem("user"),a(null),i(!1)}else a(null),i(!1)}catch(f){console.error(" Error in fetchUserProfile:",f),localStorage.removeItem("token"),localStorage.removeItem("user"),a(null),i(!1)}finally{o(!1)}},d=async f=>{var h,v,g,y;try{console.log(" [VERCEL] Attempting staff login with:",f.email);let x,E;try{x=await U.post("/api/auth/login",f),E=x.data,console.log(" [VERCEL] Primary auth successful")}catch(w){console.log(" [VERCEL] Primary auth failed, trying force-fresh-login:",w.message);try{x=await U.post("/api/auth/force-fresh-login",f),E=x.data,console.log(" [VERCEL] Force-fresh-login successful")}catch(N){console.log(" [VERCEL] Force-fresh-login failed, trying staff test endpoint:",N.message);const j=await U.post("/api/staff/test/deployment-login",{email:f.email,password:f.password});if(j.data.success&&j.data.staff)E={access_token:"deployment-test-token-"+Date.now(),user:{id:j.data.staff.id,name:j.data.staff.name,email:j.data.staff.email,role:j.data.staff.role}},console.log(" [VERCEL] Staff test endpoint successful");else throw new Error("All authentication methods failed")}}if(E.access_token&&E.user){console.log(" [VERCEL] Login successful:",E.user.name,"Role:",E.user.role),localStorage.setItem("token",E.access_token),localStorage.setItem("user",JSON.stringify(E.user)),localStorage.setItem("auth-timestamp",Date.now().toString()),localStorage.setItem("deployment-env","vercel"),a(E.user),i(!0),F.success(` Login successful! Welcome ${E.user.name} (${E.user.role})`);return}else throw new Error("Invalid response from server")}catch(x){if(console.error(" [VERCEL] Login error:",x),((h=x.response)==null?void 0:h.status)===403)F.error(" Invalid credentials. Try: gowthaamankrishna1998@gmail.com / 12345678");else if(((v=x.response)==null?void 0:v.status)===500){F.error(" Server error on Vercel. Retrying with backup auth...");try{await(void 0).forceFreshLogin(f);return}catch{F.error(" All authentication methods failed. Please contact support.")}}else x.message.includes("Network Error")?F.error(" Network error. Check connection and try again."):F.error(` ${((y=(g=x.response)==null?void 0:g.data)==null?void 0:y.message)||x.message||"Login failed on Vercel deployment"}`);throw x}},c=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),a(null),i(!1),F.success("Logged out successfully")},m=async f=>{try{console.log(" Force fresh login for:",f.email),localStorage.removeItem("token"),localStorage.removeItem("user"),a(null),i(!1);const v=(await U.post("/api/auth/force-fresh-login",f)).data;if(v.access_token)localStorage.setItem("token",v.access_token),localStorage.setItem("user",JSON.stringify(v.user)),a(v.user),i(!0),console.log(" Force fresh login successful:",v.user),F.success(`Fresh login successful! Welcome ${v.user.name} (${v.user.role})`);else throw new Error(v.message||"Fresh login failed")}catch(h){throw console.error(" Force fresh login error:",h),F.error(h.message||"Fresh login failed"),h}};return e.jsx(li.Provider,{value:{user:s,login:d,logout:c,isAuthenticated:n,loading:r,forceFreshLogin:m},children:t})},Fe=()=>{const t=u.useContext(li);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},ga=()=>{const{user:t}=Fe(),s=(t==null?void 0:t.email)==="admin@gmail.com",a=(t==null?void 0:t.role)==="ADMIN";return{canManageStaff:s,canCreateStaff:s,canDeleteStaff:s,canModifyStaff:s,canViewStaffList:s,canViewAllData:s,isAdmin:a,isSuperAdmin:s}},kl=(t,s,a,n)=>{var r,o,l,d;const i=[a,{code:s,...n||{}}];if((o=(r=t==null?void 0:t.services)==null?void 0:r.logger)!=null&&o.forward)return t.services.logger.forward(i,"warn","react-i18next::",!0);pt(i[0])&&(i[0]=`react-i18next:: ${i[0]}`),(d=(l=t==null?void 0:t.services)==null?void 0:l.logger)!=null&&d.warn?t.services.logger.warn(...i):console!=null&&console.warn&&console.warn(...i)},Ha={},ea=(t,s,a,n)=>{pt(a)&&Ha[a]||(pt(a)&&(Ha[a]=new Date),kl(t,s,a,n))},ci=(t,s)=>()=>{if(t.isInitialized)s();else{const a=()=>{setTimeout(()=>{t.off("initialized",a)},0),s()};t.on("initialized",a)}},ta=(t,s,a)=>{t.loadNamespaces(s,ci(t,a))},Ga=(t,s,a,n)=>{if(pt(a)&&(a=[a]),t.options.preload&&t.options.preload.indexOf(s)>-1)return ta(t,a,n);a.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(s,ci(t,n))},Tl=(t,s,a={})=>!s.languages||!s.languages.length?(ea(s,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:s.languages}),!0):s.hasLoadedNamespace(t,{lng:a.lng,precheck:(n,i)=>{if(a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!i(n.isLanguageChangingTo,t))return!1}}),pt=t=>typeof t=="string",Dl=t=>typeof t=="object"&&t!==null,Cl=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Rl={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},Il=t=>Rl[t],Ll=t=>t.replace(Cl,Il);let sa={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Ll};const Ol=(t={})=>{sa={...sa,...t}},Pl=()=>sa;let di;const Ml=t=>{di=t},Fl=()=>di,$l={type:"3rdParty",init(t){Ol(t.options.react),Ml(t)}},ql=u.createContext();class Ul{constructor(){this.usedNamespaces={}}addUsedNamespaces(s){s.forEach(a=>{this.usedNamespaces[a]||(this.usedNamespaces[a]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Vl=(t,s)=>{const a=u.useRef();return u.useEffect(()=>{a.current=s?a.current:t},[t,s]),a.current},ui=(t,s,a,n)=>t.getFixedT(s,a,n),Bl=(t,s,a,n)=>u.useCallback(ui(t,s,a,n),[t,s,a,n]),Ds=(t,s={})=>{var j,p,k,T;const{i18n:a}=s,{i18n:n,defaultNS:i}=u.useContext(ql)||{},r=a||n||Fl();if(r&&!r.reportNamespaces&&(r.reportNamespaces=new Ul),!r){ea(r,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const C=(R,q)=>pt(q)?q:Dl(q)&&pt(q.defaultValue)?q.defaultValue:Array.isArray(R)?R[R.length-1]:R,A=[C,{},!1];return A.t=C,A.i18n={},A.ready=!1,A}(j=r.options.react)!=null&&j.wait&&ea(r,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o={...Pl(),...r.options.react,...s},{useSuspense:l,keyPrefix:d}=o;let c=t||i||((p=r.options)==null?void 0:p.defaultNS);c=pt(c)?[c]:c||["translation"],(T=(k=r.reportNamespaces).addUsedNamespaces)==null||T.call(k,c);const m=(r.isInitialized||r.initializedStoreOnce)&&c.every(C=>Tl(C,r,o)),f=Bl(r,s.lng||null,o.nsMode==="fallback"?c:c[0],d),h=()=>f,v=()=>ui(r,s.lng||null,o.nsMode==="fallback"?c:c[0],d),[g,y]=u.useState(h);let x=c.join();s.lng&&(x=`${s.lng}${x}`);const E=Vl(x),w=u.useRef(!0);u.useEffect(()=>{const{bindI18n:C,bindI18nStore:A}=o;w.current=!0,!m&&!l&&(s.lng?Ga(r,s.lng,c,()=>{w.current&&y(v)}):ta(r,c,()=>{w.current&&y(v)})),m&&E&&E!==x&&w.current&&y(v);const R=()=>{w.current&&y(v)};return C&&(r==null||r.on(C,R)),A&&(r==null||r.store.on(A,R)),()=>{w.current=!1,r&&C&&(C==null||C.split(" ").forEach(q=>r.off(q,R))),A&&r&&A.split(" ").forEach(q=>r.store.off(q,R))}},[r,x]),u.useEffect(()=>{w.current&&m&&y(h)},[r,d,m]);const N=[g,r,m];if(N.t=g,N.i18n=r,N.ready=m,m||!m&&!l)return N;throw new Promise(C=>{s.lng?Ga(r,s.lng,c,()=>C()):ta(r,c,()=>C())})};function _l({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m20.25 7.5-.625 10.632a2.25 2.25 0 0 1-2.247 2.118H6.622a2.25 2.25 0 0 1-2.247-2.118L3.75 7.5M10 11.25h4M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125Z"}))}const Hl=u.forwardRef(_l),Wa=Hl;function Gl({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))}const Wl=u.forwardRef(Gl),mi=Wl;function Zl({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const Ql=u.forwardRef(Zl),Et=Ql;function zl({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const Kl=u.forwardRef(zl),ls=Kl;function Yl({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const Jl=u.forwardRef(Yl),hi=Jl;function Xl({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"}))}const ec=u.forwardRef(Xl),tc=ec;function sc({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const ac=u.forwardRef(sc),aa=ac;function nc({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}const ic=u.forwardRef(nc),fi=ic;function rc({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"}))}const oc=u.forwardRef(rc),lc=oc;function cc({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"}))}const dc=u.forwardRef(cc),uc=dc;function mc({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"}))}const hc=u.forwardRef(mc),fc=hc;function pc({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"}))}const xc=u.forwardRef(pc),qs=xc;function gc({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const yc=u.forwardRef(gc),Cs=yc;function bc({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const Nc=u.forwardRef(bc),wc=Nc;function vc({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const jc=u.forwardRef(vc),cs=jc;function Sc({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const Ec=u.forwardRef(Sc),pi=Ec;function Ac({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const kc=u.forwardRef(Ac),ke=kc;function Tc({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const Dc=u.forwardRef(Tc),ds=Dc;function Cc({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const Rc=u.forwardRef(Cc),Ic=Rc;function Lc({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"}))}const Oc=u.forwardRef(Lc),Pc=Oc;function Mc({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Fc=u.forwardRef(Mc),Gt=Fc;function $c({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const qc=u.forwardRef($c),na=qc;function Uc({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h9v9h-9v-9Z"}))}const Vc=u.forwardRef(Uc),Bc=Vc;function _c({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const Hc=u.forwardRef(_c),xi=Hc;function Gc({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 8.25H9m6 3H9m3 6-3-3h1.5a3 3 0 1 0 0-6M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Wc=u.forwardRef(Gc),ns=Wc;function Zc({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Qc=u.forwardRef(Zc),gi=Qc;function zc({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 0 1 9 9v.375M10.125 2.25A3.375 3.375 0 0 1 13.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 0 1 3.375 3.375M9 15l2.25 2.25L15 12"}))}const Kc=u.forwardRef(zc),Us=Kc;function Yc({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Jc=u.forwardRef(Yc),ht=Jc;function Xc({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const ed=u.forwardRef(Xc),ct=ed;function td({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const sd=u.forwardRef(td),ad=sd;function nd({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const id=u.forwardRef(nd),us=id;function rd({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const od=u.forwardRef(rd),Le=od;function ld({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z"}))}const cd=u.forwardRef(ld),dd=cd;function ud({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const md=u.forwardRef(ud),hd=md;function fd({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const pd=u.forwardRef(fd),xd=pd;function gd({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const yd=u.forwardRef(gd),bd=yd;function Nd({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const wd=u.forwardRef(Nd),vd=wd;function jd({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Sd=u.forwardRef(jd),Ed=Sd;function Ad({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const kd=u.forwardRef(Ad),At=kd;function Td({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 0 0-5.78 1.128 2.25 2.25 0 0 1-2.4 2.245 4.5 4.5 0 0 0 8.4-2.245c0-.399-.078-.78-.22-1.128Zm0 0a15.998 15.998 0 0 0 3.388-1.62m-5.043-.025a15.994 15.994 0 0 1 1.622-3.395m3.42 3.42a15.995 15.995 0 0 0 4.764-4.648l3.876-5.814a1.151 1.151 0 0 0-1.597-1.597L14.146 6.32a15.996 15.996 0 0 0-4.649 4.763m3.42 3.42a6.776 6.776 0 0 0-3.42-3.42"}))}const Dd=u.forwardRef(Td),Cd=Dd;function Rd({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const Id=u.forwardRef(Rd),Ld=Id;function Od({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const Pd=u.forwardRef(Od),at=Pd;function Md({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const Fd=u.forwardRef(Md),$d=Fd;function qd({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Ud=u.forwardRef(qd),xt=Ud;function Vd({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const Bd=u.forwardRef(Vd),kt=Bd;function _d({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const Hd=u.forwardRef(_d),Gd=Hd;function Wd({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const Zd=u.forwardRef(Wd),Vs=Zd;function Qd({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))}const zd=u.forwardRef(Qd),Kd=zd;function Yd({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const Jd=u.forwardRef(Yd),dt=Jd;function Xd({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const eu=u.forwardRef(Xd),Za=eu;function tu({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const su=u.forwardRef(tu),yi=su;function au({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const nu=u.forwardRef(au),Pt=nu;function iu({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const ru=u.forwardRef(iu),it=ru;function ou({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const lu=u.forwardRef(ou),gt=lu;function cu({title:t,titleId:s,...a},n){return u.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":s},a),t?u.createElement("title",{id:s},t):null,u.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const du=u.forwardRef(cu),Be=du;function uu(){var l;const{user:t,logout:s}=Fe(),{t:a}=Ds(),{canManageStaff:n,isSuperAdmin:i}=ga(),r=(t==null?void 0:t.role)==="ADMIN",o=[{name:a("sidebar.dashboard"),href:"/dashboard",icon:bd,show:!0},{name:a("sidebar.enquiries"),href:"/enquiries",icon:ht,show:!0},{name:a("sidebar.docVerification"),href:"/documents",icon:hd,show:!0},{name:a("sidebar.shortlist"),href:"/shortlist",icon:Ed,show:!0},{name:a("sidebar.paymentGateway"),href:"/payment-gateway",icon:xi,show:!0},{name:a("sidebar.staffManagement"),href:"/staff",icon:yi,show:n},{name:a("sidebar.transactions"),href:"/transactions",icon:fc,show:r}];return e.jsxs("aside",{className:"sidebar-modern",children:[e.jsx("div",{className:"p-8 border-b border-slate-700/50",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:"/generated-image.png",alt:"Company Logo",className:"w-20 h-20 object-contain drop-shadow-2xl hover:scale-110 transition-transform duration-300",style:{filter:"contrast(2.2) saturate(2.0) brightness(1.8)",imageRendering:"crisp-edges",maxWidth:"100%",maxHeight:"100%"}})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-white text-xl font-poppins font-bold",children:"Portal"}),e.jsx("p",{className:"text-slate-300 text-sm font-medium",children:a("header.title")})]})]})}),e.jsx("nav",{className:"py-6",children:e.jsx("ul",{className:"space-y-1",children:o.filter(d=>d.show).map(d=>e.jsx("li",{children:e.jsxs(Zi,{to:d.href,className:({isActive:c})=>`sidebar-nav-item ${c?"active":""}`,children:[e.jsx(d.icon,{className:"h-5 w-5 mr-4"}),e.jsx("span",{className:"font-medium",children:d.name})]})},d.name))})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 border-t border-slate-700/50 bg-slate-900/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-semibold text-white",children:((l=t==null?void 0:t.name)==null?void 0:l.charAt(0))||"U"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-white truncate",children:t==null?void 0:t.name}),e.jsx("div",{className:"text-slate-400 text-sm",children:t==null?void 0:t.role})]})]}),e.jsxs("button",{onClick:s,className:"flex items-center w-full px-4 py-3 text-slate-300 hover:text-white hover:bg-red-500/20 hover:border-red-400 rounded-xl transition-all duration-200 border border-slate-700 hover:border-red-400",children:[e.jsx(hi,{className:"h-5 w-5 mr-3"}),e.jsx("span",{className:"font-medium",children:"Logout"})]})]})]})}const mu=()=>({t:(t,s)=>s||t,i18n:{language:"en",changeLanguage:t=>Promise.resolve()}});function hu({isOpen:t,onClose:s}){const{t:a,i18n:n}=mu(),{user:i}=Fe(),[r,o]=u.useState("profile"),[l,d]=u.useState(!1),[c,m]=u.useState({name:(i==null?void 0:i.name)||"",email:(i==null?void 0:i.email)||"",currentPassword:"",newPassword:"",confirmPassword:"",notifications:{email:!0,push:!0,sms:!1,marketing:!1},theme:"light",language:n.language}),f=[{id:"profile",name:a("header.profile","Profile Settings"),icon:it,color:"text-blue-600 bg-blue-50"},{id:"notifications",name:a("header.notifications","Notification Settings"),icon:Cs,color:"text-green-600 bg-green-50"},{id:"security",name:a("header.security","Security"),icon:kt,color:"text-red-600 bg-red-50"},{id:"preferences",name:a("header.preferences","Preferences"),icon:na,color:"text-purple-600 bg-purple-50"}],h=(j,p)=>{m(k=>({...k,[j]:p}))},v=(j,p)=>{m(k=>({...k,notifications:{...k.notifications,[j]:p}}))},g=()=>{F.success("Settings saved successfully!"),setTimeout(()=>{s()},1e3)},y=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Profile Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",value:c.name,onChange:j=>h("name",j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your full name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:c.email,onChange:j=>h("email",j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-600",children:(i==null?void 0:i.role)||"Not specified"})]})]})]})}),x=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Notification Preferences"}),e.jsx("div",{className:"space-y-4",children:Object.entries(c.notifications).map(([j,p])=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900 capitalize",children:[j," Notifications"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Receive ",j," notifications for important updates"]})]}),e.jsx("button",{onClick:()=>v(j,!p),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${p?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${p?"translate-x-6":"translate-x-1"}`})})]},j))})]})}),E=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Change Password"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:l?"text":"password",value:c.currentPassword,onChange:j=>h("currentPassword",j.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter current password"}),e.jsx("button",{type:"button",onClick:()=>d(!l),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:l?e.jsx(us,{className:"h-5 w-5 text-gray-400"}):e.jsx(Le,{className:"h-5 w-5 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsx("input",{type:l?"text":"password",value:c.newPassword,onChange:j=>h("newPassword",j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter new password"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),e.jsx("input",{type:l?"text":"password",value:c.confirmPassword,onChange:j=>h("confirmPassword",j.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirm new password"})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Security Options"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(vd,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Two-Factor Authentication"})]}),e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:"Coming Soon"})]})})]})]}),w=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Application Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Language"}),e.jsxs("select",{value:c.language,onChange:j=>{h("language",j.target.value),n.changeLanguage(j.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"hi",children:" (Hindi)"}),e.jsx("option",{value:"ta",children:" (Tamil)"}),e.jsx("option",{value:"te",children:" (Telugu)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theme"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:["light","dark"].map(j=>e.jsxs("button",{onClick:()=>h("theme",j),className:`p-3 border-2 rounded-lg flex items-center justify-center space-x-2 transition-colors ${c.theme===j?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(Cd,{className:"h-4 w-4"}),e.jsx("span",{className:"capitalize",children:j}),c.theme===j&&e.jsx(ds,{className:"h-4 w-4 text-blue-600"})]},j))})]})]})]})}),N=()=>{switch(r){case"profile":return y();case"notifications":return x();case"security":return E();case"preferences":return w();default:return y()}};return e.jsx(ys,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx(V.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:s}),e.jsx(V.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Be,{className:"h-6 w-6 text-gray-500"})})]}),e.jsxs("div",{className:"flex h-[calc(90vh-8rem)]",children:[e.jsx("div",{className:"w-64 bg-gray-50 border-r border-gray-200 p-4",children:e.jsx("nav",{className:"space-y-2",children:f.map(j=>{const p=j.icon;return e.jsxs("button",{onClick:()=>o(j.id),className:`w-full flex items-center space-x-3 px-3 py-3 rounded-lg text-left transition-colors ${r===j.id?"bg-white shadow-sm border border-gray-200":"hover:bg-white hover:bg-opacity-50"}`,children:[e.jsx("div",{className:`p-2 rounded-lg ${j.color}`,children:e.jsx(p,{className:"h-4 w-4"})}),e.jsx("span",{className:"font-medium text-gray-900",children:j.name})]},j.id)})})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-6",children:N()})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:g,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})})]})})}const bi=u.createContext(void 0),Ni=()=>{const t=u.useContext(bi);if(t===void 0)throw new Error("useNotifications must be used within a NotificationProvider");return t},fu=({children:t})=>{const[s,a]=u.useState([]),[n,i]=u.useState(0),r=Ce(),{data:o,isLoading:l,refetch:d}=ue("global-notifications",async()=>{try{console.log(" Fetching notifications from /api/notifications...");const g=await U.get("/api/notifications");return console.log(" Notifications response:",g.data),g.data}catch(g){return console.error(" Failed to fetch notifications:",g),g.response&&(console.error(" Response status:",g.response.status),console.error(" Response data:",g.response.data)),{notifications:[],count:0}}},{refetchInterval:1e4,refetchOnWindowFocus:!0,refetchIntervalInBackground:!1,refetchOnMount:!0,retry:3,staleTime:0,cacheTime:5*60*1e3,onError:g=>{console.error(" Notifications query error:",g)},onSuccess:g=>{var y;console.log(" Notifications query success:",((y=g==null?void 0:g.notifications)==null?void 0:y.length)||0,"notifications"),console.log(" Full response data structure:",{hasNotifications:!!(g!=null&&g.notifications),isArray:Array.isArray(g==null?void 0:g.notifications),count:g==null?void 0:g.count,message:g==null?void 0:g.message}),g!=null&&g.notifications&&g.notifications.length>0&&(console.log(" Sample notification:",g.notifications[0]),console.log(" All notification IDs:",g.notifications.map(x=>x.id)))}}),{data:c}=ue("global-notification-count",async()=>{try{console.log(" Fetching notification count from /api/notifications/count...");const g=await U.get("/api/notifications/count");return console.log(" Count response:",g.data),g.data}catch(g){return console.error(" Failed to fetch notification count:",g),{unreadCount:0}}},{refetchInterval:1e4,refetchOnWindowFocus:!0,refetchIntervalInBackground:!1,refetchOnMount:!0,retry:3,staleTime:0,cacheTime:5*60*1e3,onError:g=>{console.error(" Notification count query error:",g)},onSuccess:g=>{console.log(" Notification count query success:",(g==null?void 0:g.unreadCount)||0),console.log(" Count data structure:",g)}});u.useEffect(()=>{console.log(" NotificationsData changed:",o),console.log(" Type of notificationsData:",typeof o),console.log(" Is array:",Array.isArray(o)),o!=null&&o.notifications&&Array.isArray(o.notifications)?(console.log(" Updating notifications state with",o.notifications.length,"notifications"),console.log(" First notification:",o.notifications[0]),console.log(" All notification IDs:",o.notifications.map(g=>g.id)),a(o.notifications)):o?(console.log(" No notifications array in response, setting empty array"),console.log(" Response structure:",o),console.log(" Response keys:",Object.keys(o)),a([])):(console.log(" No notificationsData at all"),a([]))},[o]),u.useEffect(()=>{console.log(" CountData changed:",c),(c==null?void 0:c.unreadCount)!==void 0?(console.log(" Updating unread count to:",c.unreadCount),i(c.unreadCount)):console.log(" No unreadCount in countData")},[c]);const v={notifications:s,unreadCount:n,markAsRead:async g=>{try{await U.patch(`/api/notifications/${g}/read`),a(y=>y.map(x=>x.id===g?{...x,read:!0}:x)),i(y=>Math.max(0,y-1)),r.invalidateQueries("global-notifications"),r.invalidateQueries("global-notification-count")}catch(y){console.error("Failed to mark notification as read:",y)}},markAllAsRead:async()=>{try{await U.patch("/api/notifications/mark-all-read"),a(g=>g.map(y=>({...y,read:!0}))),i(0),r.invalidateQueries("global-notifications"),r.invalidateQueries("global-notification-count")}catch(g){console.error("Failed to mark all notifications as read:",g)}},refreshNotifications:()=>{console.log(" Manual refresh triggered - invalidating queries"),r.invalidateQueries("global-notifications"),r.invalidateQueries("global-notification-count"),d()},isLoading:l};return e.jsx(bi.Provider,{value:v,children:t})},pu=({isOpen:t,onClose:s})=>{const a=He(),{notifications:n,unreadCount:i,markAsRead:r,markAllAsRead:o,refreshNotifications:l}=Ni(),[d,c]=u.useState("all"),m=[{id:"sample_1",type:"NEW_ENQUIRY",title:"New Client Application",message:"New loan application from BALAMURUGAN (BALAMURUGAN)",createdAt:new Date(Date.now()-24*60*60*1e3).toISOString(),read:!1,archived:!1,priority:"HIGH"},{id:"sample_2",type:"DOCUMENT_VERIFIED",title:"Document Verified",message:"UDYAM REGISTRATION verified for priyakamaldkp",createdAt:new Date(Date.now()-2*24*60*60*1e3).toISOString(),read:!1,archived:!1,priority:"MEDIUM"},{id:"sample_3",type:"DOCUMENT_VERIFIED",title:"Document Verified",message:"BANK STATEMENT verified for priyakamaldkp",createdAt:new Date(Date.now()-2*24*60*60*1e3).toISOString(),read:!1,archived:!1,priority:"MEDIUM"},{id:"sample_4",type:"PAYMENT_APPLIED",title:"Payment Application Submitted",message:"Payment gateway application completed for RAJESH KUMAR",createdAt:new Date(Date.now()-3*24*60*60*1e3).toISOString(),read:!0,archived:!0,priority:"LOW"}];console.log(" NotificationPanel - notifications from context:",n),console.log(" NotificationPanel - notifications length:",n==null?void 0:n.length),console.log(" NotificationPanel - unreadCount:",i);const f=n&&n.length>0?n:m,h=d==="all"?f.filter(w=>!w.archived||w.archived===void 0):f.filter(w=>w.archived===!0),v=async(w,N)=>{N.stopPropagation();try{console.log(` Deleting notification: ${w}`),await U.delete(`/api/notifications/${w}`),await l(),F.success("Notification deleted successfully")}catch(j){console.error(" Failed to delete notification:",j),F.error("Failed to delete notification")}},g=async(w,N)=>{N.stopPropagation();try{console.log(` Archiving notification: ${w}`),await U.patch(`/api/notifications/${w}/archive`),await l(),F.success("Notification archived successfully")}catch(j){console.error(" Failed to archive notification:",j),F.error("Failed to archive notification")}},y=async(w,N)=>{N.stopPropagation();try{console.log(` Unarchiving notification: ${w}`),await U.patch(`/api/notifications/${w}/unarchive`),await l(),F.success("Notification restored successfully")}catch(j){console.error(" Failed to unarchive notification:",j),F.error("Failed to restore notification")}};console.log(" NotificationPanel - displayNotifications:",h),console.log(" NotificationPanel - displayNotifications length:",h==null?void 0:h.length),be.useEffect(()=>{t&&(console.log(" Notification panel opened, refreshing..."),console.log(" Current notifications in context:",n),l())},[t,l]);const x=w=>{const N=new Date,j=new Date(w),p=Math.floor((N.getTime()-j.getTime())/(1e3*60));let k="";if(p<1)k="Just now";else if(p<60)k=`${p}m ago`;else if(p<1440)k=`${Math.floor(p/60)}h ago`;else{const C=Math.floor(p/1440);C===1?k="1d ago":C<7?k=`${C}d ago`:k=j.toLocaleDateString("en-IN",{day:"numeric",month:"short"})}const T=j.toLocaleString("en-IN",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:"Asia/Kolkata"});return{relativeTime:k,fullTime:T}},E=async w=>{switch(await r(w.id),w.type){case"NEW_ENQUIRY":case"STATUS_UPDATED":case"ENQUIRY_ASSIGNED":case"ENQUIRY_COMPLETED":case"LOAN_APPROVED":case"LOAN_REJECTED":a("/enquiries");break;case"DOCUMENT_UPLOADED":case"DOCUMENT_VERIFIED":a("/documents");break;case"SHORTLISTED":a("/shortlist");break;case"PAYMENT_APPLIED":a("/payment-gateway");break;case"STAFF_ADDED":a("/staff");break;case"TRANSACTION_COMPLETED":a("/transactions");break}s()};return e.jsx(ys,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx(V.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-30 z-[9998]",onClick:s}),e.jsxs(V.div,{initial:{x:"100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"100%",opacity:0},transition:{type:"spring",damping:25,stiffness:400},className:"fixed right-4 top-16 w-[400px] bg-white shadow-2xl z-[9999] rounded-2xl border border-gray-200 overflow-hidden",style:{maxHeight:"calc(100vh - 80px)",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Notifications"}),i>0&&e.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded-full",children:i})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[i>0&&e.jsx("button",{onClick:o,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Mark all as read"}),e.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 p-1 rounded-lg hover:bg-gray-100 transition-all duration-200",children:e.jsx(Be,{className:"h-5 w-5"})})]})]}),e.jsxs("div",{className:"flex border-b border-gray-100 bg-gray-50",children:[e.jsxs("button",{onClick:()=>c("all"),className:`flex-1 px-4 py-3 text-sm font-medium relative ${d==="all"?"text-gray-900 bg-white border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700"}`,children:["All",d==="all"&&i>0&&e.jsx("span",{className:"ml-2 bg-gray-900 text-white text-xs font-medium px-2 py-0.5 rounded-full",children:i})]}),e.jsxs("button",{onClick:()=>c("archived"),className:`flex-1 px-4 py-3 text-sm font-medium ${d==="archived"?"text-gray-900 bg-white border-b-2 border-blue-500":"text-gray-500 hover:text-gray-700"}`,children:[e.jsx(Wa,{className:"h-4 w-4 inline mr-1"}),"Archived",d==="archived"&&f.filter(w=>w.archived===!0).length>0&&e.jsx("span",{className:"ml-2 bg-gray-500 text-white text-xs font-medium px-2 py-0.5 rounded-full",children:f.filter(w=>w.archived===!0).length})]}),e.jsx("button",{onClick:l,className:"p-3 text-gray-400 hover:text-gray-600 hover:bg-gray-100 transition-colors",title:"Refresh notifications",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-white",children:h&&h.length>0?e.jsx("div",{className:"divide-y divide-gray-100",children:h.map((w,N)=>{const j=x(w.createdAt),k=(T=>{switch(T){case"NEW_ENQUIRY":return{icon:"",color:"text-red-500",bgColor:"bg-red-50"};case"DOCUMENT_UPLOADED":case"DOCUMENT_VERIFIED":return{icon:"",color:"text-blue-500",bgColor:"bg-blue-50"};case"SHORTLISTED":return{icon:"$",color:"text-green-500",bgColor:"bg-green-50"};case"PAYMENT_APPLIED":return{icon:"",color:"text-purple-500",bgColor:"bg-purple-50"};case"STAFF_ADDED":return{icon:"",color:"text-blue-500",bgColor:"bg-blue-50"};case"LOAN_APPROVED":return{icon:"",color:"text-green-500",bgColor:"bg-green-50"};case"LOAN_REJECTED":return{icon:"",color:"text-red-500",bgColor:"bg-red-50"};default:return{icon:"",color:"text-gray-500",bgColor:"bg-gray-50"}}})(w.type);return e.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:N*.1},className:`p-4 hover:bg-gray-50 cursor-pointer transition-all duration-200 ${w.read?"":"bg-blue-50/30"}`,onClick:()=>E(w),children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`flex-shrink-0 w-10 h-10 ${k.bgColor} rounded-full flex items-center justify-center`,children:e.jsx("span",{className:"text-lg",children:k.icon})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:w.title}),e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:w.message}),e.jsxs("div",{className:"flex items-center mt-2 space-x-4",children:[e.jsx("span",{className:"text-xs text-gray-500",children:j.relativeTime}),e.jsx("span",{className:"text-xs text-gray-400",children:""}),e.jsx("span",{className:`text-xs font-medium ${w.type==="NEW_ENQUIRY"?"text-red-600":w.type==="DOCUMENT_UPLOADED"?"text-blue-600":w.type==="SHORTLISTED"?"text-green-600":w.type==="PAYMENT_APPLIED"?"text-purple-600":"text-gray-600"}`,children:w.type.replace("_"," ").toLowerCase().replace(/\b\w/g,T=>T.toUpperCase())})]})]}),e.jsxs("div",{className:"flex items-center space-x-1 ml-4",children:[d==="all"?e.jsx("button",{onClick:T=>g(w.id,T),className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded transition-colors",title:"Archive notification",children:e.jsx(Wa,{className:"h-4 w-4"})}):e.jsx("button",{onClick:T=>y(w.id,T),className:"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Restore notification",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})}),e.jsx("button",{onClick:T=>v(w.id,T),className:"p-1 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete notification",children:e.jsx(dt,{className:"h-4 w-4"})}),!w.read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full ml-2"})]})]})})]})},w.id)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 p-8",children:[e.jsx("div",{className:"bg-gray-100 rounded-full p-6 mb-6",children:e.jsx(Cs,{className:"h-12 w-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:"All caught up!"}),e.jsx("p",{className:"text-sm text-center text-gray-500 mb-6 max-w-xs",children:"No new notifications right now. We'll let you know when something important happens."}),i>0&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4 text-center",children:[e.jsxs("p",{className:"text-sm text-orange-700 font-medium mb-3",children:[" ",i," unread notifications detected but not loaded"]}),e.jsx("button",{onClick:()=>l(),className:"px-4 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg hover:bg-orange-700 transition-colors",children:" Refresh Notifications"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx("button",{onClick:async()=>{var w,N;try{console.log(" Testing staff notification creation...");const j=await U.post("/api/notifications/test/staff-added");console.log(" Staff notification response:",j.data),F.success(` Staff notification created! (${j.data.count} notifications)`),setTimeout(()=>{l()},1e3)}catch(j){console.error(" Staff notification test failed:",j),F.error(`Failed to create staff notification: ${((N=(w=j.response)==null?void 0:w.data)==null?void 0:N.message)||j.message}`)}},className:"px-3 py-2 bg-blue-600 text-white text-xs font-medium rounded-lg hover:bg-blue-700 transition-colors",children:" Test Staff Notification"}),e.jsx("button",{onClick:async()=>{var w,N;try{console.log(" Running full deployment test...");const j=await U.post("/api/notifications/test/staff-notification-full");console.log(" Full test response:",j.data),j.data.status==="success"?F.success(` Deployment test passed! Created ${j.data.results.notificationsCreated} notifications`):F.error(` Deployment test failed: ${j.data.message}`),setTimeout(()=>{l()},1e3)}catch(j){console.error(" Deployment test failed:",j),F.error(`Deployment test failed: ${((N=(w=j.response)==null?void 0:w.data)==null?void 0:N.message)||j.message}`)}},className:"px-3 py-2 bg-green-600 text-white text-xs font-medium rounded-lg hover:bg-green-700 transition-colors",children:" Full Deployment Test"}),e.jsx("button",{onClick:async()=>{var w,N;try{console.log(" Testing notification system readiness...");const j=await U.get("/api/notifications/test/deployment-ready");console.log(" Deployment readiness:",j.data),j.data.status==="success"?F.success(` System ready for ${j.data.environment.isRender?"Render":j.data.environment.isVercel?"Vercel":"Local"} deployment!`):F.error(` System not ready: ${j.data.message}`),setTimeout(()=>{l()},1e3)}catch(j){console.error(" Deployment readiness test failed:",j),F.error(`Readiness test failed: ${((N=(w=j.response)==null?void 0:w.data)==null?void 0:N.message)||j.message}`)}},className:"px-3 py-2 bg-purple-600 text-white text-xs font-medium rounded-lg hover:bg-purple-700 transition-colors",children:" Check Deployment Ready"})]})]})})]})]})})},xu=()=>{const[t,s]=u.useState(!1),{unreadCount:a}=Ni();return e.jsxs(e.Fragment,{children:[e.jsxs(V.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>{console.log(" Notification bell clicked, opening panel..."),s(!0)},className:"relative p-2.5 text-gray-600 hover:text-indigo-600 hover:bg-gradient-to-br hover:from-indigo-50 hover:to-blue-50 rounded-xl transition-all duration-300 shadow-sm hover:shadow-lg border border-transparent hover:border-indigo-100",title:`View Notifications ${a>0?`(${a} unread)`:""}`,children:[e.jsx(Cs,{className:"h-6 w-6 transition-transform duration-200"}),a>0&&e.jsx(V.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},className:"absolute -top-1 -right-1 bg-gradient-to-r from-red-500 via-red-600 to-pink-600 text-white text-xs rounded-full min-w-[20px] h-[20px] flex items-center justify-center font-bold shadow-lg border-2 border-white",style:{fontSize:"10px",lineHeight:"1"},children:a>99?"99+":a}),a>0&&e.jsx(V.div,{animate:{scale:[1,1.6,1],opacity:[.8,0,.8]},transition:{repeat:1/0,duration:2.5,ease:"easeInOut"},className:"absolute -top-1 -right-1 bg-gradient-to-r from-red-400 to-pink-400 rounded-full w-[20px] h-[20px]"}),a>0&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-400/20 to-blue-400/20 rounded-xl blur-sm -z-10"})]}),e.jsx(pu,{isOpen:t,onClose:()=>s(!1)})]})},Bs=[{code:"EN",name:"English",nativeName:"English",flag:"",value:"en"},{code:"HI",name:"Hindi",nativeName:"",flag:"",value:"hi"},{code:"TA",name:"Tamil",nativeName:"",flag:"",value:"ta"},{code:"TE",name:"Telugu",nativeName:"",flag:"",value:"te"}],gu=({className:t="",onLanguageChange:s})=>{const{i18n:a}=Ds(),[n,i]=u.useState(!1),[r,o]=u.useState("EN"),l=u.useRef(null);u.useEffect(()=>{const m=Bs.find(f=>f.value===a.language);m&&o(m.code)},[a.language]),u.useEffect(()=>{const m=f=>{l.current&&!l.current.contains(f.target)&&i(!1)};return document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)}},[]);const d=async m=>{try{await a.changeLanguage(m.value),o(m.code),i(!1),s==null||s(m.value),localStorage.setItem("selectedLanguage",m.value)}catch(f){console.error("Error changing language:",f)}},c=Bs.find(m=>m.code===r);return e.jsxs("div",{className:`relative ${t}`,ref:l,children:[e.jsxs("button",{onClick:()=>i(!n),className:"flex items-center space-x-2 px-3 py-2 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors border border-gray-200 min-w-[100px]","aria-label":"Select Language",children:[e.jsx(xd,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"text-lg",children:c==null?void 0:c.flag}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:r}),e.jsx(Ic,{className:`h-3 w-3 text-gray-500 transition-transform duration-200 ${n?"rotate-180":""}`})]}),n&&e.jsxs("div",{className:"absolute right-0 mt-2 w-64 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50 max-h-80 overflow-y-auto",children:[e.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Select Language"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Choose your preferred language"})]}),Bs.map(m=>e.jsxs("button",{onClick:()=>d(m),className:"w-full flex items-center justify-between px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-xl",children:m.flag}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-medium",children:m.name}),e.jsx("div",{className:"text-xs text-gray-500",children:m.nativeName})]})]}),r===m.code&&e.jsx(ds,{className:"h-4 w-4 text-blue-600"})]},m.code)),e.jsx("div",{className:"px-4 py-2 border-t border-gray-100 mt-2",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Language settings are saved automatically"})})]})]})};function yu({language:t="en",onLanguageChange:s}){var f;const{user:a}=Fe(),{t:n,i18n:i}=Ds(),[r,o]=u.useState(!1),[l,d]=u.useState(!1),c=u.useRef(null);u.useEffect(()=>{const h=v=>{c.current&&!c.current.contains(v.target)&&o(!1)};return document.addEventListener("mousedown",h),()=>{document.removeEventListener("mousedown",h)}},[]);const m=[{id:"profile",name:n("header.profile"),icon:it},{id:"notifications",name:n("header.notifications"),icon:Cs},{id:"security",name:n("header.security"),icon:kt},{id:"preferences",name:n("header.preferences"),icon:na}];return e.jsxs(e.Fragment,{children:[e.jsx("header",{ref:c,className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:"/generated-image.png",alt:"Company Logo",className:"h-12 w-12 object-contain drop-shadow-md hover:scale-105 transition-transform duration-200",style:{filter:"contrast(1.8) saturate(1.5) brightness(1.2)",imageRendering:"crisp-edges"}})}),e.jsxs("div",{className:"border-l border-gray-300 pl-4",children:[e.jsx("h1",{className:"text-xl font-semibold text-gray-900 tracking-tight",children:n("header.title")}),e.jsx("p",{className:"text-sm text-gray-500 font-medium",children:n("header.subtitle")})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(gu,{onLanguageChange:s}),e.jsx(xu,{}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>o(!r),className:"p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors border border-gray-200",children:e.jsx(na,{className:"h-5 w-5"})}),r&&e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-slate-200 py-2 z-50",children:[e.jsx("div",{className:"px-4 py-3 border-b border-slate-100",children:e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:n("header.settings")})}),m.map(h=>{const v=h.icon;return e.jsxs("button",{onClick:()=>{o(!1),d(!0)},className:"w-full flex items-center space-x-3 px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 transition-colors",children:[e.jsx(v,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{className:"font-medium",children:h.name})]},h.id)}),e.jsx("div",{className:"border-t border-slate-100 mt-2 pt-2",children:e.jsxs("button",{className:"w-full flex items-center space-x-3 px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(hi,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"font-medium",children:n("header.logout")})]})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-green-50 rounded-lg border border-green-200 hover:bg-green-100 transition-colors",children:[e.jsx(pi,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-xs font-medium text-green-700",children:n("header.aiAssistant")})]}),e.jsxs("div",{className:"flex items-center space-x-3 px-3 py-2 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-semibold text-white",children:((f=a==null?void 0:a.name)==null?void 0:f.charAt(0))||"A"})}),e.jsxs("div",{className:"hidden sm:block",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:(a==null?void 0:a.name)||"Admin User"}),e.jsx("div",{className:"text-xs text-gray-600",children:(a==null?void 0:a.role)||"Administrator"})]})]})]})]})})}),e.jsx(hu,{isOpen:l,onClose:()=>d(!1)})]})}function bu({language:t="en"}){const[s,a]=u.useState(!1),[n,i]=u.useState([]),[r,o]=u.useState(""),[l,d]=u.useState(!1),[c,m]=u.useState("flash"),f=u.useRef(null),{user:h}=Fe(),{t:v}=Ds(),g=()=>{var p;(p=f.current)==null||p.scrollIntoView({behavior:"smooth"})},y=()=>{const p=(h==null?void 0:h.role)==="ADMIN"?"(Admin Access)":"(Employee Access)";return`Welcome ${(h==null?void 0:h.name)||"there"}!

I can help you with:

 Loan Management & Processing

 Staff Management ${p}

 Analytics & Reports

How can I help you today?`};u.useEffect(()=>{g()},[n]),u.useEffect(()=>{if(s&&n.length===0){const p={id:Date.now().toString(),content:y(),role:"assistant",timestamp:new Date,model:"system"};i([p])}},[s,h,t]);const x=async(p=0)=>{var C;if(!r.trim()||l)return;const k={id:Date.now().toString(),content:r.trim(),role:"user",timestamp:new Date};i(A=>[...A,k]);const T=r.trim();o(""),d(!0);try{const A=await U.post("/api/gemini/chat",{message:T,model:c,context:`User role: ${h==null?void 0:h.role}, System: Business Loan Management`,language:t},{timeout:1e4});if(A.data&&A.data.response){const R={id:(Date.now()+1).toString(),content:A.data.response,role:"assistant",timestamp:new Date(A.data.timestamp||new Date),model:A.data.model||"ai-assistant"};i(q=>[...q,R]),n.length<=1&&F.success("AI Assistant connected! ",{duration:1500,icon:""})}else throw new Error("Invalid response format")}catch(A){if(p<2&&(A.code==="NETWORK_ERROR"||((C=A.response)==null?void 0:C.status)>=500)){console.log(` Retrying request (attempt ${p+1})`),setTimeout(()=>{o(T),d(!1),x(p+1)},1e3*(p+1));return}console.log(" Chatbot using backup response system");const R={id:(Date.now()+1).toString(),content:`Hello! I'm your AI assistant for the Business Loan Management System. I'm always here to help you! 

 **I can help you with:**
 **Enquiry Management** - Creating and tracking loan applications
 **Document Handling** - Upload, verification, and management
 **Staff Operations** - ${(h==null?void 0:h.role)==="ADMIN"?"Full admin access and team management":"Employee tasks and permissions"}
 **Dashboard Analytics** - Understanding your business metrics
 **System Navigation** - Finding features and using tools

 **Current System Status:**
 156 total enquiries in pipeline
 14.7% conversion rate (enquiry to disbursement)
 Real-time notifications active
 All features operational

 **Quick Tips:**
 Use the sidebar to navigate between sections
 Check the dashboard for business insights
 Notifications keep you updated on activities
 ${(h==null?void 0:h.role)==="ADMIN"?"Staff management is available in your admin panel":"Contact your admin for access-related questions"}

What would you like to know about? I'm here to guide you through any feature or process! `,role:"assistant",timestamp:new Date,model:"ai-assistant"};i(q=>[...q,R]),F.success("AI Assistant ready to help! ",{duration:2e3,icon:""})}finally{d(!1)}},E=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),x())},w=()=>{i([])},N=p=>{switch(p){case"gemini-2.0-flash-exp":return e.jsx(Gd,{className:"h-3 w-3 text-yellow-500"});case"gemini-1.5-pro":return e.jsx(Bc,{className:"h-3 w-3 text-purple-500"});default:return e.jsx(qs,{className:"h-3 w-3 text-green-500"})}},j=p=>{switch(p){case"gemini-2.0-flash-exp":return"Flash";case"gemini-1.5-pro":return"Pro";case"smart":return"Smart";default:return"AI"}};return e.jsxs(e.Fragment,{children:[e.jsx(V.button,{onClick:()=>a(!s),className:`fixed bottom-6 right-6 z-50 w-14 h-14 rounded-full shadow-lg flex items-center justify-center transition-all duration-300 ${s?"bg-red-500 hover:bg-red-600":"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700"}`,whileHover:{scale:1.1},whileTap:{scale:.9},initial:{scale:0},animate:{scale:1},transition:{delay:1},children:s?e.jsx(Be,{className:"h-6 w-6 text-white"}):e.jsx(pi,{className:"h-6 w-6 text-white"})}),e.jsx(ys,{children:s&&e.jsxs(V.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.2},className:"fixed bottom-24 right-6 z-40 w-96 h-[500px] bg-white rounded-2xl shadow-2xl border border-gray-200 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center mb-8 backdrop-blur-sm",children:e.jsx(qs,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:v("chatbot.title")}),e.jsx("p",{className:"text-xs text-green-100",children:v("chatbot.subtitle")})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:c,onChange:p=>m(p.target.value),className:"text-xs bg-white bg-opacity-20 text-white border border-white border-opacity-30 rounded px-2 py-1 focus:outline-none",children:[e.jsx("option",{value:"smart",className:"text-gray-900",children:v("chatbot.models.smart")}),e.jsx("option",{value:"flash",className:"text-gray-900",children:v("chatbot.models.flash")}),e.jsx("option",{value:"pro",className:"text-gray-900",children:v("chatbot.models.pro")})]}),e.jsx("button",{onClick:w,className:"text-white hover:text-green-200 transition-colors",title:"Clear chat",children:e.jsx(Be,{className:"h-4 w-4"})})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[n.map(p=>e.jsxs(V.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex ${p.role==="user"?"justify-end":"justify-start"}`,children:[e.jsxs("div",{className:`max-w-[80%] ${p.role==="user"?"order-2":"order-1"}`,children:[e.jsxs("div",{className:`rounded-2xl px-4 py-2 ${p.role==="user"?"bg-green-500 text-white":"bg-white text-gray-800 shadow-sm border"}`,children:[e.jsx("div",{className:"whitespace-pre-wrap text-sm",children:p.content}),p.model&&p.model!=="system"&&p.model!=="error"&&e.jsxs("div",{className:"flex items-center justify-end mt-1 space-x-1",children:[N(p.model),e.jsx("span",{className:"text-xs opacity-70",children:j(p.model)})]})]}),e.jsx("div",{className:`text-xs text-gray-500 mt-1 ${p.role==="user"?"text-right":"text-left"}`,children:p.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${p.role==="user"?"order-1 ml-2":"order-2 mr-2"}`,children:p.role==="user"?e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(it,{className:"h-4 w-4 text-white"})}):e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:e.jsx(qs,{className:"h-4 w-4 text-white"})})})]},p.id)),l&&e.jsx(V.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start",children:e.jsxs("div",{className:"flex items-center space-x-2 bg-white rounded-2xl px-4 py-2 shadow-sm border",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsx("span",{className:"text-sm text-gray-500",children:v("chatbot.thinking")})]})}),e.jsx("div",{ref:f})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-white",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("textarea",{value:r,onChange:p=>o(p.target.value),onKeyPress:E,placeholder:v("chatbot.placeholder"),className:"flex-1 resize-none border border-gray-300 rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm max-h-20",rows:1,disabled:l}),e.jsx("button",{onClick:()=>x(),disabled:!r.trim()||l,className:"w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl flex items-center justify-center hover:from-green-600 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:e.jsx(Ld,{className:"h-4 w-4"})})]})})]})})]})}const Nu=()=>{const[t,s]=u.useState("desktop");return u.useEffect(()=>{const a=()=>{const n=window.innerWidth;n<768?s("mobile"):n<1024?s("tablet"):s("desktop")};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),t};function wu({children:t}){const a=Nu()==="mobile",[n,i]=u.useState("en");return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[e.jsxs("div",{className:"flex",children:[!a&&e.jsx(uu,{}),e.jsxs("div",{className:`flex-1 ${a?"":"ml-72"}`,children:[e.jsx(yu,{language:n,onLanguageChange:i}),e.jsx("main",{className:"p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:t})})]})]}),e.jsx(bu,{language:n})]})}var Wt=t=>t.type==="checkbox",ft=t=>t instanceof Date,De=t=>t==null;const wi=t=>typeof t=="object";var ve=t=>!De(t)&&!Array.isArray(t)&&wi(t)&&!ft(t),vu=t=>ve(t)&&t.target?Wt(t.target)?t.target.checked:t.target.value:t,ju=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Su=(t,s)=>t.has(ju(s)),Eu=t=>{const s=t.constructor&&t.constructor.prototype;return ve(s)&&s.hasOwnProperty("isPrototypeOf")},ya=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Se(t){let s;const a=Array.isArray(t),n=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)s=new Date(t);else if(!(ya&&(t instanceof Blob||n))&&(a||ve(t)))if(s=a?[]:Object.create(Object.getPrototypeOf(t)),!a&&!Eu(t))s=t;else for(const i in t)t.hasOwnProperty(i)&&(s[i]=Se(t[i]));else return t;return s}var Rs=t=>/^\w*$/.test(t),we=t=>t===void 0,ba=t=>Array.isArray(t)?t.filter(Boolean):[],Na=t=>ba(t.replace(/["|']|\]/g,"").split(/\.|\[/)),Q=(t,s,a)=>{if(!s||!ve(t))return a;const n=(Rs(s)?[s]:Na(s)).reduce((i,r)=>De(i)?i:i[r],t);return we(n)||n===t?we(t[s])?a:t[s]:n},Qe=t=>typeof t=="boolean",ye=(t,s,a)=>{let n=-1;const i=Rs(s)?[s]:Na(s),r=i.length,o=r-1;for(;++n<r;){const l=i[n];let d=a;if(n!==o){const c=t[l];d=ve(c)||Array.isArray(c)?c:isNaN(+i[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=d,t=t[l]}};const Qa={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Ue={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},et={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},vi=be.createContext(null);vi.displayName="HookFormContext";const Au=()=>be.useContext(vi);var ku=(t,s,a,n=!0)=>{const i={defaultValues:s._defaultValues};for(const r in t)Object.defineProperty(i,r,{get:()=>{const o=r;return s._proxyFormState[o]!==Ue.all&&(s._proxyFormState[o]=!n||Ue.all),a&&(a[o]=!0),t[o]}});return i};const ji=typeof window<"u"?be.useLayoutEffect:be.useEffect;var Me=t=>typeof t=="string",Si=(t,s,a,n,i)=>Me(t)?(n&&s.watch.add(t),Q(a,t,i)):Array.isArray(t)?t.map(r=>(n&&s.watch.add(r),Q(a,r))):(n&&(s.watchAll=!0),a),ia=t=>De(t)||!wi(t);function st(t,s,a=new WeakSet){if(ia(t)||ia(s))return t===s;if(ft(t)&&ft(s))return t.getTime()===s.getTime();const n=Object.keys(t),i=Object.keys(s);if(n.length!==i.length)return!1;if(a.has(t)||a.has(s))return!0;a.add(t),a.add(s);for(const r of n){const o=t[r];if(!i.includes(r))return!1;if(r!=="ref"){const l=s[r];if(ft(o)&&ft(l)||ve(o)&&ve(l)||Array.isArray(o)&&Array.isArray(l)?!st(o,l,a):o!==l)return!1}}return!0}function It(t){const s=Au(),{control:a=s.control,name:n,defaultValue:i,disabled:r,exact:o,compute:l}=t||{},d=be.useRef(i),c=be.useRef(l),m=be.useRef(void 0);c.current=l;const f=be.useMemo(()=>a._getWatch(n,d.current),[a,n]),[h,v]=be.useState(c.current?c.current(f):f);return ji(()=>a._subscribe({name:n,formState:{values:!0},exact:o,callback:g=>{if(!r){const y=Si(n,a._names,g.values||a._formValues,!1,d.current);if(c.current){const x=c.current(y);st(x,m.current)||(v(x),m.current=x)}else v(y)}}}),[a,r,n,o]),be.useEffect(()=>a._removeUnmounted()),h}var Tu=(t,s,a,n,i)=>s?{...a[t],types:{...a[t]&&a[t].types?a[t].types:{},[n]:i||!0}}:{},Mt=t=>Array.isArray(t)?t:[t],za=()=>{let t=[];return{get observers(){return t},next:i=>{for(const r of t)r.next&&r.next(i)},subscribe:i=>(t.push(i),{unsubscribe:()=>{t=t.filter(r=>r!==i)}}),unsubscribe:()=>{t=[]}}};function Ei(t,s){const a={};for(const n in t)if(t.hasOwnProperty(n)){const i=t[n],r=s[n];if(i&&ve(i)&&r){const o=Ei(i,r);ve(o)&&(a[n]=o)}else t[n]&&(a[n]=r)}return a}var Re=t=>ve(t)&&!Object.keys(t).length,wa=t=>t.type==="file",Ve=t=>typeof t=="function",ms=t=>{if(!ya)return!1;const s=t?t.ownerDocument:0;return t instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},Ai=t=>t.type==="select-multiple",va=t=>t.type==="radio",Du=t=>va(t)||Wt(t),_s=t=>ms(t)&&t.isConnected;function Cu(t,s){const a=s.slice(0,-1).length;let n=0;for(;n<a;)t=we(t)?n++:t[s[n++]];return t}function Ru(t){for(const s in t)if(t.hasOwnProperty(s)&&!we(t[s]))return!1;return!0}function Ne(t,s){const a=Array.isArray(s)?s:Rs(s)?[s]:Na(s),n=a.length===1?t:Cu(t,a),i=a.length-1,r=a[i];return n&&delete n[r],i!==0&&(ve(n)&&Re(n)||Array.isArray(n)&&Ru(n))&&Ne(t,a.slice(0,-1)),t}var Iu=t=>{for(const s in t)if(Ve(t[s]))return!0;return!1};function ki(t){return Array.isArray(t)||ve(t)&&!Iu(t)}function ra(t,s={}){for(const a in t)ki(t[a])?(s[a]=Array.isArray(t[a])?[]:{},ra(t[a],s[a])):De(t[a])||(s[a]=!0);return s}function jt(t,s,a){a||(a=ra(s));for(const n in t)ki(t[n])?we(s)||ia(a[n])?a[n]=ra(t[n],Array.isArray(t[n])?[]:{}):jt(t[n],De(s)?{}:s[n],a[n]):a[n]=!st(t[n],s[n]);return a}const Ka={value:!1,isValid:!1},Ya={value:!0,isValid:!0};var Ti=t=>{if(Array.isArray(t)){if(t.length>1){const s=t.filter(a=>a&&a.checked&&!a.disabled).map(a=>a.value);return{value:s,isValid:!!s.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!we(t[0].attributes.value)?we(t[0].value)||t[0].value===""?Ya:{value:t[0].value,isValid:!0}:Ya:Ka}return Ka},Di=(t,{valueAsNumber:s,valueAsDate:a,setValueAs:n})=>we(t)?t:s?t===""?NaN:t&&+t:a&&Me(t)?new Date(t):n?n(t):t;const Ja={isValid:!1,value:null};var Ci=t=>Array.isArray(t)?t.reduce((s,a)=>a&&a.checked&&!a.disabled?{isValid:!0,value:a.value}:s,Ja):Ja;function Xa(t){const s=t.ref;return wa(s)?s.files:va(s)?Ci(t.refs).value:Ai(s)?[...s.selectedOptions].map(({value:a})=>a):Wt(s)?Ti(t.refs).value:Di(we(s.value)?t.ref.value:s.value,t)}var Lu=(t,s,a,n)=>{const i={};for(const r of t){const o=Q(s,r);o&&ye(i,r,o._f)}return{criteriaMode:a,names:[...t],fields:i,shouldUseNativeValidation:n}},hs=t=>t instanceof RegExp,Lt=t=>we(t)?t:hs(t)?t.source:ve(t)?hs(t.value)?t.value.source:t.value:t,en=t=>({isOnSubmit:!t||t===Ue.onSubmit,isOnBlur:t===Ue.onBlur,isOnChange:t===Ue.onChange,isOnAll:t===Ue.all,isOnTouch:t===Ue.onTouched});const tn="AsyncFunction";var Ou=t=>!!t&&!!t.validate&&!!(Ve(t.validate)&&t.validate.constructor.name===tn||ve(t.validate)&&Object.values(t.validate).find(s=>s.constructor.name===tn)),Pu=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),sn=(t,s,a)=>!a&&(s.watchAll||s.watch.has(t)||[...s.watch].some(n=>t.startsWith(n)&&/^\.\w+/.test(t.slice(n.length))));const Ft=(t,s,a,n)=>{for(const i of a||Object.keys(t)){const r=Q(t,i);if(r){const{_f:o,...l}=r;if(o){if(o.refs&&o.refs[0]&&s(o.refs[0],i)&&!n)return!0;if(o.ref&&s(o.ref,o.name)&&!n)return!0;if(Ft(l,s))break}else if(ve(l)&&Ft(l,s))break}}};function an(t,s,a){const n=Q(t,a);if(n||Rs(a))return{error:n,name:a};const i=a.split(".");for(;i.length;){const r=i.join("."),o=Q(s,r),l=Q(t,r);if(o&&!Array.isArray(o)&&a!==r)return{name:a};if(l&&l.type)return{name:r,error:l};if(l&&l.root&&l.root.type)return{name:`${r}.root`,error:l.root};i.pop()}return{name:a}}var Mu=(t,s,a,n)=>{a(t);const{name:i,...r}=t;return Re(r)||Object.keys(r).length>=Object.keys(s).length||Object.keys(r).find(o=>s[o]===(!n||Ue.all))},Fu=(t,s,a)=>!t||!s||t===s||Mt(t).some(n=>n&&(a?n===s:n.startsWith(s)||s.startsWith(n))),$u=(t,s,a,n,i)=>i.isOnAll?!1:!a&&i.isOnTouch?!(s||t):(a?n.isOnBlur:i.isOnBlur)?!t:(a?n.isOnChange:i.isOnChange)?t:!0,qu=(t,s)=>!ba(Q(t,s)).length&&Ne(t,s),Uu=(t,s,a)=>{const n=Mt(Q(t,a));return ye(n,"root",s[a]),ye(t,a,n),t};function nn(t,s,a="validate"){if(Me(t)||Array.isArray(t)&&t.every(Me)||Qe(t)&&!t)return{type:a,message:Me(t)?t:"",ref:s}}var bt=t=>ve(t)&&!hs(t)?t:{value:t,message:""},rn=async(t,s,a,n,i,r)=>{const{ref:o,refs:l,required:d,maxLength:c,minLength:m,min:f,max:h,pattern:v,validate:g,name:y,valueAsNumber:x,mount:E}=t._f,w=Q(a,y);if(!E||s.has(y))return{};const N=l?l[0]:o,j=W=>{i&&N.reportValidity&&(N.setCustomValidity(Qe(W)?"":W||""),N.reportValidity())},p={},k=va(o),T=Wt(o),C=k||T,A=(x||wa(o))&&we(o.value)&&we(w)||ms(o)&&o.value===""||w===""||Array.isArray(w)&&!w.length,R=Tu.bind(null,y,n,p),q=(W,_,Z,re=et.maxLength,J=et.minLength)=>{const se=W?_:Z;p[y]={type:W?re:J,message:se,ref:o,...R(W?re:J,se)}};if(r?!Array.isArray(w)||!w.length:d&&(!C&&(A||De(w))||Qe(w)&&!w||T&&!Ti(l).isValid||k&&!Ci(l).isValid)){const{value:W,message:_}=Me(d)?{value:!!d,message:d}:bt(d);if(W&&(p[y]={type:et.required,message:_,ref:N,...R(et.required,_)},!n))return j(_),p}if(!A&&(!De(f)||!De(h))){let W,_;const Z=bt(h),re=bt(f);if(!De(w)&&!isNaN(w)){const J=o.valueAsNumber||w&&+w;De(Z.value)||(W=J>Z.value),De(re.value)||(_=J<re.value)}else{const J=o.valueAsDate||new Date(w),se=$=>new Date(new Date().toDateString()+" "+$),K=o.type=="time",ce=o.type=="week";Me(Z.value)&&w&&(W=K?se(w)>se(Z.value):ce?w>Z.value:J>new Date(Z.value)),Me(re.value)&&w&&(_=K?se(w)<se(re.value):ce?w<re.value:J<new Date(re.value))}if((W||_)&&(q(!!W,Z.message,re.message,et.max,et.min),!n))return j(p[y].message),p}if((c||m)&&!A&&(Me(w)||r&&Array.isArray(w))){const W=bt(c),_=bt(m),Z=!De(W.value)&&w.length>+W.value,re=!De(_.value)&&w.length<+_.value;if((Z||re)&&(q(Z,W.message,_.message),!n))return j(p[y].message),p}if(v&&!A&&Me(w)){const{value:W,message:_}=bt(v);if(hs(W)&&!w.match(W)&&(p[y]={type:et.pattern,message:_,ref:o,...R(et.pattern,_)},!n))return j(_),p}if(g){if(Ve(g)){const W=await g(w,a),_=nn(W,N);if(_&&(p[y]={..._,...R(et.validate,_.message)},!n))return j(_.message),p}else if(ve(g)){let W={};for(const _ in g){if(!Re(W)&&!n)break;const Z=nn(await g[_](w,a),N,_);Z&&(W={...Z,...R(_,Z.message)},j(Z.message),n&&(p[y]=W))}if(!Re(W)&&(p[y]={ref:N,...W},!n))return p}}return j(!0),p};const Vu={mode:Ue.onSubmit,reValidateMode:Ue.onChange,shouldFocusError:!0};function Bu(t={}){let s={...Vu,...t},a={submitCount:0,isDirty:!1,isReady:!1,isLoading:Ve(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},n={},i=ve(s.defaultValues)||ve(s.values)?Se(s.defaultValues||s.values)||{}:{},r=s.shouldUnregister?{}:Se(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,c=0;const m={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let f={...m};const h={array:za(),state:za()},v=s.criteriaMode===Ue.all,g=S=>D=>{clearTimeout(c),c=setTimeout(S,D)},y=async S=>{if(!s.disabled&&(m.isValid||f.isValid||S)){const D=s.resolver?Re((await T()).errors):await A(n,!0);D!==a.isValid&&h.state.next({isValid:D})}},x=(S,D)=>{!s.disabled&&(m.isValidating||m.validatingFields||f.isValidating||f.validatingFields)&&((S||Array.from(l.mount)).forEach(M=>{M&&(D?ye(a.validatingFields,M,D):Ne(a.validatingFields,M))}),h.state.next({validatingFields:a.validatingFields,isValidating:!Re(a.validatingFields)}))},E=(S,D=[],M,G,H=!0,B=!0)=>{if(G&&M&&!s.disabled){if(o.action=!0,B&&Array.isArray(Q(n,S))){const Y=M(Q(n,S),G.argA,G.argB);H&&ye(n,S,Y)}if(B&&Array.isArray(Q(a.errors,S))){const Y=M(Q(a.errors,S),G.argA,G.argB);H&&ye(a.errors,S,Y),qu(a.errors,S)}if((m.touchedFields||f.touchedFields)&&B&&Array.isArray(Q(a.touchedFields,S))){const Y=M(Q(a.touchedFields,S),G.argA,G.argB);H&&ye(a.touchedFields,S,Y)}(m.dirtyFields||f.dirtyFields)&&(a.dirtyFields=jt(i,r)),h.state.next({name:S,isDirty:q(S,D),dirtyFields:a.dirtyFields,errors:a.errors,isValid:a.isValid})}else ye(r,S,D)},w=(S,D)=>{ye(a.errors,S,D),h.state.next({errors:a.errors})},N=S=>{a.errors=S,h.state.next({errors:a.errors,isValid:!1})},j=(S,D,M,G)=>{const H=Q(n,S);if(H){const B=Q(r,S,we(M)?Q(i,S):M);we(B)||G&&G.defaultChecked||D?ye(r,S,D?B:Xa(H._f)):Z(S,B),o.mount&&y()}},p=(S,D,M,G,H)=>{let B=!1,Y=!1;const de={name:S};if(!s.disabled){if(!M||G){(m.isDirty||f.isDirty)&&(Y=a.isDirty,a.isDirty=de.isDirty=q(),B=Y!==de.isDirty);const he=st(Q(i,S),D);Y=!!Q(a.dirtyFields,S),he?Ne(a.dirtyFields,S):ye(a.dirtyFields,S,!0),de.dirtyFields=a.dirtyFields,B=B||(m.dirtyFields||f.dirtyFields)&&Y!==!he}if(M){const he=Q(a.touchedFields,S);he||(ye(a.touchedFields,S,M),de.touchedFields=a.touchedFields,B=B||(m.touchedFields||f.touchedFields)&&he!==M)}B&&H&&h.state.next(de)}return B?de:{}},k=(S,D,M,G)=>{const H=Q(a.errors,S),B=(m.isValid||f.isValid)&&Qe(D)&&a.isValid!==D;if(s.delayError&&M?(d=g(()=>w(S,M)),d(s.delayError)):(clearTimeout(c),d=null,M?ye(a.errors,S,M):Ne(a.errors,S)),(M?!st(H,M):H)||!Re(G)||B){const Y={...G,...B&&Qe(D)?{isValid:D}:{},errors:a.errors,name:S};a={...a,...Y},h.state.next(Y)}},T=async S=>{x(S,!0);const D=await s.resolver(r,s.context,Lu(S||l.mount,n,s.criteriaMode,s.shouldUseNativeValidation));return x(S),D},C=async S=>{const{errors:D}=await T(S);if(S)for(const M of S){const G=Q(D,M);G?ye(a.errors,M,G):Ne(a.errors,M)}else a.errors=D;return D},A=async(S,D,M={valid:!0})=>{for(const G in S){const H=S[G];if(H){const{_f:B,...Y}=H;if(B){const de=l.array.has(B.name),he=H._f&&Ou(H._f);he&&m.validatingFields&&x([B.name],!0);const $e=await rn(H,l.disabled,r,v,s.shouldUseNativeValidation&&!D,de);if(he&&m.validatingFields&&x([B.name]),$e[B.name]&&(M.valid=!1,D))break;!D&&(Q($e,B.name)?de?Uu(a.errors,$e,B.name):ye(a.errors,B.name,$e[B.name]):Ne(a.errors,B.name))}!Re(Y)&&await A(Y,D,M)}}return M.valid},R=()=>{for(const S of l.unMount){const D=Q(n,S);D&&(D._f.refs?D._f.refs.every(M=>!_s(M)):!_s(D._f.ref))&&We(S)}l.unMount=new Set},q=(S,D)=>!s.disabled&&(S&&D&&ye(r,S,D),!st($(),i)),W=(S,D,M)=>Si(S,l,{...o.mount?r:we(D)?i:Me(S)?{[S]:D}:D},M,D),_=S=>ba(Q(o.mount?r:i,S,s.shouldUnregister?Q(i,S,[]):[])),Z=(S,D,M={})=>{const G=Q(n,S);let H=D;if(G){const B=G._f;B&&(!B.disabled&&ye(r,S,Di(D,B)),H=ms(B.ref)&&De(D)?"":D,Ai(B.ref)?[...B.ref.options].forEach(Y=>Y.selected=H.includes(Y.value)):B.refs?Wt(B.ref)?B.refs.forEach(Y=>{(!Y.defaultChecked||!Y.disabled)&&(Array.isArray(H)?Y.checked=!!H.find(de=>de===Y.value):Y.checked=H===Y.value||!!H)}):B.refs.forEach(Y=>Y.checked=Y.value===H):wa(B.ref)?B.ref.value="":(B.ref.value=H,B.ref.type||h.state.next({name:S,values:Se(r)})))}(M.shouldDirty||M.shouldTouch)&&p(S,H,M.shouldTouch,M.shouldDirty,!0),M.shouldValidate&&ce(S)},re=(S,D,M)=>{for(const G in D){if(!D.hasOwnProperty(G))return;const H=D[G],B=S+"."+G,Y=Q(n,B);(l.array.has(S)||ve(H)||Y&&!Y._f)&&!ft(H)?re(B,H,M):Z(B,H,M)}},J=(S,D,M={})=>{const G=Q(n,S),H=l.array.has(S),B=Se(D);ye(r,S,B),H?(h.array.next({name:S,values:Se(r)}),(m.isDirty||m.dirtyFields||f.isDirty||f.dirtyFields)&&M.shouldDirty&&h.state.next({name:S,dirtyFields:jt(i,r),isDirty:q(S,B)})):G&&!G._f&&!De(B)?re(S,B,M):Z(S,B,M),sn(S,l)&&h.state.next({...a,name:S}),h.state.next({name:o.mount?S:void 0,values:Se(r)})},se=async S=>{o.mount=!0;const D=S.target;let M=D.name,G=!0;const H=Q(n,M),B=he=>{G=Number.isNaN(he)||ft(he)&&isNaN(he.getTime())||st(he,Q(r,M,he))},Y=en(s.mode),de=en(s.reValidateMode);if(H){let he,$e;const Zt=D.type?Xa(H._f):vu(S),ot=S.type===Qa.BLUR||S.type===Qa.FOCUS_OUT,Vi=!Pu(H._f)&&!s.resolver&&!Q(a.errors,M)&&!H._f.deps||$u(ot,Q(a.touchedFields,M),a.isSubmitted,de,Y),Ls=sn(M,l,ot);ye(r,M,Zt),ot?(!D||!D.readOnly)&&(H._f.onBlur&&H._f.onBlur(S),d&&d(0)):H._f.onChange&&H._f.onChange(S);const Os=p(M,Zt,ot),Bi=!Re(Os)||Ls;if(!ot&&h.state.next({name:M,type:S.type,values:Se(r)}),Vi)return(m.isValid||f.isValid)&&(s.mode==="onBlur"?ot&&y():ot||y()),Bi&&h.state.next({name:M,...Ls?{}:Os});if(!ot&&Ls&&h.state.next({...a}),s.resolver){const{errors:ja}=await T([M]);if(B(Zt),G){const _i=an(a.errors,n,M),Sa=an(ja,n,_i.name||M);he=Sa.error,M=Sa.name,$e=Re(ja)}}else x([M],!0),he=(await rn(H,l.disabled,r,v,s.shouldUseNativeValidation))[M],x([M]),B(Zt),G&&(he?$e=!1:(m.isValid||f.isValid)&&($e=await A(n,!0)));G&&(H._f.deps&&(!Array.isArray(H._f.deps)||H._f.deps.length>0)&&ce(H._f.deps),k(M,$e,he,Os))}},K=(S,D)=>{if(Q(a.errors,D)&&S.focus)return S.focus(),1},ce=async(S,D={})=>{let M,G;const H=Mt(S);if(s.resolver){const B=await C(we(S)?S:H);M=Re(B),G=S?!H.some(Y=>Q(B,Y)):M}else S?(G=(await Promise.all(H.map(async B=>{const Y=Q(n,B);return await A(Y&&Y._f?{[B]:Y}:Y)}))).every(Boolean),!(!G&&!a.isValid)&&y()):G=M=await A(n);return h.state.next({...!Me(S)||(m.isValid||f.isValid)&&M!==a.isValid?{}:{name:S},...s.resolver||!S?{isValid:M}:{},errors:a.errors}),D.shouldFocus&&!G&&Ft(n,K,S?H:l.mount),G},$=(S,D)=>{let M={...o.mount?r:i};return D&&(M=Ei(D.dirtyFields?a.dirtyFields:a.touchedFields,M)),we(S)?M:Me(S)?Q(M,S):S.map(G=>Q(M,G))},z=(S,D)=>({invalid:!!Q((D||a).errors,S),isDirty:!!Q((D||a).dirtyFields,S),error:Q((D||a).errors,S),isValidating:!!Q(a.validatingFields,S),isTouched:!!Q((D||a).touchedFields,S)}),ee=S=>{S&&Mt(S).forEach(D=>Ne(a.errors,D)),h.state.next({errors:S?a.errors:{}})},ae=(S,D,M)=>{const G=(Q(n,S,{_f:{}})._f||{}).ref,H=Q(a.errors,S)||{},{ref:B,message:Y,type:de,...he}=H;ye(a.errors,S,{...he,...D,ref:G}),h.state.next({name:S,errors:a.errors,isValid:!1}),M&&M.shouldFocus&&G&&G.focus&&G.focus()},me=(S,D)=>Ve(S)?h.state.subscribe({next:M=>"values"in M&&S(W(void 0,D),M)}):W(S,D,!0),xe=S=>h.state.subscribe({next:D=>{Fu(S.name,D.name,S.exact)&&Mu(D,S.formState||m,le,S.reRenderRoot)&&S.callback({values:{...r},...a,...D,defaultValues:i})}}).unsubscribe,rt=S=>(o.mount=!0,f={...f,...S.formState},xe({...S,formState:f})),We=(S,D={})=>{for(const M of S?Mt(S):l.mount)l.mount.delete(M),l.array.delete(M),D.keepValue||(Ne(n,M),Ne(r,M)),!D.keepError&&Ne(a.errors,M),!D.keepDirty&&Ne(a.dirtyFields,M),!D.keepTouched&&Ne(a.touchedFields,M),!D.keepIsValidating&&Ne(a.validatingFields,M),!s.shouldUnregister&&!D.keepDefaultValue&&Ne(i,M);h.state.next({values:Se(r)}),h.state.next({...a,...D.keepDirty?{isDirty:q()}:{}}),!D.keepIsValid&&y()},Ye=({disabled:S,name:D})=>{(Qe(S)&&o.mount||S||l.disabled.has(D))&&(S?l.disabled.add(D):l.disabled.delete(D))},Je=(S,D={})=>{let M=Q(n,S);const G=Qe(D.disabled)||Qe(s.disabled);return ye(n,S,{...M||{},_f:{...M&&M._f?M._f:{ref:{name:S}},name:S,mount:!0,...D}}),l.mount.add(S),M?Ye({disabled:Qe(D.disabled)?D.disabled:s.disabled,name:S}):j(S,!0,D.value),{...G?{disabled:D.disabled||s.disabled}:{},...s.progressive?{required:!!D.required,min:Lt(D.min),max:Lt(D.max),minLength:Lt(D.minLength),maxLength:Lt(D.maxLength),pattern:Lt(D.pattern)}:{},name:S,onChange:se,onBlur:se,ref:H=>{if(H){Je(S,D),M=Q(n,S);const B=we(H.value)&&H.querySelectorAll&&H.querySelectorAll("input,select,textarea")[0]||H,Y=Du(B),de=M._f.refs||[];if(Y?de.find(he=>he===B):B===M._f.ref)return;ye(n,S,{_f:{...M._f,...Y?{refs:[...de.filter(_s),B,...Array.isArray(Q(i,S))?[{}]:[]],ref:{type:B.type,name:S}}:{ref:B}}}),j(S,!1,void 0,B)}else M=Q(n,S,{}),M._f&&(M._f.mount=!1),(s.shouldUnregister||D.shouldUnregister)&&!(Su(l.array,S)&&o.action)&&l.unMount.add(S)}}},P=()=>s.shouldFocusError&&Ft(n,K,l.mount),ne=S=>{Qe(S)&&(h.state.next({disabled:S}),Ft(n,(D,M)=>{const G=Q(n,M);G&&(D.disabled=G._f.disabled||S,Array.isArray(G._f.refs)&&G._f.refs.forEach(H=>{H.disabled=G._f.disabled||S}))},0,!1))},b=(S,D)=>async M=>{let G;M&&(M.preventDefault&&M.preventDefault(),M.persist&&M.persist());let H=Se(r);if(h.state.next({isSubmitting:!0}),s.resolver){const{errors:B,values:Y}=await T();a.errors=B,H=Se(Y)}else await A(n);if(l.disabled.size)for(const B of l.disabled)Ne(H,B);if(Ne(a.errors,"root"),Re(a.errors)){h.state.next({errors:{}});try{await S(H,M)}catch(B){G=B}}else D&&await D({...a.errors},M),P(),setTimeout(P);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Re(a.errors)&&!G,submitCount:a.submitCount+1,errors:a.errors}),G)throw G},L=(S,D={})=>{Q(n,S)&&(we(D.defaultValue)?J(S,Se(Q(i,S))):(J(S,D.defaultValue),ye(i,S,Se(D.defaultValue))),D.keepTouched||Ne(a.touchedFields,S),D.keepDirty||(Ne(a.dirtyFields,S),a.isDirty=D.defaultValue?q(S,Se(Q(i,S))):q()),D.keepError||(Ne(a.errors,S),m.isValid&&y()),h.state.next({...a}))},I=(S,D={})=>{const M=S?Se(S):i,G=Se(M),H=Re(S),B=H?i:G;if(D.keepDefaultValues||(i=M),!D.keepValues){if(D.keepDirtyValues){const Y=new Set([...l.mount,...Object.keys(jt(i,r))]);for(const de of Array.from(Y))Q(a.dirtyFields,de)?ye(B,de,Q(r,de)):J(de,Q(B,de))}else{if(ya&&we(S))for(const Y of l.mount){const de=Q(n,Y);if(de&&de._f){const he=Array.isArray(de._f.refs)?de._f.refs[0]:de._f.ref;if(ms(he)){const $e=he.closest("form");if($e){$e.reset();break}}}}if(D.keepFieldsRef)for(const Y of l.mount)J(Y,Q(B,Y));else n={}}r=s.shouldUnregister?D.keepDefaultValues?Se(i):{}:Se(B),h.array.next({values:{...B}}),h.state.next({values:{...B}})}l={mount:D.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!m.isValid||!!D.keepIsValid||!!D.keepDirtyValues,o.watch=!!s.shouldUnregister,h.state.next({submitCount:D.keepSubmitCount?a.submitCount:0,isDirty:H?!1:D.keepDirty?a.isDirty:!!(D.keepDefaultValues&&!st(S,i)),isSubmitted:D.keepIsSubmitted?a.isSubmitted:!1,dirtyFields:H?{}:D.keepDirtyValues?D.keepDefaultValues&&r?jt(i,r):a.dirtyFields:D.keepDefaultValues&&S?jt(i,S):D.keepDirty?a.dirtyFields:{},touchedFields:D.keepTouched?a.touchedFields:{},errors:D.keepErrors?a.errors:{},isSubmitSuccessful:D.keepIsSubmitSuccessful?a.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},X=(S,D)=>I(Ve(S)?S(r):S,D),oe=(S,D={})=>{const M=Q(n,S),G=M&&M._f;if(G){const H=G.refs?G.refs[0]:G.ref;H.focus&&(H.focus(),D.shouldSelect&&Ve(H.select)&&H.select())}},le=S=>{a={...a,...S}},qe={control:{register:Je,unregister:We,getFieldState:z,handleSubmit:b,setError:ae,_subscribe:xe,_runSchema:T,_focusError:P,_getWatch:W,_getDirty:q,_setValid:y,_setFieldArray:E,_setDisabledField:Ye,_setErrors:N,_getFieldArray:_,_reset:I,_resetDefaultValues:()=>Ve(s.defaultValues)&&s.defaultValues().then(S=>{X(S,s.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:ne,_subjects:h,_proxyFormState:m,get _fields(){return n},get _formValues(){return r},get _state(){return o},set _state(S){o=S},get _defaultValues(){return i},get _names(){return l},set _names(S){l=S},get _formState(){return a},get _options(){return s},set _options(S){s={...s,...S}}},subscribe:rt,trigger:ce,register:Je,handleSubmit:b,watch:me,setValue:J,getValues:$,reset:X,resetField:L,clearErrors:ee,unregister:We,setError:ae,setFocus:oe,getFieldState:z};return{...qe,formControl:qe}}function Ct(t={}){const s=be.useRef(void 0),a=be.useRef(void 0),[n,i]=be.useState({isDirty:!1,isValidating:!1,isLoading:Ve(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:Ve(t.defaultValues)?void 0:t.defaultValues});if(!s.current)if(t.formControl)s.current={...t.formControl,formState:n},t.defaultValues&&!Ve(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:o,...l}=Bu(t);s.current={...l,formState:n}}const r=s.current.control;return r._options=t,ji(()=>{const o=r._subscribe({formState:r._proxyFormState,callback:()=>i({...r._formState}),reRenderRoot:!0});return i(l=>({...l,isReady:!0})),r._formState.isReady=!0,o},[r]),be.useEffect(()=>r._disableForm(t.disabled),[r,t.disabled]),be.useEffect(()=>{t.mode&&(r._options.mode=t.mode),t.reValidateMode&&(r._options.reValidateMode=t.reValidateMode)},[r,t.mode,t.reValidateMode]),be.useEffect(()=>{t.errors&&(r._setErrors(t.errors),r._focusError())},[r,t.errors]),be.useEffect(()=>{t.shouldUnregister&&r._subjects.state.next({values:r._getWatch()})},[r,t.shouldUnregister]),be.useEffect(()=>{if(r._proxyFormState.isDirty){const o=r._getDirty();o!==n.isDirty&&r._subjects.state.next({isDirty:o})}},[r,n.isDirty]),be.useEffect(()=>{t.values&&!st(t.values,a.current)?(r._reset(t.values,{keepFieldsRef:!0,...r._options.resetOptions}),a.current=t.values,i(o=>({...o}))):r._resetDefaultValues()},[r,t.values]),be.useEffect(()=>{r._state.mount||(r._setValid(),r._state.mount=!0),r._state.watch&&(r._state.watch=!1,r._subjects.state.next({...r._formState})),r._removeUnmounted()}),s.current.formState=ku(n,r),s.current}const _u=()=>e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-green-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-emerald-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000"}),e.jsx("div",{className:"absolute top-40 left-40 w-80 h-80 bg-teal-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-4000"})]}),e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"max-w-4xl w-full flex bg-white rounded-3xl shadow-2xl overflow-hidden relative z-10",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-green-600 via-emerald-600 to-teal-600 p-12 flex-col justify-center relative",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-10"}),e.jsx("div",{className:"relative z-10",children:e.jsxs(V.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.3,duration:.8},children:[e.jsx("div",{className:"w-16 h-16 bg-white bg-opacity-30 rounded-2xl flex items-center justify-center mb-8 backdrop-blur-sm animate-pulse",children:e.jsx("div",{className:"w-8 h-8 bg-white bg-opacity-50 rounded"})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"h-10 bg-white bg-opacity-30 rounded-lg mb-2 animate-pulse"}),e.jsx("div",{className:"h-6 bg-white bg-opacity-20 rounded-lg w-3/4 animate-pulse"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"h-4 bg-white bg-opacity-20 rounded mb-2 animate-pulse"}),e.jsx("div",{className:"h-4 bg-white bg-opacity-20 rounded mb-2 w-5/6 animate-pulse"}),e.jsx("div",{className:"h-4 bg-white bg-opacity-20 rounded w-4/5 animate-pulse"})]}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex items-center animate-pulse",children:[e.jsx("div",{className:"w-2 h-2 bg-white bg-opacity-40 rounded-full mr-3"}),e.jsx("div",{className:"h-4 bg-white bg-opacity-20 rounded flex-1"})]},t))})]})})]}),e.jsxs("div",{className:"w-full lg:w-1/2 p-12 flex flex-col justify-center",children:[e.jsx(V.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{delay:.4,duration:.8},children:e.jsxs("div",{className:"text-center lg:text-left mb-8",children:[e.jsx("div",{className:"lg:hidden w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center mx-auto lg:mx-0 mb-6 shadow-lg animate-pulse",children:e.jsx("div",{className:"w-8 h-8 bg-white bg-opacity-50 rounded"})}),e.jsx("div",{className:"h-8 bg-gray-200 rounded-lg mb-2 animate-pulse"}),e.jsx("div",{className:"h-5 bg-gray-100 rounded-lg w-3/4 animate-pulse"})]})}),e.jsx(V.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"grid grid-cols-2 gap-4 mb-6",children:[1,2].map(t=>e.jsxs("div",{className:"p-4 rounded-xl border-2 border-gray-200 bg-white animate-pulse",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded mx-auto mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-1"}),e.jsx("div",{className:"h-3 bg-gray-100 rounded w-2/3 mx-auto"})]},t))}),e.jsxs(V.div,{className:"space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 animate-pulse",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded flex-1"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-1/4 animate-pulse"}),e.jsx("div",{className:"h-12 bg-gray-100 rounded-xl animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-1/4 animate-pulse"}),e.jsx("div",{className:"h-12 bg-gray-100 rounded-xl animate-pulse"})]})]}),e.jsx("div",{children:e.jsx("div",{className:"w-full h-12 bg-gray-200 rounded-xl animate-pulse"})}),e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"h-3 bg-gray-100 rounded w-2/3 mx-auto animate-pulse"})})]})]})]})]});function Hu(){const[t,s]=u.useState(!1),[a,n]=u.useState(!1),[i,r]=u.useState(null),[o,l]=u.useState(!0),{login:d,isAuthenticated:c}=Fe(),m=He(),{register:f,handleSubmit:h,setValue:v,formState:{errors:g}}=Ct();u.useEffect(()=>{const E=setTimeout(()=>{l(!1)},2e3);return()=>clearTimeout(E)},[]),u.useEffect(()=>{c&&(console.log(" User authenticated, navigating to dashboard..."),m("/dashboard"))},[c,m]);const y=E=>{r(E),v("email",""),v("password","")},x=async E=>{n(!0);try{console.log(" [VERCEL] Attempting staff login..."),await d(E),console.log(" [VERCEL] Login successful, authentication state should update...")}catch(w){console.error(" [VERCEL] Login failed:",w)}finally{n(!1)}};return o?e.jsx(_u,{}):e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-green-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-emerald-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000"}),e.jsx("div",{className:"absolute top-40 left-40 w-80 h-80 bg-teal-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-4000"})]}),e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"max-w-4xl w-full flex bg-white rounded-3xl shadow-2xl overflow-hidden relative z-10",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-green-600 via-emerald-600 to-teal-600 p-12 flex-col justify-center relative",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-10"}),e.jsx("div",{className:"relative z-10",children:e.jsxs(V.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.3,duration:.8},children:[e.jsx("div",{className:"mb-10 flex justify-center items-center",children:e.jsx("img",{src:"/generated-image.png",alt:"Company Logo",className:"w-48 h-48 object-contain hover:scale-120 transition-all duration-300",style:{filter:"contrast(3.0) saturate(2.5) brightness(2.5) drop-shadow(0 6px 12px rgba(0,0,0,0.15))",imageRendering:"crisp-edges",maxWidth:"100%",maxHeight:"100%",transform:"translateZ(0)",backfaceVisibility:"hidden"}})}),e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Welcome Back!"}),e.jsx("p",{className:"text-green-100 text-lg mb-8 leading-relaxed",children:"Sign in to access your business loan management dashboard and streamline your financial operations."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-green-100",children:[e.jsx("div",{className:"w-2 h-2 bg-green-300 rounded-full mr-3"}),e.jsx("span",{children:"Secure loan processing"})]}),e.jsxs("div",{className:"flex items-center text-green-100",children:[e.jsx("div",{className:"w-2 h-2 bg-green-300 rounded-full mr-3"}),e.jsx("span",{children:"Real-time application tracking"})]}),e.jsxs("div",{className:"flex items-center text-green-100",children:[e.jsx("div",{className:"w-2 h-2 bg-green-300 rounded-full mr-3"}),e.jsx("span",{children:"Comprehensive dashboard"})]})]})]})})]}),e.jsxs("div",{className:"w-full lg:w-1/2 p-12 flex flex-col justify-center",children:[e.jsx(V.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{delay:.4,duration:.8},children:e.jsxs("div",{className:"text-center lg:text-left mb-8",children:[e.jsx("div",{className:"lg:hidden mb-8 flex justify-center items-center",children:e.jsx("img",{src:"/generated-image.png",alt:"Company Logo",className:"w-44 h-44 object-contain hover:scale-120 transition-all duration-300",style:{filter:"contrast(3.0) saturate(2.5) brightness(2.5) drop-shadow(0 6px 12px rgba(0,0,0,0.15))",imageRendering:"crisp-edges",maxWidth:"100%",maxHeight:"100%",transform:"translateZ(0)",backfaceVisibility:"hidden"}})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Login to your account"}),e.jsx("p",{className:"text-gray-600",children:"Choose your role and enter your credentials"})]})}),e.jsxs(V.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs(V.button,{type:"button",onClick:()=>y("ADMIN"),className:`p-4 rounded-xl border-2 transition-all duration-300 ${i==="ADMIN"?"border-green-500 bg-green-50 shadow-lg ring-2 ring-green-200":"border-gray-200 bg-white hover:border-green-300 hover:shadow-md"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(kt,{className:`h-8 w-8 mx-auto mb-2 ${i==="ADMIN"?"text-green-600":"text-gray-400"}`}),e.jsx("div",{className:`font-semibold ${i==="ADMIN"?"text-green-900":"text-gray-700"}`,children:"Admin"}),e.jsx("div",{className:`text-xs ${i==="ADMIN"?"text-green-600":"text-gray-500"}`,children:"Full Access"})]}),e.jsxs(V.button,{type:"button",onClick:()=>y("EMPLOYEE"),className:`p-4 rounded-xl border-2 transition-all duration-300 ${i==="EMPLOYEE"?"border-emerald-500 bg-emerald-50 shadow-lg ring-2 ring-emerald-200":"border-gray-200 bg-white hover:border-emerald-300 hover:shadow-md"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(it,{className:`h-8 w-8 mx-auto mb-2 ${i==="EMPLOYEE"?"text-emerald-600":"text-gray-400"}`}),e.jsx("div",{className:`font-semibold ${i==="EMPLOYEE"?"text-emerald-900":"text-gray-700"}`,children:"Employee"}),e.jsx("div",{className:`text-xs ${i==="EMPLOYEE"?"text-emerald-600":"text-gray-500"}`,children:"Limited Access"})]})]}),e.jsxs(V.form,{className:"space-y-6",onSubmit:h(x),initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:[i&&e.jsx(V.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[i==="ADMIN"?e.jsx(kt,{className:"h-5 w-5 text-green-600"}):e.jsx(it,{className:"h-5 w-5 text-emerald-600"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Logging in as ",i==="ADMIN"?"Admin":"Employee"]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-2",children:"Email Address"}),e.jsx("input",{...f("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),type:"email",className:"input-field",placeholder:"Enter your email"}),g.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{...f("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),type:t?"text":"password",className:"input-field pr-12",placeholder:"Enter your password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-4 flex items-center",onClick:()=>s(!t),children:t?e.jsx(us,{className:"h-5 w-5 text-slate-400 hover:text-slate-600"}):e.jsx(Le,{className:"h-5 w-5 text-slate-400 hover:text-slate-600"})})]}),g.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.password.message})]})]}),e.jsx("div",{children:e.jsx(V.button,{type:"submit",disabled:a||!i,className:`w-full py-3 px-4 rounded-xl font-semibold text-white transition-all duration-300 ${i?"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 shadow-lg hover:shadow-xl":"bg-gray-300 cursor-not-allowed"} ${a?"animate-pulse":""}`,whileHover:i&&!a?{scale:1.02}:{},whileTap:i&&!a?{scale:.98}:{},children:a?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Signing in..."})]}):i?`Sign in as ${i==="ADMIN"?"Admin":"Employee"}`:"Select a role to continue"})})]})]})]})]})}const Gu=()=>{const{user:t}=Fe(),{data:s,isLoading:a,error:n,refetch:i}=ue(["dashboard-data",t==null?void 0:t.id],async()=>{var p,k,T,C;console.log(" [RENDER] Fetching dashboard data for user:",t==null?void 0:t.name),console.log(" [RENDER] Backend URL:",U.defaults.baseURL);let r=[];try{console.log(" [RENDER] Fetching enquiries from /api/enquiries..."),r=(await U.get("/api/enquiries")).data||[],console.log(" [RENDER] Dashboard fetched enquiries:",r.length,"enquiries"),r.length>0&&console.log(" [RENDER] Sample enquiry:",r[0])}catch(A){console.error(" [RENDER] Enquiries fetch error:",A.message),console.error(" [RENDER] Error details:",{status:(p=A.response)==null?void 0:p.status,statusText:(k=A.response)==null?void 0:k.statusText,url:(T=A.config)==null?void 0:T.url}),r=[]}let o=0;try{console.log(" [RENDER] Fetching shortlist from /api/shortlist..."),o=((await U.get("/api/shortlist")).data||[]).length||0,console.log(" [RENDER] Dashboard fetched shortlists:",o,"shortlists")}catch(A){console.error(" [RENDER] Shortlist fetch error:",A.message),o=0}let l=0,d=0,c=0;try{console.log(" [RENDER] Fetching documents from /api/documents...");const R=(await U.get("/api/documents")).data||[];d=R.length||0,c=R.filter(q=>q.verified).length||0,l=R.filter(q=>!q.verified).length||0,console.log(" [RENDER] Documents stats:",{total:d,verified:c,awaiting:l})}catch(A){console.error(" [RENDER] Documents fetch error:",A.message),l=0,d=0,c=0}let m=0,f=0;try{console.log(" [RENDER] Fetching payments from /api/cashfree...");let A;try{A=await U.get("/api/cashfree/applications")}catch{console.log(" [RENDER] Trying alternative payment endpoint..."),A=await U.get("/api/cashfree")}const R=A.data||[];f=R.length||0,m=R.filter(q=>q.status==="TRANSACTION_DONE"||q.status==="COMPLETED").length||0,console.log(" [RENDER] Payment stats:",{total:f,completed:m})}catch(A){console.error(" [RENDER] Payment fetch error:",A.message),m=0,f=0}let h=0,v=0,g=0;try{console.log(" [RENDER] Fetching transactions from /api/transactions...");const R=(await U.get("/api/transactions")).data||[];h=R.length||0,v=R.filter(q=>q.status==="COMPLETED").length||0,g=R.filter(q=>q.status==="PENDING").length||0,console.log(" [RENDER] Transactions stats:",{total:h,completed:v,pending:g})}catch(A){console.error(" [RENDER] Transactions fetch error:",A.message),h=0,v=0,g=0}let y=7,x=7;try{console.log(" [RENDER] Fetching staff from /api/staff...");const A=await U.get("/api/staff"),R=((C=A.data)==null?void 0:C.staff)||A.data||[];x=R.length||7,y=R.filter(q=>q.status==="ACTIVE"||q.hasAccess===!0).length||x,console.log(" [RENDER] Staff stats:",{total:x,active:y})}catch(A){console.error(" [RENDER] Staff fetch error:",A.message),y=7,x=7}const E={totalEnquiries:r.length,pendingReview:r.filter(A=>A.interestStatus==="INTERESTED"||A.interestStatus==="VERY_INTERESTED").length,approved:r.filter(A=>A.interestStatus==="APPROVED"||A.interestStatus==="SHORTLISTED").length,rejected:r.filter(A=>A.interestStatus==="NOT_INTERESTED"||A.interestStatus==="REJECTED").length,documentsAwaiting:l,clientsShortlisted:o,paymentGatewayComplete:m,totalTransactions:h,completedTransactions:v,pendingTransactions:g,totalRevenue:m*5e5,monthlyGrowth:r.length>0?Math.round(Math.random()*20+5):0,activeStaff:y};console.log(" [RENDER] Final dashboard stats:",E);const w=r.length,N=[{stage:"Initial Enquiry",count:E.totalEnquiries,percentage:w>0?100:0,color:"bg-blue-500"},{stage:"Documents Awaiting Verification",count:E.documentsAwaiting,percentage:w>0?Math.round(E.documentsAwaiting/w*100):0,color:"bg-indigo-500"},{stage:"Under Review",count:E.pendingReview,percentage:w>0?Math.round(E.pendingReview/w*100):0,color:"bg-purple-500"},{stage:"Approved",count:E.approved,percentage:w>0?Math.round(E.approved/w*100):0,color:"bg-green-500"},{stage:"Loan Disbursed",count:E.paymentGatewayComplete,percentage:w>0?Math.round(E.paymentGatewayComplete/w*100):0,color:"bg-emerald-500"},{stage:"Transactions Completed",count:E.completedTransactions,percentage:w>0?Math.round(E.completedTransactions/w*100):0,color:"bg-teal-500"}],j=r.sort((A,R)=>new Date(R.createdAt).getTime()-new Date(A.createdAt).getTime()).slice(0,10).map(A=>{var q;let R="Unassigned";return(q=A.staff)!=null&&q.name?R=A.staff.name:A.assignedStaff?R=A.assignedStaff:A.staffId&&(R={1:"Perivi (Admin)",2:"Venkat (Employee)",3:"Harish (Admin)",4:"Pankil (Admin)",5:"Dinesh (Employee)",6:"Nunciya (Admin)",7:"Admin User (System Admin)"}[A.staffId]||`Staff ID: ${A.staffId}`),{id:A.id,name:A.name||A.businessName||`Client ${A.id}`,mobile:A.mobile||"N/A",businessType:A.businessType||"General Business",interestStatus:A.interestStatus||"INTERESTED",createdAt:A.createdAt||new Date().toISOString(),staff:{name:R}}});return{stats:E,enquiryFunnel:N,recentEnquiries:j}},{enabled:!!t,staleTime:2*60*1e3,cacheTime:15*60*1e3,refetchInterval:60*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchIntervalInBackground:!1,retry:(r,o)=>{var l,d;return((l=o==null?void 0:o.response)==null?void 0:l.status)>=400&&((d=o==null?void 0:o.response)==null?void 0:d.status)<500?!1:r<3},retryDelay:r=>Math.min(1e3*2**r,1e4),onSuccess:r=>{console.log(" [RENDER] Dashboard data updated successfully:",{totalEnquiries:r.stats.totalEnquiries,documentsAwaiting:r.stats.documentsAwaiting,shortlisted:r.stats.clientsShortlisted,payments:r.stats.paymentGatewayComplete,transactions:r.stats.totalTransactions,activeStaff:r.stats.activeStaff,timestamp:new Date().toLocaleTimeString(),environment:"RENDER"})},onError:r=>{var o,l,d;console.error(" [RENDER] Dashboard data fetch error:",{message:r.message,status:(o=r.response)==null?void 0:o.status,statusText:(l=r.response)==null?void 0:l.statusText,url:(d=r.config)==null?void 0:d.url})},select:r=>r||{stats:{totalEnquiries:0,pendingReview:0,approved:0,rejected:0,documentsAwaiting:0,clientsShortlisted:0,paymentGatewayComplete:0,totalTransactions:0,completedTransactions:0,pendingTransactions:0,totalRevenue:0,monthlyGrowth:0,activeStaff:7},enquiryFunnel:[{stage:"Initial Enquiry",count:0,percentage:0,color:"bg-blue-500"},{stage:"Documents Awaiting Verification",count:0,percentage:0,color:"bg-indigo-500"},{stage:"Under Review",count:0,percentage:0,color:"bg-purple-500"},{stage:"Approved",count:0,percentage:0,color:"bg-green-500"},{stage:"Loan Disbursed",count:0,percentage:0,color:"bg-emerald-500"},{stage:"Transactions Completed",count:0,percentage:0,color:"bg-teal-500"}],recentEnquiries:[]}});return{data:s||{stats:{totalEnquiries:0,pendingReview:0,approved:0,rejected:0,documentsAwaiting:0,clientsShortlisted:0,paymentGatewayComplete:0,totalTransactions:0,completedTransactions:0,pendingTransactions:0,totalRevenue:0,monthlyGrowth:0,activeStaff:7},enquiryFunnel:[{stage:"Initial Enquiry",count:0,percentage:0,color:"bg-blue-500"},{stage:"Documents Awaiting Verification",count:0,percentage:0,color:"bg-indigo-500"},{stage:"Under Review",count:0,percentage:0,color:"bg-purple-500"},{stage:"Approved",count:0,percentage:0,color:"bg-green-500"},{stage:"Loan Disbursed",count:0,percentage:0,color:"bg-emerald-500"},{stage:"Transactions Completed",count:0,percentage:0,color:"bg-teal-500"}],recentEnquiries:[]},loading:a,error:n,refetch:i}},Wu=()=>{const{user:t}=Fe(),{data:s,isLoading:a,error:n,refetch:i}=ue(["individual-dashboard",t==null?void 0:t.id,t==null?void 0:t.email],async()=>{if(console.log(" [RENDER] Fetching individual dashboard for staff:",t==null?void 0:t.name,"(",t==null?void 0:t.email,")"),console.log(" [RENDER] User role:",t==null?void 0:t.role,"ID:",t==null?void 0:t.id),!t)throw new Error("User not authenticated");let r=[];try{console.log(" [RENDER] Fetching enquiries for staff assignment filtering...");const A=(await U.get("/api/enquiries")).data||[];console.log(" [RENDER] Total enquiries fetched:",A.length),r=A.filter(R=>{var J,se;const q=R.staffId===t.id,W=R.assignedStaff===t.name||((J=R.staff)==null?void 0:J.name)===t.name,_=((se=R.staff)==null?void 0:se.email)===t.email;if(t.role==="ADMIN"||t.email==="admin@gmail.com"||t.email==="admin@businessloan.com"||["gowthaamankrishna1998@gmail.com","newacttmis@gmail.com","tmsnunciya59@gmail.com"].includes(t.email))return!0;const re=q||W||_;return re&&console.log(" [RENDER] Enquiry assigned to",t.name,":",R.name),re}),console.log(" [RENDER] Staff",t.name,"assigned enquiries:",r.length),r.length>0&&console.log(" [RENDER] Sample assigned enquiry:",r[0])}catch(C){console.error(" [RENDER] Enquiries fetch error:",C.message),r=[]}let o=[];try{console.log(" [RENDER] Fetching documents for staff processing...");const A=(await U.get("/api/documents")).data||[];console.log(" [RENDER] Total documents fetched:",A.length),o=A.filter(R=>{var _;const q=R.verifiedBy===t.name||((_=R.uploadedBy)==null?void 0:_.name)===t.name||R.staffId===t.id;return t.role==="ADMIN"||t.email==="admin@gmail.com"||t.email==="admin@businessloan.com"||["gowthaamankrishna1998@gmail.com","newacttmis@gmail.com","tmsnunciya59@gmail.com"].includes(t.email)?!0:q}),console.log(" [RENDER] Staff",t.name,"processed documents:",o.length)}catch(C){console.error(" [RENDER] Documents fetch error:",C.message),o=[]}let l=[];try{console.log(" [RENDER] Fetching shortlists for staff management...");const A=(await U.get("/api/shortlist")).data||[];console.log(" [RENDER] Total shortlists fetched:",A.length),l=A.filter(R=>{const q=R.createdBy===t.name||R.staffId===t.id||R.staff===t.name;return t.role==="ADMIN"||t.email==="admin@gmail.com"||t.email==="admin@businessloan.com"||["gowthaamankrishna1998@gmail.com","newacttmis@gmail.com","tmsnunciya59@gmail.com"].includes(t.email)?!0:q}),console.log(" [RENDER] Staff",t.name,"managed shortlists:",l.length)}catch(C){console.error(" [RENDER] Shortlists fetch error:",C.message),l=[]}let d=[];try{console.log(" [RENDER] Fetching payment applications for staff processing...");let C;try{C=await U.get("/api/cashfree/applications")}catch{console.log(" [RENDER] Trying alternative payment endpoint..."),C=await U.get("/api/cashfree")}const A=C.data||[];console.log(" [RENDER] Total payment applications fetched:",A.length),d=A.filter(R=>{var _,Z;const q=((_=R.submittedBy)==null?void 0:_.name)===t.name||((Z=R.submittedBy)==null?void 0:Z.email)===t.email||R.staffId===t.id;return t.role==="ADMIN"||t.email==="admin@gmail.com"||t.email==="admin@businessloan.com"||["gowthaamankrishna1998@gmail.com","newacttmis@gmail.com","tmsnunciya59@gmail.com"].includes(t.email)?!0:q}),console.log(" [RENDER] Staff",t.name,"handled payments:",d.length)}catch(C){console.error(" [RENDER] Payments fetch error:",C.message),d=[]}const c=new Date,m=new Date(c.setDate(c.getDate()-c.getDay())),f=new Date(m);f.setDate(f.getDate()-7);const h=new Date(c.getFullYear(),c.getMonth(),1),v=r.filter(C=>new Date(C.createdAt)>=m).length,g=r.filter(C=>{const A=new Date(C.createdAt);return A>=f&&A<m}).length,y=r.filter(C=>new Date(C.createdAt)>=h).length,x=o.filter(C=>C.verified).length,E=o.filter(C=>!C.verified).length,w=d.filter(C=>C.status==="COMPLETED"||C.status==="TRANSACTION_DONE").length,N=d.filter(C=>C.status==="PENDING"||C.status==="PROCESSING").length,j={myEnquiries:r.length,myDocumentsProcessed:x,myShortlisted:l.length,myPaymentApplications:d.length,myCompletedTasks:x+l.length+w,myPendingTasks:E+N,totalClientsHandled:r.length,successRate:r.length>0?Math.round(w/r.length*100):0,thisMonthEnquiries:y,thisWeekEnquiries:v};console.log(" [RENDER] Individual dashboard stats for",t.name,":",j);const p=[...r.slice(0,3).map(C=>({id:C.id,type:"ENQUIRY",clientName:C.name||C.businessName||"Unknown Client",action:"New enquiry received",timestamp:C.createdAt,status:C.interestStatus||"PENDING"})),...o.slice(0,2).map(C=>{var A;return{id:C.id,type:"DOCUMENT",clientName:((A=C.enquiry)==null?void 0:A.name)||"Unknown Client",action:C.verified?"Document verified":"Document uploaded",timestamp:C.createdAt,status:C.verified?"VERIFIED":"PENDING"}}),...l.slice(0,2).map(C=>({id:C.id,type:"SHORTLIST",clientName:C.name||"Unknown Client",action:"Added to shortlist",timestamp:C.createdAt,status:C.interestStatus||"ACTIVE"})),...d.slice(0,2).map(C=>{var A;return{id:C.id,type:"PAYMENT",clientName:((A=C.shortlist)==null?void 0:A.name)||"Unknown Client",action:"Payment application processed",timestamp:C.createdAt,status:C.status||"PENDING"}})].sort((C,A)=>new Date(A.timestamp).getTime()-new Date(C.timestamp).getTime()).slice(0,8),k=r.map(C=>({id:C.id,name:C.name||C.businessName||"Unknown Client",mobile:C.mobile||"N/A",businessType:C.businessType||"General Business",status:C.interestStatus||"INTERESTED",lastActivity:C.createdAt,documentsCount:o.filter(A=>A.enquiryId===C.id).length,isShortlisted:l.some(A=>A.enquiryId===C.id),hasPaymentApplication:d.some(A=>{var R,q;return((q=(R=A.shortlist)==null?void 0:R.enquiry)==null?void 0:q.id)===C.id})})),T={thisWeek:v,lastWeek:g,growth:g>0?Math.round((v-g)/g*100):0};return{stats:j,recentActivities:p,myClients:k,performanceMetrics:T}},{enabled:!!t,staleTime:2*60*1e3,cacheTime:15*60*1e3,refetchInterval:90*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchIntervalInBackground:!1,retry:(r,o)=>{var l,d;return((l=o==null?void 0:o.response)==null?void 0:l.status)>=400&&((d=o==null?void 0:o.response)==null?void 0:d.status)<500?!1:r<2},retryDelay:r=>Math.min(1e3*2**r,8e3),onSuccess:r=>{console.log(" [RENDER] Individual dashboard updated successfully for",t==null?void 0:t.name,":",{myEnquiries:r.stats.myEnquiries,documentsProcessed:r.stats.myDocumentsProcessed,myShortlisted:r.stats.myShortlisted,myPayments:r.stats.myPaymentApplications,completedTasks:r.stats.myCompletedTasks,pendingTasks:r.stats.myPendingTasks,successRate:r.stats.successRate,totalClients:r.stats.totalClientsHandled,role:t==null?void 0:t.role,isAdmin:(t==null?void 0:t.role)==="ADMIN",timestamp:new Date().toLocaleTimeString(),environment:"RENDER"})},onError:r=>{var o,l,d;console.error(" [RENDER] Individual dashboard fetch error for",t==null?void 0:t.name,":",{message:r.message,status:(o=r.response)==null?void 0:o.status,statusText:(l=r.response)==null?void 0:l.statusText,url:(d=r.config)==null?void 0:d.url})}});return{data:s||{stats:{myEnquiries:0,myDocumentsProcessed:0,myShortlisted:0,myPaymentApplications:0,myCompletedTasks:0,myPendingTasks:0,totalClientsHandled:0,successRate:0,thisMonthEnquiries:0,thisWeekEnquiries:0},recentActivities:[],myClients:[],performanceMetrics:{thisWeek:0,lastWeek:0,growth:0}},loading:a,error:n,refetch:i}};function Zu({onSwitchToGlobal:t}){const{user:s}=Fe(),{data:a,loading:n,refetch:i}=Wu(),r=l=>{switch(l==null?void 0:l.toLowerCase()){case"completed":case"verified":case"approved":return"bg-green-100 text-green-800";case"interested":case"active":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"not_interested":case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},o=l=>{switch(l){case"ENQUIRY":return ht;case"DOCUMENT":return ke;case"SHORTLIST":return Vs;case"PAYMENT":return ns;default:return ht}};return n?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((l,d)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded-xl"},d))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"h-96 bg-gray-200 rounded-xl"}),e.jsx("div",{className:"h-96 bg-gray-200 rounded-xl"})]})]})}):e.jsxs("div",{className:"p-8 space-y-8 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 min-h-screen",children:[e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-600 rounded-2xl p-8 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{onClick:t,className:"bg-white bg-opacity-10 rounded-xl p-4 border border-white border-opacity-20 hover:bg-opacity-20 transition-all duration-200 cursor-pointer",title:"Switch to Global Dashboard",children:[e.jsx("h2",{className:"text-xl font-semibold mb-1",children:"Global Dashboard"}),e.jsx("p",{className:"text-blue-200 text-sm",children:"System Overview"})]}),e.jsxs("div",{className:"bg-white bg-opacity-20 rounded-xl p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-1",children:"My Dashboard"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"Personal Stats"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center justify-end space-x-2 mb-1",children:[e.jsx(Za,{className:"h-5 w-5 text-yellow-300"}),e.jsxs("p",{className:"text-blue-100 text-sm",children:["Success Rate: ",a.stats.successRate,"%"]})]}),e.jsxs("p",{className:"text-blue-200 text-xs",children:[a.stats.totalClientsHandled," clients handled  Role: ",s==null?void 0:s.role]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[t&&e.jsxs("button",{onClick:t,className:"inline-flex items-center px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-white transition-all duration-200",title:"Switch to Global Dashboard",children:[e.jsx(wc,{className:"h-4 w-4 mr-2"}),"Global Dashboard"]}),e.jsxs("button",{onClick:()=>i(),disabled:n,className:`inline-flex items-center px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-white transition-all duration-200 ${n?"opacity-50 cursor-not-allowed":""}`,title:"Refresh my dashboard data",children:[e.jsx("svg",{className:`h-4 w-4 mr-2 ${n?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),n?"Updating...":"Refresh"]})]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(aa,{className:"h-5 w-5 text-green-300"}),e.jsxs("span",{className:"text-sm",children:["Growth: ",a.performanceMetrics.growth,"%"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(dd,{className:"h-5 w-5 text-orange-300"}),e.jsxs("span",{className:"text-sm",children:["This Week: ",a.performanceMetrics.thisWeek," enquiries"]})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[{title:"My Enquiries",value:a.stats.myEnquiries,icon:ht,color:"from-blue-500 to-blue-600",change:`+${a.stats.thisWeekEnquiries} this week`,trend:"up"},{title:"Documents Processed",value:a.stats.myDocumentsProcessed,icon:ke,color:"from-green-500 to-emerald-600",change:"Verified",trend:"up"},{title:"Clients Shortlisted",value:a.stats.myShortlisted,icon:Vs,color:"from-yellow-500 to-orange-500",change:"Active",trend:"up"},{title:"Payment Applications",value:a.stats.myPaymentApplications,icon:ns,color:"from-purple-500 to-indigo-600",change:"Processed",trend:"up"},{title:"Pending Tasks",value:a.stats.myPendingTasks,icon:Gt,color:"from-red-500 to-pink-600",change:"To Complete",trend:a.stats.myPendingTasks>0?"down":"up"}].map((l,d)=>{const c=l.icon;return e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:d*.1},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-r ${l.color}`,children:e.jsx(c,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:`flex items-center space-x-1 text-sm ${l.trend==="up"?"text-green-600":"text-red-600"}`,children:[l.trend==="up"?e.jsx(fi,{className:"h-4 w-4"}):e.jsx(mi,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:l.change})]})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:l.value}),e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:l.title})]},d)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(V.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"My Recent Activities"}),e.jsx(cs,{className:"h-6 w-6 text-gray-400"})]}),e.jsx("div",{className:"space-y-4",children:a.recentActivities.length>0?a.recentActivities.map((l,d)=>{const c=o(l.type);return e.jsxs(V.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4+d*.1},className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(c,{className:"h-8 w-8 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:l.action}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Client: ",l.clientName]}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(l.timestamp).toLocaleString()})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r(l.status)}`,children:l.status})})]},l.id)}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ht,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No recent activities"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Your activities will appear here"})]})})]}),e.jsxs(V.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["My Clients (",a.myClients.length,")"]}),e.jsx(it,{className:"h-6 w-6 text-gray-400"})]}),e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:a.myClients.length>0?a.myClients.map((l,d)=>e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5+d*.1},className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:l.name}),l.isShortlisted&&e.jsx(Vs,{className:"h-4 w-4 text-yellow-500"}),l.hasPaymentApplication&&e.jsx(ns,{className:"h-4 w-4 text-green-500"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:l.mobile}),e.jsx("p",{className:"text-xs text-gray-500",children:l.businessType}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[l.documentsCount," docs"]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${r(l.status)}`,children:l.status})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-1 text-blue-600 hover:text-blue-800",title:"View Client",children:e.jsx(Le,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-1 text-indigo-600 hover:text-indigo-800",title:"Edit Client",children:e.jsx(at,{className:"h-4 w-4"})})]})]},l.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(it,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No clients assigned"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Clients will appear here when assigned to you"})]})})]})]}),e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Performance Summary"}),e.jsx(Za,{className:"h-6 w-6 text-yellow-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:[a.stats.successRate,"%"]}),e.jsx("div",{className:"text-sm text-blue-700 font-medium",children:"Success Rate"}),e.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"Conversion to Payment"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:a.stats.myCompletedTasks}),e.jsx("div",{className:"text-sm text-green-700 font-medium",children:"Completed Tasks"}),e.jsx("div",{className:"text-xs text-green-600 mt-1",children:"This Month"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:a.stats.thisMonthEnquiries}),e.jsx("div",{className:"text-sm text-purple-700 font-medium",children:"This Month"}),e.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"New Enquiries"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-orange-50 to-red-50 rounded-xl",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:[a.performanceMetrics.growth>0?"+":"",a.performanceMetrics.growth,"%"]}),e.jsx("div",{className:"text-sm text-orange-700 font-medium",children:"Weekly Growth"}),e.jsx("div",{className:"text-xs text-orange-600 mt-1",children:"vs Last Week"})]})]})]})]})}const on={stats:{totalEnquiries:156,pendingReview:23,approved:89,rejected:44,documentsAwaiting:31,clientsShortlisted:12,paymentGatewayComplete:8,totalRevenue:245e4,monthlyGrowth:12.5,activeStaff:15},enquiryFunnel:[{stage:"Initial Enquiry",count:156,percentage:100,color:"bg-blue-500"},{stage:"Documents Submitted",count:98,percentage:62.8,color:"bg-indigo-500"},{stage:"Under Review",count:67,percentage:42.9,color:"bg-purple-500"},{stage:"Approved",count:45,percentage:28.8,color:"bg-green-500"},{stage:"Loan Disbursed",count:23,percentage:14.7,color:"bg-emerald-500"}],recentEnquiries:[{id:1,name:"TechCorp Solutions",contact:"Rajesh Kumar",amount:"50,00,000",status:"Under Review",date:"2 hours ago",priority:"high"},{id:2,name:"Global Enterprises",contact:"Priya Sharma",amount:"75,00,000",status:"Approved",date:"5 hours ago",priority:"medium"},{id:3,name:"StartupCorp",contact:"Amit Patel",amount:"25,00,000",status:"Pending Documents",date:"1 day ago",priority:"low"},{id:4,name:"InnovateTech",contact:"Sneha Reddy",amount:"1,20,00,000",status:"Under Review",date:"2 days ago",priority:"high"},{id:5,name:"BusinessHub",contact:"Vikram Singh",amount:"35,00,000",status:"Rejected",date:"3 days ago",priority:"low"}],rolePermissions:{employee:[{feature:"Enquiry & Doc Verification",access:"Active",color:"text-green-600"},{feature:"Basic Analytics View",access:"Active",color:"text-green-600"}],admin:[{feature:"Full Access - All Features",access:"Full Access",color:"text-blue-600"},{feature:"Staff Management & System Control",access:"Full Access",color:"text-blue-600"}]}};function Qu(){var v,g;const{user:t}=Fe(),s=He();u.useState("overview");const{data:a,loading:n,error:i,refetch:r}=Gu(),o=y=>{console.log(" Viewing enquiry:",y.name),s(`/enquiries?view=${y.id}`)},l=y=>{console.log(" Editing enquiry:",y.name),s(`/enquiries?edit=${y.id}`)},d=y=>{console.log(" Deleting enquiry:",y.name),window.confirm(`Are you sure you want to delete enquiry for ${y.name}?`)&&F.success(`Enquiry for ${y.name} deleted successfully`)},c=()=>{console.log(" Navigating to all enquiries"),s("/enquiries")},[m,f]=u.useState(!1);if(m)return e.jsx(Zu,{onSwitchToGlobal:()=>f(!1)});const h=y=>{switch(y==null?void 0:y.toLowerCase()){case"approved":return"bg-green-100 text-green-800";case"interested":return"bg-blue-100 text-blue-800";case"not_interested":return"bg-red-100 text-red-800";case"under review":return"bg-yellow-100 text-yellow-800";case"pending documents":return"bg-orange-100 text-orange-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return n?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((y,x)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded-xl"},x))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"h-96 bg-gray-200 rounded-xl"}),e.jsx("div",{className:"h-96 bg-gray-200 rounded-xl"})]})]})}):e.jsxs("div",{className:"p-8 space-y-8 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 min-h-screen",children:[e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 rounded-2xl p-8 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-6",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"bg-white bg-opacity-20 rounded-xl p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Global Dashboard"}),e.jsx("p",{className:"text-blue-100 text-sm",children:"System Overview"})]}),e.jsxs("button",{onClick:()=>f(!0),className:"bg-white bg-opacity-10 rounded-xl p-4 border border-white border-opacity-20 hover:bg-opacity-20 transition-all duration-200 cursor-pointer",title:"Switch to My Personal Dashboard",children:[e.jsx("h2",{className:"text-xl font-semibold mb-1",children:"My Dashboard"}),e.jsx("p",{className:"text-blue-200 text-sm",children:"Personal Stats"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center justify-end space-x-2 mb-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${n?"bg-yellow-300 animate-pulse":"bg-green-300"}`}),e.jsx("p",{className:"text-blue-100 text-sm",children:n?"Updating...":"Auto-refreshes every 10 seconds"})]}),e.jsx("p",{className:"text-blue-200 text-xs",children:a!=null&&a.stats?`${a.stats.totalEnquiries} enquiries  ${a.stats.activeStaff} staff  Last updated: ${new Date().toLocaleTimeString()}`:"Loading data..."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>f(!0),className:"inline-flex items-center px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-white transition-all duration-200",title:"Switch to My Personal Dashboard",children:[e.jsx(it,{className:"h-4 w-4 mr-2"}),"My Dashboard"]}),e.jsxs("button",{onClick:()=>r(),disabled:n,className:`inline-flex items-center px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-white transition-all duration-200 ${n?"opacity-50 cursor-not-allowed":""}`,title:"Refresh dashboard data",children:[e.jsx("svg",{className:`h-4 w-4 mr-2 ${n?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),n?"Updating...":"Refresh"]})]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(aa,{className:"h-5 w-5 text-green-300"}),e.jsxs("span",{className:"text-sm",children:["Revenue up ",((v=a==null?void 0:a.stats)==null?void 0:v.monthlyGrowth)||0,"%"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(yi,{className:"h-5 w-5 text-blue-300"}),e.jsxs("span",{className:"text-sm",children:[((g=a==null?void 0:a.stats)==null?void 0:g.activeStaff)||0," Active Staff"]})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[{title:"Total Enquiries",value:a.stats.totalEnquiries,icon:ht,color:"from-blue-500 to-blue-600",change:"+12%",trend:"up"},{title:"Documents Awaiting",value:a.stats.documentsAwaiting,icon:Gt,color:"from-orange-500 to-red-500",change:"+5%",trend:"up"},{title:"Clients Shortlisted",value:a.stats.clientsShortlisted,icon:ke,color:"from-green-500 to-emerald-600",change:"+8%",trend:"up"},{title:"Payment Gateway Complete",value:a.stats.paymentGatewayComplete,icon:ns,color:"from-purple-500 to-indigo-600",change:"+15%",trend:"up"},{title:"Total Transactions",value:a.stats.totalTransactions,icon:cs,color:"from-teal-500 to-cyan-600",change:"+10%",trend:"up"}].map((y,x)=>{const E=y.icon;return e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:x*.1},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-r ${y.color}`,children:e.jsx(E,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:`flex items-center space-x-1 text-sm ${y.trend==="up"?"text-green-600":"text-red-600"}`,children:[y.trend==="up"?e.jsx(fi,{className:"h-4 w-4"}):e.jsx(mi,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:y.change})]})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:y.value}),e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:y.title})]},x)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs(V.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"lg:col-span-2 bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Enquiry Funnel"}),e.jsx(cs,{className:"h-6 w-6 text-gray-400"})]}),e.jsx("div",{className:"space-y-4",children:a.enquiryFunnel.map((y,x)=>e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:y.stage}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900",children:y.count}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",y.percentage,"%)"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx(V.div,{initial:{width:0},animate:{width:`${y.percentage}%`},transition:{delay:.5+x*.1,duration:.8},className:`h-3 rounded-full ${y.color} relative overflow-hidden`,children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent"})})})]},x))}),e.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(aa,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Conversion Rate"}),e.jsxs("p",{className:"text-xs text-blue-700",children:[(a.enquiryFunnel[4].count/a.enquiryFunnel[0].count*100).toFixed(1),"% of enquiries result in loan disbursement"]})]})]})})]}),e.jsxs(V.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Role Permissions"}),e.jsx("div",{className:"space-y-4",children:((t==null?void 0:t.role)==="ADMIN"?on.rolePermissions.admin:on.rolePermissions.employee).map((y,x)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:y.feature}),e.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${y.color} bg-current bg-opacity-10`,children:y.access})]},x))}),e.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ke,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:"Access Level"}),e.jsx("p",{className:"text-xs text-green-700",children:(t==null?void 0:t.role)==="ADMIN"?"Full administrative access":"Employee level access"})]})]})})]})]}),e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Recent Enquiries"}),e.jsx("button",{onClick:c,className:"text-sm text-blue-600 hover:text-blue-800 font-medium transition-colors duration-200 hover:underline",children:"View All "})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"NAME"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"CONTACT"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"BUSINESS TYPE"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"STATUS"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"DATE"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"ACTIONS"})]})}),e.jsx("tbody",{children:((a==null?void 0:a.recentEnquiries)||[]).length>0?((a==null?void 0:a.recentEnquiries)||[]).map((y,x)=>{var E;return e.jsxs(V.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6+x*.1},className:"border-b border-gray-100 hover:bg-gray-50 border-l-4 border-l-blue-500",children:[e.jsxs("td",{className:"py-4 px-4",children:[e.jsx("div",{className:"font-medium text-gray-900",children:y.name||y.businessName||"N/A"}),e.jsx("div",{className:"text-sm text-gray-600",children:y.mobile})]}),e.jsx("td",{className:"py-4 px-4 text-gray-700",children:((E=y.staff)==null?void 0:E.name)||"Unassigned"}),e.jsx("td",{className:"py-4 px-4 text-gray-700",children:y.businessType||"Not specified"}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${h(y.interestStatus)}`,children:y.interestStatus})}),e.jsx("td",{className:"py-4 px-4 text-gray-600 text-sm",children:new Date(y.createdAt).toLocaleDateString()}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>o(y),className:"p-1 text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded transition-colors duration-200",title:"View Enquiry",children:e.jsx(Le,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>l(y),className:"p-1 text-indigo-600 hover:text-indigo-800 hover:bg-indigo-50 rounded transition-colors duration-200",title:"Edit Enquiry",children:e.jsx(at,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>d(y),className:"p-1 text-red-600 hover:text-red-800 hover:bg-red-50 rounded transition-colors duration-200",title:"Delete Enquiry",children:e.jsx(dt,{className:"h-4 w-4"})})]})})]},y.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-500",children:[e.jsx(ht,{className:"h-12 w-12 text-gray-300 mb-4"}),e.jsx("p",{className:"text-lg font-medium",children:"No enquiries yet"}),e.jsx("p",{className:"text-sm",children:"New enquiries will appear here automatically"})]})})})})]})})]})]})}function zu(){return e.jsx(Qu,{})}function Ku(){var j,p,k,T,C,A,R,q,W,_,Z,re,J,se,K,ce;const[t,s]=u.useState(""),[a,n]=u.useState(""),[i,r]=u.useState(null),[o,l]=u.useState({isOpen:!1,enquiry:null}),d=Ce(),{data:c,isLoading:m,isFetching:f,refetch:h,error:v}=ue(["enquiries",t,a],async()=>{const $=new URLSearchParams;return t&&$.append("name",t),a&&$.append("interestStatus",a),(await U.get(`/api/enquiries?${$}`)).data||[]},{staleTime:3*60*1e3,keepPreviousData:!0,onError:$=>{console.error("Failed to fetch enquiries:",$)},onSuccess:$=>{console.log(" Enquiries refreshed:",($==null?void 0:$.length)||0,"enquiries found"),r(new Date)}}),{data:g}=ue("staff-members",async()=>{var $;try{return(($=(await U.get("/api/staff")).data)==null?void 0:$.staff)||[]}catch{return console.log("No staff data available"),[]}},{staleTime:5*60*1e3}),y=fe(async $=>U.delete(`/api/enquiries/${$}`),{onSuccess:($,z)=>{F.success("Enquiry deleted successfully!"),d.setQueryData(["enquiries",t,a],ee=>ee&&ee.filter(ae=>ae.id!==z)),setTimeout(()=>{d.invalidateQueries("enquiries")},100)},onError:$=>{var z,ee;console.error("Delete error:",$),F.error(((ee=(z=$.response)==null?void 0:z.data)==null?void 0:ee.message)||"Failed to delete enquiry")}}),x=fe(async({enquiryId:$,staffId:z,staffName:ee})=>(console.log(" Assigning staff:",{enquiryId:$,staffId:z,staffName:ee}),U.post(`/api/enquiries/${$}/assign`,{staffId:z})),{onSuccess:($,{staffName:z})=>{console.log(" Staff assignment successful:",$.data),F.success(`Enquiry assigned to ${z} successfully!`),d.invalidateQueries(["enquiries"]),d.setQueryData(["enquiries"],ee=>ee&&ee.map(ae=>ae.id===$.data.id?$.data:ae))},onError:$=>{var z,ee;console.error(" Staff assignment error:",$),F.error(((ee=(z=$.response)==null?void 0:z.data)==null?void 0:ee.message)||"Failed to assign staff member")}}),E=($,z)=>{if(z){const ee=g==null?void 0:g.find(ae=>ae.name===z);ee?x.mutate({enquiryId:$,staffId:ee.id,staffName:ee.name}):F.error("Selected staff member not found")}},w=($,z)=>{window.confirm(`Are you sure you want to delete "${z}"? This will also delete all associated documents.`)&&y.mutate($)},N=$=>{console.log(" Viewing enquiry:",$.name),l({isOpen:!0,enquiry:$})};return m?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Enquiries"}),e.jsxs("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[e.jsx("div",{className:"h-10 bg-gray-200 rounded w-32 animate-pulse"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-40 animate-pulse"})]})]}),e.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-48 animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 animate-pulse"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-600 to-blue-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"SL.NO"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"DATE"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"CLIENT DETAILS"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"BUSINESS NAME"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"STATUS"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"STAFF"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"ACTIONS"})]})}),e.jsx("tbody",{className:"bg-white",children:[...Array(5)].map(($,z)=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-8 animate-pulse"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 animate-pulse"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-32 animate-pulse"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 animate-pulse"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-6 bg-gray-200 rounded-full w-16 animate-pulse"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 animate-pulse"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded animate-pulse"})]})})]},z))})]})})]})]}):v&&!c?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Enquiries"}),e.jsxs(Ee,{to:"/enquiries/new",className:"btn-primary inline-flex items-center mt-4 sm:mt-0",children:[e.jsx(xt,{className:"h-5 w-5 mr-2"}),"Add New Enquiry"]})]}),e.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 p-8 text-center",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to load enquiries"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"There was an error loading the enquiry data. Please try again."}),e.jsx("button",{onClick:()=>h(),className:"btn-primary",children:"Try Again"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Enquiries"}),f&&e.jsxs("div",{className:"flex items-center text-blue-600",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-sm",children:"Refreshing..."})]})]}),i&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",i.toLocaleTimeString(),"  Auto-refreshes every 10 seconds"]})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[e.jsxs("button",{onClick:()=>h(),disabled:f,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",title:"Refresh enquiries",children:[e.jsx("svg",{className:`h-4 w-4 mr-1 ${f?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]}),e.jsxs("select",{value:a,onChange:$=>n($.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"INTERESTED",children:" Interested"}),e.jsx("option",{value:"NOT_INTERESTED",children:" Not Interested"}),e.jsx("option",{value:"FOLLOW_UP_REQUIRED",children:" Follow Up Required"})]}),e.jsxs(Ee,{to:"/enquiries/new",className:"btn-primary inline-flex items-center whitespace-nowrap",children:[e.jsx(xt,{className:"h-5 w-5 mr-2"}),"Add New Enquiry"]})]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(At,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name...",value:t,onChange:$=>s($.target.value),className:"input-field pl-10"})]}),e.jsxs("select",{value:a,onChange:$=>n($.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"All Interest Status"}),e.jsx("option",{value:"INTERESTED",children:" Interested"}),e.jsx("option",{value:"NOT_INTERESTED",children:" Not Interested"}),e.jsx("option",{value:"FOLLOW_UP_REQUIRED",children:" Follow Up Required"})]}),e.jsx("button",{onClick:()=>{s(""),n(""),h()},className:"btn-secondary",children:"Clear Filters"})]})}),e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"table-modern",children:[e.jsx("div",{className:"px-8 py-6 border-b border-slate-200 bg-gradient-to-r from-slate-50 to-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"relative",children:[e.jsx(At,{className:"h-5 w-5 absolute left-4 top-3.5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search enquiries...",value:t,onChange:$=>s($.target.value),className:"input-search w-80"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-sm font-medium text-slate-600",children:[(c==null?void 0:c.length)||0," results"]}),e.jsx("div",{className:"h-4 w-px bg-slate-300"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Updated just now"})]})]})}),c&&c.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-600 to-blue-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"SL.NO"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"DATE"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"CLIENT DETAILS"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"BUSINESS NAME"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"STATUS"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"STAFF"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"ACTIONS"})]})}),e.jsx("tbody",{className:"bg-white",children:c.map(($,z)=>{var ee,ae,me;return e.jsxs(V.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:z*.05},className:"table-row",children:[e.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:z+1})}),e.jsxs("td",{className:"px-6 py-5 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-slate-900",children:$.enquiryDate?new Date($.enquiryDate).toLocaleDateString("en-IN"):$.createdAt?new Date($.createdAt).toLocaleDateString("en-IN"):new Date().toLocaleDateString("en-IN")}),$.followUpDate&&e.jsxs("div",{className:"text-xs text-orange-600",children:[" Follow up: ",new Date($.followUpDate).toLocaleDateString("en-IN")]})]}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-xs font-semibold text-white",children:((ae=(ee=$.name)==null?void 0:ee.charAt(0))==null?void 0:ae.toUpperCase())||"U"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:$.name||"Unknown"}),e.jsxs("div",{className:"text-sm text-slate-500",children:[" ",$.mobile||"No mobile"]}),$.email&&e.jsxs("div",{className:"text-xs text-slate-400",children:[" ",$.email]})]})]})}),e.jsxs("td",{className:"px-6 py-5",children:[e.jsx("div",{className:"text-sm font-medium text-slate-900",children:$.businessName||$.businessType||"Not Specified"}),$.gst&&e.jsxs("div",{className:"text-xs text-slate-500",children:["GST: ",$.gst]})]}),e.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${$.interestStatus==="INTERESTED"?"bg-green-100 text-green-800":$.interestStatus==="NOT_INTERESTED"?"bg-red-100 text-red-800":$.interestStatus==="FOLLOW_UP_REQUIRED"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:$.interestStatus==="INTERESTED"?" Interested":$.interestStatus==="NOT_INTERESTED"?" Not Interested":$.interestStatus==="FOLLOW_UP_REQUIRED"?" Follow Up":" Interested"}),$.comments&&e.jsx("div",{className:"text-xs text-slate-500",children:$.comments.replace(/_/g," ")})]})}),e.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-slate-600",children:((me=$.staff)==null?void 0:me.name)||$.assignedStaff||"Unassigned"}),e.jsxs("select",{value:$.assignedStaff||"",onChange:xe=>E($.id,xe.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 bg-white text-slate-600 focus:outline-none focus:ring-1 focus:ring-blue-500",disabled:x.isLoading,children:[e.jsx("option",{value:"",children:"Assign to staff..."}),g&&g.map(xe=>e.jsxs("option",{value:xe.name,children:[xe.name," - ",xe.role]},xe.id))]})]})}),e.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>N($),className:"inline-flex items-center justify-center w-8 h-8 bg-blue-100 border border-blue-200 rounded-md text-blue-600 hover:bg-blue-200 hover:border-blue-300 transition-all duration-200",title:"View Enquiry",children:e.jsx(Le,{className:"h-4 w-4"})}),e.jsx(Ee,{to:`/enquiries/${$.id}/edit`,className:"inline-flex items-center justify-center w-8 h-8 bg-orange-100 border border-orange-200 rounded-md text-orange-600 hover:bg-orange-200 hover:border-orange-300 transition-all duration-200",title:"Edit Enquiry",children:e.jsx(at,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>w($.id,$.name),disabled:y.isLoading,className:"inline-flex items-center justify-center w-8 h-8 bg-red-100 border border-red-200 rounded-md text-red-600 hover:bg-red-200 hover:border-red-300 disabled:opacity-50 transition-all duration-200",title:"Delete Enquiry",children:e.jsx(dt,{className:"h-4 w-4"})})]})})]},$.id)})})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"No enquiries found."}),e.jsxs(Ee,{to:"/enquiries/new",className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg inline-flex items-center mt-4",children:[e.jsx(xt,{className:"h-5 w-5 mr-2"}),"Create First Enquiry"]})]})]}),o.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Enquiry Details - ",(j=o.enquiry)==null?void 0:j.name]}),e.jsx("button",{onClick:()=>l({isOpen:!1,enquiry:null}),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Be,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:((p=o.enquiry)==null?void 0:p.name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mobile"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:((k=o.enquiry)==null?void 0:k.mobile)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Business Type"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:((T=o.enquiry)==null?void 0:T.businessType)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"GST Number"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:((C=o.enquiry)==null?void 0:C.gstNumber)||((A=o.enquiry)==null?void 0:A.gst)||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Status & Assignment"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Interest Status"}),e.jsx("p",{className:"mt-1",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${((R=o.enquiry)==null?void 0:R.interestStatus)==="INTERESTED"?"bg-green-100 text-green-800":((q=o.enquiry)==null?void 0:q.interestStatus)==="NOT_INTERESTED"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:((W=o.enquiry)==null?void 0:W.interestStatus)||"PENDING"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assigned Staff"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:((_=o.enquiry)==null?void 0:_.assignedStaff)||((re=(Z=o.enquiry)==null?void 0:Z.staff)==null?void 0:re.name)||"Unassigned"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Source"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:((J=o.enquiry)==null?void 0:J.source)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Created Date"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:(se=o.enquiry)!=null&&se.createdAt?new Date(o.enquiry.createdAt).toLocaleDateString():"N/A"})]})]})]}),((K=o.enquiry)==null?void 0:K.comments)&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Comments"}),e.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md",children:o.enquiry.comments})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t bg-gray-50",children:[e.jsx("button",{onClick:()=>l({isOpen:!1,enquiry:null}),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"}),e.jsx(Ee,{to:`/enquiries/${(ce=o.enquiry)==null?void 0:ce.id}/edit`,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700",onClick:()=>l({isOpen:!1,enquiry:null}),children:"Edit Enquiry"})]})]})})]})}function Hs(){const t=He(),{id:s}=gs(),[a]=Qi(),n=Ce(),i=!!s,r=a.get("view")==="true",{register:o,handleSubmit:l,reset:d,formState:{errors:c}}=Ct(),{data:m,isLoading:f}=ue(["enquiry",s],async()=>{if(!s)return null;console.log(" Fetching enquiry data for ID:",s);const y=await U.get(`/api/enquiries/${s}`);return console.log(" Enquiry data received:",y.data),y.data},{enabled:!!s}),{data:h}=ue("staff-members",async()=>{var y;try{return((y=(await U.get("/api/staff")).data)==null?void 0:y.staff)||[]}catch{return console.log("No staff data available"),[]}},{staleTime:5*60*1e3}),v=fe(async y=>{var E,w,N,j,p,k;console.log(" Mutation executing with data:",y);const x=i?`/api/enquiries/${s}`:"/api/enquiries";console.log(" Making request to:",x);try{const T=i?await U.patch(x,y):await U.post(x,y);return console.log(" API response received:",T.data),T}catch(T){throw console.error(" API request failed:",T),console.error(" Error details:",{message:T.message,status:(E=T.response)==null?void 0:E.status,statusText:(w=T.response)==null?void 0:w.statusText,data:(N=T.response)==null?void 0:N.data,config:{url:(j=T.config)==null?void 0:j.url,method:(p=T.config)==null?void 0:p.method,baseURL:(k=T.config)==null?void 0:k.baseURL}}),T}},{onSuccess:y=>{console.log(" Mutation success:",y.data);const x=i?"Enquiry updated successfully!":"Enquiry created successfully!";F.success(x),i?(n.invalidateQueries(["enquiries"]),n.invalidateQueries(["enquiry",s]),n.setQueryData(["enquiries"],E=>E&&E.map(w=>w.id===parseInt(s)?{...w,...y.data}:w)),t("/enquiries")):(n.invalidateQueries(["enquiries"]),F.success("Redirecting to document verification...",{duration:2e3}),setTimeout(()=>{t("/documents/verification")},1500))},onError:y=>{var E,w;console.error(" Mutation error:",y);const x=((w=(E=y.response)==null?void 0:E.data)==null?void 0:w.message)||y.message||"Something went wrong";console.error(" Error message to show:",x),F.error(x)}});u.useEffect(()=>{var y;if(m&&(i||r)){console.log(" Resetting form with enquiry data:",m);const x={name:m.name||"",mobile:m.mobile||"",businessType:m.businessType||m.businessName||"",gstNumber:m.gstNumber||m.gst||"",comments:m.comments||"",interestStatus:m.interestStatus||"",assignedStaff:m.assignedStaff||((y=m.staff)==null?void 0:y.name)||"",enquiryDate:m.enquiryDate?new Date(m.enquiryDate).toISOString().split("T")[0]:m.createdAt?new Date(m.createdAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],followUpDate:m.followUpDate?new Date(m.followUpDate).toISOString().split("T")[0]:"",additionalComments:m.additionalComments||""};console.log(" Form data being set:",x),d(x)}},[m,i,r,d]);const g=y=>{var E,w;if(console.log(" Submitting enquiry form with data:",y),console.log(" Form validation - Name:",y.name,"Mobile:",y.mobile),console.log(" API endpoint will be:",i?`/api/enquiries/${s}`:"/api/enquiries"),!((E=y.name)!=null&&E.trim())){console.error(" Validation failed: Name is empty"),F.error("Please enter a valid name");return}if(!((w=y.mobile)!=null&&w.match(/^[0-9]{10}$/))){console.error(" Validation failed: Invalid mobile number:",y.mobile),F.error("Please enter a valid 10-digit mobile number");return}console.log(" Client-side validation passed"),y.assignedStaff?console.log(" Enquiry assigned to staff:",y.assignedStaff):console.log(" No staff assigned to this enquiry");const x=F.loading(i?"Updating enquiry...":"Creating enquiry...");console.log(" Starting API request..."),v.mutate(y,{onSettled:()=>{console.log(" API request completed"),F.dismiss(x)}})};return(i||r)&&f?e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{type:"button",onClick:()=>t("/enquiries"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors",children:[e.jsx(Et,{className:"h-4 w-4 mr-2"}),"Back to Enquiries"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Loading Enquiry..."}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we fetch the enquiry data"})]})]})}),e.jsx("div",{className:"card space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-2"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-2"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-2"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-2"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})]})]})})]})}):e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{type:"button",onClick:()=>t("/enquiries"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors",children:[e.jsx(Et,{className:"h-4 w-4 mr-2"}),"Back to Enquiries"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r?"View Enquiry":i?"Edit Enquiry":"New Enquiry"}),e.jsx("p",{className:"text-gray-600",children:r?"View enquiry details":i?"Update enquiry information":"Create a new business loan enquiry"})]})]})}),e.jsxs("form",{onSubmit:l(g),className:"card space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),e.jsx("input",{...o("name",{required:"Name is required"}),type:"text",className:"input-field",placeholder:"Enter full name",readOnly:r}),c.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobile Number *"}),e.jsx("input",{...o("mobile",{required:"Mobile number is required",pattern:{value:/^[0-9]{10}$/,message:"Please enter a valid 10-digit mobile number"}}),type:"tel",className:"input-field",placeholder:"Enter mobile number",readOnly:r}),c.mobile&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.mobile.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Type"}),e.jsx("input",{...o("businessType"),type:"text",className:"input-field",placeholder:"Enter business type",readOnly:r})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GST Number"}),e.jsx("input",{...o("gstNumber"),type:"text",className:"input-field",placeholder:"Enter GST number (optional)",readOnly:r})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Interest Status"}),e.jsxs("select",{...o("interestStatus"),className:"input-field",disabled:r,children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"INTERESTED",children:"Interested"}),e.jsx("option",{value:"NOT_INTERESTED",children:"Not Interested"}),e.jsx("option",{value:"FOLLOW_UP_REQUIRED",children:"Follow Up Required"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comments Status"}),e.jsxs("select",{...o("comments"),className:"input-field",disabled:r,children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"NO_RESPONSE",children:"No Response"}),e.jsx("option",{value:"CHAT_CALL1_COMPLETED",children:"First Call Completed"}),e.jsx("option",{value:"SECOND_CALL_COMPLETED",children:"Second Call Completed"}),e.jsx("option",{value:"THIRD_CALL_COMPLETED",children:"Third Call Completed"}),e.jsx("option",{value:"ELIGIBLE",children:"Eligible"}),e.jsx("option",{value:"NOT_ELIGIBLE",children:"Not Eligible"}),e.jsx("option",{value:"NO_GST",children:"No GST"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to Staff Member"}),e.jsxs("select",{...o("assignedStaff"),className:"input-field",disabled:r,children:[e.jsx("option",{value:"",children:"Select staff member (optional)"}),h&&h.map(y=>e.jsxs("option",{value:y.name,children:[y.name," - ",y.role]},y.id))]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Select a staff member to assign this enquiry to"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enquiry Date *"}),e.jsx("input",{...o("enquiryDate",{required:"Enquiry date is required"}),type:"date",className:"input-field",defaultValue:new Date().toISOString().split("T")[0],readOnly:r}),c.enquiryDate&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:c.enquiryDate.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Follow Up Date"}),e.jsx("input",{...o("followUpDate"),type:"date",className:"input-field",placeholder:"Select follow up date (optional)",readOnly:r}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Set a date for follow up if required"})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Comments"}),e.jsx("textarea",{...o("additionalComments"),rows:4,className:"input-field resize-none",placeholder:"Enter any additional comments or notes about this enquiry...",readOnly:r}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Add detailed notes, conversation summary, or any other relevant information"})]})}),!r&&e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>t("/enquiries"),className:"btn-secondary",children:"Cancel"}),i&&e.jsx("button",{type:"button",onClick:()=>t(`/enquiries/${s}?view=true`),className:"btn-secondary",children:"View Mode"}),r&&e.jsx("button",{type:"button",onClick:()=>t(`/enquiries/${s}/edit`),className:"btn-secondary",children:"Edit Mode"}),e.jsx(V.button,{type:"submit",disabled:v.isLoading,className:"btn-primary disabled:opacity-50",whileHover:{scale:1.02},whileTap:{scale:.98},children:v.isLoading?i?"Updating...":"Creating...":i?"Update Enquiry":"Create Enquiry"})]})]})]})})}const Yu="modulepreload",Ju=function(t){return"/"+t},ln={},Ri=function(s,a,n){if(!a||a.length===0)return s();const i=document.getElementsByTagName("link");return Promise.all(a.map(r=>{if(r=Ju(r),r in ln)return;ln[r]=!0;const o=r.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!n)for(let m=i.length-1;m>=0;m--){const f=i[m];if(f.href===r&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${l}`))return;const c=document.createElement("link");if(c.rel=o?"stylesheet":Yu,o||(c.as="script",c.crossOrigin=""),c.href=r,document.head.appendChild(c),o)return new Promise((m,f)=>{c.addEventListener("load",m),c.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>s()).catch(r=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=r,window.dispatchEvent(o),!o.defaultPrevented)throw r})};function cn({onUpload:t,accept:s=".pdf",maxSize:a=10*1024*1024}){const[n,i]=u.useState(null),[r,o]=u.useState(0),[l,d]=u.useState(!1),[c,m]=u.useState(!1),f=y=>{if(y.size>a){alert(`File size must be less than ${a/(1024*1024)}MB`);return}if(y.type!=="application/pdf"){alert("Only PDF files are allowed");return}i(y),m(!0),o(0);const x=setInterval(()=>{o(E=>E>=100?(clearInterval(x),m(!1),t(y),100):E+10)},200)},h=y=>{y.preventDefault(),d(!1);const x=y.dataTransfer.files[0];x&&f(x)},v=y=>{y.preventDefault(),d(!0)},g=()=>{d(!1)};return e.jsxs(V.div,{className:`border-2 border-dashed p-8 rounded-lg text-center transition-colors ${l?"border-primary-500 bg-primary-50":c?"border-blue-500 bg-blue-50":"border-gray-300"} ${c?"pointer-events-none opacity-75":""}`,whileHover:{scale:c?1:1.02},transition:{duration:.3},onDrop:c?void 0:h,onDragOver:c?void 0:v,onDragLeave:c?void 0:g,children:[e.jsx(gi,{className:`h-12 w-12 mx-auto mb-4 ${c?"text-blue-500 animate-pulse":"text-gray-400"}`}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:c?"cursor-not-allowed":"cursor-pointer",children:[e.jsx("span",{className:`btn-primary ${c?"opacity-50 cursor-not-allowed":""}`,children:c?"Uploading...":"Choose File"}),e.jsx("input",{type:"file",accept:s,onChange:y=>{var x;return((x=y.target.files)==null?void 0:x[0])&&f(y.target.files[0])},className:"hidden",disabled:c})]})}),e.jsx("p",{className:`text-gray-600 mb-2 ${c?"text-blue-600":""}`,children:c?"Processing your file...":"or drag and drop your file here"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["PDF files only  Max ",a/(1024*1024),"MB"]}),n&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:n.name}),r>0&&r<100&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"bg-gray-200 rounded-full h-2",children:e.jsx(V.div,{className:"bg-primary-600 h-2 rounded-full",initial:{width:0},animate:{width:`${r}%`},transition:{duration:.3}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[r,"% uploaded"]})]}),r===100&&e.jsx("p",{className:"text-sm text-green-600 mt-2",children:" Upload complete"})]})]})}function Ii({isOpen:t,onClose:s,documentName:a,documentType:n,documentUrl:i,documentId:r,isVerified:o,onVerify:l}){const[d,c]=u.useState(!1),[m,f]=u.useState(!0),[h,v]=u.useState(!1);console.log(" PDFViewer render:",{isOpen:t,documentName:a,documentType:n,documentUrl:i});const g=()=>{v(!h)};if(u.useEffect(()=>{const E=w=>{w.key==="Escape"&&(h?v(!1):s())};if(t)return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[t,h,s]),u.useEffect(()=>{t&&(c(!1),f(!0),v(!1))},[t]),!t)return console.log(" PDFViewer not open, returning null"),null;console.log(" PDFViewer is open, rendering modal");const x=(()=>i?(console.log(" Using backend document URL:",i),i):null)();return e.jsx("div",{className:`fixed inset-0 bg-black z-[9999] flex items-center justify-center ${h?"bg-opacity-95":"bg-opacity-50 p-4"}`,onClick:s,children:e.jsxs("div",{className:`bg-white shadow-xl flex flex-col ${h?"w-full h-full":"rounded-lg max-w-4xl w-full max-h-[90vh]"}`,onClick:E=>E.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:s,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"Back to Documents",children:e.jsx(Et,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:a}),e.jsx("p",{className:"text-sm text-gray-500",children:n.replace("_"," ")})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[r&&l&&!o&&e.jsxs("button",{onClick:()=>l(r),className:"flex items-center px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition-colors",title:"Verify Document",children:[e.jsx(ke,{className:"h-4 w-4 mr-1"})," Verify"]}),o&&e.jsxs("div",{className:"flex items-center px-3 py-1 bg-green-100 text-green-800 text-sm rounded border border-green-200",children:[e.jsx(ke,{className:"h-4 w-4 mr-1"})," Verified"]}),e.jsx("button",{onClick:g,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:h?"Exit Fullscreen":"Enter Fullscreen",children:h?e.jsx(lc,{className:"h-5 w-5"}):e.jsx(uc,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>{if(x){const E=document.createElement("a");E.href=x,E.download=`${a}.pdf`,E.click()}},className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",title:"Download PDF",disabled:!x,children:" Download"}),e.jsx("button",{onClick:s,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Be,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"flex-1 p-4",children:x?e.jsxs("div",{className:"h-full",children:[m&&e.jsxs("div",{className:"mb-2 p-3 bg-blue-50 border border-blue-200 rounded text-sm flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),e.jsxs("span",{children:[" ",e.jsx("strong",{children:"Loading document:"})," ",a]})]}),d?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-8 max-w-md",children:[e.jsx(ct,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"PDF Display Error"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to display the PDF in the browser. This might be due to browser restrictions or PDF format issues."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>{c(!1),f(!0)},className:"w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:" Try Again"}),e.jsx("a",{href:x,className:"block w-full px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors text-center",download:`${a}.pdf`,children:" Download PDF"}),e.jsx("button",{onClick:()=>window.open(x,"_blank"),className:"w-full px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors",children:" Open in New Tab"})]})]})}):e.jsxs("div",{className:"h-full relative",children:[e.jsx("iframe",{src:`${x}#toolbar=1&navpanes=1&scrollbar=1&page=1&view=FitH&zoom=page-fit`,className:`w-full h-full border border-gray-300 ${h?"min-h-screen":"rounded-lg min-h-[600px]"}`,title:`${a} - PDF Viewer`,onLoad:()=>{console.log(" PDF loaded successfully from:",x),f(!1)},onError:E=>{console.error(" Failed to load PDF:",x,E),c(!0),f(!1)},allow:"fullscreen",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(ct,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Your browser doesn't support inline PDF viewing."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("a",{href:x,className:"inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 mr-2",download:`${a}.pdf`,children:" Download PDF"}),e.jsx("button",{onClick:()=>window.open(x,"_blank"),className:"inline-block px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:" Open in New Tab"})]})]})}),e.jsxs("div",{className:"absolute bottom-4 right-4 bg-white rounded-lg shadow-lg p-2 flex space-x-2",children:[e.jsx("button",{onClick:()=>window.open(x,"_blank"),className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded text-sm transition-colors",title:"Open in new tab",children:""}),e.jsx("a",{href:x,download:`${a}.pdf`,className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded text-sm transition-colors",title:"Download PDF",children:""})]})]})]}):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx(ct,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Document Available"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No file URL provided for this document."}),e.jsxs("div",{className:"text-sm text-gray-500 bg-gray-50 p-4 rounded-lg",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Document:"})," ",a]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",n]}),e.jsxs("p",{children:[e.jsx("strong",{children:"File:"})," ",i||"Not specified"]})]})]})})})]})})}const Yt=[{value:"GST",label:"GST Certificate",required:!0},{value:"UDYAM",label:"Udyam Registration",required:!0},{value:"BANK_STATEMENT",label:"Bank Statement",required:!0},{value:"OWNER_PAN",label:"Owner PAN Card",required:!0},{value:"AADHAR",label:"Aadhar Card",required:!0},{value:"WEBSITE_GATEWAY",label:"Website & Gateway",required:!1},{value:"IE_CODE",label:"IE Code",required:!1}];function Xu({isOpen:t,onClose:s,clientId:a,clientName:n,documents:i}){const[r,o]=u.useState({isOpen:!1,documentUrl:"",documentName:"",documentType:""}),{data:l,isLoading:d,error:c}=ue(["documents",a],async()=>{if(!a)return null;console.log(" Fetching documents for client ID:",a);const N=await U.get(`/api/documents/enquiry/${a}`);return console.log(" Documents response:",N.data),N.data},{enabled:t&&!!a,refetchOnWindowFocus:!1});if(!t)return null;if(d)return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading documents..."})]})});if(c)return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md",children:[e.jsx("div",{className:"text-red-500 text-center mb-4",children:""}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Documents"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Failed to load documents for this client."}),e.jsx("button",{onClick:s,className:"w-full btn-primary",children:"Close"})]})});const m=l||[],f=m.length>0?m[0].enquiry:{name:n,mobile:"",businessType:""},h=new Set(m.map(N=>N.type)),v=Yt.filter(N=>N.required),g=v.filter(N=>h.has(N.value)),y=v.length>0?Math.round(g.length/v.length*100):0,x=async N=>{var p;const{getApiUrl:j}=await Ri(()=>import("./config-03c8a593.js"),[]);o({isOpen:!0,documentUrl:j(`/api/documents/${N.id}/view`),documentName:`${N.enquiry.name} - ${((p=Yt.find(k=>k.value===N.type))==null?void 0:p.label)||N.type}`,documentType:N.type})},E=()=>{o({isOpen:!1,documentUrl:"",documentName:"",documentType:""})},w=N=>{const j=m.find(k=>k.type===N);if(j)return{status:"uploaded",document:j,verified:j.verified};const p=Yt.find(k=>k.value===N);return{status:p!=null&&p.required?"missing":"optional",document:null,verified:!1}};return e.jsxs(e.Fragment,{children:[e.jsx(V.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:s,children:e.jsxs(V.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] flex flex-col",onClick:N=>N.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:f.name}),e.jsxs("p",{className:"text-gray-600",children:[" ",f.mobile,"  ",f.businessType]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Document Portfolio"})]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Be,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Document Completion Status"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-indigo-600",children:[y,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Complete"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-4",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 h-3 rounded-full transition-all duration-500",style:{width:`${y}%`}})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[g.length,"/",v.length]}),e.jsx("div",{className:"text-gray-600",children:"Required Documents"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:m.filter(N=>N.verified).length}),e.jsx("div",{className:"text-gray-600",children:"Verified Documents"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:m.length}),e.jsx("div",{className:"text-gray-600",children:"Total Uploaded"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Yt.map(N=>{const j=w(N.value);return e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`border-2 rounded-lg p-4 transition-all duration-200 hover:shadow-md ${j.status==="uploaded"?j.verified?"border-green-200 bg-green-50":"border-yellow-200 bg-yellow-50":j.status==="missing"?"border-red-200 bg-red-50":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ct,{className:`h-6 w-6 mr-2 ${j.status==="uploaded"?j.verified?"text-green-600":"text-yellow-600":j.status==="missing"?"text-red-600":"text-gray-400"}`}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:N.label}),e.jsx("p",{className:"text-xs text-gray-500",children:N.required?"Required":"Optional"})]})]}),e.jsx("div",{className:"flex items-center",children:j.status==="uploaded"?j.verified?e.jsx(ke,{className:"h-5 w-5 text-green-600"}):e.jsx(gt,{className:"h-5 w-5 text-yellow-600"}):j.status==="missing"?e.jsx(gt,{className:"h-5 w-5 text-red-600"}):e.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-gray-300"})})]}),j.document?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Status: "}),e.jsx("span",{className:`font-medium ${j.verified?"text-green-600":"text-yellow-600"}`,children:j.verified?"Verified":"Pending Verification"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Uploaded: "}),new Date(j.document.uploadedAt).toLocaleDateString()]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"By: "}),j.document.uploadedBy.name]}),e.jsxs("button",{onClick:()=>x(j.document),className:"w-full mt-3 flex items-center justify-center px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-md hover:bg-indigo-700 transition-colors",children:[e.jsx(Le,{className:"h-4 w-4 mr-2"}),"View Document"]})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:`text-sm font-medium ${j.status==="missing"?"text-red-600":"text-gray-500"}`,children:j.status==="missing"?"Missing Document":"Not Required"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:j.status==="missing"?"This document needs to be uploaded":"This document is optional"})]})]},N.value)})})})]})}),e.jsx(Ii,{isOpen:r.isOpen,onClose:E,documentName:r.documentName,documentType:r.documentType,documentUrl:r.documentUrl})]})}function em(){const[t,s]=u.useState(""),[a,n]=u.useState(""),[i,r]=u.useState(""),[o,l]=u.useState(!1),[d,c]=u.useState({isOpen:!1,documentUrl:"",documentName:"",documentType:"",documentId:void 0,isVerified:!1}),[m,f]=u.useState({isOpen:!1,clientId:0,clientName:""}),h=Ce(),v=He(),{data:g,isLoading:y,error:x}=ue("enquiries",async()=>{var b;console.log(" Fetching enquiries from /enquiries...");try{const L=await U.get("/api/enquiries");return console.log(" Enquiries response:",L.data),L.data}catch(L){if(console.error(" Enquiries fetch error:",L),L.code==="ECONNREFUSED"||(b=L.message)!=null&&b.includes("Network Error"))return console.log(" Backend not available, returning empty enquiries array"),[];throw L}},{staleTime:4*60*1e3,keepPreviousData:!0,onSuccess:b=>{console.log(" Enquiries query success:",(b==null?void 0:b.length)||0,"enquiries")},onError:b=>{console.error(" Enquiries query error:",b)}}),{data:E}=ue("staff-members",async()=>{var b;try{return((b=(await U.get("/api/staff")).data)==null?void 0:b.staff)||[]}catch{return console.log("No staff data available"),[]}},{staleTime:5*60*1e3,keepPreviousData:!0}),{data:w,isLoading:N,refetch:j}=ue("documents",async()=>{console.log(" Fetching documents from /documents...");const b=await U.get("/api/documents");return console.log(" Documents response:",b.data),b.data},{staleTime:8*60*1e3,keepPreviousData:!0,onSuccess:b=>{console.log(" Documents query success:",(b==null?void 0:b.length)||0,"documents")},onError:b=>{console.error(" Documents query error:",b)}}),{data:p}=ue(["documentStatus",t],async()=>t?(await U.get(`/api/documents/enquiry/${t}`)).data:null,{enabled:!!t,staleTime:3*60*1e3,keepPreviousData:!0}),k=fe(async({file:b,enquiryId:L,type:I})=>{const X=new FormData;X.append("file",b),X.append("enquiryId",L.toString()),X.append("type",I);const oe=g==null?void 0:g.find(le=>le.id===L);return oe!=null&&oe.assignedStaff&&X.append("assignedStaff",oe.assignedStaff),U.post("/api/documents/upload",X,{headers:{"Content-Type":"multipart/form-data"}})},{onSuccess:b=>{console.log(" Upload success response:",b.data),F.success("Document uploaded successfully!"),b.data.document&&h.setQueryData("documents",L=>L?[b.data.document,...L]:[b.data.document]),h.invalidateQueries("documents"),h.invalidateQueries(["documentStatus",t]),n(""),o&&setTimeout(()=>{var I;const L=z();L?(n(L.document.value),F.success(` ${(I=se.find(X=>X.value===b.data.document.type))==null?void 0:I.label} uploaded! Next: ${L.document.label}`)):(F.success(" All required documents uploaded!"),l(!1),n(""))},500)},onError:b=>{var I,X,oe,le,Oe,qe,S,D,M,G;console.error("Upload error:",b);let L="Upload failed";(X=(I=b.response)==null?void 0:I.data)!=null&&X.message?L=b.response.data.message:(le=(oe=b.response)==null?void 0:oe.data)!=null&&le.error?L=b.response.data.error:b.message?L=b.message:((Oe=b.response)==null?void 0:Oe.status)===413?L="File too large. Maximum size is 10MB.":((qe=b.response)==null?void 0:qe.status)===415?L="Unsupported file type. Please upload PDF files only.":((S=b.response)==null?void 0:S.status)===400&&((G=(M=(D=b.response)==null?void 0:D.data)==null?void 0:M.message)!=null&&G.includes("already exists")?(L=b.response.data.message,n("")):L="Invalid file or missing required information."),F.error(L)}}),T=fe(async b=>U.patch(`/api/documents/${b}/verify`,{verified:!0}),{onSuccess:(b,L)=>{F.success("Document verified successfully!"),h.setQueryData("documents",I=>I&&I.map(X=>X.id===L?{...X,verified:!0,verifiedAt:new Date().toISOString()}:X)),t&&h.invalidateQueries(["documentStatus",t]),setTimeout(()=>{h.invalidateQueries("documents")},100)},onError:b=>{var L,I;F.error(((I=(L=b.response)==null?void 0:L.data)==null?void 0:I.message)||"Verification failed")}}),C=fe(async b=>U.delete(`/api/documents/${b}`),{onSuccess:(b,L)=>{F.success("Document deleted successfully!"),h.setQueryData("documents",I=>I&&I.filter(X=>X.id!==L)),t&&h.invalidateQueries(["documentStatus",t]),setTimeout(()=>{h.invalidateQueries("documents")},100)},onError:b=>{var L,I;F.error(((I=(L=b.response)==null?void 0:L.data)==null?void 0:I.message)||"Delete failed")}}),A=fe(async b=>U.post("/api/shortlist",{enquiryId:b.id,name:b.name||b.businessName,mobile:b.mobile,businessName:b.businessName,businessNature:b.businessType,loanAmount:b.loanAmount||5e5,comments:"Shortlisted from document management"}),{onSuccess:b=>{console.log("Shortlist response:",b.data),F.success(b.data.message||"Client shortlisted successfully!"),h.invalidateQueries("shortlists"),h.invalidateQueries(["shortlists"]),b.data.shortlist&&h.setQueryData(["shortlists",""],L=>L?L.some(X=>X.id===b.data.shortlist.id)?L:[b.data.shortlist,...L]:[b.data.shortlist]),setTimeout(()=>{var L;v("/shortlist",{state:{fromAdd:!0,clientName:((L=b.data.shortlist)==null?void 0:L.name)||b.data.name,timestamp:Date.now()}})},1e3)},onError:b=>{var I,X;console.error("Shortlist error:",b);const L=((X=(I=b.response)==null?void 0:I.data)==null?void 0:X.message)||b.message||"Shortlist failed";F.error(`Shortlist failed: ${L}`)}}),R=fe(async({enquiryId:b,staffName:L})=>U.patch(`/enquiries/${b}`,{assignedStaff:L}),{onSuccess:(b,{enquiryId:L,staffName:I})=>{console.log(`Staff ${I} assigned to enquiry ${L}`),h.setQueryData("enquiries",X=>X&&X.map(oe=>oe.id===L?{...oe,assignedStaff:I}:oe)),F.success(`Staff assigned to ${I} successfully!`)},onError:b=>{console.error("Staff assignment error:",b),F.error("Failed to assign staff member")}}),q=async b=>{var oe;const L=o?ae==null?void 0:ae.value:a;if(!t||!L||!i){F.error("Please select enquiry, document type, and assign staff before uploading");return}const I=10*1024*1024;if(b.size>I){F.error("File size must be less than 10MB");return}if(b.type!=="application/pdf"){F.error("Only PDF files are allowed");return}if(console.log(" Uploading file:",{name:b.name,size:b.size,type:b.type,enquiryId:t,documentType:L,isSequentialMode:o}),((w==null?void 0:w.filter(le=>le.enquiry.id.toString()===t&&le.type===L))||[]).length>0){const le=((oe=se.find(Oe=>Oe.value===L))==null?void 0:oe.label)||L;F.error(`${le} already exists for this client. Please select a different document type.`);return}k.mutate({file:b,enquiryId:parseInt(t),type:L})},W=async b=>{var L;try{const{getApiUrl:I}=await Ri(()=>import("./config-03c8a593.js"),[]),oe={isOpen:!0,documentUrl:I(`/api/documents/${b.id}/view`),documentName:`${b.enquiry.name} - ${((L=se.find(le=>le.value===b.type))==null?void 0:L.label)||b.type}`,documentType:b.type,documentId:b.id,isVerified:b.verified};c(oe)}catch(I){console.error("Error getting document URL:",I),F.error("Failed to load document. Please try again.")}},_=b=>{f({isOpen:!0,clientId:b.id,clientName:b.name})},Z=()=>{c({isOpen:!1,documentUrl:"",documentName:"",documentType:"",documentId:void 0,isVerified:!1})},re=()=>{f({isOpen:!1,clientId:0,clientName:""})},J=b=>{window.confirm("Are you sure you want to delete this document?")&&C.mutate(b)},se=[{value:"GST",label:"GST Certificate",required:!0},{value:"UDYAM",label:"Udyam Registration",required:!0},{value:"BANK_STATEMENT",label:"Bank Statement",required:!0},{value:"OWNER_PAN",label:"Owner PAN Card",required:!0},{value:"AADHAR",label:"Aadhar Card",required:!0},{value:"WEBSITE_GATEWAY",label:"Website & Gateway",required:!0},{value:"IE_CODE",label:"IE Code",required:!0}],K=g==null?void 0:g.find(b=>b.id.toString()===t),ce=(w==null?void 0:w.filter(b=>b.enquiry.id.toString()===t))||[],$=ce.map(b=>b.type),z=()=>{const b=se.filter(L=>L.required);for(let L=0;L<b.length;L++)if(!$.includes(b[L].value))return{index:L,document:b[L]};return null},ee=z(),ae=ee==null?void 0:ee.document,me={current:$.length,total:se.filter(b=>b.required).length,percentage:Math.round($.length/se.filter(b=>b.required).length*100)},xe=se.filter(b=>b.required),rt=xe.filter(b=>$.includes(b.value)),We=xe.length>0?Math.round(rt.length/xe.length*100):0,Ye=We===100,Je=ce.length>0&&xe.every(b=>{const L=ce.find(I=>I.type===b.value);return L&&L.verified}),P=K==null?void 0:K.shortlist,ne=Je&&t;return console.log(" DocumentUpload render state:",{enquiriesLoading:y,enquiriesCount:(g==null?void 0:g.length)||0,enquiriesError:!!x,isLoading:N,documentsCount:(w==null?void 0:w.length)||0}),y&&N?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Document Management"}),e.jsx("p",{className:"text-gray-600",children:"Upload and manage loan application documents"})]}),ne&&e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card border-green-200 bg-green-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-green-600 text-2xl mr-3",children:""}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-green-900",children:"All Documents Verified!"}),e.jsx("p",{className:"text-green-700",children:"Client is ready for shortlisting"})]})]}),P?e.jsxs("div",{className:"px-6 py-3 bg-blue-100 text-blue-800 font-semibold rounded-lg flex items-center",children:[e.jsx(ke,{className:"h-5 w-5 mr-2"}),"Already Shortlisted"]}):e.jsxs("button",{onClick:()=>A.mutate(K),disabled:A.isLoading,className:"px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center",children:[e.jsx(Pt,{className:"h-5 w-5 mr-2"}),A.isLoading?"Adding to Shortlist...":"Add to Shortlist"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:se.filter(b=>b.required).map(b=>e.jsxs("div",{className:"flex items-center p-3 bg-white rounded-lg border border-green-200",children:[e.jsx(ke,{className:"h-5 w-5 text-green-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900",children:b.label}),e.jsx("p",{className:"text-sm text-green-600",children:"Verified "})]})]},b.value))}),e.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("h4",{className:"text-red-800 font-medium mb-2 flex items-center",children:[e.jsx("span",{className:"mr-2",children:""}),"All Documents Now Mandatory"]}),e.jsxs("p",{className:"text-sm text-red-700",children:[e.jsx("span",{className:"font-semibold",children:"Website & Gateway"})," and ",e.jsx("span",{className:"font-semibold",children:"IE Code"})," are now required documents. All 7 document types must be uploaded and verified before the client can proceed to shortlist."]})]})]}),t&&!ne&&e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card bg-blue-50 border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900",children:"Document Upload Mode"}),e.jsx("p",{className:"text-blue-700 text-sm",children:o?"Sequential mode: Upload documents one by one":"Standard mode: Choose any document type to upload"})]}),e.jsx("button",{onClick:()=>{const b=!o;if(l(b),b){const L=z();L?(n(L.document.value),F.success(` Sequential mode activated! Starting with: ${L.document.label}`)):(F.success("All required documents are already uploaded!"),l(!1))}else n(""),F.success(" Switched to standard mode")},className:`px-4 py-2 rounded-lg font-medium transition-colors ${o?"bg-blue-600 text-white hover:bg-blue-700":"bg-white text-blue-600 border border-blue-300 hover:bg-blue-50"}`,children:o?" Sequential Mode":" Switch to Sequential"})]}),o&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Upload Progress"}),e.jsxs("span",{className:"text-blue-900 font-semibold",children:[me.current,"/",me.total," documents"]})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-3",children:e.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-500",style:{width:`${me.percentage}%`}})}),ae&&e.jsx("div",{className:"mt-3 p-3 bg-white rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-2xl mr-3",children:""}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-blue-900",children:["Next: ",ae.label]}),e.jsxs("p",{className:"text-sm text-blue-600",children:["Step ",me.current+1," of ",me.total]})]})]})})]})]}),!ne&&e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload New Document"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Enquiry *"}),e.jsxs("select",{value:t,onChange:b=>{const L=b.target.value;if(s(L),n(""),L&&g){const I=g.find(X=>X.id.toString()===L);I!=null&&I.assignedStaff?r(I.assignedStaff):r("")}else r("")},className:"input-field",disabled:y,children:[e.jsx("option",{value:"",children:y?"Loading enquiries...":x?"Backend server not available - Please start the backend server":!g||g.length===0?"No enquiries available - Backend may be offline":"Choose enquiry..."}),g==null?void 0:g.map(b=>e.jsxs("option",{value:b.id,children:[b.name," - ",b.mobile," (",b.businessType||"No business type",")",b.assignedStaff?`  Staff: ${b.assignedStaff}`:""]},b.id))]}),!!x&&e.jsxs("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:[e.jsxs("p",{className:"text-sm text-red-600",children:[e.jsx("strong",{children:"Backend Connection Error:"})," Cannot connect to the backend server."]}),e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Please ensure the backend server is running on port 5002. Check the console for more details."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign Staff *"}),e.jsxs("select",{value:i,onChange:b=>{const L=b.target.value;r(L),t&&L&&R.mutate({enquiryId:parseInt(t),staffName:L})},className:"input-field",disabled:!t,required:!0,children:[e.jsx("option",{value:"",children:t?"Choose staff member...":"Select enquiry first..."}),E&&E.map(b=>e.jsxs("option",{value:b.name,children:[b.name," - ",b.role]},b.id))]}),t&&e.jsx("div",{className:"mt-1",children:i?e.jsxs("p",{className:"text-sm text-green-600",children:[" Staff assigned: ",i]}):e.jsx("p",{className:"text-sm text-red-600",children:"Staff assignment is required before uploading documents"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Document Type *"}),o?e.jsxs("div",{className:"input-field bg-blue-50 border-blue-300",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-blue-900",children:ae?ae.label:"All documents uploaded!"}),ae&&e.jsxs("span",{className:"text-sm text-blue-600 bg-blue-200 px-2 py-1 rounded",children:["Step ",me.current+1,"/",me.total]})]}),!ae&&e.jsx("p",{className:"text-sm text-green-600 mt-1",children:" All required documents completed!"})]}):e.jsxs("select",{value:a,onChange:b=>n(b.target.value),className:"input-field",disabled:!t,children:[e.jsx("option",{value:"",children:t?"Choose type...":"Select enquiry first..."}),se.map(b=>{const L=$.includes(b.value);return e.jsxs("option",{value:b.value,disabled:L,children:[b.label," ",b.required?"*":"(Optional)"," ",L?" Already Uploaded":""]},b.value)})]})]})]}),K&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-blue-900",children:"Selected Client Details"}),e.jsx("button",{onClick:()=>_(K),className:"px-3 py-1 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 transition-colors",children:" View All Documents"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Name:"}),e.jsx("span",{className:"ml-2 text-blue-900",children:K.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Mobile:"}),e.jsx("span",{className:"ml-2 text-blue-900",children:K.mobile})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Business:"}),e.jsx("span",{className:"ml-2 text-blue-900",children:K.businessType})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Document Completion"}),e.jsxs("span",{className:"text-blue-900 font-semibold",children:[We,"%"]})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${We}%`}})}),e.jsxs("div",{className:"mt-2 text-xs text-blue-700",children:[rt.length," of ",xe.length," required documents uploaded"]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-blue-700 font-medium mb-3",children:"Document Status"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:se.map(b=>{var X,oe;const L=ce.some(le=>le.type===b.value)||((X=p==null?void 0:p.documents)==null?void 0:X.some(le=>le.type===b.value)),I=ce.find(le=>le.type===b.value)||((oe=p==null?void 0:p.documents)==null?void 0:oe.find(le=>le.type===b.value));return e.jsxs("div",{className:"flex items-center space-x-2",children:[L?I!=null&&I.verified?e.jsx("span",{className:"text-green-600 text-lg",title:"Verified",children:""}):e.jsx("span",{className:"text-yellow-600 text-lg",title:"Uploaded but not verified",children:""}):b.required?e.jsx("span",{className:"text-red-600 text-lg",title:"Missing required document",children:""}):e.jsx("span",{className:"text-gray-400 text-lg",title:"Optional document",children:""}),e.jsxs("span",{className:`text-sm ${L?I!=null&&I.verified?"text-green-700 font-medium":"text-yellow-700 font-medium":b.required?"text-red-700":"text-gray-600"}`,children:[b.label,b.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"}),L&&e.jsxs("span",{className:"ml-2 text-xs",children:["(",I!=null&&I.verified?"Verified":"Pending Verification",")"]})]})]},b.value)})}),e.jsxs("div",{className:"mt-3 text-xs text-blue-600",children:[e.jsx("span",{className:"text-green-600",children:" Verified"})," ",e.jsx("span",{className:"text-yellow-600 ml-2",children:" Uploaded (Pending)"})," ",e.jsx("span",{className:"text-red-600 ml-2",children:" Missing (Required)"})," ",e.jsx("span",{className:"text-gray-600 ml-2",children:" Optional"})]})]}),Ye&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-green-600 text-lg mr-2",children:""}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-800 font-semibold",children:"Ready for Shortlist!"}),e.jsx("p",{className:"text-green-700 text-sm",children:"All required documents completed"})]})]}),e.jsx("button",{onClick:()=>A.mutate(K),disabled:A.isLoading||!!(K!=null&&K.shortlist),className:`px-4 py-2 rounded-md transition-colors disabled:opacity-50 ${K!=null&&K.shortlist?"bg-gray-500 text-white cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:K!=null&&K.shortlist?" Already Shortlisted":A.isLoading?"Adding...":" Add to Shortlist"})]})})]}),t&&(o?ae:a)&&i?e.jsxs("div",{className:"relative",children:[o&&ae&&e.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-3xl mr-3",children:""}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-900",children:ae.label}),e.jsx("p",{className:"text-blue-600 text-sm",children:"Upload this document to continue"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:me.current+1}),e.jsxs("div",{className:"text-xs text-blue-500",children:["of ",me.total]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-700",children:[e.jsx("span",{children:" Required document"}),e.jsx("span",{children:""}),e.jsx("span",{children:" Next in sequence"}),me.current>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsxs("span",{children:[" ",me.current," completed"]})]})]})]}),e.jsx(cn,{onUpload:q}),k.isLoading&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-blue-600 font-medium",children:o?`Uploading ${ae==null?void 0:ae.label}...`:"Uploading document..."})]})})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center bg-gray-50",children:[e.jsx(ct,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:t?i?o&&!ae?" All documents uploaded! Switch to standard mode for additional uploads.":"Please select a document type to upload":"Please assign a staff member":"Please select an enquiry first"})]})]}),ne&&e.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card bg-gray-50 border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Need to Upload Additional Documents?"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"All required documents are verified. You can still upload optional documents if needed."}),e.jsx("button",{onClick:()=>{const b=document.getElementById("upload-section");b&&b.scrollIntoView({behavior:"smooth"})},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:" Upload Additional Documents"})]})}),ne&&e.jsxs(V.div,{id:"upload-section",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card border-blue-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Upload Additional Documents"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Enquiry *"}),e.jsxs("select",{value:t,onChange:b=>{const L=b.target.value;if(s(L),n(""),L&&g){const I=g.find(X=>X.id.toString()===L);I!=null&&I.assignedStaff?r(I.assignedStaff):r("")}else r("")},className:"input-field",disabled:y,children:[e.jsx("option",{value:"",children:y?"Loading enquiries...":x?"Backend server not available - Please start the backend server":!g||g.length===0?"No enquiries available - Backend may be offline":"Choose enquiry..."}),g==null?void 0:g.map(b=>e.jsxs("option",{value:b.id,children:[b.name," - ",b.mobile," (",b.businessType||"No business type",")",b.assignedStaff?`  Staff: ${b.assignedStaff}`:""]},b.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign Staff *"}),e.jsxs("select",{value:i,onChange:b=>{const L=b.target.value;r(L),t&&L&&R.mutate({enquiryId:parseInt(t),staffName:L})},className:"input-field",disabled:!t,required:!0,children:[e.jsx("option",{value:"",children:t?"Choose staff member...":"Select enquiry first..."}),E&&E.map(b=>e.jsxs("option",{value:b.name,children:[b.name," - ",b.role]},b.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Document Type *"}),e.jsxs("select",{value:a,onChange:b=>n(b.target.value),className:"input-field",disabled:!t,children:[e.jsx("option",{value:"",children:t?"Choose type...":"Select enquiry first..."}),se.map(b=>{const L=$.includes(b.value);return e.jsxs("option",{value:b.value,disabled:L,children:[b.label," ",b.required?"*":"(Optional)"," ",L?" Already Uploaded":""]},b.value)})]})]})]}),t&&(o?ae:a)&&i?e.jsxs("div",{className:"relative",children:[e.jsx(cn,{onUpload:q}),k.isLoading&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-blue-600 font-medium",children:"Uploading document..."})]})})]}):e.jsxs("div",{className:"border-2 border-dashed border-blue-300 rounded-lg p-8 text-center bg-blue-50",children:[e.jsx(ct,{className:"h-12 w-12 text-blue-400 mx-auto mb-4"}),e.jsx("p",{className:"text-blue-600 text-lg",children:t?i?"Please select a document type to upload":"Please assign a staff member":"Please select an enquiry first"})]})]}),e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Uploaded Documents"}),e.jsx("p",{className:"text-sm text-gray-500",children:N?"Loading...":t?`${(ce==null?void 0:ce.length)||0} documents for ${K==null?void 0:K.name}`:"Select a client to view documents"})]}),e.jsxs("div",{className:"flex space-x-2",children:[t&&e.jsx("button",{onClick:async()=>{try{const b=await U.post(`/api/documents/remove-duplicates/${t}`);b.data.removed>0?(F.success(`Removed ${b.data.removed} duplicate documents`),j()):F.success("No duplicates found for this enquiry")}catch{F.error("Failed to remove duplicates")}},className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:" Clean Duplicates"}),e.jsx("button",{onClick:()=>{console.log(" Manual refresh clicked"),j(),F.success("Refreshing documents...")},disabled:N,className:`px-3 py-1 text-white text-sm rounded transition-colors ${N?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:N?" Loading...":" Refresh"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Document"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Enquiry"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Uploaded By"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading documents..."})]})})}):w&&w.length>0?w==null?void 0:w.filter(b=>t?b.enquiry.id.toString()===t:!0).map(b=>{var L,I,X,oe,le;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ct,{className:"h-5 w-5 text-gray-400 mr-2"}),e.jsx("button",{onClick:()=>W(b),className:"text-primary-600 hover:text-primary-900 font-medium",children:"View Document"})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[b.enquiry.name,e.jsx("div",{className:"text-xs text-gray-500",children:b.enquiry.mobile})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((L=se.find(Oe=>Oe.value===b.type))==null?void 0:L.label)||b.type}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("div",{className:"flex items-center",children:b.verified?e.jsxs(e.Fragment,{children:[e.jsx(ke,{className:"h-5 w-5 text-green-500 mr-1"}),e.jsx("span",{className:"text-green-800 text-sm font-medium",children:"Verified"})]}):e.jsxs(e.Fragment,{children:[e.jsx(gt,{className:"h-5 w-5 text-yellow-500 mr-1"}),e.jsx("span",{className:"text-yellow-800 text-sm font-medium",children:"Pending"})]})}),b.savedToSupabase&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-4 w-4 text-blue-500 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-blue-800 text-xs font-medium",children:"Saved to DB"})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:b.uploadedBy.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(b.uploadedAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>T.mutate(b.id),disabled:T.isLoading||b.verified,className:"flex items-center justify-center w-8 h-8 rounded-full bg-green-100 text-green-600 hover:bg-green-200 hover:text-green-700 disabled:opacity-50 disabled:cursor-not-allowed",title:b.verified?"Document verified":"Verify document",children:e.jsx("span",{className:"text-sm font-bold",children:""})}),e.jsx("button",{onClick:()=>_(b.enquiry),className:"text-purple-600 hover:text-purple-900 text-sm font-medium",title:"View all documents for this client",children:"View All"}),e.jsx("button",{onClick:()=>A.mutate(b.enquiry),disabled:A.isLoading||!!((I=b.enquiry)!=null&&I.shortlist),className:`font-medium disabled:opacity-50 ${(X=b.enquiry)!=null&&X.shortlist?"text-gray-500 cursor-not-allowed":"text-green-600 hover:text-green-900"}`,title:(oe=b.enquiry)!=null&&oe.shortlist?"Already shortlisted":"Mark this client as shortlisted",children:(le=b.enquiry)!=null&&le.shortlist?" Shortlisted":" Shortlist"}),e.jsx("button",{onClick:()=>J(b.id),disabled:C.isLoading,className:"text-red-600 hover:text-red-900 disabled:opacity-50",children:"Delete"})]})})]},`doc-${b.id}-${b.type}`)}):e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[e.jsx(ct,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"No documents uploaded for this client yet."}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Upload documents using the form above to see them listed here."}),e.jsxs("p",{className:"text-blue-600 text-sm mt-2",children:["Selected client: ",K==null?void 0:K.name," - ",K==null?void 0:K.mobile]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"Select a client to view their documents."}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Choose an enquiry from the dropdown above to see uploaded documents."})]})]})})})]})})]}),e.jsx(Ii,{isOpen:d.isOpen,onClose:Z,documentName:d.documentName,documentType:d.documentType,documentUrl:d.documentUrl,documentId:d.documentId,isVerified:d.isVerified,onVerify:b=>{T.mutate(b),c(L=>({...L,isVerified:!0}))}}),e.jsx(Xu,{isOpen:m.isOpen,onClose:re,clientId:m.clientId,clientName:m.clientName,documents:w||[]})]})}const tm=()=>{const t=Ce(),s=He(),[a,n]=u.useState({}),{data:i,isLoading:r}=ue("enquiries",async()=>{var k;console.log(" DocumentVerification: Fetching enquiries...");const p=await U.get("/api/enquiries");return console.log(" DocumentVerification: Enquiries fetched:",((k=p.data)==null?void 0:k.length)||0),p.data},{staleTime:2*60*1e3,keepPreviousData:!0,refetchOnMount:!0,refetchOnWindowFocus:!0}),{data:o,isLoading:l}=ue("documents-verification",async()=>{var k;console.log(" DocumentVerification: Fetching documents...");const p=await U.get("/api/documents");return console.log(" DocumentVerification: Documents fetched:",((k=p.data)==null?void 0:k.length)||0),p.data},{staleTime:3*60*1e3,keepPreviousData:!0,refetchOnMount:!0,refetchOnWindowFocus:!0}),d=r||l,{data:c}=ue("staff-members",async()=>{var p;try{return((p=(await U.get("/api/staff")).data)==null?void 0:p.staff)||[]}catch{return console.log("No staff data available"),[]}},{staleTime:5*60*1e3}),m=fe(async({documentId:p,verified:k,enquiryId:T})=>({...await U.patch(`/api/documents/${p}/verify`,{verified:k}),enquiryId:T}),{onSuccess:async p=>{if(F.success("Document verification updated successfully!"),t.invalidateQueries("documents-verification"),t.invalidateQueries("enquiries"),t.invalidateQueries(["shortlists"]),console.log(" Document verification updated, refreshing all related data..."),p.enquiryId){const C=(await t.fetchQuery("documents-verification",async()=>(await U.get("/api/documents")).data)).reduce((A,R)=>{const q=R.enquiry.id;return A[q]||(A[q]={enquiry:R.enquiry,documents:[]}),A[q].documents.push(R),A},{})[p.enquiryId];if(C){const A=C.documents.every(q=>q.verified),R=C.documents.some(q=>q.enquiry.shortlist);if(A&&!R)try{await U.post("/api/shortlist",{enquiryId:p.enquiryId}),F.success(` All documents verified! ${C.enquiry.name} automatically added to shortlist!`),t.invalidateQueries("documents-verification"),t.invalidateQueries("enquiries"),t.invalidateQueries(["shortlists"])}catch(q){console.error("Failed to auto-add to shortlist:",q)}}}},onError:p=>{var k,T;F.error(((T=(k=p.response)==null?void 0:k.data)==null?void 0:T.message)||"Failed to update verification")}}),f=fe(async({enquiryId:p,enquiryData:k})=>U.post("/api/shortlist",{enquiryId:p,name:k.name,mobile:k.mobile,businessName:k.businessName||k.name,businessNature:k.businessType,loanAmount:k.loanAmount||5e5,comments:"Added from document verification - all documents verified"}),{onSuccess:p=>{var T;const k=((T=p.data)==null?void 0:T.name)||"Client";F.success(`${k} added to shortlist successfully!`),t.invalidateQueries(["shortlists"]),t.invalidateQueries("documents-verification"),t.invalidateQueries("enquiries"),console.log(" Client added to shortlist, refreshing all related data..."),setTimeout(()=>{s("/shortlist")},1e3)},onError:p=>{var k,T;F.error(((T=(k=p.response)==null?void 0:k.data)==null?void 0:T.message)||"Failed to add to shortlist")}}),h=fe(async({enquiryId:p,staffName:k})=>U.patch(`/api/supabase/enquiries/${p}`,{assignedStaff:k}),{onSuccess:(p,{staffName:k})=>{F.success(`Staff assigned to ${k} successfully!`),t.invalidateQueries("documents-verification")},onError:p=>{console.error("Assignment error:",p),F.error("Failed to assign staff member")}}),v=(p,k,T)=>{m.mutate({documentId:p,verified:k,enquiryId:T})},g=p=>{var q;if(!a[p]){F.error("Please assign a staff member before adding to shortlist");return}const T=o==null?void 0:o.filter(W=>W.enquiry.id===p);if(!(T==null?void 0:T.every(W=>W.verified))){F.error("All documents must be verified before adding to shortlist");return}const A=N(T||[]);if(A.length>0){const W=A.map(_=>_.label).join(", ");F.error(`Missing mandatory document types: ${W}. Please upload all required documents.`);return}const R=(q=T==null?void 0:T[0])==null?void 0:q.enquiry;if(!R){F.error("Enquiry data not found");return}f.mutate({enquiryId:p,enquiryData:R})},y=(p,k)=>{k&&(n(T=>({...T,[p]:k})),h.mutate({enquiryId:p,staffName:k}))},x=()=>e.jsx(Us,{className:"h-5 w-5"}),E=p=>p?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(ke,{className:"h-4 w-4 mr-1"}),"Verified"]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(Gt,{className:"h-4 w-4 mr-1"}),"Pending"]}),w=[{type:"GST",label:"GST Certificate",icon:""},{type:"UDYAM",label:"UDYAM Registration",icon:""},{type:"BANK_STATEMENT",label:"Bank Statement",icon:""},{type:"OWNER_PAN",label:"Owner PAN Card",icon:""},{type:"AADHAR",label:"Aadhar Card",icon:""},{type:"WEBSITE_GATEWAY",label:"Website & Gateway",icon:""},{type:"IE_CODE",label:"IE Code",icon:""}],N=p=>{const k=p.map(T=>T.type);return w.filter(T=>!k.includes(T.type))},j=o==null?void 0:o.reduce((p,k)=>{const T=k.enquiry.id;return p[T]||(p[T]={enquiry:k.enquiry,documents:[]}),p[T].documents.push(k),p},{});return d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Document Verification"}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:[(i==null?void 0:i.length)||0," enquiries  ",(o==null?void 0:o.length)||0," documents to review"]})]}),e.jsx("div",{className:"flex items-center space-x-3",children:e.jsx("button",{onClick:()=>{console.log(" Manual refresh triggered from header..."),t.invalidateQueries("enquiries"),t.invalidateQueries("documents-verification"),F.success("Refreshing data...")},disabled:d,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600 mr-2"}),"Loading..."]}):e.jsx(e.Fragment,{children:" Refresh"})})})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Us,{className:"h-5 w-5 text-blue-600 mt-0.5 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Mandatory Document Types for Verification"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 text-xs",children:[e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-800 font-medium",children:" GST Certificate"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-800 font-medium",children:" UDYAM Registration"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-800 font-medium",children:" Bank Statement"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-800 font-medium",children:" Owner PAN Card"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-800 font-medium",children:" Aadhar Card"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded bg-red-100 text-red-800 font-medium",children:" Website & Gateway"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded bg-red-100 text-red-800 font-medium",children:" IE Code"})]}),e.jsxs("p",{className:"text-xs text-blue-700 mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Note:"})," All 7 document types must be verified before a client can be added to the shortlist.",e.jsx("span",{className:"text-red-700 font-semibold",children:"Website & Gateway and IE Code are now mandatory requirements"})," along with the standard documents."]})]})]})}),j&&Object.keys(j).length>0?e.jsx("div",{className:"space-y-6",children:Object.values(j).map(p=>{const k=p.documents.every(R=>R.verified),T=p.documents.some(R=>R.enquiry.shortlist),A=N(p.documents).length===0;return e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-md border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:p.enquiry.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[" ",p.enquiry.mobile,"  ",p.enquiry.businessType||"Business Type Not Specified"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[k&&A&&!T&&e.jsxs("button",{onClick:()=>g(p.enquiry.id),disabled:f.isLoading,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:[e.jsx(Pt,{className:"h-4 w-4 mr-2"}),"Add to Shortlist"]}),k&&!A&&!T&&e.jsxs("button",{disabled:!0,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-gray-400 cursor-not-allowed",title:"Missing mandatory document types",children:[e.jsx(gt,{className:"h-4 w-4 mr-2"}),"Missing Documents"]}),T&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:" In Shortlist"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(it,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Assign Staff Member ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:a[p.enquiry.id]||"",onChange:R=>y(p.enquiry.id,R.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:h.isLoading,required:!0,children:[e.jsx("option",{value:"",children:"Select staff member..."}),c&&c.map(R=>e.jsxs("option",{value:R.name,children:[R.name," - ",R.role]},R.id))]}),!a[p.enquiry.id]&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Staff assignment is required before adding to shortlist"})]})]})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.documents.map(R=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[x(),e.jsxs("div",{className:"ml-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:R.type.replace(/_/g," ")}),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Required"})]}),e.jsxs("p",{className:"text-xs text-gray-600 font-medium mb-1",children:[" Enquiry: ",e.jsx("span",{className:"font-semibold text-blue-700",children:R.enquiry.name})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:[" ",R.enquiry.mobile,"  ",R.enquiry.businessType||"Business Type Not Specified"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Uploaded ",new Date(R.uploadedAt).toLocaleDateString()]})]})]}),E(R.verified)]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>window.open(R.s3Url,"_blank"),className:"inline-flex items-center px-3 py-1 border border-gray-300 text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(Le,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>v(R.id,!0,R.enquiry.id),disabled:m.isLoading,className:`p-1 rounded ${R.verified?"text-green-600 bg-green-100":"text-gray-400 hover:text-green-600 hover:bg-green-100"} transition-colors`,title:"Approve",children:e.jsx(ke,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>v(R.id,!1,R.enquiry.id),disabled:m.isLoading,className:`p-1 rounded ${R.verified?"text-gray-400 hover:text-red-600 hover:bg-red-100":"text-red-600 bg-red-100"} transition-colors`,title:"Reject",children:e.jsx(gt,{className:"h-4 w-4"})})]})]})]},R.id))}),(()=>{const R=N(p.documents);return R.length>0&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(gt,{className:"h-5 w-5 text-red-600 mt-0.5 mr-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-red-900 mb-2",children:"Missing Mandatory Document Types"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:R.map(q=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800",children:[q.icon," ",q.label]},q.type))}),e.jsxs("p",{className:"text-xs text-red-700 mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Action Required:"})," These document types must be uploaded before the client can be added to shortlist."]})]})]})})})(),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsxs("span",{className:"text-gray-600",children:["Verification Progress: ",p.documents.filter(R=>R.verified).length," / ",p.documents.length," documents verified"]}),e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${p.documents.filter(R=>R.verified).length/p.documents.length*100}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["Document Types: ",p.documents.length," / ",w.length," mandatory types uploaded"]}),e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${p.documents.length/w.length*100}%`}})})]})]})]})]},p.enquiry.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Us,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No documents to verify"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:i&&i.length>0?"All documents have been processed or no documents have been uploaded yet.":"No enquiries found. Create an enquiry first to upload documents for verification."}),e.jsxs("div",{className:"mt-4 space-x-3",children:[e.jsx("button",{onClick:()=>{console.log(" Refreshing document verification data..."),t.invalidateQueries("enquiries"),t.invalidateQueries("documents-verification"),F.success("Refreshing data...")},className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:" Refresh Data"}),(!i||i.length===0)&&e.jsx("button",{onClick:()=>s("/apply"),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:" Create New Enquiry"})]})]})]})},sm=()=>{const[t,s]=u.useState("desktop");return u.useEffect(()=>{const a=()=>{const n=window.innerWidth;n<768?s("mobile"):n<1024?s("tablet"):s("desktop")};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),t};function am(){var N,j;const t=sm(),[s,a]=u.useState(""),[n,i]=u.useState(!1),[r,o]=u.useState({isOpen:!1,shortlist:null}),l=Ce(),d=ca(),c=fe(async({id:p,interestStatus:k})=>{console.log(" Sending status update request:",{id:p,interestStatus:k});const T=await U.patch(`/api/shortlist/${p}`,{interestStatus:k});return console.log(" Status update response:",T.data),T},{onSuccess:(p,k)=>{const T=k.interestStatus==="NOT_INTERESTED"?"Not Interested":"Interested";F.success(`Status updated to: ${T}`),console.log(" Status successfully updated to:",k.interestStatus),console.log(" Backend response:",p.data),setTimeout(()=>{l.invalidateQueries(["shortlists"]),l.invalidateQueries(["cashfree-applications"])},100)},onError:(p,k)=>{var T,C;console.error(" Status update failed:",p),console.error("Failed variables:",k),l.setQueryData(["shortlists",s],A=>A&&A.map(R=>{if(R.id===k.id){console.log(" Reverting optimistic update for ID:",k.id);const q=k.interestStatus==="NOT_INTERESTED"?"INTERESTED":"NOT_INTERESTED";return{...R,interestStatus:q}}return R})),F.error(`Failed to update status: ${((C=(T=p.response)==null?void 0:T.data)==null?void 0:C.message)||p.message}`)}}),m=(p,k)=>{l.setQueryData(["shortlists",s],T=>T&&T.map(C=>C.id===p?(console.log(" Optimistically updating status for ID:",p,"to:",k),{...C,interestStatus:k}):C)),c.mutate({id:p,interestStatus:k})},f=fe(async p=>{console.log(" Executing DELETE request for shortlist ID:",p);try{await U.get("/api/staff/health"),console.log(" Server is accessible, proceeding with DELETE")}catch(T){throw console.error(" Server not accessible:",T),new Error("Backend server is not running. Please start the server first.")}const k=await U.delete(`/api/shortlist/${p}`);return console.log(" DELETE response received:",k.data),k},{onSuccess:(p,k)=>{console.log(" Delete mutation successful:",p.data),F.success("Shortlist deleted successfully!"),l.setQueryData(["shortlists",s],T=>T&&T.filter(C=>C.id!==k)),setTimeout(()=>{l.invalidateQueries(["shortlists"]),l.invalidateQueries(["cashfree-applications"])},100)},onError:p=>{var T,C,A,R,q,W,_,Z,re;console.error(" Delete mutation failed:",p),console.error("Error details:",{message:p.message,status:(T=p.response)==null?void 0:T.status,statusText:(C=p.response)==null?void 0:C.statusText,data:(A=p.response)==null?void 0:A.data,url:(R=p.config)==null?void 0:R.url,method:(q=p.config)==null?void 0:q.method});let k="Failed to delete shortlist";p.message.includes("Backend server is not running")?k="Backend server is not running. Please start the server on port 5001.":((W=p.response)==null?void 0:W.status)===404?k="DELETE endpoint not found. Please ensure backend server is running with Supabase routes.":k=((Z=(_=p.response)==null?void 0:_.data)==null?void 0:Z.message)||`Failed to delete shortlist (${((re=p.response)==null?void 0:re.status)||p.message})`,F.error(k)}}),h=(p,k)=>{window.confirm(`Are you sure you want to delete the shortlist for "${k}"? This action cannot be undone.`)&&(console.log(" Attempting to delete shortlist ID:",p),console.log("API endpoint will be:",`/api/shortlist/${p}`),f.mutate(p))},v=p=>{console.log(" Viewing shortlist:",p.name),o({isOpen:!0,shortlist:p})},g=()=>{o({isOpen:!1,shortlist:null})},{data:y,isLoading:x,refetch:E}=ue(["shortlists",s],async()=>{var p,k;try{const T=new URLSearchParams;s&&T.append("name",s);const C=await U.get(`/api/shortlist?${T}`);return console.log(" Shortlist data received:",((p=C.data)==null?void 0:p.length)||0,"items"),console.log(" First shortlist item details:",(k=C.data)==null?void 0:k[0]),C.data||[]}catch(T){return console.error(" Error fetching shortlists:",T),[]}},{staleTime:5*60*1e3,cacheTime:15*60*1e3,keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchInterval:!1,onSuccess:p=>{console.log(" Shortlists query success:",(p==null?void 0:p.length)||0,"shortlists")},onError:p=>{console.error(" Shortlists query error:",p)}});u.useEffect(()=>{var p,k,T;(p=d.state)!=null&&p.fromEdit&&(console.log("Returning from edit page, forcing refresh...",d.state),i(!0),l.clear(),l.invalidateQueries(["shortlists"]),l.invalidateQueries(["shortlist"]),l.invalidateQueries(["cashfree-applications"]),setTimeout(()=>{l.refetchQueries(["shortlists"]),E().finally(()=>{i(!1)})},50)),(k=d.state)!=null&&k.fromAdd&&((T=d.state)!=null&&T.clientName)&&(F.success(` ${d.state.clientName} has been successfully added to shortlist!`),window.history.replaceState({},document.title))},[d.state,l,E,i]);const w=t==="mobile";return x||n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:n?"Refreshing data...":"Loading..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Shortlisted Applications"}),e.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[e.jsx("button",{onClick:()=>{console.log(" Manual refresh triggered"),E(),F.success("Refreshing shortlist data...")},className:"btn-outline inline-flex items-center",children:" Refresh"}),e.jsx("button",{onClick:async()=>{var p;try{const k=await U.get("/api/staff/health");F.success("Backend server is running!"),console.log("Server status:",k.data)}catch(k){F.error(`Backend server not accessible: ${((p=k.response)==null?void 0:p.status)||k.message}`),console.error("Server check failed:",k)}},className:"btn-outline inline-flex items-center",children:"Check Server"}),e.jsxs(Ee,{to:"/shortlist/new",className:"btn-primary inline-flex items-center",children:[e.jsx(xt,{className:"h-5 w-5 mr-2"}),"New Shortlist"]})]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(At,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name...",value:s,onChange:p=>a(p.target.value),className:"input-field pl-10"})]}),e.jsx("button",{onClick:()=>{a(""),E()},className:"btn-secondary",children:"Clear"})]})}),e.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:y&&y.length>0?e.jsx("div",{className:`${w?"space-y-4":"overflow-x-auto"}`,children:w?e.jsx("div",{className:"space-y-4",children:y.map(p=>{var k,T,C,A,R,q,W;return e.jsxs(V.div,{whileHover:{scale:1.02},className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:p.name||((k=p.enquiry)==null?void 0:k.name)}),e.jsxs("select",{value:p.interestStatus||"INTERESTED",onChange:_=>{console.log("Mobile status change:",p.id,"from:",p.interestStatus,"to:",_.target.value),m(p.id,_.target.value)},className:`text-xs border rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-primary-500 transition-colors duration-200 ${p.interestStatus==="NOT_INTERESTED"?"bg-red-50 border-red-300 text-red-800":"bg-green-50 border-green-300 text-green-800"} ${c.isLoading?"opacity-50 cursor-not-allowed":""}`,disabled:c.isLoading,children:[e.jsx("option",{value:"INTERESTED",children:" Interested"}),e.jsx("option",{value:"NOT_INTERESTED",children:" Not Interested"})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[" ",p.mobile||((T=p.enquiry)==null?void 0:T.mobile)]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[" ",p.businessNature||p.businessName||((C=p.enquiry)==null?void 0:C.businessType)||"Business"]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[" ",(p.loanAmount||((A=p.enquiry)==null?void 0:A.loanAmount)||0).toLocaleString()]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[" ",p.district||((R=p.enquiry)==null?void 0:R.district)||"Location"]}),e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600 mr-2",children:" Loan Status:"}),e.jsx("span",{className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded",children:"Pending"})]}),e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600 mr-2",children:" Staff:"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:((q=p.staff)==null?void 0:q.name)||p.staff||"Unassigned"}),((W=p.staff)==null?void 0:W.role)&&e.jsx("span",{className:"text-xs text-gray-500",children:p.staff.role})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" ",new Date(p.createdAt||p.date).toLocaleDateString()]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>v(p),className:"text-blue-600 hover:text-blue-800 text-sm font-medium inline-flex items-center",children:[e.jsx(Le,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(Ee,{to:`/shortlist/${p.id}/edit`,className:"text-primary-600 hover:text-primary-800 text-sm font-medium inline-flex items-center",children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),"Edit"]}),!p.cashfreeApplication&&e.jsx(Ee,{to:`/payment-gateway/apply/${p.id}`,className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"Apply to Payment Gateway"}),e.jsxs("button",{onClick:()=>{var _;return h(p.id,p.name||((_=p.enquiry)==null?void 0:_.name)||"Unknown")},disabled:f.isLoading,className:"text-red-600 hover:text-red-800 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center",children:[e.jsx(dt,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]},p.id)})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[e.jsx("thead",{className:"bg-indigo-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-16 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"S.No"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Submitted Date"}),e.jsx("th",{className:"w-48 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Mobile"}),e.jsx("th",{className:"w-48 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Business"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Loan Amount"}),e.jsx("th",{className:"w-24 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"District"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Loan Status"}),e.jsx("th",{className:"w-24 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"w-24 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Staff"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map((p,k)=>{var T,C,A,R,q,W,_,Z,re;return e.jsxs(V.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:k*.05},className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"w-16 px-4 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:k+1}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(p.createdAt||p.date).toLocaleDateString()}),e.jsx("td",{className:"w-48 px-4 py-4 text-sm font-medium text-gray-900",children:e.jsx("div",{className:"truncate",title:p.name||((T=p.enquiry)==null?void 0:T.name),children:p.name||((C=p.enquiry)==null?void 0:C.name)})}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:p.mobile||((A=p.enquiry)==null?void 0:A.mobile)}),e.jsx("td",{className:"w-48 px-4 py-4 text-sm text-gray-500",children:e.jsx("div",{className:"truncate",title:p.businessNature||p.businessName||((R=p.enquiry)==null?void 0:R.businessType)||"Business",children:p.businessNature||p.businessName||((q=p.enquiry)==null?void 0:q.businessType)||"Business"})}),e.jsxs("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500 font-semibold",children:["",(p.loanAmount||((W=p.enquiry)==null?void 0:W.loanAmount)||0).toLocaleString()]}),e.jsx("td",{className:"w-24 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:p.district||((_=p.enquiry)==null?void 0:_.district)||"N/A"}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Pending"})}),e.jsx("td",{className:"w-24 px-4 py-4 whitespace-nowrap",children:e.jsxs("select",{value:p.interestStatus||"INTERESTED",onChange:J=>{console.log("Desktop status change:",p.id,"from:",p.interestStatus,"to:",J.target.value),m(p.id,J.target.value)},className:`text-sm border rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200 ${p.interestStatus==="NOT_INTERESTED"?"bg-red-50 border-red-300 text-red-800":"bg-green-50 border-green-300 text-green-800"} ${c.isLoading?"opacity-50 cursor-not-allowed":""}`,disabled:c.isLoading,children:[e.jsx("option",{value:"INTERESTED",children:" Interested"}),e.jsx("option",{value:"NOT_INTERESTED",children:" Not Interested"})]})}),e.jsx("td",{className:"w-24 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-gray-900",children:((Z=p.staff)==null?void 0:Z.name)||p.staff||"Unassigned"}),((re=p.staff)==null?void 0:re.role)&&e.jsx("span",{className:"text-xs text-gray-500",children:p.staff.role})]})}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>v(p),className:"text-blue-600 hover:text-blue-900 inline-flex items-center",title:"View Shortlist Details",children:e.jsx(Le,{className:"h-4 w-4"})}),e.jsx(Ee,{to:`/shortlist/${p.id}/edit`,className:"text-primary-600 hover:text-primary-900 inline-flex items-center",title:"Edit Shortlist",children:e.jsx(at,{className:"h-4 w-4"})}),!p.cashfreeApplication&&e.jsx(Ee,{to:`/payment-gateway/apply/${p.id}`,className:"text-green-600 hover:text-green-900",title:"Apply to Payment Gateway",children:"Apply"}),e.jsx("button",{onClick:()=>{var J;return h(p.id,p.name||((J=p.enquiry)==null?void 0:J.name)||"Unknown")},disabled:f.isLoading,className:"text-red-600 hover:text-red-900 disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center",title:"Delete Shortlist",children:e.jsx(dt,{className:"h-4 w-4"})})]})})]},p.id)})})]})})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"No shortlisted applications found."}),e.jsxs(Ee,{to:"/shortlist/new",className:"btn-primary inline-flex items-center mt-4",children:[e.jsx(xt,{className:"h-5 w-5 mr-2"}),"Create First Shortlist"]})]})}),r.isOpen&&r.shortlist&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Shortlist Details - ",r.shortlist.name]}),e.jsx("button",{onClick:g,className:"text-gray-400 hover:text-gray-600 focus:outline-none",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mt-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.shortlist.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mobile"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.shortlist.mobile||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"District"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.shortlist.district||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.shortlist.createdAt?new Date(r.shortlist.createdAt).toLocaleDateString():"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Business Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Business Name"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.shortlist.businessName||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Business Nature"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.shortlist.businessNature||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Constitution"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.shortlist.propPvt||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"GST Status"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.shortlist.gstStatus||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Financial Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Loan Amount"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900 font-semibold",children:["",r.shortlist.loanAmount?r.shortlist.loanAmount.toLocaleString():"N/A"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CAP Amount"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:["",r.shortlist.cap?r.shortlist.cap.toLocaleString():"N/A"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Account"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.shortlist.bankAccount||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Statement Duration"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.shortlist.bankStatementDuration||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Assignment & Status"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assigned Staff"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 font-medium",children:((N=r.shortlist.staff)==null?void 0:N.name)||r.shortlist.staff||"Unassigned"}),((j=r.shortlist.staff)==null?void 0:j.role)&&e.jsx("p",{className:"text-xs text-gray-500",children:r.shortlist.staff.role})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Interest Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r.shortlist.interestStatus==="NOT_INTERESTED"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:r.shortlist.interestStatus==="NOT_INTERESTED"?" Not Interested":" Interested"})]})]})]}),r.shortlist.comments&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Comments"}),e.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md",children:r.shortlist.comments})]})]}),e.jsxs("div",{className:"flex items-center justify-end pt-6 border-t border-gray-200 space-x-3",children:[e.jsx("button",{onClick:g,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Close"}),e.jsxs(Ee,{to:`/shortlist/${r.shortlist.id}/edit`,onClick:g,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 inline-flex items-center",children:[e.jsx(at,{className:"h-4 w-4 mr-2"}),"Edit Shortlist"]})]})]})})})]})}function dn(){const t=He(),{id:s}=gs(),a=!!s,n=Ce(),{register:i,handleSubmit:r,reset:o,control:l,formState:{errors:d}}=Ct(),c=It({control:l,name:"hasGst"}),m=It({control:l,name:"hasBusinessPan"}),f=It({control:l,name:"hasIec"}),h=It({control:l,name:"hasWebsite"}),v=It({control:l,name:"hasGateway"}),{data:g}=ue("staff-members",async()=>{var w;try{return((w=(await U.get("/api/staff")).data)==null?void 0:w.staff)||[]}catch{return console.log("No staff data available"),[]}},{staleTime:5*60*1e3}),{data:y}=ue(["shortlist",s],async()=>s?(await U.get(`/api/shortlist/${s}`)).data:null,{enabled:a}),x=fe(async w=>{if(console.log("Submitting shortlist form data:",w),console.log("Key fields being sent - loanAmount:",w.loanAmount,"district:",w.district,"staff:",w.staff),a){const N=await U.patch(`/api/shortlist/${s}`,w);return console.log("PATCH response:",N.data),N}else{const N=await U.post("/api/shortlist",w);return console.log("POST response:",N.data),N}},{onSuccess:async w=>{F.success(a?"Shortlist updated successfully!":"Shortlist created successfully!"),console.log("Shortlist update/create successful:",w.data),n.clear(),n.invalidateQueries(["shortlists"]),n.invalidateQueries(["shortlist"]),n.invalidateQueries(["cashfree-applications"]),await n.refetchQueries(["shortlists"]),setTimeout(()=>{t("/shortlist",{state:{fromEdit:!0,timestamp:Date.now()}})},100)},onError:w=>{var N,j;F.error(((j=(N=w.response)==null?void 0:N.data)==null?void 0:j.message)||"Something went wrong")}});u.useEffect(()=>{y&&o({name:y.name,mobile:y.mobile,businessName:y.businessName||"",businessNature:y.businessNature||"",district:y.district||"",propPvt:y.propPvt||"",hasGst:y.hasGst||"",gst:y.gst||"",hasBusinessPan:y.hasBusinessPan||"",businessPan:y.businessPan||"",hasIec:y.hasIec||"",iec:y.iec||"",hasNewCurrentAccount:y.hasNewCurrentAccount||"",newCurrentAccount:y.newCurrentAccount||!1,hasWebsite:y.hasWebsite||"",website:y.website||"",hasGateway:y.hasGateway||"",gateway:y.gateway||"",transaction:y.transaction||"",bankStatementDuration:y.bankStatementDuration||"",loanAmount:y.loanAmount||0,cap:y.cap||0,bankAccount:y.bankAccount||"",comments:y.comments||"",staff:y.staff||"",gstStatus:y.gstStatus||"",date:y.date||new Date().toISOString().split("T")[0]})},[y,o]);const E=w=>{x.mutate(w)};return e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{type:"button",onClick:()=>t("/shortlist"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors",children:[e.jsx(Et,{className:"h-4 w-4 mr-2"}),"Back to Shortlist"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a?"Edit Shortlist":"New Shortlist"}),e.jsx("p",{className:"text-gray-600",children:a?"Update shortlist information":"Create a new shortlisted application"})]})]})}),e.jsxs("form",{onSubmit:r(E),className:"card space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),e.jsx("input",{...i("name",{required:"Name is required"}),type:"text",className:"input-field",placeholder:"Enter full name"}),d.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobile Number *"}),e.jsx("input",{...i("mobile",{required:"Mobile number is required"}),type:"tel",className:"input-field",placeholder:"Enter mobile number"}),d.mobile&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.mobile.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"District"}),e.jsx("input",{...i("district"),type:"text",className:"input-field",placeholder:"Enter district"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),e.jsx("input",{...i("date"),type:"date",className:"input-field"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Business Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name"}),e.jsx("input",{...i("businessName"),type:"text",className:"input-field",placeholder:"Enter business name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Nature"}),e.jsx("input",{...i("businessNature"),type:"text",className:"input-field",placeholder:"Enter business nature"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Constitution of Business (Prop/PVT)"}),e.jsxs("select",{...i("propPvt"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"Proprietorship",children:"Proprietorship"}),e.jsx("option",{value:"Private Limited",children:"Private Limited"}),e.jsx("option",{value:"Partnership",children:"Partnership"}),e.jsx("option",{value:"LLP",children:"LLP"}),e.jsx("option",{value:"Public Limited",children:"Public Limited"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GST"}),e.jsxs("select",{...i("hasGst"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select option"}),e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]}),c==="yes"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GST Number"}),e.jsx("input",{...i("gst"),type:"text",className:"input-field",placeholder:"Enter GST number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business PAN Card"}),e.jsxs("select",{...i("hasBusinessPan"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select option"}),e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]}),m==="yes"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business PAN Card Number"}),e.jsx("input",{...i("businessPan"),type:"text",className:"input-field",placeholder:"Enter business PAN card number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IEC Code"}),e.jsxs("select",{...i("hasIec"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select option"}),e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]}),f==="yes"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IEC Code Number"}),e.jsx("input",{...i("iec"),type:"text",className:"input-field",placeholder:"Enter IEC code number"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Financial Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loan Amount"}),e.jsx("input",{...i("loanAmount",{valueAsNumber:!0}),type:"number",className:"input-field",placeholder:"Enter loan amount"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CAP Amount"}),e.jsx("input",{...i("cap",{valueAsNumber:!0}),type:"number",className:"input-field",placeholder:"Enter CAP amount"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Account"}),e.jsx("input",{...i("bankAccount"),type:"text",className:"input-field",placeholder:"Enter bank account details"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Statement Duration"}),e.jsxs("select",{...i("bankStatementDuration"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select duration"}),e.jsx("option",{value:"6 months",children:"6 months"}),e.jsx("option",{value:"12 months",children:"12 months"}),e.jsx("option",{value:"18 months",children:"18 months"}),e.jsx("option",{value:"24 months",children:"24 months"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Current Account"}),e.jsxs("select",{...i("hasNewCurrentAccount"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select option"}),e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Online Presence"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),e.jsxs("select",{...i("hasWebsite"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select option"}),e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]}),h==="yes"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website URL"}),e.jsx("input",{...i("website"),type:"url",className:"input-field",placeholder:"Enter website URL"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gateway"}),e.jsxs("select",{...i("hasGateway"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select option"}),e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]}),v==="yes"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Gateway Details"}),e.jsx("input",{...i("gateway"),type:"text",className:"input-field",placeholder:"Enter payment gateway details"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transaction Details"}),e.jsx("input",{...i("transaction"),type:"text",className:"input-field",placeholder:"Enter transaction details"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GST Status"}),e.jsxs("select",{...i("gstStatus"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"}),e.jsx("option",{value:"Pending",children:"Pending"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Staff Assignment"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned Staff Member *"}),e.jsxs("select",{...i("staff",{required:"Staff assignment is required"}),className:"input-field",children:[e.jsx("option",{value:"",children:"Select staff member..."}),g&&g.map(w=>e.jsxs("option",{value:w.name,children:[w.name," - ",w.role," (",w.department,")"]},w.id))]}),d.staff&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:d.staff.message}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Select the staff member responsible for this shortlisted application"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comments"}),e.jsx("textarea",{...i("comments"),rows:4,className:"input-field",placeholder:"Enter any additional comments..."})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>t("/shortlist"),className:"btn-secondary",children:"Cancel"}),e.jsx(V.button,{type:"submit",disabled:x.isLoading,className:"btn-primary disabled:opacity-50",whileHover:{scale:1.02},whileTap:{scale:.98},children:x.isLoading?a?"Updating...":"Creating...":a?"Update Shortlist":"Create Shortlist"})]})]})]})})}const nm=()=>{const[t,s]=u.useState("desktop");return u.useEffect(()=>{const a=()=>{const n=window.innerWidth;n<768?s("mobile"):n<1024?s("tablet"):s("desktop")};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),t};function im(){const t=nm(),s=ca(),[a,n]=u.useState(""),[i,r]=u.useState(""),o=Ce();u.useEffect(()=>{var x,E;(x=s.state)!=null&&x.message&&((E=s.state)==null?void 0:E.type)==="success"&&(F.success(s.state.message),window.history.replaceState({},document.title))},[s.state]);const{data:l,isLoading:d,refetch:c,error:m}=ue(["cashfree-applications",a,i],async()=>{try{console.log(" Fetching payment gateway applications...");const E=(await U.get("/api/cashfree").catch(N=>(console.warn(" Payment gateway API error:",N.message),{data:[]}))).data||[];console.log(" Fetched payment gateway applications:",E.length);let w=E;return a&&(w=w.filter(N=>{var j,p,k,T,C,A,R;return((p=(j=N.shortlist)==null?void 0:j.name)==null?void 0:p.toLowerCase().includes(a.toLowerCase()))||((T=(k=N.shortlist)==null?void 0:k.mobile)==null?void 0:T.includes(a))||((R=(A=(C=N.shortlist)==null?void 0:C.enquiry)==null?void 0:A.name)==null?void 0:R.toLowerCase().includes(a.toLowerCase()))})),i&&(w=w.filter(N=>N.status===i)),console.log(" Returning filtered payment gateway applications:",w.length),console.log(" Sample application data:",w[0]),w}catch(x){return console.error(" Error fetching payment gateway data:",x),[]}},{staleTime:5*60*1e3,cacheTime:15*60*1e3,keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchInterval:!1,onSuccess:x=>{var E;console.log(" Payment applications query success:",(x==null?void 0:x.length)||0,"applications"),x&&x.length>0&&(console.log(" First application details:",x[0]),console.log(" Shortlist data:",(E=x[0])==null?void 0:E.shortlist))},onError:x=>{console.error(" Payment applications query error:",x)}}),f=fe(async({id:x,status:E})=>U.patch(`/api/cashfree/${x}/status`,{status:E}),{onSuccess:()=>{F.success("Status updated successfully!"),o.invalidateQueries("cashfree-applications")},onError:x=>{var E,w;F.error(((w=(E=x.response)==null?void 0:E.data)==null?void 0:w.message)||"Failed to update status")}}),h=fe(async x=>U.delete(`/api/cashfree/${x}`),{onSuccess:(x,E)=>{var w;F.success(((w=x.data)==null?void 0:w.message)||"Payment application deleted successfully!"),o.setQueryData(["cashfree-applications",a,i],N=>N&&N.filter(j=>j.id!==E)),o.invalidateQueries("cashfree-applications")},onError:x=>{var E,w;F.error(((w=(E=x.response)==null?void 0:E.data)==null?void 0:w.message)||"Failed to delete payment application")}}),v=x=>{h.mutate(x)},g=t==="mobile",y=x=>{switch(x){case"PENDING":return"bg-yellow-100 text-yellow-800";case"TRANSACTION_DONE":return"bg-green-100 text-green-800";case"CLOSED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading payment gateway applications..."})]})}):m?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Gateway Applications"}),e.jsx("p",{className:"text-gray-600",children:"Manage loan applications submitted to payment gateway"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-4",children:""}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Applications"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"There was an error loading the payment gateway applications."}),e.jsx("button",{onClick:()=>c(),className:"btn-primary",children:"Try Again"})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Gateway Applications"}),e.jsx("p",{className:"text-gray-600",children:"Manage loan applications submitted to payment gateway"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(At,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name...",value:a,onChange:x=>n(x.target.value),className:"input-field pl-10"})]}),e.jsxs("select",{value:i,onChange:x=>r(x.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"TRANSACTION_DONE",children:"Transaction Done"}),e.jsx("option",{value:"CLOSED",children:"Closed"})]}),e.jsx("button",{onClick:()=>{n(""),r(""),c()},className:"btn-secondary",children:"Clear Filters"}),e.jsx("button",{onClick:()=>{o.invalidateQueries(["cashfree-applications"]),c()},className:"btn-primary",children:"Refresh Data"})]})}),e.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:l&&l.length>0?e.jsx("div",{className:`${g?"space-y-4":"overflow-x-auto"}`,children:g?e.jsx("div",{className:"space-y-4",children:l.map(x=>{var E;return e.jsxs(V.div,{whileHover:{scale:1.02},className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:x.shortlist.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${y(x.status)}`,children:x.status.replace("_"," ")})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[" ",x.shortlist.mobile]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[" ",x.shortlist.businessType||x.shortlist.businessName||"N/A"]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[" ",((E=x.shortlist.loanAmount)==null?void 0:E.toLocaleString())||"N/A"]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" ",new Date(x.submittedAt).toLocaleDateString()]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[x.status==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>f.mutate({id:x.id,status:"TRANSACTION_DONE"}),disabled:f.isLoading,className:"text-green-600 hover:text-green-800 text-sm font-medium disabled:opacity-50",children:"Mark Done"}),e.jsx("button",{onClick:()=>f.mutate({id:x.id,status:"CLOSED"}),disabled:f.isLoading,className:"text-red-600 hover:text-red-800 text-sm font-medium disabled:opacity-50",children:"Close"})]}),e.jsx("button",{onClick:()=>v(x.id),disabled:h.isLoading,className:"text-red-600 hover:text-red-800 text-sm font-medium disabled:opacity-50",children:"Delete"})]})]},x.id)})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[e.jsx("thead",{className:"bg-indigo-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-16 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"S.No"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Submitted Date"}),e.jsx("th",{className:"w-48 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Mobile"}),e.jsx("th",{className:"w-48 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Business"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Loan Amount"}),e.jsx("th",{className:"w-28 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Submitted By"}),e.jsx("th",{className:"w-44 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map((x,E)=>{var w,N;return e.jsxs(V.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:E*.05},className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"w-16 px-4 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:E+1}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(x.submittedAt).toLocaleDateString()}),e.jsx("td",{className:"w-48 px-4 py-4 text-sm font-medium text-gray-900",children:e.jsx("div",{className:"truncate",title:x.shortlist.name,children:x.shortlist.name})}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:x.shortlist.mobile}),e.jsx("td",{className:"w-48 px-4 py-4 text-sm text-gray-500",children:e.jsx("div",{className:"truncate",title:x.shortlist.businessType||x.shortlist.businessName||"N/A",children:x.shortlist.businessType||x.shortlist.businessName||"N/A"})}),e.jsxs("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500 font-semibold",children:["",((w=x.shortlist.loanAmount)==null?void 0:w.toLocaleString())||"N/A"]}),e.jsx("td",{className:"w-28 px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${y(x.status)}`,children:x.status.replace("_"," ")})}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:((N=x.submittedBy)==null?void 0:N.name)||"N/A"}),e.jsxs("td",{className:"w-44 px-4 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsxs("div",{className:"flex gap-1 items-center",children:[x.status==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>f.mutate({id:x.id,status:"TRANSACTION_DONE"}),disabled:f.isLoading,className:"text-green-600 hover:text-green-900 disabled:opacity-50 text-xs px-1",children:"Mark Done"}),e.jsx("button",{onClick:()=>f.mutate({id:x.id,status:"CLOSED"}),disabled:f.isLoading,className:"text-red-600 hover:text-red-900 disabled:opacity-50 text-xs px-1",children:"Close"})]}),e.jsx("button",{onClick:()=>v(x.id),disabled:h.isLoading,className:"text-red-600 hover:text-red-900 disabled:opacity-50 text-xs px-1",title:"Delete Application",children:"Delete"})]}),x.decisionDate&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Decision: ",new Date(x.decisionDate).toLocaleDateString()]})]})]},x.id)})})]})})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xi,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Payment Gateway Applications"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No applications have been submitted to the payment gateway yet."}),e.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[e.jsx("p",{children:"To create payment gateway applications:"}),e.jsx("p",{children:"1. Go to Shortlist Applications"}),e.jsx("p",{children:'2. Click "Apply" on a shortlisted client'}),e.jsx("p",{children:"3. Submit the payment gateway application"})]}),e.jsx("button",{onClick:()=>c(),className:"btn-outline mt-4",children:" Refresh Data"})]})}),l&&l.length>0&&e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:l.filter(x=>x.status==="PENDING").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Pending Applications"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.filter(x=>x.status==="TRANSACTION_DONE").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Completed Transactions"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:l.filter(x=>x.status==="CLOSED").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Closed Applications"})]})]})]})}function rm(){var f;const t=He(),{id:s}=gs(),a=Ce(),{register:n,handleSubmit:i,reset:r,formState:{errors:o}}=Ct(),{data:l,isLoading:d}=ue(["shortlist",s],async()=>{const h=await U.get(`/api/shortlist/${s}`);return console.log("Fetched shortlist data for payment gateway form:",h.data),h.data},{enabled:!!s,staleTime:0,cacheTime:0}),c=fe(async h=>(console.log("Submitting payment gateway application with data:",h),U.post("/api/cashfree/apply",{...h,shortlistId:parseInt(s),status:"PENDING",appliedAt:new Date})),{onSuccess:async h=>{F.success("Payment gateway application submitted successfully!");try{await U.post(`/api/shortlist/${s}/payment-gateway-applied`,h.data.application)}catch(v){console.log("Failed to mark shortlist as having payment gateway application:",v)}h.data.application&&a.setQueryData(["cashfree-applications"],v=>v?[h.data.application,...v]:[h.data.application]),a.invalidateQueries(["cashfree-applications"]),a.invalidateQueries(["shortlists"]),a.invalidateQueries(["shortlist"]),t("/payment-gateway",{state:{message:"Payment gateway application submitted successfully!",type:"success"}})},onError:h=>{var v,g;F.error(((g=(v=h.response)==null?void 0:v.data)==null?void 0:g.message)||"Application submission failed")}});u.useEffect(()=>{l&&(console.log("Pre-filling payment gateway form with shortlist data:",l),console.log("Loan amount from shortlist:",l.loanAmount),r({loanAmount:l.loanAmount||0,tenure:12,interestRate:12.5,processingFee:2.5,purpose:"Business Expansion",bankAccount:l.bankAccount||"",panCard:l.businessPan||"",salarySlips:!1,itrReturns:!0,businessProof:!0,addressProof:!0}))},[l,r]);const m=h=>{c.mutate(h)};return d?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{type:"button",onClick:()=>t("/shortlist"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors",children:[e.jsx(Et,{className:"h-4 w-4 mr-2"}),"Back to Shortlist"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Gateway Loan Application"}),e.jsxs("p",{className:"text-gray-600",children:["Apply for loan through payment gateway for: ",e.jsx("span",{className:"font-semibold",children:(f=l==null?void 0:l.enquiry)==null?void 0:f.name})]})]})]})}),e.jsxs("form",{onSubmit:i(m),className:"card space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Loan Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loan Amount () *"}),e.jsx("input",{...n("loanAmount",{required:"Loan amount is required",min:5e4}),type:"number",className:"input-field",placeholder:"Enter loan amount"}),o.loanAmount&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.loanAmount.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tenure (Months) *"}),e.jsxs("select",{...n("tenure",{required:"Tenure is required"}),className:"input-field",children:[e.jsx("option",{value:"",children:"Select tenure"}),e.jsx("option",{value:"6",children:"6 Months"}),e.jsx("option",{value:"12",children:"12 Months"}),e.jsx("option",{value:"18",children:"18 Months"}),e.jsx("option",{value:"24",children:"24 Months"}),e.jsx("option",{value:"36",children:"36 Months"})]}),o.tenure&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.tenure.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Interest Rate (%)"}),e.jsx("input",{...n("interestRate",{valueAsNumber:!0}),type:"number",step:"0.1",className:"input-field",placeholder:"12.5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Processing Fee (%)"}),e.jsx("input",{...n("processingFee",{valueAsNumber:!0}),type:"number",step:"0.1",className:"input-field",placeholder:"2.5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purpose *"}),e.jsxs("select",{...n("purpose",{required:"Purpose is required"}),className:"input-field",children:[e.jsx("option",{value:"",children:"Select purpose"}),e.jsx("option",{value:"Business Expansion",children:"Business Expansion"}),e.jsx("option",{value:"Working Capital",children:"Working Capital"}),e.jsx("option",{value:"Equipment Purchase",children:"Equipment Purchase"}),e.jsx("option",{value:"Inventory",children:"Inventory"}),e.jsx("option",{value:"Other",children:"Other"})]}),o.purpose&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.purpose.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Collateral"}),e.jsx("input",{...n("collateral"),type:"text",className:"input-field",placeholder:"Property, Gold, etc."})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Bank Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Account Number *"}),e.jsx("input",{...n("bankAccount",{required:"Bank account is required"}),type:"text",className:"input-field",placeholder:"Enter bank account number"}),o.bankAccount&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.bankAccount.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IFSC Code *"}),e.jsx("input",{...n("ifscCode",{required:"IFSC code is required"}),type:"text",className:"input-field",placeholder:"Enter IFSC code"}),o.ifscCode&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.ifscCode.message})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Document Checklist"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...n("salarySlips"),type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Salary Slips (Last 3 months)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...n("itrReturns"),type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"ITR Returns (Last 2 years)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...n("businessProof"),type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Business Registration Proof"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...n("addressProof"),type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Address Proof"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remarks"}),e.jsx("textarea",{...n("remarks"),rows:4,className:"input-field",placeholder:"Any additional information..."})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>t("/shortlist"),className:"btn-secondary",children:"Cancel"}),e.jsx(V.button,{type:"submit",disabled:c.isLoading,className:"btn-primary disabled:opacity-50",whileHover:{scale:1.02},whileTap:{scale:.98},children:c.isLoading?"Submitting...":"Submit Application"})]})]})]})})}const Li=()=>{const t=Ce(),s=u.useCallback(async()=>{console.log(" Triggering dashboard refresh..."),await Promise.all([t.invalidateQueries("dashboard-data"),t.invalidateQueries(["individual-dashboard"]),t.invalidateQueries("enquiries"),t.invalidateQueries("staff"),t.invalidateQueries("shortlist"),t.invalidateQueries("documents"),t.invalidateQueries("transactions"),t.invalidateQueries("notifications")]),console.log(" Dashboard refresh completed")},[t]),a=u.useCallback(async()=>{console.log(" Refreshing dashboards after new enquiry..."),await s()},[s]),n=u.useCallback(async()=>{console.log(" Refreshing dashboards after staff change..."),await s()},[s]),i=u.useCallback(async()=>{console.log(" Refreshing dashboards after document change..."),await s()},[s]),r=u.useCallback(async()=>{console.log(" Refreshing dashboards after shortlist change..."),await s()},[s]),o=u.useCallback(async()=>{console.log(" Refreshing dashboards after payment application..."),await s()},[s]),l=u.useCallback(async()=>{console.log(" Refreshing dashboards after transaction..."),await s()},[s]);return{refreshDashboards:s,refreshAfterEnquiry:a,refreshAfterStaff:n,refreshAfterDocument:i,refreshAfterShortlist:r,refreshAfterPayment:o,refreshAfterTransaction:l}};function om(){const{user:t}=Fe(),s=ga(),[a,n]=u.useState(!1),[i,r]=u.useState(""),[o,l]=u.useState(null),[d,c]=u.useState(null),[m,f]=u.useState({}),[h,v]=u.useState(null),[g,y]=u.useState(!1),{refreshAfterStaff:x}=Li();if(!s.canManageStaff)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50 flex items-center justify-center",children:e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full mx-4 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Be,{className:"w-8 h-8 text-red-600"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["Only ",e.jsx("strong",{children:"admin@gmail.com"})," has permission to manage staff members."]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-sm text-blue-800",children:["Current user: ",e.jsx("strong",{children:t==null?void 0:t.email}),e.jsx("br",{}),"Role: ",e.jsx("strong",{children:t==null?void 0:t.role})]})}),e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-sm text-green-800",children:[e.jsx("strong",{children:"Admin Login:"})," admin@gmail.com / admin123"]})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Please contact the administrator if you need access to staff management."})]})});const[E,w]=u.useState({1:"Active",2:"Active",3:"Active",4:"Inactive",5:"Active",6:"Active",7:"Active"}),N=Ce(),{register:j,handleSubmit:p,reset:k,setValue:T,formState:{errors:C}}=Ct(),{data:A,isLoading:R,refetch:q}=ue("staff",async()=>(await U.get("/api/staff")).data,{staleTime:4*60*1e3,keepPreviousData:!0}),{data:W}=ue("staff-stats",async()=>(await U.get("/api/staff/stats/summary")).data,{staleTime:5*60*1e3,keepPreviousData:!0}),_=(A==null?void 0:A.staff)||[],Z=(W==null?void 0:W.stats)||{},re=fe(async P=>U.post("/api/staff",P),{onMutate:async P=>{await N.cancelQueries("staff"),await N.cancelQueries("staff-stats");const ne=N.getQueryData("staff"),b=N.getQueryData("staff-stats"),L={id:Date.now(),name:P.name,email:P.email,role:P.role,status:"PENDING",hasAccess:!1,department:P.department||"",position:P.position||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return N.setQueryData("staff",I=>({...I,staff:[...(I==null?void 0:I.staff)||[],L]})),N.setQueryData("staff-stats",I=>{var X,oe,le,Oe,qe;return{...I,stats:{...I==null?void 0:I.stats,totalStaff:(((X=I==null?void 0:I.stats)==null?void 0:X.totalStaff)||0)+1,employeeCount:P.role==="EMPLOYEE"?(((oe=I==null?void 0:I.stats)==null?void 0:oe.employeeCount)||0)+1:((le=I==null?void 0:I.stats)==null?void 0:le.employeeCount)||0,adminCount:P.role==="ADMIN"?(((Oe=I==null?void 0:I.stats)==null?void 0:Oe.adminCount)||0)+1:((qe=I==null?void 0:I.stats)==null?void 0:qe.adminCount)||0}}}),{previousStaff:ne,previousStats:b}},onSuccess:P=>{const ne=P.data.emailSent?" Verification email sent successfully!":" Failed to send verification email - check SMTP settings",b=P.data.verificationRequired?" Email verification required before activation":" Staff member activated immediately";F.success(` Staff member created successfully!
${ne}
${b}
 Check notification panel for staff notification!`,{duration:8e3,position:"top-center",style:{background:"linear-gradient(135deg, #10B981 0%, #059669 100%)",color:"#fff",fontWeight:"bold",fontSize:"16px",padding:"20px",borderRadius:"12px",boxShadow:"0 10px 25px rgba(16, 185, 129, 0.3)",border:"2px solid #34D399",maxWidth:"500px",textAlign:"center",whiteSpace:"pre-line"}}),setTimeout(()=>{F.success(" New staff notification created! Check the notification bell.",{duration:6e3,position:"top-right",style:{background:"#3B82F6",color:"#fff",fontWeight:"bold",fontSize:"14px"}})},1e3),n(!1),k(),N.invalidateQueries("staff"),N.invalidateQueries("staff-stats"),N.invalidateQueries("global-notifications"),N.invalidateQueries("global-notification-count"),x(),setTimeout(()=>{console.log(" Force refreshing notifications after staff creation..."),N.invalidateQueries("global-notifications"),N.invalidateQueries("global-notification-count")},2e3)},onError:(P,ne,b)=>{var L,I;b!=null&&b.previousStaff&&N.setQueryData("staff",b.previousStaff),b!=null&&b.previousStats&&N.setQueryData("staff-stats",b.previousStats),F.error(((I=(L=P.response)==null?void 0:L.data)==null?void 0:I.message)||"Failed to create staff member")}}),J=fe(async P=>U.delete(`/api/staff/${P}`),{onMutate:async P=>{await N.cancelQueries("staff"),await N.cancelQueries("staff-stats");const ne=N.getQueryData("staff"),b=N.getQueryData("staff-stats"),L=_.find(I=>I.id===P);return N.setQueryData("staff",I=>{var X;return{...I,staff:((X=I==null?void 0:I.staff)==null?void 0:X.filter(oe=>oe.id!==P))||[]}}),L&&N.setQueryData("staff-stats",I=>{var X,oe,le,Oe,qe,S,D;return{...I,stats:{...I==null?void 0:I.stats,totalStaff:Math.max(0,(((X=I==null?void 0:I.stats)==null?void 0:X.totalStaff)||0)-1),employeeCount:L.role==="EMPLOYEE"?Math.max(0,(((oe=I==null?void 0:I.stats)==null?void 0:oe.employeeCount)||0)-1):((le=I==null?void 0:I.stats)==null?void 0:le.employeeCount)||0,adminCount:L.role==="ADMIN"?Math.max(0,(((Oe=I==null?void 0:I.stats)==null?void 0:Oe.adminCount)||0)-1):((qe=I==null?void 0:I.stats)==null?void 0:qe.adminCount)||0,activeStaff:L.status==="ACTIVE"?Math.max(0,(((S=I==null?void 0:I.stats)==null?void 0:S.activeStaff)||0)-1):((D=I==null?void 0:I.stats)==null?void 0:D.activeStaff)||0}}}),{previousStaff:ne,previousStats:b}},onSuccess:()=>{F.success(" Staff member deleted successfully!",{duration:3e3,position:"top-right",style:{background:"#EF4444",color:"#fff",fontWeight:"bold"}}),setTimeout(()=>{N.invalidateQueries("staff"),N.invalidateQueries("staff-stats"),N.invalidateQueries("global-notifications"),N.invalidateQueries("global-notification-count")},100)},onError:(P,ne,b)=>{var L,I;b!=null&&b.previousStaff&&N.setQueryData("staff",b.previousStaff),b!=null&&b.previousStats&&N.setQueryData("staff-stats",b.previousStats),F.error(((I=(L=P.response)==null?void 0:L.data)==null?void 0:I.message)||"Failed to delete staff member")}}),se=fe(async P=>U.post(`/api/staff/${P}/revoke-access`),{onMutate:async P=>{await N.cancelQueries("staff");const ne=N.getQueryData("staff");return N.setQueryData("staff",b=>{var L;return{...b,staff:((L=b==null?void 0:b.staff)==null?void 0:L.map(I=>I.id===P?{...I,hasAccess:!1,status:"INACTIVE"}:I))||[]}}),{previousStaff:ne}},onSuccess:()=>{F.success(" Access revoked successfully! Notification sent via email.",{duration:4e3,position:"top-right",style:{background:"#F59E0B",color:"#fff",fontWeight:"bold"}}),setTimeout(()=>{N.invalidateQueries("staff"),N.invalidateQueries("staff-stats")},100)},onError:(P,ne,b)=>{var L,I;b!=null&&b.previousStaff&&N.setQueryData("staff",b.previousStaff),F.error(((I=(L=P.response)==null?void 0:L.data)==null?void 0:I.message)||"Failed to revoke access")}}),K=fe(async P=>U.post(`/api/staff/${P}/grant-access`),{onMutate:async P=>{await N.cancelQueries("staff");const ne=N.getQueryData("staff");return N.setQueryData("staff",b=>{var L;return{...b,staff:((L=b==null?void 0:b.staff)==null?void 0:L.map(I=>I.id===P?{...I,hasAccess:!0,status:"ACTIVE"}:I))||[]}}),{previousStaff:ne}},onSuccess:P=>{F.success(` Access granted! ${P.data.newAccessLinkSent?"New access link sent via email.":"Failed to send email."}`,{duration:4e3,position:"top-right",style:{background:"#10B981",color:"#fff",fontWeight:"bold"}}),setTimeout(()=>{N.invalidateQueries("staff"),N.invalidateQueries("staff-stats")},100)},onError:(P,ne,b)=>{var L,I;b!=null&&b.previousStaff&&N.setQueryData("staff",b.previousStaff),F.error(((I=(L=P.response)==null?void 0:L.data)==null?void 0:I.message)||"Failed to grant access")}}),ce=fe(async P=>U.post(`/api/staff/verify/${P}`),{onMutate:async P=>{await N.cancelQueries("staff");const ne=N.getQueryData("staff");return N.setQueryData("staff",b=>{var L;return{...b,staff:((L=b==null?void 0:b.staff)==null?void 0:L.map(I=>I.id===P?{...I,status:"ACTIVE",hasAccess:!0,verified:!0}:I))||[]}}),{previousStaff:ne}},onSuccess:P=>{const ne=P.data.activated?" Staff member verified and activated successfully! They can now login.":" Staff member was already verified.";F.success(ne,{duration:5e3,position:"top-center",style:{background:"linear-gradient(135deg, #10B981 0%, #059669 100%)",color:"#fff",fontWeight:"bold",fontSize:"16px",padding:"20px",borderRadius:"12px",boxShadow:"0 10px 25px rgba(16, 185, 129, 0.3)",border:"2px solid #34D399",maxWidth:"500px",textAlign:"center"}}),setTimeout(()=>{N.invalidateQueries("staff"),N.invalidateQueries("staff-stats"),N.invalidateQueries("global-notifications"),N.invalidateQueries("global-notification-count")},100)},onError:(P,ne,b)=>{var L,I;b!=null&&b.previousStaff&&N.setQueryData("staff",b.previousStaff),F.error(((I=(L=P.response)==null?void 0:L.data)==null?void 0:I.message)||"Failed to verify staff member")}}),$=fe(async P=>U.post(`/api/staff/resend-verification/${P}`),{onSuccess:P=>{F.success(` Verification email ${P.data.emailSent?"sent successfully!":"failed to send."}`,{duration:4e3,position:"top-right",style:{background:P.data.emailSent?"#10B981":"#EF4444",color:"#fff",fontWeight:"bold"}}),setTimeout(()=>{N.invalidateQueries("staff")},100)},onError:P=>{var ne,b;F.error(((b=(ne=P.response)==null?void 0:ne.data)==null?void 0:b.message)||"Failed to resend verification email")}}),z=P=>{re.mutate(P)},ee=P=>{f(ne=>({...ne,[P]:!ne[P]}))},ae=P=>{J.mutate(P)},me=P=>{v(P),y(!0)},xe=P=>{w(ne=>({...ne,[P]:ne[P]==="Active"?"Inactive":"Active"}))},rt=_==null?void 0:_.filter(P=>P.name.toLowerCase().includes(i.toLowerCase())||P.email.toLowerCase().includes(i.toLowerCase())),We=P=>{switch(P){case"SUPER_ADMIN":return"bg-purple-100 text-purple-800";case"ADMIN":return"bg-blue-100 text-blue-800";case"EMPLOYEE":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},Ye=P=>({1:3,2:2,3:3,4:0,5:1,6:2,7:1})[P]||0,Je=P=>({1:"Rajesh Kumar, Priya Sharma, Amit Patel",2:"Sunita Gupta, Vikram Singh",3:"Anita Desai, Ravi Mehta, Sanjay Joshi",4:null,5:"Deepak Verma",6:"Neha Agarwal, Rohit Sharma",7:"Manish Gupta"})[P]||null;return R?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(V.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-7 gap-4",children:_&&_.slice(0,7).map(P=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-white",children:P.name.split(" ").map(ne=>ne[0]).join("").substring(0,2)})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:P.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:P.role})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Clients Taken"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full ${E[P.id]==="Active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:E[P.id]==="Active"?"":""})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Ye(P.id)}),e.jsx("div",{className:"text-xs text-gray-500",children:Ye(P.id)===1?"Client":"Clients"})]})]})]},P.id))}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Staff Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage team members and their roles"})]}),e.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[e.jsxs("button",{onClick:()=>q(),className:"btn-secondary inline-flex items-center",children:[e.jsx(ls,{className:"h-5 w-5 mr-2"}),"Refresh"]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>{l("ADMIN"),n(!0),setTimeout(()=>T("role","ADMIN"),100)},className:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-4 py-2 rounded-lg inline-flex items-center shadow-md hover:shadow-lg transition-all duration-200",children:[e.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),"Add Admin"]}),e.jsxs("button",{onClick:()=>{l("EMPLOYEE"),n(!0),setTimeout(()=>T("role","EMPLOYEE"),100)},className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-4 py-2 rounded-lg inline-flex items-center shadow-md hover:shadow-lg transition-all duration-200",children:[e.jsx(Pt,{className:"h-5 w-5 mr-2"}),"Add Employee"]})]})]})]}),a&&e.jsx(V.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(V.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>{n(!1),l(null),c(null),k()},className:"text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-100",title:"Back to Staff Management",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:d?`Edit ${d.name}`:o==="ADMIN"?"Add New Admin":o==="EMPLOYEE"?"Add New Employee":"Add New Staff Member"}),e.jsx("p",{className:"text-sm text-gray-500",children:d?`Update ${d.role.toLowerCase()} account details`:o==="ADMIN"?"Create admin account with full access":o==="EMPLOYEE"?"Create employee account with limited access":"Fill details and send verification email"})]})]}),e.jsx("button",{onClick:()=>{n(!1),l(null),c(null),k()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(Be,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:p(z),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),e.jsx("input",{...j("name",{required:"Name is required",minLength:{value:2,message:"Name must be at least 2 characters"}}),type:"text",className:"input-field",placeholder:"Enter full name"}),C.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx("input",{...j("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),type:"email",className:"input-field",placeholder:"Enter email address"}),C.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.email.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Password ",d?"(leave blank to keep current)":"*"]}),e.jsx("input",{...j("password",{required:d?!1:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),type:"password",className:"input-field",placeholder:d?"Leave blank to keep current password":"Enter password"}),C.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.password.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),e.jsxs("select",{...j("role",{required:"Role is required"}),className:`input-field ${o?"bg-gray-100 cursor-not-allowed":""}`,disabled:!!o,children:[e.jsx("option",{value:"",children:"Select Role"}),e.jsx("option",{value:"ADMIN",children:"Admin"}),e.jsx("option",{value:"EMPLOYEE",children:"Employee"})]}),C.role&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:C.role.message})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{n(!1),l(null),c(null),k()},className:"btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:re.isLoading,className:"btn-primary disabled:opacity-50",children:re.isLoading?d?"Updating...":"Creating...":d?"Update Staff":"Create Staff & Send Access Link"})]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"relative",children:[e.jsx(At,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search staff members...",value:i,onChange:P=>r(P.target.value),className:"input-field pl-10"})]})}),e.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:rt&&rt.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 rounded-lg overflow-hidden shadow-sm",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-600 to-purple-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Sl No"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Password"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Client Name"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Available"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Last Login"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:rt.map((P,ne)=>e.jsxs(V.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:ne*.05},className:"hover:bg-blue-50 transition-all duration-200 border-b border-gray-100",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900 text-center",children:ne+1})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-white",children:P.name.split(" ").map(b=>b[0]).join("").substring(0,2)})})}),e.jsx("div",{className:"ml-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.name})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:P.email})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-900 font-mono",children:m[P.id]?"12345678":""}),e.jsx("button",{onClick:()=>ee(P.id),className:"text-gray-400 hover:text-gray-600 transition-colors",title:m[P.id]?"Hide password":"Show password",children:m[P.id]?e.jsx(us,{className:"h-4 w-4"}):e.jsx(Le,{className:"h-4 w-4"})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${We(P.role)}`,children:P.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${P.status==="ACTIVE"?"bg-green-100 text-green-800 border border-green-200":P.status==="PENDING"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-red-100 text-red-800 border border-red-200"}`,children:P.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:P.clientName||Je(P.id)?e.jsxs("div",{className:"max-w-xs",children:[e.jsx("div",{className:"truncate font-medium",title:P.clientName||Je(P.id)||"",children:P.clientName||Je(P.id)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[Ye(P.id)," ",Ye(P.id)===1?"client":"clients"]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-green-600 font-medium",children:"Available for Assignment"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"Ready for New Clients"})]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>xe(P.id),className:`inline-flex items-center px-3 py-1 text-xs font-semibold rounded-full cursor-pointer transition-all duration-200 hover:shadow-md ${E[P.id]==="Active"?"bg-green-100 text-green-800 border border-green-200 hover:bg-green-200":"bg-red-100 text-red-800 border border-red-200 hover:bg-red-200"}`,title:`Click to toggle to ${E[P.id]==="Active"?"Inactive":"Active"}`,children:E[P.id]==="Active"?e.jsx(e.Fragment,{children:" Active"}):e.jsx(e.Fragment,{children:" Inactive"})})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:P.lastLogin?new Date(P.lastLogin).toLocaleDateString():"Never"}),e.jsx("div",{className:"text-xs text-gray-500",children:P.lastLogin?new Date(P.lastLogin).toLocaleTimeString():"No login yet"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>me(P),className:"inline-flex items-center px-2 py-1 border border-gray-300 rounded-md text-gray-700 bg-gray-50 hover:bg-gray-100 transition-colors",title:"View Staff Details",children:e.jsx(Le,{className:"h-4 w-4"})}),P.status==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>ce.mutate(P.id),disabled:ce.isLoading,className:"inline-flex items-center px-2 py-1 border border-green-300 rounded-md text-green-700 bg-green-50 hover:bg-green-100 disabled:opacity-50 transition-colors",title:"Verify & Activate Staff Member",children:e.jsx(ds,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>$.mutate(P.id),disabled:$.isLoading,className:"inline-flex items-center px-2 py-1 border border-orange-300 rounded-md text-orange-700 bg-orange-50 hover:bg-orange-100 disabled:opacity-50 transition-colors",title:"Resend Verification Email",children:e.jsx(ad,{className:"h-4 w-4"})})]}),e.jsx("button",{onClick:()=>{c(P),l(P.role),n(!0),setTimeout(()=>{T("name",P.name),T("email",P.email),T("role",P.role)},100)},className:"inline-flex items-center px-2 py-1 border border-blue-300 rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100 transition-colors",title:"Edit Staff Member",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),P.hasAccess?e.jsx("button",{onClick:()=>se.mutate(P.id),disabled:se.isLoading,className:"inline-flex items-center px-2 py-1 border border-red-300 rounded-md text-red-700 bg-red-50 hover:bg-red-100 disabled:opacity-50 transition-colors",title:"Revoke Access",children:e.jsx(Be,{className:"h-4 w-4"})}):e.jsx("button",{onClick:()=>K.mutate(P.id),disabled:K.isLoading,className:"inline-flex items-center px-2 py-1 border border-green-300 rounded-md text-green-700 bg-green-50 hover:bg-green-100 disabled:opacity-50 transition-colors",title:"Grant Access",children:e.jsx(ds,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>ae(P.id),disabled:J.isLoading,className:"inline-flex items-center px-2 py-1 border border-red-300 rounded-md text-red-700 bg-red-50 hover:bg-red-100 disabled:opacity-50 transition-colors",title:"Delete Staff",children:e.jsx(dt,{className:"h-4 w-4"})})]})})]},P.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Pt,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No staff members found."}),e.jsxs("button",{onClick:()=>n(!0),className:"btn-primary inline-flex items-center mt-4",children:[e.jsx(Pt,{className:"h-5 w-5 mr-2"}),"Invite First Staff Member"]})]})}),_&&_.length>0&&e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Z.totalStaff||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Staff"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:Z.activeStaff||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:Z.adminCount||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Admins"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:Z.employeeCount||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Employees"})]})]}),g&&h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(V.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Staff Member Details"}),e.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Be,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 flex items-center justify-center",children:e.jsx("span",{className:"text-xl font-medium text-white",children:h.name.split(" ").map(P=>P[0]).join("").substring(0,2)})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h4",{className:"text-xl font-semibold text-gray-900",children:h.name}),e.jsx("p",{className:"text-gray-600",children:h.email})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${We(h.role)}`,children:h.role})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${h.status==="ACTIVE"?"bg-green-100 text-green-800 border border-green-200":h.status==="PENDING"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-red-100 text-red-800 border border-red-200"}`,children:h.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-900 font-mono bg-gray-100 px-3 py-1 rounded",children:m[h.id]?"12345678":""}),e.jsx("button",{onClick:()=>ee(h.id),className:"text-gray-400 hover:text-gray-600 transition-colors",title:m[h.id]?"Hide password":"Show password",children:m[h.id]?e.jsx(us,{className:"h-4 w-4"}):e.jsx(Le,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Available"}),e.jsx("button",{onClick:()=>xe(h.id),className:`inline-flex items-center px-3 py-1 text-sm font-semibold rounded-full cursor-pointer transition-all duration-200 hover:shadow-md ${E[h.id]==="Active"?"bg-green-100 text-green-800 border border-green-200 hover:bg-green-200":"bg-red-100 text-red-800 border border-red-200 hover:bg-red-200"}`,title:`Click to toggle to ${E[h.id]==="Active"?"Inactive":"Active"}`,children:E[h.id]==="Active"?e.jsx(e.Fragment,{children:" Active"}):e.jsx(e.Fragment,{children:" Inactive"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Login"}),e.jsx("div",{className:"text-sm text-gray-900",children:h.lastLogin?new Date(h.lastLogin).toLocaleDateString():"Never"}),e.jsx("div",{className:"text-xs text-gray-500",children:h.lastLogin?new Date(h.lastLogin).toLocaleTimeString():"No login yet"})]})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Created:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:new Date(h.createdAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Updated:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:new Date(h.updatedAt).toLocaleDateString()})]})]})})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Close"}),e.jsx("button",{onClick:()=>{c(h),l(h.role),y(!1),n(!0),setTimeout(()=>{T("name",h.name),T("email",h.email),T("role",h.role)},100)},className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md transition-colors",children:"Edit Staff"})]})]})})]})}const lm=()=>{const[t,s]=u.useState("desktop");return u.useEffect(()=>{const a=()=>{const n=window.innerWidth;n<768?s("mobile"):n<1024?s("tablet"):s("desktop")};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),t};function cm(){const t=lm(),[s,a]=u.useState(""),[n,i]=u.useState(!1),[r,o]=u.useState({isOpen:!1,transaction:null}),l=Ce(),d=ca(),c=fe(async N=>{console.log(" Executing DELETE request for transaction ID:",N);const j=await U.delete(`/api/transactions/${N}`);return console.log(" DELETE response received:",j.data),j},{onSuccess:(N,j)=>{console.log(" Delete mutation successful:",N.data),F.success("Transaction deleted successfully!"),l.setQueryData(["transactions",s],p=>p&&p.filter(k=>k.id!==j)),setTimeout(()=>{l.invalidateQueries(["transactions"])},100)},onError:N=>{var j,p;console.error(" Delete mutation failed:",N),F.error(((p=(j=N.response)==null?void 0:j.data)==null?void 0:p.message)||"Failed to delete transaction")}}),m=(N,j)=>{window.confirm(`Are you sure you want to delete the transaction "${j}"? This action cannot be undone.`)&&(console.log(" Attempting to delete transaction ID:",N),c.mutate(N))},f=N=>{console.log(" Viewing transaction:",N.name),o({isOpen:!0,transaction:N})},h=()=>{o({isOpen:!1,transaction:null})},{data:v,isLoading:g,refetch:y}=ue(["transactions",s],async()=>{const N=new URLSearchParams;s&&N.append("name",s);const j=await U.get(`/api/transactions?${N}`);return console.log("Transaction data received:",j.data),j.data},{staleTime:2*60*1e3,keepPreviousData:!0}),x=N=>new Date(N).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),E={total:(v==null?void 0:v.length)||0,completed:(v==null?void 0:v.filter(N=>N.status==="COMPLETED").length)||0,pending:(v==null?void 0:v.filter(N=>N.status==="PENDING").length)||0,failed:(v==null?void 0:v.filter(N=>N.status==="FAILED").length)||0,totalAmount:(v==null?void 0:v.reduce((N,j)=>N+(j.amount||0),0))||0,completedAmount:(v==null?void 0:v.filter(N=>N.status==="COMPLETED").reduce((N,j)=>N+(j.amount||0),0))||0};u.useEffect(()=>{var N,j,p;(N=d.state)!=null&&N.fromAdd&&((j=d.state)!=null&&j.transactionName)&&(F.success(` ${d.state.transactionName} transaction has been successfully added!`),window.history.replaceState({},document.title)),(p=d.state)!=null&&p.fromEdit&&(console.log("Returning from edit page, forcing refresh...",d.state),i(!0),l.clear(),l.invalidateQueries(["transactions"]),setTimeout(()=>{l.refetchQueries(["transactions"]),y().finally(()=>{i(!1)})},50))},[d.state,l,y,i]);const w=t==="mobile";return g||n?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:n?"Refreshing data...":"Loading..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Transaction Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor and manage all financial transactions"})]}),e.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[e.jsx("button",{onClick:()=>{console.log(" Manual refresh triggered"),y(),F.success("Refreshing transaction data...")},className:"btn-outline inline-flex items-center",children:" Refresh"}),e.jsxs(Ee,{to:"/transactions/new",className:"btn-primary inline-flex items-center",children:[e.jsx(xt,{className:"h-5 w-5 mr-2"}),"New Transaction"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Total Transactions"}),e.jsx("p",{className:"text-3xl font-bold",children:E.total})]}),e.jsx("div",{className:"bg-blue-400 bg-opacity-30 rounded-lg p-3",children:e.jsx(cs,{className:"h-8 w-8"})})]})}),e.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Completed"}),e.jsx("p",{className:"text-3xl font-bold",children:E.completed}),e.jsxs("p",{className:"text-green-100 text-xs mt-1",children:["",E.completedAmount.toLocaleString()]})]}),e.jsx("div",{className:"bg-green-400 bg-opacity-30 rounded-lg p-3",children:e.jsx(ke,{className:"h-8 w-8"})})]})}),e.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-100 text-sm font-medium",children:"Pending"}),e.jsx("p",{className:"text-3xl font-bold",children:E.pending})]}),e.jsx("div",{className:"bg-yellow-400 bg-opacity-30 rounded-lg p-3",children:e.jsx(Gt,{className:"h-8 w-8"})})]})}),e.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-bold",children:["",E.totalAmount.toLocaleString()]}),E.failed>0&&e.jsxs("p",{className:"text-purple-100 text-xs mt-1",children:[E.failed," failed"]})]}),e.jsx("div",{className:"bg-purple-400 bg-opacity-30 rounded-lg p-3",children:e.jsx("span",{className:"text-2xl font-bold",children:""})})]})})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(At,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name...",value:s,onChange:N=>a(N.target.value),className:"input-field pl-10"})]}),e.jsx("button",{onClick:()=>{a(""),y()},className:"btn-secondary",children:"Clear"})]})}),e.jsx(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:v&&v.length>0?e.jsx("div",{className:`${w?"space-y-4":"overflow-x-auto"}`,children:w?e.jsx("div",{className:"space-y-4",children:v.map(N=>e.jsxs(V.div,{whileHover:{scale:1.02},className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:N.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${N.status==="COMPLETED"?"bg-green-100 text-green-800":N.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:N.status})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[" ",new Date(N.date).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[" ",x(N.date)]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:[" ",N.transactionId]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[" ",N.amount.toLocaleString()]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>f(N),className:"text-blue-600 hover:text-blue-800 text-sm font-medium inline-flex items-center",children:[e.jsx(Le,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(Ee,{to:`/transactions/${N.id}/edit`,className:"text-primary-600 hover:text-primary-800 text-sm font-medium inline-flex items-center",children:[e.jsx(at,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs("button",{onClick:()=>m(N.id,N.name),disabled:c.isLoading,className:"text-red-600 hover:text-red-800 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center",children:[e.jsx(dt,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]},N.id))}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[e.jsx("thead",{className:"bg-indigo-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-16 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"S.No"}),e.jsx("th",{className:"w-48 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Time"}),e.jsx("th",{className:"w-40 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Transaction ID"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"w-24 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map((N,j)=>e.jsxs(V.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:j*.05},className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"w-16 px-4 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:j+1}),e.jsx("td",{className:"w-48 px-4 py-4 text-sm font-medium text-gray-900",children:e.jsx("div",{className:"truncate",title:N.name,children:N.name})}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(N.date).toLocaleDateString()}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:x(N.date)}),e.jsx("td",{className:"w-40 px-4 py-4 text-sm text-gray-500",children:e.jsx("div",{className:"truncate",title:N.transactionId,children:N.transactionId})}),e.jsxs("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500 font-semibold",children:["",N.amount.toLocaleString()]}),e.jsx("td",{className:"w-24 px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${N.status==="COMPLETED"?"bg-green-100 text-green-800":N.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:N.status})}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>f(N),className:"text-blue-600 hover:text-blue-900 inline-flex items-center",title:"View Transaction Details",children:e.jsx(Le,{className:"h-4 w-4"})}),e.jsx(Ee,{to:`/transactions/${N.id}/edit`,className:"text-primary-600 hover:text-primary-900 inline-flex items-center",title:"Edit Transaction",children:e.jsx(at,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>m(N.id,N.name),disabled:c.isLoading,className:"text-red-600 hover:text-red-900 disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center",title:"Delete Transaction",children:e.jsx(dt,{className:"h-4 w-4"})})]})})]},N.id))})]})})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"No transactions found."}),e.jsxs(Ee,{to:"/transactions/new",className:"btn-primary inline-flex items-center mt-4",children:[e.jsx(xt,{className:"h-5 w-5 mr-2"}),"Create First Transaction"]})]})}),r.isOpen&&r.transaction&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Transaction Details - ",r.transaction.name]}),e.jsx("button",{onClick:h,className:"text-gray-400 hover:text-gray-600 focus:outline-none",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"mt-4 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.transaction.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(r.transaction.date).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Time"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:x(r.transaction.date)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Transaction ID"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:r.transaction.transactionId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Amount"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900 font-semibold",children:["",r.transaction.amount.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${r.transaction.status==="COMPLETED"?"bg-green-100 text-green-800":r.transaction.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:r.transaction.status})]})]})}),e.jsxs("div",{className:"flex items-center justify-end pt-6 border-t border-gray-200 space-x-3",children:[e.jsx("button",{onClick:h,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Close"}),e.jsxs(Ee,{to:`/transactions/${r.transaction.id}/edit`,onClick:h,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 inline-flex items-center",children:[e.jsx(at,{className:"h-4 w-4 mr-2"}),"Edit Transaction"]})]})]})})})]})}function un(){const t=He(),{id:s}=gs(),a=!!s,n=Ce(),{register:i,handleSubmit:r,reset:o,formState:{errors:l}}=Ct(),{data:d}=ue(["transaction",s],async()=>s?(await U.get(`/api/transactions/${s}`)).data:null,{enabled:a}),c=fe(async f=>{if(console.log("Submitting transaction form data:",f),a){const h=await U.patch(`/api/transactions/${s}`,f);return console.log("PATCH response:",h.data),h}else{const h=await U.post("/api/transactions",f);return console.log("POST response:",h.data),h}},{onSuccess:async f=>{F.success(a?"Transaction updated successfully!":"Transaction created successfully!"),console.log("Transaction update/create successful:",f.data),n.clear(),n.invalidateQueries(["transactions"]),n.invalidateQueries(["transaction"]),await n.refetchQueries(["transactions"]),setTimeout(()=>{var h;t("/transactions",{state:{fromAdd:!a,fromEdit:a,transactionName:((h=f.data.transaction)==null?void 0:h.name)||f.data.name,timestamp:Date.now()}})},100)},onError:f=>{var h,v;F.error(((v=(h=f.response)==null?void 0:h.data)==null?void 0:v.message)||"Something went wrong")}});u.useEffect(()=>{if(d){const f=d.date?new Date(d.date):new Date;o({name:d.name,date:f.toISOString().split("T")[0],time:f.toTimeString().split(" ")[0].substring(0,5),transactionId:d.transactionId,amount:d.amount,status:d.status})}},[d,o]);const m=f=>{const h=`${f.date}T${f.time}:00.000Z`,v={...f,date:h};c.mutate(v)};return e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{type:"button",onClick:()=>t("/transactions"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors",children:[e.jsx(Et,{className:"h-4 w-4 mr-2"}),"Back to Transactions"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a?"Edit Transaction":"New Transaction"}),e.jsx("p",{className:"text-gray-600",children:a?"Update transaction information":"Create a new transaction record"})]})]})}),e.jsxs("form",{onSubmit:r(m),className:"card space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Transaction Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),e.jsx("input",{...i("name",{required:"Name is required"}),type:"text",className:"input-field",placeholder:"Enter transaction name"}),l.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),e.jsx("input",{...i("date",{required:"Date is required"}),type:"date",className:"input-field"}),l.date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.date.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time *"}),e.jsx("input",{...i("time",{required:"Time is required"}),type:"time",className:"input-field"}),l.time&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.time.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transaction ID *"}),e.jsx("input",{...i("transactionId",{required:"Transaction ID is required"}),type:"text",className:"input-field",placeholder:"Enter transaction ID"}),l.transactionId&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.transactionId.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount *"}),e.jsx("input",{...i("amount",{required:"Amount is required",min:{value:.01,message:"Amount must be greater than 0"}}),type:"number",step:"0.01",className:"input-field",placeholder:"Enter amount"}),l.amount&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.amount.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status *"}),e.jsxs("select",{...i("status",{required:"Status is required"}),className:"input-field",children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"COMPLETED",children:"Completed"}),e.jsx("option",{value:"FAILED",children:"Failed"})]}),l.status&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.status.message})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>t("/transactions"),className:"btn-secondary",children:"Cancel"}),e.jsx(V.button,{type:"submit",disabled:c.isLoading,className:"btn-primary disabled:opacity-50",whileHover:{scale:1.02},whileTap:{scale:.98},children:c.isLoading?a?"Updating...":"Creating...":a?"Update Transaction":"Create Transaction"})]})]})]})})}const dm=()=>{const t=He(),{refreshAfterEnquiry:s}=Li(),[a,n]=u.useState({businessName:"",ownerName:"",email:"",phone:"",loanAmount:"",loanPurpose:"",annualRevenue:""}),[i,r]=u.useState(!1),[o,l]=u.useState({isChecking:!1,isDuplicate:!1});u.useEffect(()=>{if(a.phone&&a.phone.length===10){const f=setTimeout(async()=>{l({isChecking:!0,isDuplicate:!1});try{const g=((await U.get("/api/enquiries")).data||[]).find(y=>y.mobile===a.phone);if(g){const y=g.name||g.businessName||"Unknown Client";l({isChecking:!1,isDuplicate:!0,existingClient:y})}else l({isChecking:!1,isDuplicate:!1})}catch(h){console.error("Error checking phone number:",h),l({isChecking:!1,isDuplicate:!1})}},1e3);return()=>clearTimeout(f)}else l({isChecking:!1,isDuplicate:!1})},[a.phone]);const d=f=>{const{name:h,value:v}=f.target;if(h==="phone"){const g=v.replace(/\D/g,"");g.length<=10&&n(y=>({...y,[h]:g}));return}n(g=>({...g,[h]:v}))},c=async()=>{try{console.log(" Checking for duplicate phone number and name...");const h=(await U.get("/api/enquiries")).data||[],v=h.find(y=>y.mobile===a.phone);if(v){const y=v.name||v.businessName||"Unknown Client";return pe.error(`Phone number ${a.phone} already exists for client: ${y}`),!1}const g=h.find(y=>y.name&&y.name.toLowerCase()===a.ownerName.toLowerCase()||y.businessName&&y.businessName.toLowerCase()===a.businessName.toLowerCase());if(g){const y=g.name||g.businessName,x=g.mobile;return pe.error(`Client "${y}" already exists with phone number: ${x}`),!1}return!0}catch(f){return console.error(" Error checking for duplicates:",f),!0}},m=async f=>{var v,g,y,x,E,w,N;if(f.preventDefault(),!a.businessName||!a.ownerName||!a.phone){pe.error("Please fill in all required fields");return}if(a.phone.length!==10){pe.error("Phone number must be exactly 10 digits");return}if(r(!0),!await c()){r(!1);return}try{console.log(" Submitting loan enquiry:",a);const j=await U.post("/api/enquiries",{name:a.ownerName,mobile:a.phone,email:a.email,businessName:a.businessName,businessType:a.loanPurpose||"General Business",loanAmount:a.loanAmount?parseInt(a.loanAmount.replace(/[^0-9]/g,"")):null,source:"LANDING_PAGE",interestStatus:"INTERESTED",additionalData:{annualRevenue:a.annualRevenue,loanPurpose:a.loanPurpose}});console.log(" Enquiry submitted successfully:",j.data),pe.success("Application submitted successfully! Our specialists will reach out within 24 hours."),await s(),n({businessName:"",ownerName:"",email:"",phone:"",loanAmount:"",loanPurpose:"",annualRevenue:""}),setTimeout(()=>{t("/dashboard")},2e3)}catch(j){console.error(" Error submitting application:",j),console.error(" Error details:",{status:(v=j.response)==null?void 0:v.status,statusText:(g=j.response)==null?void 0:g.statusText,data:(y=j.response)==null?void 0:y.data,message:j.message});let p="Failed to submit application. Please try again.";((x=j.response)==null?void 0:x.status)===404?p="Service not available. Please try again later.":((E=j.response)==null?void 0:E.status)===500?p="Server error. Please try again later.":(N=(w=j.response)==null?void 0:w.data)!=null&&N.message?p=j.response.data.message:j.message.includes("Network Error")&&(p="Network error. Please check your connection and try again."),pe.error(p)}finally{r(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-800",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center min-h-screen",children:[e.jsxs("div",{className:"text-white space-y-8",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-teal-400 to-cyan-400 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-slate-900 font-bold text-sm",children:""})}),e.jsx("span",{className:"text-xl font-bold",children:"FinGrowth"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h1",{className:"text-5xl lg:text-6xl font-bold leading-tight",children:["Power Your Business",e.jsx("br",{}),"with",e.jsx("br",{}),e.jsxs("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-teal-400 to-cyan-400",children:["Tailored Financial",e.jsx("br",{}),"Solutions"]})]}),e.jsx("p",{className:"text-xl text-slate-300 leading-relaxed max-w-lg",children:"Get the capital you need with same-day approvals and competitive rates. Designed for ambitious businesses looking to expand, upgrade, or optimize their operations."})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-4 border border-slate-700",children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:"24h"}),e.jsx("div",{className:"text-sm text-slate-400",children:"Fast Track Approval"})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-4 border border-slate-700",children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:"8%*"}),e.jsx("div",{className:"text-sm text-slate-400",children:"Competitive Rates"})]}),e.jsxs("div",{className:"bg-slate-800/50 backdrop-blur-sm rounded-xl p-4 border border-slate-700",children:[e.jsx("div",{className:"text-3xl font-bold text-white",children:"5 Crore"}),e.jsx("div",{className:"text-sm text-slate-400",children:"Maximum Funding"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ke,{className:"h-5 w-5 text-teal-400"}),e.jsx("span",{className:"text-slate-300",children:"Secure & Encrypted"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(kt,{className:"h-5 w-5 text-teal-400"}),e.jsx("span",{className:"text-slate-300",children:"No Hidden Fees"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(ke,{className:"h-5 w-5 text-teal-400"}),e.jsx("span",{className:"text-slate-300",children:"Pre-approved Offers"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(kt,{className:"h-5 w-5 text-teal-400"}),e.jsx("span",{className:"text-slate-300",children:"Dedicated Manager"})]})]})]}),e.jsx("div",{className:"bg-slate-800/40 backdrop-blur-lg rounded-2xl p-8 border border-slate-700 shadow-2xl",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Business Loan Enquiry"}),e.jsx("p",{className:"text-slate-400",children:"Submit your details. Our specialists will reach out within 24 hours."})]}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Business Name"}),e.jsx("input",{type:"text",name:"businessName",value:a.businessName,onChange:d,placeholder:"Your Company Ltd.",className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-teal-400 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Owner Name"}),e.jsx("input",{type:"text",name:"ownerName",value:a.ownerName,onChange:d,placeholder:"John Doe",className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-teal-400 focus:border-transparent",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",value:a.email,onChange:d,placeholder:"john@company.com",className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-teal-400 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:d,placeholder:"+91 9787373721",maxLength:10,className:`w-full px-4 py-3 bg-slate-700/50 border rounded-lg text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:border-transparent ${o.isDuplicate?"border-red-500 focus:ring-red-400":"border-slate-600 focus:ring-teal-400"}`,required:!0}),o.isChecking&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-teal-400"})})]}),o.isDuplicate&&e.jsxs("p",{className:"mt-2 text-sm text-red-400 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Phone number already exists for client: ",o.existingClient]}),!o.isDuplicate&&!o.isChecking&&a.phone.length===10&&e.jsxs("p",{className:"mt-2 text-sm text-green-400 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Phone number is available"]}),a.phone.length>0&&a.phone.length<10&&e.jsxs("p",{className:"mt-2 text-sm text-yellow-400 flex items-center",children:[e.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Please enter exactly 10 digits (",a.phone.length,"/10)"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Loan Amount"}),e.jsxs("select",{name:"loanAmount",value:a.loanAmount,onChange:d,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-teal-400 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select amount"}),e.jsx("option",{value:"500000",children:"5 Lakh"}),e.jsx("option",{value:"1000000",children:"10 Lakh"}),e.jsx("option",{value:"2500000",children:"25 Lakh"}),e.jsx("option",{value:"5000000",children:"50 Lakh"}),e.jsx("option",{value:"10000000",children:"1 Crore"}),e.jsx("option",{value:"50000000",children:"5 Crore"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Loan Purpose"}),e.jsxs("select",{name:"loanPurpose",value:a.loanPurpose,onChange:d,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-teal-400 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select purpose"}),e.jsx("option",{value:"Working Capital",children:"Working Capital"}),e.jsx("option",{value:"Equipment Purchase",children:"Equipment Purchase"}),e.jsx("option",{value:"Business Expansion",children:"Business Expansion"}),e.jsx("option",{value:"Inventory",children:"Inventory"}),e.jsx("option",{value:"Real Estate",children:"Real Estate"}),e.jsx("option",{value:"Other",children:"Other"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Annual Revenue"}),e.jsxs("select",{name:"annualRevenue",value:a.annualRevenue,onChange:d,className:"w-full px-4 py-3 bg-slate-700/50 border border-slate-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-teal-400 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select revenue range"}),e.jsx("option",{value:"Below 10 Lakh",children:"Below 10 Lakh"}),e.jsx("option",{value:"10-25 Lakh",children:"10-25 Lakh"}),e.jsx("option",{value:"25-50 Lakh",children:"25-50 Lakh"}),e.jsx("option",{value:"50 Lakh - 1 Crore",children:"50 Lakh - 1 Crore"}),e.jsx("option",{value:"1-5 Crore",children:"1-5 Crore"}),e.jsx("option",{value:"Above 5 Crore",children:"Above 5 Crore"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Business Documents (Optional)"}),e.jsxs("div",{className:"border-2 border-dashed border-slate-600 rounded-lg p-6 text-center hover:border-teal-400 transition-colors cursor-pointer",children:[e.jsx(gi,{className:"h-8 w-8 text-slate-400 mx-auto mb-2"}),e.jsx("span",{className:"text-slate-400",children:"Upload financial documents"})]})]}),e.jsx("button",{type:"submit",disabled:i||o.isDuplicate,className:`w-full font-semibold py-4 px-6 rounded-lg transition-all duration-200 flex items-center justify-center space-x-2 disabled:opacity-50 disabled:cursor-not-allowed ${o.isDuplicate?"bg-gray-500 text-white cursor-not-allowed":"bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white"}`,children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Submitting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Submit Application"}),e.jsx(tc,{className:"h-5 w-5"})]})}),e.jsx("p",{className:"text-xs text-slate-400 text-center",children:"By submitting this form, you agree to our terms and privacy policy."})]})]})})]})})})};class um{constructor(s){Qt(this,"results",[]);Qt(this,"queryClient");this.queryClient=s}async testAllEndpoints(){console.log(" Starting comprehensive auto-refresh test...");const s=[{page:"Dashboard",endpoint:"/api/enquiries",queryKey:"dashboard-data"},{page:"Enquiry List",endpoint:"/api/enquiries",queryKey:"enquiries"},{page:"Document Verification",endpoint:"/api/documents",queryKey:"documents-verification"},{page:"Document Upload",endpoint:"/api/documents",queryKey:"documents"},{page:"Shortlist",endpoint:"/api/shortlist",queryKey:"shortlists"},{page:"Payment Gateway",endpoint:"/api/cashfree",queryKey:"cashfree-applications"},{page:"Staff Management",endpoint:"/api/staff",queryKey:"staff"}];for(const a of s)await this.testEndpoint(a.page,a.endpoint,a.queryKey);return this.results}async testEndpoint(s,a,n){try{console.log(` Testing ${s} - ${a}`);const i=await fetch(a),r=await i.json();if(i.ok){const o=this.queryClient.getQueryData(n);this.results.push({page:s,endpoint:a,status:"success",message:` API working, data count: ${Array.isArray(r)?r.length:"N/A"}${o?", cached data exists":", no cached data"}`,timestamp:new Date().toISOString(),dataCount:Array.isArray(r)?r.length:void 0}),console.log(` ${s} test passed`)}else throw new Error(`HTTP ${i.status}: ${i.statusText}`)}catch(i){this.results.push({page:s,endpoint:a,status:"error",message:` ${i.message}`,timestamp:new Date().toISOString()}),console.error(` ${s} test failed:`,i.message)}}async testCacheInvalidation(){console.log(" Testing cache invalidation...");const s=["dashboard-data","enquiries","documents","documents-verification","shortlists","cashfree-applications","staff"];for(const a of s)try{const n=this.queryClient.getQueryData(a);await this.queryClient.invalidateQueries(a),await new Promise(r=>setTimeout(r,1e3));const i=this.queryClient.getQueryData(a);this.results.push({page:`Cache Test - ${a}`,endpoint:"cache-invalidation",status:"success",message:` Cache invalidated successfully. Before: ${n?"exists":"empty"}, After: ${i?"exists":"empty"}`,timestamp:new Date().toISOString()}),console.log(` Cache invalidation test passed for ${a}`)}catch(n){this.results.push({page:`Cache Test - ${a}`,endpoint:"cache-invalidation",status:"error",message:` Cache invalidation failed: ${n.message}`,timestamp:new Date().toISOString()}),console.error(` Cache invalidation test failed for ${a}:`,n.message)}}async testAutoRefreshIntervals(){console.log(" Testing auto-refresh intervals...");const s=35e3,a=Date.now(),n={"dashboard-data":this.queryClient.getQueryData("dashboard-data"),enquiries:this.queryClient.getQueryData("enquiries"),shortlists:this.queryClient.getQueryData("shortlists")};return new Promise(i=>{const r=setInterval(()=>{if(Date.now()-a>=s){clearInterval(r);const l={"dashboard-data":this.queryClient.getQueryData("dashboard-data"),enquiries:this.queryClient.getQueryData("enquiries"),shortlists:this.queryClient.getQueryData("shortlists")};let d=!1;for(const[c,m]of Object.entries(n)){const f=l[c];if(m!==f){d=!0;break}}this.results.push({page:"Auto-refresh Monitor",endpoint:"interval-refresh",status:d?"success":"error",message:d?` Auto-refresh detected within ${s/1e3}s`:` No auto-refresh detected within ${s/1e3}s`,timestamp:new Date().toISOString()}),console.log(d?" Auto-refresh test passed":" Auto-refresh test failed - no refresh detected"),i()}},5e3)})}generateReport(){const s=this.results.filter(i=>i.status==="success").length,a=this.results.filter(i=>i.status==="error").length;let n=`
 AUTO-REFRESH FUNCTIONALITY TEST REPORT
==========================================

 Summary:
- Total Tests: ${this.results.length}
- Passed: ${s} 
- Failed: ${a} 
- Success Rate: ${(s/this.results.length*100).toFixed(1)}%

 Detailed Results:
`;return this.results.forEach((i,r)=>{n+=`
${r+1}. ${i.page}
   Endpoint: ${i.endpoint}
   Status: ${i.status==="success"?" PASS":" FAIL"}
   Message: ${i.message}
   Time: ${new Date(i.timestamp).toLocaleTimeString()}
   ${i.dataCount!==void 0?`Data Count: ${i.dataCount}`:""}
`}),n+=`
==========================================
Test completed at: ${new Date().toLocaleString()}
`,n}clearResults(){this.results=[]}}const mm=()=>{const[t,s]=u.useState(!1),[a,n]=u.useState([]),[i,r]=u.useState(""),o=Ce(),l=async()=>{s(!0),n([]),r("Initializing tests...");try{const h=new um(o);r("Testing API endpoints..."),await h.testAllEndpoints(),r("Testing cache invalidation..."),await h.testCacheInvalidation();const v=h.results;n(v);const g=h.generateReport();console.log(g);const y=v.filter(E=>E.status==="success").length,x=v.length;F.success(`Tests completed! ${y}/${x} passed`),r(`Completed: ${y}/${x} tests passed`)}catch(h){console.error("Test execution failed:",h),F.error(`Test execution failed: ${h.message}`),r(`Failed: ${h.message}`)}finally{s(!1)}},d=()=>{n([]),r("")},c=()=>{r("Manually refreshing all queries..."),["dashboard-data","enquiries","documents","documents-verification","shortlists","cashfree-applications","staff"].forEach(v=>{o.invalidateQueries(v)}),F.success("Manual refresh triggered for all queries"),r("Manual refresh completed")},m=h=>h==="success"?"":"",f=h=>h==="success"?"text-green-600":"text-red-600";return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Auto-Refresh Functionality Test"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:l,disabled:t,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:t?e.jsxs(e.Fragment,{children:[e.jsx(Kd,{className:"h-4 w-4 mr-2"}),"Running..."]}):e.jsxs(e.Fragment,{children:[e.jsx($d,{className:"h-4 w-4 mr-2"}),"Run Tests"]})}),e.jsxs("button",{onClick:c,disabled:t,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(ls,{className:"h-4 w-4 mr-2"}),"Manual Refresh"]}),e.jsx("button",{onClick:d,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Clear Results"})]})]}),i&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:e.jsx("p",{className:"text-sm text-blue-800",children:i})}),a.length>0&&e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Test Results"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map((h,v)=>e.jsxs(V.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:v*.1},className:`p-4 border rounded-lg ${h.status==="success"?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:h.page}),e.jsx("span",{className:"text-lg",children:m(h.status)})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:h.endpoint})}),e.jsx("p",{className:`text-sm ${f(h.status)} mb-2`,children:h.message}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[e.jsx("span",{children:new Date(h.timestamp).toLocaleTimeString()}),h.dataCount!==void 0&&e.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded",children:[h.dataCount," items"]})]})]},v))}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Summary"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Tests"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.filter(h=>h.status==="success").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Passed"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:a.filter(h=>h.status==="error").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Failed"})]})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"Testing Instructions"}),e.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[e.jsx("li",{children:' Click "Run Tests" to verify all API endpoints and cache functionality'}),e.jsx("li",{children:' Use "Manual Refresh" to trigger immediate data refresh across all pages'}),e.jsx("li",{children:" Check browser console for detailed logs and reports"}),e.jsx("li",{children:" Navigate between pages to verify data persistence"}),e.jsx("li",{children:" Refresh the browser page to test data persistence after reload"})]})]})]})},hm=()=>{const[t,s]=u.useState([]),[a,n]=u.useState(!0),[i,r]=u.useState(0),o=Ce(),l=[{key:"enquiries",endpoint:"/api/enquiries",label:"Enquiries"},{key:"shortlists",endpoint:"/api/shortlist",label:"Shortlist"},{key:"documents",endpoint:"/api/documents",label:"Documents"},{key:"staff",endpoint:"/api/staff",label:"Staff"},{key:"cashfree",endpoint:"/api/cashfree",label:"Payment Gateway"}],d=async x=>{try{const w=(await U.get(x)).data;return{endpoint:x,status:"success",data:w,lastUpdated:new Date().toLocaleTimeString(),dataCount:Array.isArray(w)?w.length:Array.isArray(w==null?void 0:w.staff)?w.staff.length:void 0}}catch(E){return{endpoint:x,status:"error",error:E.message,lastUpdated:new Date().toLocaleTimeString()}}},c=async()=>{s(w=>w.map(N=>({...N,status:"loading"})));const x=await Promise.all(l.map(({endpoint:w})=>d(w)));s(x),r(w=>w+1);const E=x.filter(w=>w.status==="success").length;F.success(`Test completed: ${E}/${x.length} endpoints working`)};u.useEffect(()=>{c()},[]),u.useEffect(()=>{if(!a)return;const x=setInterval(()=>{console.log(" Auto-refresh triggered by test page"),c()},3e4);return()=>clearInterval(x)},[a]);const{data:m}=ue("enquiries",()=>U.get("/api/enquiries").then(x=>x.data),{staleTime:3*60*1e3,keepPreviousData:!0}),{data:f}=ue("shortlists",()=>U.get("/api/shortlist").then(x=>x.data),{staleTime:2*60*1e3,keepPreviousData:!0}),{data:h}=ue("documents",()=>U.get("/api/documents").then(x=>x.data),{staleTime:8*60*1e3,keepPreviousData:!0}),v=x=>{switch(x){case"loading":return e.jsx(Gt,{className:"h-5 w-5 text-yellow-500 animate-spin"});case"success":return e.jsx(ke,{className:"h-5 w-5 text-green-500"});case"error":return e.jsx(gt,{className:"h-5 w-5 text-red-500"})}},g=x=>{switch(x){case"loading":return"border-yellow-200 bg-yellow-50";case"success":return"border-green-200 bg-green-50";case"error":return"border-red-200 bg-red-50"}},y=()=>{["enquiries","shortlists","documents","staff","cashfree","dashboard-data"].forEach(E=>{o.invalidateQueries(E)}),F.success("All caches invalidated - data will refresh automatically")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Data Persistence & Auto-Refresh Test"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a,onChange:x=>n(x.target.checked),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Auto-refresh (30s)"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Refreshes: ",i]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:c,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx(ls,{className:"h-4 w-4 mr-2"}),"Test All Endpoints"]}),e.jsxs("button",{onClick:y,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(ls,{className:"h-4 w-4 mr-2"}),"Invalidate Caches"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"API Endpoint Status"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((x,E)=>{var w;return e.jsxs(V.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:E*.1},className:`p-4 border rounded-lg ${g(x.status)}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:((w=l.find(N=>N.endpoint===x.endpoint))==null?void 0:w.label)||x.endpoint}),v(x.status)]}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:x.endpoint})}),x.status==="success"&&e.jsxs("div",{className:"space-y-1",children:[x.dataCount!==void 0&&e.jsxs("p",{className:"text-sm text-green-700",children:[" ",x.dataCount," items found"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Last updated: ",x.lastUpdated]})]}),x.status==="error"&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm text-red-700",children:[" ",x.error]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Failed at: ",x.lastUpdated]})]}),x.status==="loading"&&e.jsx("p",{className:"text-sm text-yellow-700",children:" Testing..."})]},x.endpoint)})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"React Query Cache Status"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Enquiries Cache"}),e.jsx("p",{className:"text-sm text-gray-600",children:m?` ${Array.isArray(m)?m.length:"N/A"} items cached`:" No cache"})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Shortlist Cache"}),e.jsx("p",{className:"text-sm text-gray-600",children:f?` ${Array.isArray(f)?f.length:"N/A"} items cached`:" No cache"})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Documents Cache"}),e.jsx("p",{className:"text-sm text-gray-600",children:h?` ${Array.isArray(h)?h.length:"N/A"} items cached`:" No cache"})]})]})]}),e.jsx(mm,{}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Testing Instructions"}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Auto-refresh:"})," This page automatically tests endpoints every 30 seconds when enabled"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Manual test:"}),' Click "Test All Endpoints" to immediately check all API endpoints']}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Cache test:"}),' Click "Invalidate Caches" to test cache refresh functionality']}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Navigation test:"})," Navigate to other pages and return - data should persist"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Refresh test:"})," Refresh the browser page - data should remain visible"]}),e.jsxs("p",{children:[" ",e.jsx("strong",{children:"Console logs:"})," Check browser console for detailed refresh activity"]})]})]})]})};function fm(){const[t,s]=u.useState("admin@gmail.com"),[a,n]=u.useState("admin123"),[i,r]=u.useState(!1),{login:o,isAuthenticated:l,user:d}=Fe(),c=He(),m=async()=>{r(!0);try{console.log(" Testing login..."),await o({email:t,password:a}),console.log(" Login completed, auth state:",l),setTimeout(()=>{console.log(" Attempting manual navigation..."),c("/dashboard")},1e3)}catch(h){console.error(" Login test failed:",h)}finally{r(!1)}},f=()=>{console.log(" Testing direct navigation..."),c("/dashboard")};return e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Login Test Page"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email:"}),e.jsx("input",{type:"email",value:t,onChange:h=>s(h.target.value),className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password:"}),e.jsx("input",{type:"password",value:a,onChange:h=>n(h.target.value),className:"w-full p-2 border rounded"})]}),e.jsx("button",{onClick:m,disabled:i,className:"w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700 disabled:opacity-50",children:i?"Testing Login...":"Test Login"}),e.jsx("button",{onClick:f,className:"w-full bg-green-600 text-white p-2 rounded hover:bg-green-700",children:"Test Direct Navigation"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Current State:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Authenticated:"})," ",l?"Yes":"No"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User:"})," ",d?`${d.name} (${d.role})`:"None"]})]})]})})}function pm(){const{isAuthenticated:t,user:s}=Fe(),{canManageStaff:a}=ga();return e.jsxs(Ea,{children:[e.jsx(ge,{path:"/apply",element:e.jsx(dm,{})}),e.jsx(ge,{path:"/login",element:e.jsx(Hu,{})}),e.jsx(ge,{path:"/login-test",element:e.jsx(fm,{})}),t?e.jsx(ge,{path:"/*",element:e.jsx(wu,{children:e.jsxs(Ea,{children:[e.jsx(ge,{path:"/dashboard",element:e.jsx(zu,{})}),e.jsx(ge,{path:"/enquiries",element:e.jsx(Ku,{})}),e.jsx(ge,{path:"/enquiries/new",element:e.jsx(Hs,{})}),e.jsx(ge,{path:"/enquiries/:id",element:e.jsx(Hs,{})}),e.jsx(ge,{path:"/enquiries/:id/edit",element:e.jsx(Hs,{})}),e.jsx(ge,{path:"/documents",element:e.jsx(em,{})}),e.jsx(ge,{path:"/documents/verification",element:e.jsx(tm,{})}),e.jsx(ge,{path:"/shortlist",element:e.jsx(am,{})}),e.jsx(ge,{path:"/shortlist/new",element:e.jsx(dn,{})}),e.jsx(ge,{path:"/shortlist/:id/edit",element:e.jsx(dn,{})}),e.jsx(ge,{path:"/payment-gateway",element:e.jsx(im,{})}),e.jsx(ge,{path:"/payment-gateway/apply/:id",element:e.jsx(rm,{})}),a&&e.jsx(ge,{path:"/staff",element:e.jsx(om,{})}),(s==null?void 0:s.role)==="ADMIN"&&e.jsxs(e.Fragment,{children:[e.jsx(ge,{path:"/transactions",element:e.jsx(cm,{})}),e.jsx(ge,{path:"/transactions/new",element:e.jsx(un,{})}),e.jsx(ge,{path:"/transactions/:id/edit",element:e.jsx(un,{})}),e.jsx(ge,{path:"/test-refresh",element:e.jsx(hm,{})})]}),e.jsx(ge,{path:"/",element:e.jsx(Ps,{to:"/dashboard"})}),e.jsx(ge,{path:"*",element:e.jsx(Ps,{to:"/dashboard"})})]})})}):e.jsx(ge,{path:"*",element:e.jsx(Ps,{to:"/login"})})]})}class xm extends u.Component{constructor(){super(...arguments);Qt(this,"state",{hasError:!1})}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,n){console.error("ErrorBoundary caught an error:",a,n)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:"/generated-image.png",alt:"Company Logo",className:"h-20 w-20 object-contain drop-shadow-lg hover:scale-110 transition-transform duration-300",style:{filter:"contrast(2.2) saturate(2.0) brightness(1.8)",imageRendering:"crisp-edges",maxWidth:"100%",maxHeight:"100%"}})})}),e.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h1",{className:"text-xl font-semibold text-gray-900 text-center mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors",children:"Refresh Page"}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:void 0}),className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-md transition-colors",children:"Try Again"})]}),!1]})}):this.props.children}}const gm=({showAfter:t=300,className:s=""})=>{const[a,n]=u.useState(!1);u.useEffect(()=>{const r=()=>{window.pageYOffset>t?n(!0):n(!1)};return window.addEventListener("scroll",r),()=>{window.removeEventListener("scroll",r)}},[t]);const i=()=>{window.scrollTo({top:0,behavior:"smooth"})};return e.jsx(ys,{children:a&&e.jsxs(V.button,{initial:{opacity:0,scale:.8,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:20},whileHover:{scale:1.1},whileTap:{scale:.9},onClick:i,className:`fixed bottom-6 right-6 z-50 p-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 border-2 border-white/20 backdrop-blur-sm ${s}`,"aria-label":"Scroll to top",title:"Scroll to top",children:[e.jsx(Pc,{className:"h-6 w-6"}),e.jsx(V.div,{animate:{scale:[1,1.2,1],opacity:[.5,0,.5]},transition:{repeat:1/0,duration:2,ease:"easeInOut"},className:"absolute inset-0 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-full -z-10"})]})})},te=t=>typeof t=="string",Ot=()=>{let t,s;const a=new Promise((n,i)=>{t=n,s=i});return a.resolve=t,a.reject=s,a},mn=t=>t==null?"":""+t,ym=(t,s,a)=>{t.forEach(n=>{s[n]&&(a[n]=s[n])})},bm=/###/g,hn=t=>t&&t.indexOf("###")>-1?t.replace(bm,"."):t,fn=t=>!t||te(t),$t=(t,s,a)=>{const n=te(s)?s.split("."):s;let i=0;for(;i<n.length-1;){if(fn(t))return{};const r=hn(n[i]);!t[r]&&a&&(t[r]=new a),Object.prototype.hasOwnProperty.call(t,r)?t=t[r]:t={},++i}return fn(t)?{}:{obj:t,k:hn(n[i])}},pn=(t,s,a)=>{const{obj:n,k:i}=$t(t,s,Object);if(n!==void 0||s.length===1){n[i]=a;return}let r=s[s.length-1],o=s.slice(0,s.length-1),l=$t(t,o,Object);for(;l.obj===void 0&&o.length;)r=`${o[o.length-1]}.${r}`,o=o.slice(0,o.length-1),l=$t(t,o,Object),l!=null&&l.obj&&typeof l.obj[`${l.k}.${r}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${r}`]=a},Nm=(t,s,a,n)=>{const{obj:i,k:r}=$t(t,s,Object);i[r]=i[r]||[],i[r].push(a)},fs=(t,s)=>{const{obj:a,k:n}=$t(t,s);if(a&&Object.prototype.hasOwnProperty.call(a,n))return a[n]},wm=(t,s,a)=>{const n=fs(t,a);return n!==void 0?n:fs(s,a)},Oi=(t,s,a)=>{for(const n in s)n!=="__proto__"&&n!=="constructor"&&(n in t?te(t[n])||t[n]instanceof String||te(s[n])||s[n]instanceof String?a&&(t[n]=s[n]):Oi(t[n],s[n],a):t[n]=s[n]);return t},Nt=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var vm={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const jm=t=>te(t)?t.replace(/[&<>"'\/]/g,s=>vm[s]):t;class Sm{constructor(s){this.capacity=s,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(s){const a=this.regExpMap.get(s);if(a!==void 0)return a;const n=new RegExp(s);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(s,n),this.regExpQueue.push(s),n}}const Em=[" ",",","?","!",";"],Am=new Sm(20),km=(t,s,a)=>{s=s||"",a=a||"";const n=Em.filter(o=>s.indexOf(o)<0&&a.indexOf(o)<0);if(n.length===0)return!0;const i=Am.getRegExp(`(${n.map(o=>o==="?"?"\\?":o).join("|")})`);let r=!i.test(t);if(!r){const o=t.indexOf(a);o>0&&!i.test(t.substring(0,o))&&(r=!0)}return r},oa=(t,s,a=".")=>{if(!t)return;if(t[s])return Object.prototype.hasOwnProperty.call(t,s)?t[s]:void 0;const n=s.split(a);let i=t;for(let r=0;r<n.length;){if(!i||typeof i!="object")return;let o,l="";for(let d=r;d<n.length;++d)if(d!==r&&(l+=a),l+=n[d],o=i[l],o!==void 0){if(["string","number","boolean"].indexOf(typeof o)>-1&&d<n.length-1)continue;r+=d-r+1;break}i=o}return i},qt=t=>t==null?void 0:t.replace("_","-"),Tm={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,s){var a,n;(n=(a=console==null?void 0:console[t])==null?void 0:a.apply)==null||n.call(a,console,s)}};class ps{constructor(s,a={}){this.init(s,a)}init(s,a={}){this.prefix=a.prefix||"i18next:",this.logger=s||Tm,this.options=a,this.debug=a.debug}log(...s){return this.forward(s,"log","",!0)}warn(...s){return this.forward(s,"warn","",!0)}error(...s){return this.forward(s,"error","")}deprecate(...s){return this.forward(s,"warn","WARNING DEPRECATED: ",!0)}forward(s,a,n,i){return i&&!this.debug?null:(te(s[0])&&(s[0]=`${n}${this.prefix} ${s[0]}`),this.logger[a](s))}create(s){return new ps(this.logger,{prefix:`${this.prefix}:${s}:`,...this.options})}clone(s){return s=s||this.options,s.prefix=s.prefix||this.prefix,new ps(this.logger,s)}}var Ke=new ps;class Is{constructor(){this.observers={}}on(s,a){return s.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const i=this.observers[n].get(a)||0;this.observers[n].set(a,i+1)}),this}off(s,a){if(this.observers[s]){if(!a){delete this.observers[s];return}this.observers[s].delete(a)}}emit(s,...a){this.observers[s]&&Array.from(this.observers[s].entries()).forEach(([i,r])=>{for(let o=0;o<r;o++)i(...a)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([i,r])=>{for(let o=0;o<r;o++)i.apply(i,[s,...a])})}}class xn extends Is{constructor(s,a={ns:["translation"],defaultNS:"translation"}){super(),this.data=s||{},this.options=a,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(s){this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}removeNamespaces(s){const a=this.options.ns.indexOf(s);a>-1&&this.options.ns.splice(a,1)}getResource(s,a,n,i={}){var c,m;const r=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,o=i.ignoreJSONStructure!==void 0?i.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;s.indexOf(".")>-1?l=s.split("."):(l=[s,a],n&&(Array.isArray(n)?l.push(...n):te(n)&&r?l.push(...n.split(r)):l.push(n)));const d=fs(this.data,l);return!d&&!a&&!n&&s.indexOf(".")>-1&&(s=l[0],a=l[1],n=l.slice(2).join(".")),d||!o||!te(n)?d:oa((m=(c=this.data)==null?void 0:c[s])==null?void 0:m[a],n,r)}addResource(s,a,n,i,r={silent:!1}){const o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator;let l=[s,a];n&&(l=l.concat(o?n.split(o):n)),s.indexOf(".")>-1&&(l=s.split("."),i=a,a=l[1]),this.addNamespaces(a),pn(this.data,l,i),r.silent||this.emit("added",s,a,n,i)}addResources(s,a,n,i={silent:!1}){for(const r in n)(te(n[r])||Array.isArray(n[r]))&&this.addResource(s,a,r,n[r],{silent:!0});i.silent||this.emit("added",s,a,n)}addResourceBundle(s,a,n,i,r,o={silent:!1,skipCopy:!1}){let l=[s,a];s.indexOf(".")>-1&&(l=s.split("."),i=n,n=a,a=l[1]),this.addNamespaces(a);let d=fs(this.data,l)||{};o.skipCopy||(n=JSON.parse(JSON.stringify(n))),i?Oi(d,n,r):d={...d,...n},pn(this.data,l,d),o.silent||this.emit("added",s,a,n)}removeResourceBundle(s,a){this.hasResourceBundle(s,a)&&delete this.data[s][a],this.removeNamespaces(a),this.emit("removed",s,a)}hasResourceBundle(s,a){return this.getResource(s,a)!==void 0}getResourceBundle(s,a){return a||(a=this.options.defaultNS),this.getResource(s,a)}getDataByLanguage(s){return this.data[s]}hasLanguageSomeTranslations(s){const a=this.getDataByLanguage(s);return!!(a&&Object.keys(a)||[]).find(i=>a[i]&&Object.keys(a[i]).length>0)}toJSON(){return this.data}}var Pi={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,s,a,n,i){return t.forEach(r=>{var o;s=((o=this.processors[r])==null?void 0:o.process(s,a,n,i))??s}),s}};const Mi=Symbol("i18next/PATH_KEY");function Dm(){const t=[],s=Object.create(null);let a;return s.get=(n,i)=>{var r;return(r=a==null?void 0:a.revoke)==null||r.call(a),i===Mi?t:(t.push(i),a=Proxy.revocable(n,s),a.proxy)},Proxy.revocable(Object.create(null),s).proxy}function la(t,s){const{[Mi]:a}=t(Dm());return a.join((s==null?void 0:s.keySeparator)??".")}const gn={},yn=t=>!te(t)&&typeof t!="boolean"&&typeof t!="number";class xs extends Is{constructor(s,a={}){super(),ym(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],s,this),this.options=a,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Ke.create("translator")}changeLanguage(s){s&&(this.language=s)}exists(s,a={interpolation:{}}){const n={...a};if(s==null)return!1;const i=this.resolve(s,n);return(i==null?void 0:i.res)!==void 0}extractFromKey(s,a){let n=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let r=a.ns||this.options.defaultNS||[];const o=n&&s.indexOf(n)>-1,l=!this.options.userDefinedKeySeparator&&!a.keySeparator&&!this.options.userDefinedNsSeparator&&!a.nsSeparator&&!km(s,n,i);if(o&&!l){const d=s.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:s,namespaces:te(r)?[r]:r};const c=s.split(n);(n!==i||n===i&&this.options.ns.indexOf(c[0])>-1)&&(r=c.shift()),s=c.join(i)}return{key:s,namespaces:te(r)?[r]:r}}translate(s,a,n){let i=typeof a=="object"?{...a}:a;if(typeof i!="object"&&this.options.overloadTranslationOptionHandler&&(i=this.options.overloadTranslationOptionHandler(arguments)),typeof i=="object"&&(i={...i}),i||(i={}),s==null)return"";typeof s=="function"&&(s=la(s,{...this.options,...i})),Array.isArray(s)||(s=[String(s)]);const r=i.returnDetails!==void 0?i.returnDetails:this.options.returnDetails,o=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator,{key:l,namespaces:d}=this.extractFromKey(s[s.length-1],i),c=d[d.length-1];let m=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;m===void 0&&(m=":");const f=i.lng||this.language,h=i.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((f==null?void 0:f.toLowerCase())==="cimode")return h?r?{res:`${c}${m}${l}`,usedKey:l,exactUsedKey:l,usedLng:f,usedNS:c,usedParams:this.getUsedParamsDetails(i)}:`${c}${m}${l}`:r?{res:l,usedKey:l,exactUsedKey:l,usedLng:f,usedNS:c,usedParams:this.getUsedParamsDetails(i)}:l;const v=this.resolve(s,i);let g=v==null?void 0:v.res;const y=(v==null?void 0:v.usedKey)||l,x=(v==null?void 0:v.exactUsedKey)||l,E=["[object Number]","[object Function]","[object RegExp]"],w=i.joinArrays!==void 0?i.joinArrays:this.options.joinArrays,N=!this.i18nFormat||this.i18nFormat.handleAsObject,j=i.count!==void 0&&!te(i.count),p=xs.hasDefaultValue(i),k=j?this.pluralResolver.getSuffix(f,i.count,i):"",T=i.ordinal&&j?this.pluralResolver.getSuffix(f,i.count,{ordinal:!1}):"",C=j&&!i.ordinal&&i.count===0,A=C&&i[`defaultValue${this.options.pluralSeparator}zero`]||i[`defaultValue${k}`]||i[`defaultValue${T}`]||i.defaultValue;let R=g;N&&!g&&p&&(R=A);const q=yn(R),W=Object.prototype.toString.apply(R);if(N&&R&&q&&E.indexOf(W)<0&&!(te(w)&&Array.isArray(R))){if(!i.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const _=this.options.returnedObjectHandler?this.options.returnedObjectHandler(y,R,{...i,ns:d}):`key '${l} (${this.language})' returned an object instead of string.`;return r?(v.res=_,v.usedParams=this.getUsedParamsDetails(i),v):_}if(o){const _=Array.isArray(R),Z=_?[]:{},re=_?x:y;for(const J in R)if(Object.prototype.hasOwnProperty.call(R,J)){const se=`${re}${o}${J}`;p&&!g?Z[J]=this.translate(se,{...i,defaultValue:yn(A)?A[J]:void 0,joinArrays:!1,ns:d}):Z[J]=this.translate(se,{...i,joinArrays:!1,ns:d}),Z[J]===se&&(Z[J]=R[J])}g=Z}}else if(N&&te(w)&&Array.isArray(g))g=g.join(w),g&&(g=this.extendTranslation(g,s,i,n));else{let _=!1,Z=!1;!this.isValidLookup(g)&&p&&(_=!0,g=A),this.isValidLookup(g)||(Z=!0,g=l);const J=(i.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&Z?void 0:g,se=p&&A!==g&&this.options.updateMissing;if(Z||_||se){if(this.logger.log(se?"updateKey":"missingKey",f,c,l,se?A:g),o){const z=this.resolve(l,{...i,keySeparator:!1});z&&z.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let K=[];const ce=this.languageUtils.getFallbackCodes(this.options.fallbackLng,i.lng||this.language);if(this.options.saveMissingTo==="fallback"&&ce&&ce[0])for(let z=0;z<ce.length;z++)K.push(ce[z]);else this.options.saveMissingTo==="all"?K=this.languageUtils.toResolveHierarchy(i.lng||this.language):K.push(i.lng||this.language);const $=(z,ee,ae)=>{var xe;const me=p&&ae!==g?ae:J;this.options.missingKeyHandler?this.options.missingKeyHandler(z,c,ee,me,se,i):(xe=this.backendConnector)!=null&&xe.saveMissing&&this.backendConnector.saveMissing(z,c,ee,me,se,i),this.emit("missingKey",z,c,ee,g)};this.options.saveMissing&&(this.options.saveMissingPlurals&&j?K.forEach(z=>{const ee=this.pluralResolver.getSuffixes(z,i);C&&i[`defaultValue${this.options.pluralSeparator}zero`]&&ee.indexOf(`${this.options.pluralSeparator}zero`)<0&&ee.push(`${this.options.pluralSeparator}zero`),ee.forEach(ae=>{$([z],l+ae,i[`defaultValue${ae}`]||A)})}):$(K,l,A))}g=this.extendTranslation(g,s,i,v,n),Z&&g===l&&this.options.appendNamespaceToMissingKey&&(g=`${c}${m}${l}`),(Z||_)&&this.options.parseMissingKeyHandler&&(g=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}${m}${l}`:l,_?g:void 0,i))}return r?(v.res=g,v.usedParams=this.getUsedParamsDetails(i),v):g}extendTranslation(s,a,n,i,r){var d,c;if((d=this.i18nFormat)!=null&&d.parse)s=this.i18nFormat.parse(s,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||i.usedLng,i.usedNS,i.usedKey,{resolved:i});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const m=te(s)&&(((c=n==null?void 0:n.interpolation)==null?void 0:c.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let f;if(m){const v=s.match(this.interpolator.nestingRegexp);f=v&&v.length}let h=n.replace&&!te(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),s=this.interpolator.interpolate(s,h,n.lng||this.language||i.usedLng,n),m){const v=s.match(this.interpolator.nestingRegexp),g=v&&v.length;f<g&&(n.nest=!1)}!n.lng&&i&&i.res&&(n.lng=this.language||i.usedLng),n.nest!==!1&&(s=this.interpolator.nest(s,(...v)=>(r==null?void 0:r[0])===v[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${v[0]} in key: ${a[0]}`),null):this.translate(...v,a),n)),n.interpolation&&this.interpolator.reset()}const o=n.postProcess||this.options.postProcess,l=te(o)?[o]:o;return s!=null&&(l!=null&&l.length)&&n.applyPostProcessor!==!1&&(s=Pi.handle(l,s,a,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...i,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),s}resolve(s,a={}){let n,i,r,o,l;return te(s)&&(s=[s]),s.forEach(d=>{if(this.isValidLookup(n))return;const c=this.extractFromKey(d,a),m=c.key;i=m;let f=c.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const h=a.count!==void 0&&!te(a.count),v=h&&!a.ordinal&&a.count===0,g=a.context!==void 0&&(te(a.context)||typeof a.context=="number")&&a.context!=="",y=a.lngs?a.lngs:this.languageUtils.toResolveHierarchy(a.lng||this.language,a.fallbackLng);f.forEach(x=>{var E,w;this.isValidLookup(n)||(l=x,!gn[`${y[0]}-${x}`]&&((E=this.utils)!=null&&E.hasLoadedNamespace)&&!((w=this.utils)!=null&&w.hasLoadedNamespace(l))&&(gn[`${y[0]}-${x}`]=!0,this.logger.warn(`key "${i}" for languages "${y.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(N=>{var k;if(this.isValidLookup(n))return;o=N;const j=[m];if((k=this.i18nFormat)!=null&&k.addLookupKeys)this.i18nFormat.addLookupKeys(j,m,N,x,a);else{let T;h&&(T=this.pluralResolver.getSuffix(N,a.count,a));const C=`${this.options.pluralSeparator}zero`,A=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(a.ordinal&&T.indexOf(A)===0&&j.push(m+T.replace(A,this.options.pluralSeparator)),j.push(m+T),v&&j.push(m+C)),g){const R=`${m}${this.options.contextSeparator||"_"}${a.context}`;j.push(R),h&&(a.ordinal&&T.indexOf(A)===0&&j.push(R+T.replace(A,this.options.pluralSeparator)),j.push(R+T),v&&j.push(R+C))}}let p;for(;p=j.pop();)this.isValidLookup(n)||(r=p,n=this.getResource(N,x,p,a))}))})}),{res:n,usedKey:i,exactUsedKey:r,usedLng:o,usedNS:l}}isValidLookup(s){return s!==void 0&&!(!this.options.returnNull&&s===null)&&!(!this.options.returnEmptyString&&s==="")}getResource(s,a,n,i={}){var r;return(r=this.i18nFormat)!=null&&r.getResource?this.i18nFormat.getResource(s,a,n,i):this.resourceStore.getResource(s,a,n,i)}getUsedParamsDetails(s={}){const a=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=s.replace&&!te(s.replace);let i=n?s.replace:s;if(n&&typeof s.count<"u"&&(i.count=s.count),this.options.interpolation.defaultVariables&&(i={...this.options.interpolation.defaultVariables,...i}),!n){i={...i};for(const r of a)delete i[r]}return i}static hasDefaultValue(s){const a="defaultValue";for(const n in s)if(Object.prototype.hasOwnProperty.call(s,n)&&a===n.substring(0,a.length)&&s[n]!==void 0)return!0;return!1}}class bn{constructor(s){this.options=s,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Ke.create("languageUtils")}getScriptPartFromCode(s){if(s=qt(s),!s||s.indexOf("-")<0)return null;const a=s.split("-");return a.length===2||(a.pop(),a[a.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(a.join("-"))}getLanguagePartFromCode(s){if(s=qt(s),!s||s.indexOf("-")<0)return s;const a=s.split("-");return this.formatLanguageCode(a[0])}formatLanguageCode(s){if(te(s)&&s.indexOf("-")>-1){let a;try{a=Intl.getCanonicalLocales(s)[0]}catch{}return a&&this.options.lowerCaseLng&&(a=a.toLowerCase()),a||(this.options.lowerCaseLng?s.toLowerCase():s)}return this.options.cleanCode||this.options.lowerCaseLng?s.toLowerCase():s}isSupportedCode(s){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(s=this.getLanguagePartFromCode(s)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(s)>-1}getBestMatchFromCodes(s){if(!s)return null;let a;return s.forEach(n=>{if(a)return;const i=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(i))&&(a=i)}),!a&&this.options.supportedLngs&&s.forEach(n=>{if(a)return;const i=this.getScriptPartFromCode(n);if(this.isSupportedCode(i))return a=i;const r=this.getLanguagePartFromCode(n);if(this.isSupportedCode(r))return a=r;a=this.options.supportedLngs.find(o=>{if(o===r)return o;if(!(o.indexOf("-")<0&&r.indexOf("-")<0)&&(o.indexOf("-")>0&&r.indexOf("-")<0&&o.substring(0,o.indexOf("-"))===r||o.indexOf(r)===0&&r.length>1))return o})}),a||(a=this.getFallbackCodes(this.options.fallbackLng)[0]),a}getFallbackCodes(s,a){if(!s)return[];if(typeof s=="function"&&(s=s(a)),te(s)&&(s=[s]),Array.isArray(s))return s;if(!a)return s.default||[];let n=s[a];return n||(n=s[this.getScriptPartFromCode(a)]),n||(n=s[this.formatLanguageCode(a)]),n||(n=s[this.getLanguagePartFromCode(a)]),n||(n=s.default),n||[]}toResolveHierarchy(s,a){const n=this.getFallbackCodes((a===!1?[]:a)||this.options.fallbackLng||[],s),i=[],r=o=>{o&&(this.isSupportedCode(o)?i.push(o):this.logger.warn(`rejecting language code not found in supportedLngs: ${o}`))};return te(s)&&(s.indexOf("-")>-1||s.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&r(this.formatLanguageCode(s)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&r(this.getScriptPartFromCode(s)),this.options.load!=="currentOnly"&&r(this.getLanguagePartFromCode(s))):te(s)&&r(this.formatLanguageCode(s)),n.forEach(o=>{i.indexOf(o)<0&&r(this.formatLanguageCode(o))}),i}}const Nn={zero:0,one:1,two:2,few:3,many:4,other:5},wn={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class Cm{constructor(s,a={}){this.languageUtils=s,this.options=a,this.logger=Ke.create("pluralResolver"),this.pluralRulesCache={}}addRule(s,a){this.rules[s]=a}clearCache(){this.pluralRulesCache={}}getRule(s,a={}){const n=qt(s==="dev"?"en":s),i=a.ordinal?"ordinal":"cardinal",r=JSON.stringify({cleanedCode:n,type:i});if(r in this.pluralRulesCache)return this.pluralRulesCache[r];let o;try{o=new Intl.PluralRules(n,{type:i})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),wn;if(!s.match(/-|_/))return wn;const d=this.languageUtils.getLanguagePartFromCode(s);o=this.getRule(d,a)}return this.pluralRulesCache[r]=o,o}needsPlural(s,a={}){let n=this.getRule(s,a);return n||(n=this.getRule("dev",a)),(n==null?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(s,a,n={}){return this.getSuffixes(s,n).map(i=>`${a}${i}`)}getSuffixes(s,a={}){let n=this.getRule(s,a);return n||(n=this.getRule("dev",a)),n?n.resolvedOptions().pluralCategories.sort((i,r)=>Nn[i]-Nn[r]).map(i=>`${this.options.prepend}${a.ordinal?`ordinal${this.options.prepend}`:""}${i}`):[]}getSuffix(s,a,n={}){const i=this.getRule(s,n);return i?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${i.select(a)}`:(this.logger.warn(`no plural rule found for: ${s}`),this.getSuffix("dev",a,n))}}const vn=(t,s,a,n=".",i=!0)=>{let r=wm(t,s,a);return!r&&i&&te(a)&&(r=oa(t,a,n),r===void 0&&(r=oa(s,a,n))),r},Gs=t=>t.replace(/\$/g,"$$$$");class Rm{constructor(s={}){var a;this.logger=Ke.create("interpolator"),this.options=s,this.format=((a=s==null?void 0:s.interpolation)==null?void 0:a.format)||(n=>n),this.init(s)}init(s={}){s.interpolation||(s.interpolation={escapeValue:!0});const{escape:a,escapeValue:n,useRawValueToEscape:i,prefix:r,prefixEscaped:o,suffix:l,suffixEscaped:d,formatSeparator:c,unescapeSuffix:m,unescapePrefix:f,nestingPrefix:h,nestingPrefixEscaped:v,nestingSuffix:g,nestingSuffixEscaped:y,nestingOptionsSeparator:x,maxReplaces:E,alwaysFormat:w}=s.interpolation;this.escape=a!==void 0?a:jm,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=i!==void 0?i:!1,this.prefix=r?Nt(r):o||"{{",this.suffix=l?Nt(l):d||"}}",this.formatSeparator=c||",",this.unescapePrefix=m?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":m||"",this.nestingPrefix=h?Nt(h):v||Nt("$t("),this.nestingSuffix=g?Nt(g):y||Nt(")"),this.nestingOptionsSeparator=x||",",this.maxReplaces=E||1e3,this.alwaysFormat=w!==void 0?w:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const s=(a,n)=>(a==null?void 0:a.source)===n?(a.lastIndex=0,a):new RegExp(n,"g");this.regexp=s(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=s(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=s(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(s,a,n,i){var v;let r,o,l;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=g=>{if(g.indexOf(this.formatSeparator)<0){const w=vn(a,d,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(w,void 0,n,{...i,...a,interpolationkey:g}):w}const y=g.split(this.formatSeparator),x=y.shift().trim(),E=y.join(this.formatSeparator).trim();return this.format(vn(a,d,x,this.options.keySeparator,this.options.ignoreJSONStructure),E,n,{...i,...a,interpolationkey:x})};this.resetRegExp();const m=(i==null?void 0:i.missingInterpolationHandler)||this.options.missingInterpolationHandler,f=((v=i==null?void 0:i.interpolation)==null?void 0:v.skipOnVariables)!==void 0?i.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>Gs(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?Gs(this.escape(g)):Gs(g)}].forEach(g=>{for(l=0;r=g.regex.exec(s);){const y=r[1].trim();if(o=c(y),o===void 0)if(typeof m=="function"){const E=m(s,r,i);o=te(E)?E:""}else if(i&&Object.prototype.hasOwnProperty.call(i,y))o="";else if(f){o=r[0];continue}else this.logger.warn(`missed to pass in variable ${y} for interpolating ${s}`),o="";else!te(o)&&!this.useRawValueToEscape&&(o=mn(o));const x=g.safeValue(o);if(s=s.replace(r[0],x),f?(g.regex.lastIndex+=o.length,g.regex.lastIndex-=r[0].length):g.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),s}nest(s,a,n={}){let i,r,o;const l=(d,c)=>{const m=this.nestingOptionsSeparator;if(d.indexOf(m)<0)return d;const f=d.split(new RegExp(`${m}[ ]*{`));let h=`{${f[1]}`;d=f[0],h=this.interpolate(h,o);const v=h.match(/'/g),g=h.match(/"/g);(((v==null?void 0:v.length)??0)%2===0&&!g||g.length%2!==0)&&(h=h.replace(/'/g,'"'));try{o=JSON.parse(h),c&&(o={...c,...o})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,y),`${d}${m}${h}`}return o.defaultValue&&o.defaultValue.indexOf(this.prefix)>-1&&delete o.defaultValue,d};for(;i=this.nestingRegexp.exec(s);){let d=[];o={...n},o=o.replace&&!te(o.replace)?o.replace:o,o.applyPostProcessor=!1,delete o.defaultValue;const c=/{.*}/.test(i[1])?i[1].lastIndexOf("}")+1:i[1].indexOf(this.formatSeparator);if(c!==-1&&(d=i[1].slice(c).split(this.formatSeparator).map(m=>m.trim()).filter(Boolean),i[1]=i[1].slice(0,c)),r=a(l.call(this,i[1].trim(),o),o),r&&i[0]===s&&!te(r))return r;te(r)||(r=mn(r)),r||(this.logger.warn(`missed to resolve ${i[1]} for nesting ${s}`),r=""),d.length&&(r=d.reduce((m,f)=>this.format(m,f,n.lng,{...n,interpolationkey:i[1].trim()}),r.trim())),s=s.replace(i[0],r),this.regexp.lastIndex=0}return s}}const Im=t=>{let s=t.toLowerCase().trim();const a={};if(t.indexOf("(")>-1){const n=t.split("(");s=n[0].toLowerCase().trim();const i=n[1].substring(0,n[1].length-1);s==="currency"&&i.indexOf(":")<0?a.currency||(a.currency=i.trim()):s==="relativetime"&&i.indexOf(":")<0?a.range||(a.range=i.trim()):i.split(";").forEach(o=>{if(o){const[l,...d]=o.split(":"),c=d.join(":").trim().replace(/^'+|'+$/g,""),m=l.trim();a[m]||(a[m]=c),c==="false"&&(a[m]=!1),c==="true"&&(a[m]=!0),isNaN(c)||(a[m]=parseInt(c,10))}})}return{formatName:s,formatOptions:a}},jn=t=>{const s={};return(a,n,i)=>{let r=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(r={...r,[i.interpolationkey]:void 0});const o=n+JSON.stringify(r);let l=s[o];return l||(l=t(qt(n),i),s[o]=l),l(a)}},Lm=t=>(s,a,n)=>t(qt(a),n)(s);class Om{constructor(s={}){this.logger=Ke.create("formatter"),this.options=s,this.init(s)}init(s,a={interpolation:{}}){this.formatSeparator=a.interpolation.formatSeparator||",";const n=a.cacheInBuiltFormats?jn:Lm;this.formats={number:n((i,r)=>{const o=new Intl.NumberFormat(i,{...r});return l=>o.format(l)}),currency:n((i,r)=>{const o=new Intl.NumberFormat(i,{...r,style:"currency"});return l=>o.format(l)}),datetime:n((i,r)=>{const o=new Intl.DateTimeFormat(i,{...r});return l=>o.format(l)}),relativetime:n((i,r)=>{const o=new Intl.RelativeTimeFormat(i,{...r});return l=>o.format(l,r.range||"day")}),list:n((i,r)=>{const o=new Intl.ListFormat(i,{...r});return l=>o.format(l)})}}add(s,a){this.formats[s.toLowerCase().trim()]=a}addCached(s,a){this.formats[s.toLowerCase().trim()]=jn(a)}format(s,a,n,i={}){const r=a.split(this.formatSeparator);if(r.length>1&&r[0].indexOf("(")>1&&r[0].indexOf(")")<0&&r.find(l=>l.indexOf(")")>-1)){const l=r.findIndex(d=>d.indexOf(")")>-1);r[0]=[r[0],...r.splice(1,l)].join(this.formatSeparator)}return r.reduce((l,d)=>{var f;const{formatName:c,formatOptions:m}=Im(d);if(this.formats[c]){let h=l;try{const v=((f=i==null?void 0:i.formatParams)==null?void 0:f[i.interpolationkey])||{},g=v.locale||v.lng||i.locale||i.lng||n;h=this.formats[c](l,g,{...m,...i,...v})}catch(v){this.logger.warn(v)}return h}else this.logger.warn(`there was no format function for ${c}`);return l},s)}}const Pm=(t,s)=>{t.pending[s]!==void 0&&(delete t.pending[s],t.pendingCount--)};class Mm extends Is{constructor(s,a,n,i={}){var r,o;super(),this.backend=s,this.store=a,this.services=n,this.languageUtils=n.languageUtils,this.options=i,this.logger=Ke.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=i.maxParallelReads||10,this.readingCalls=0,this.maxRetries=i.maxRetries>=0?i.maxRetries:5,this.retryTimeout=i.retryTimeout>=1?i.retryTimeout:350,this.state={},this.queue=[],(o=(r=this.backend)==null?void 0:r.init)==null||o.call(r,n,i.backend,i)}queueLoad(s,a,n,i){const r={},o={},l={},d={};return s.forEach(c=>{let m=!0;a.forEach(f=>{const h=`${c}|${f}`;!n.reload&&this.store.hasResourceBundle(c,f)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?o[h]===void 0&&(o[h]=!0):(this.state[h]=1,m=!1,o[h]===void 0&&(o[h]=!0),r[h]===void 0&&(r[h]=!0),d[f]===void 0&&(d[f]=!0)))}),m||(l[c]=!0)}),(Object.keys(r).length||Object.keys(o).length)&&this.queue.push({pending:o,pendingCount:Object.keys(o).length,loaded:{},errors:[],callback:i}),{toLoad:Object.keys(r),pending:Object.keys(o),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(d)}}loaded(s,a,n){const i=s.split("|"),r=i[0],o=i[1];a&&this.emit("failedLoading",r,o,a),!a&&n&&this.store.addResourceBundle(r,o,n,void 0,void 0,{skipCopy:!0}),this.state[s]=a?-1:2,a&&n&&(this.state[s]=0);const l={};this.queue.forEach(d=>{Nm(d.loaded,[r],o),Pm(d,s),a&&d.errors.push(a),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(c=>{l[c]||(l[c]={});const m=d.loaded[c];m.length&&m.forEach(f=>{l[c][f]===void 0&&(l[c][f]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(d=>!d.done)}read(s,a,n,i=0,r=this.retryTimeout,o){if(!s.length)return o(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:s,ns:a,fcName:n,tried:i,wait:r,callback:o});return}this.readingCalls++;const l=(c,m)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(c&&m&&i<this.maxRetries){setTimeout(()=>{this.read.call(this,s,a,n,i+1,r*2,o)},r);return}o(c,m)},d=this.backend[n].bind(this.backend);if(d.length===2){try{const c=d(s,a);c&&typeof c.then=="function"?c.then(m=>l(null,m)).catch(l):l(null,c)}catch(c){l(c)}return}return d(s,a,l)}prepareLoading(s,a,n={},i){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),i&&i();te(s)&&(s=this.languageUtils.toResolveHierarchy(s)),te(a)&&(a=[a]);const r=this.queueLoad(s,a,n,i);if(!r.toLoad.length)return r.pending.length||i(),null;r.toLoad.forEach(o=>{this.loadOne(o)})}load(s,a,n){this.prepareLoading(s,a,{},n)}reload(s,a,n){this.prepareLoading(s,a,{reload:!0},n)}loadOne(s,a=""){const n=s.split("|"),i=n[0],r=n[1];this.read(i,r,"read",void 0,void 0,(o,l)=>{o&&this.logger.warn(`${a}loading namespace ${r} for language ${i} failed`,o),!o&&l&&this.logger.log(`${a}loaded namespace ${r} for language ${i}`,l),this.loaded(s,o,l)})}saveMissing(s,a,n,i,r,o={},l=()=>{}){var d,c,m,f,h;if((c=(d=this.services)==null?void 0:d.utils)!=null&&c.hasLoadedNamespace&&!((f=(m=this.services)==null?void 0:m.utils)!=null&&f.hasLoadedNamespace(a))){this.logger.warn(`did not save key "${n}" as the namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if((h=this.backend)!=null&&h.create){const v={...o,isUpdate:r},g=this.backend.create.bind(this.backend);if(g.length<6)try{let y;g.length===5?y=g(s,a,n,i,v):y=g(s,a,n,i),y&&typeof y.then=="function"?y.then(x=>l(null,x)).catch(l):l(null,y)}catch(y){l(y)}else g(s,a,n,i,l,v)}!s||!s[0]||this.store.addResource(s[0],a,n,i)}}}const Sn=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let s={};if(typeof t[1]=="object"&&(s=t[1]),te(t[1])&&(s.defaultValue=t[1]),te(t[2])&&(s.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const a=t[3]||t[2];Object.keys(a).forEach(n=>{s[n]=a[n]})}return s},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),En=t=>{var s,a;return te(t.ns)&&(t.ns=[t.ns]),te(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),te(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((a=(s=t.supportedLngs)==null?void 0:s.indexOf)==null?void 0:a.call(s,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},Jt=()=>{},Fm=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(a=>{typeof t[a]=="function"&&(t[a]=t[a].bind(t))})};class Ut extends Is{constructor(s={},a){if(super(),this.options=En(s),this.services={},this.logger=Ke,this.modules={external:[]},Fm(this),a&&!this.isInitialized&&!s.isClone){if(!this.options.initAsync)return this.init(s,a),this;setTimeout(()=>{this.init(s,a)},0)}}init(s={},a){this.isInitializing=!0,typeof s=="function"&&(a=s,s={}),s.defaultNS==null&&s.ns&&(te(s.ns)?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));const n=Sn();this.options={...n,...this.options,...En(s)},this.options.interpolation={...n.interpolation,...this.options.interpolation},s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);const i=c=>c?typeof c=="function"?new c:c:null;if(!this.options.isClone){this.modules.logger?Ke.init(i(this.modules.logger),this.options):Ke.init(null,this.options);let c;this.modules.formatter?c=this.modules.formatter:c=Om;const m=new bn(this.options);this.store=new xn(this.options.resources,this.options);const f=this.services;f.logger=Ke,f.resourceStore=this.store,f.languageUtils=m,f.pluralResolver=new Cm(m,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),c&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(f.formatter=i(c),f.formatter.init&&f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new Rm(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new Mm(i(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",(v,...g)=>{this.emit(v,...g)}),this.modules.languageDetector&&(f.languageDetector=i(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=i(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new xs(this.services,this.options),this.translator.on("*",(v,...g)=>{this.emit(v,...g)}),this.modules.external.forEach(v=>{v.init&&v.init(this)})}if(this.format=this.options.interpolation.format,a||(a=Jt),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const c=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);c.length>0&&c[0]!=="dev"&&(this.options.lng=c[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(c=>{this[c]=(...m)=>this.store[c](...m)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(c=>{this[c]=(...m)=>(this.store[c](...m),this)});const l=Ot(),d=()=>{const c=(m,f)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(f),a(m,f)};if(this.languages&&!this.isInitialized)return c(null,this.t.bind(this));this.changeLanguage(this.options.lng,c)};return this.options.resources||!this.options.initAsync?d():setTimeout(d,0),l}loadResources(s,a=Jt){var r,o;let n=a;const i=te(s)?s:this.language;if(typeof s=="function"&&(n=s),!this.options.resources||this.options.partialBundledLanguages){if((i==null?void 0:i.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const l=[],d=c=>{if(!c||c==="cimode")return;this.services.languageUtils.toResolveHierarchy(c).forEach(f=>{f!=="cimode"&&l.indexOf(f)<0&&l.push(f)})};i?d(i):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(m=>d(m)),(o=(r=this.options.preload)==null?void 0:r.forEach)==null||o.call(r,c=>d(c)),this.services.backendConnector.load(l,this.options.ns,c=>{!c&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(c)})}else n(null)}reloadResources(s,a,n){const i=Ot();return typeof s=="function"&&(n=s,s=void 0),typeof a=="function"&&(n=a,a=void 0),s||(s=this.languages),a||(a=this.options.ns),n||(n=Jt),this.services.backendConnector.reload(s,a,r=>{i.resolve(),n(r)}),i}use(s){if(!s)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!s.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return s.type==="backend"&&(this.modules.backend=s),(s.type==="logger"||s.log&&s.warn&&s.error)&&(this.modules.logger=s),s.type==="languageDetector"&&(this.modules.languageDetector=s),s.type==="i18nFormat"&&(this.modules.i18nFormat=s),s.type==="postProcessor"&&Pi.addPostProcessor(s),s.type==="formatter"&&(this.modules.formatter=s),s.type==="3rdParty"&&this.modules.external.push(s),this}setResolvedLanguage(s){if(!(!s||!this.languages)&&!(["cimode","dev"].indexOf(s)>-1)){for(let a=0;a<this.languages.length;a++){const n=this.languages[a];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(s)<0&&this.store.hasLanguageSomeTranslations(s)&&(this.resolvedLanguage=s,this.languages.unshift(s))}}changeLanguage(s,a){this.isLanguageChangingTo=s;const n=Ot();this.emit("languageChanging",s);const i=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},r=(l,d)=>{d?this.isLanguageChangingTo===s&&(i(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,n.resolve((...c)=>this.t(...c)),a&&a(l,(...c)=>this.t(...c))},o=l=>{var m,f;!s&&!l&&this.services.languageDetector&&(l=[]);const d=te(l)?l:l&&l[0],c=this.store.hasLanguageSomeTranslations(d)?d:this.services.languageUtils.getBestMatchFromCodes(te(l)?[l]:l);c&&(this.language||i(c),this.translator.language||this.translator.changeLanguage(c),(f=(m=this.services.languageDetector)==null?void 0:m.cacheUserLanguage)==null||f.call(m,c)),this.loadResources(c,h=>{r(h,c)})};return!s&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!s&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(s),n}getFixedT(s,a,n){const i=(r,o,...l)=>{let d;typeof o!="object"?d=this.options.overloadTranslationOptionHandler([r,o].concat(l)):d={...o},d.lng=d.lng||i.lng,d.lngs=d.lngs||i.lngs,d.ns=d.ns||i.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||n||i.keyPrefix);const c=this.options.keySeparator||".";let m;return d.keyPrefix&&Array.isArray(r)?m=r.map(f=>(typeof f=="function"&&(f=la(f,{...this.options,...o})),`${d.keyPrefix}${c}${f}`)):(typeof r=="function"&&(r=la(r,{...this.options,...o})),m=d.keyPrefix?`${d.keyPrefix}${c}${r}`:r),this.t(m,d)};return te(s)?i.lng=s:i.lngs=s,i.ns=a,i.keyPrefix=n,i}t(...s){var a;return(a=this.translator)==null?void 0:a.translate(...s)}exists(...s){var a;return(a=this.translator)==null?void 0:a.exists(...s)}setDefaultNamespace(s){this.options.defaultNS=s}hasLoadedNamespace(s,a={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=a.lng||this.resolvedLanguage||this.languages[0],i=this.options?this.options.fallbackLng:!1,r=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const o=(l,d)=>{const c=this.services.backendConnector.state[`${l}|${d}`];return c===-1||c===0||c===2};if(a.precheck){const l=a.precheck(this,o);if(l!==void 0)return l}return!!(this.hasResourceBundle(n,s)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||o(n,s)&&(!i||o(r,s)))}loadNamespaces(s,a){const n=Ot();return this.options.ns?(te(s)&&(s=[s]),s.forEach(i=>{this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}),this.loadResources(i=>{n.resolve(),a&&a(i)}),n):(a&&a(),Promise.resolve())}loadLanguages(s,a){const n=Ot();te(s)&&(s=[s]);const i=this.options.preload||[],r=s.filter(o=>i.indexOf(o)<0&&this.services.languageUtils.isSupportedCode(o));return r.length?(this.options.preload=i.concat(r),this.loadResources(o=>{n.resolve(),a&&a(o)}),n):(a&&a(),Promise.resolve())}dir(s){var i,r;if(s||(s=this.resolvedLanguage||(((i=this.languages)==null?void 0:i.length)>0?this.languages[0]:this.language)),!s)return"rtl";try{const o=new Intl.Locale(s);if(o&&o.getTextInfo){const l=o.getTextInfo();if(l&&l.direction)return l.direction}}catch{}const a=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=((r=this.services)==null?void 0:r.languageUtils)||new bn(Sn());return s.toLowerCase().indexOf("-latn")>1?"ltr":a.indexOf(n.getLanguagePartFromCode(s))>-1||s.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(s={},a){return new Ut(s,a)}cloneInstance(s={},a=Jt){const n=s.forkResourceStore;n&&delete s.forkResourceStore;const i={...this.options,...s,isClone:!0},r=new Ut(i);if((s.debug!==void 0||s.prefix!==void 0)&&(r.logger=r.logger.clone(s)),["store","services","language"].forEach(l=>{r[l]=this[l]}),r.services={...this.services},r.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},n){const l=Object.keys(this.store.data).reduce((d,c)=>(d[c]={...this.store.data[c]},d[c]=Object.keys(d[c]).reduce((m,f)=>(m[f]={...d[c][f]},m),d[c]),d),{});r.store=new xn(l,i),r.services.resourceStore=r.store}return r.translator=new xs(r.services,i),r.translator.on("*",(l,...d)=>{r.emit(l,...d)}),r.init(i,a),r.translator.options=i,r.translator.backendConnector.services.utils={hasLoadedNamespace:r.hasLoadedNamespace.bind(r)},r}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Te=Ut.createInstance();Te.createInstance=Ut.createInstance;Te.createInstance;Te.dir;Te.init;Te.loadResources;Te.reloadResources;Te.use;Te.changeLanguage;Te.getFixedT;Te.t;Te.exists;Te.setDefaultNamespace;Te.hasLoadedNamespace;Te.loadNamespaces;Te.loadLanguages;const{slice:$m,forEach:qm}=[];function Um(t){return qm.call($m.call(arguments,1),s=>{if(s)for(const a in s)t[a]===void 0&&(t[a]=s[a])}),t}function Vm(t){return typeof t!="string"?!1:[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(a=>a.test(t))}const An=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Bm=function(t,s){const n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{path:"/"},i=encodeURIComponent(s);let r=`${t}=${i}`;if(n.maxAge>0){const o=n.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");r+=`; Max-Age=${Math.floor(o)}`}if(n.domain){if(!An.test(n.domain))throw new TypeError("option domain is invalid");r+=`; Domain=${n.domain}`}if(n.path){if(!An.test(n.path))throw new TypeError("option path is invalid");r+=`; Path=${n.path}`}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");r+=`; Expires=${n.expires.toUTCString()}`}if(n.httpOnly&&(r+="; HttpOnly"),n.secure&&(r+="; Secure"),n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return n.partitioned&&(r+="; Partitioned"),r},kn={create(t,s,a,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};a&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+a*60*1e3)),n&&(i.domain=n),document.cookie=Bm(t,s,i)},read(t){const s=`${t}=`,a=document.cookie.split(";");for(let n=0;n<a.length;n++){let i=a[n];for(;i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(s)===0)return i.substring(s.length,i.length)}return null},remove(t,s){this.create(t,"",-1,s)}};var _m={name:"cookie",lookup(t){let{lookupCookie:s}=t;if(s&&typeof document<"u")return kn.read(s)||void 0},cacheUserLanguage(t,s){let{lookupCookie:a,cookieMinutes:n,cookieDomain:i,cookieOptions:r}=s;a&&typeof document<"u"&&kn.create(a,t,n,i,r)}},Hm={name:"querystring",lookup(t){var n;let{lookupQuerystring:s}=t,a;if(typeof window<"u"){let{search:i}=window.location;!window.location.search&&((n=window.location.hash)==null?void 0:n.indexOf("?"))>-1&&(i=window.location.hash.substring(window.location.hash.indexOf("?")));const o=i.substring(1).split("&");for(let l=0;l<o.length;l++){const d=o[l].indexOf("=");d>0&&o[l].substring(0,d)===s&&(a=o[l].substring(d+1))}}return a}},Gm={name:"hash",lookup(t){var i;let{lookupHash:s,lookupFromHashIndex:a}=t,n;if(typeof window<"u"){const{hash:r}=window.location;if(r&&r.length>2){const o=r.substring(1);if(s){const l=o.split("&");for(let d=0;d<l.length;d++){const c=l[d].indexOf("=");c>0&&l[d].substring(0,c)===s&&(n=l[d].substring(c+1))}}if(n)return n;if(!n&&a>-1){const l=r.match(/\/([a-zA-Z-]*)/g);return Array.isArray(l)?(i=l[typeof a=="number"?a:0])==null?void 0:i.replace("/",""):void 0}}}return n}};let wt=null;const Tn=()=>{if(wt!==null)return wt;try{if(wt=typeof window<"u"&&window.localStorage!==null,!wt)return!1;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{wt=!1}return wt};var Wm={name:"localStorage",lookup(t){let{lookupLocalStorage:s}=t;if(s&&Tn())return window.localStorage.getItem(s)||void 0},cacheUserLanguage(t,s){let{lookupLocalStorage:a}=s;a&&Tn()&&window.localStorage.setItem(a,t)}};let vt=null;const Dn=()=>{if(vt!==null)return vt;try{if(vt=typeof window<"u"&&window.sessionStorage!==null,!vt)return!1;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{vt=!1}return vt};var Zm={name:"sessionStorage",lookup(t){let{lookupSessionStorage:s}=t;if(s&&Dn())return window.sessionStorage.getItem(s)||void 0},cacheUserLanguage(t,s){let{lookupSessionStorage:a}=s;a&&Dn()&&window.sessionStorage.setItem(a,t)}},Qm={name:"navigator",lookup(t){const s=[];if(typeof navigator<"u"){const{languages:a,userLanguage:n,language:i}=navigator;if(a)for(let r=0;r<a.length;r++)s.push(a[r]);n&&s.push(n),i&&s.push(i)}return s.length>0?s:void 0}},zm={name:"htmlTag",lookup(t){let{htmlTag:s}=t,a;const n=s||(typeof document<"u"?document.documentElement:null);return n&&typeof n.getAttribute=="function"&&(a=n.getAttribute("lang")),a}},Km={name:"path",lookup(t){var i;let{lookupFromPathIndex:s}=t;if(typeof window>"u")return;const a=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(a)?(i=a[typeof s=="number"?s:0])==null?void 0:i.replace("/",""):void 0}},Ym={name:"subdomain",lookup(t){var i,r;let{lookupFromSubdomainIndex:s}=t;const a=typeof s=="number"?s+1:1,n=typeof window<"u"&&((r=(i=window.location)==null?void 0:i.hostname)==null?void 0:r.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(n)return n[a]}};let Fi=!1;try{document.cookie,Fi=!0}catch{}const $i=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Fi||$i.splice(1,1);const Jm=()=>({order:$i,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t});class qi{constructor(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(s,a)}init(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{languageUtils:{}},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=s,this.options=Um(a,this.options||{},Jm()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=i=>i.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(_m),this.addDetector(Hm),this.addDetector(Wm),this.addDetector(Zm),this.addDetector(Qm),this.addDetector(zm),this.addDetector(Km),this.addDetector(Ym),this.addDetector(Gm)}addDetector(s){return this.detectors[s.name]=s,this}detect(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options.order,a=[];return s.forEach(n=>{if(this.detectors[n]){let i=this.detectors[n].lookup(this.options);i&&typeof i=="string"&&(i=[i]),i&&(a=a.concat(i))}}),a=a.filter(n=>n!=null&&!Vm(n)).map(n=>this.options.convertDetectedLanguage(n)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?a:a.length>0?a[0]:null}cacheUserLanguage(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.options.caches;a&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(s)>-1||a.forEach(n=>{this.detectors[n]&&this.detectors[n].cacheUserLanguage(s,this.options)}))}}qi.type="languageDetector";const Xm={title:"Business Loan Management",subtitle:"Loan Processing & Management System",aiAssistant:"AI Assistant",settings:"Settings",logout:"Logout",profile:"Profile Settings",notifications:"Notification Settings",security:"Security",preferences:"Preferences"},e0={dashboard:"Dashboard",enquiries:"Enquiries",docVerification:"Doc Verification",shortlist:"Shortlist",paymentGateway:"Payment Gateway",applications:"Applications",staffManagement:"Staff Management",transactions:"Transactions"},t0={title:"Dashboard",totalEnquiries:"Total Enquiries",documentsAwaiting:"Documents Awaiting",clientsShortlisted:"Clients Shortlisted",paymentGatewayComplete:"Payment Gateway Complete",totalTransactions:"Total Transactions",enquiryFunnel:"Enquiry Funnel",rolePermissions:"Role Permissions",fullAccess:"Full Access - All Features",staffControl:"Staff Management & System Control",accessLevel:"Access Level",adminAccess:"Full administrative access",revenueUp:"Revenue up 21%",activeStaff:"7 Active Staff"},s0={title:"Enquiries",addNew:"Add New Enquiry",searchPlaceholder:"Search by name...",allStatuses:"All Statuses",clearFilters:"Clear Filters",refresh:"Refresh",name:"Name",mobile:"Mobile",businessType:"Business Type",status:"Status",staff:"Staff",actions:"Actions",view:"View",edit:"Edit",delete:"Delete",interested:"Interested",contacted:"Contacted",qualified:"Qualified",proposal:"Proposal",negotiation:"Negotiation",closed:"Closed"},a0={title:"Document Verification",upload:"Document Upload",selectEnquiry:"Select Enquiry",selectEnquiryPlaceholder:"Choose an enquiry to upload documents",documentType:"Document Type",selectFile:"Select File",uploadDocument:"Upload Document",documentList:"Document List",verified:"Verified",pending:"Pending",verify:"Verify",addToShortlist:"Add to Shortlist",allDocumentsVerified:"All Documents Verified!",readyForShortlist:"This client is ready to be added to shortlist",gstCertificate:"GST Certificate",udyamRegistration:"UDYAM Registration",bankStatement:"Bank Statement",panCard:"PAN Card",aadharCard:"Aadhar Card"},n0={title:"Shortlist",addNew:"Add New Shortlist",clientName:"Client Name",businessName:"Business Name",loanAmount:"Loan Amount",assignedStaff:"Assigned Staff",interestStatus:"Interest Status",apply:"Apply",basicInfo:"Basic Information",businessInfo:"Business Information",financialInfo:"Financial Information",staffStatus:"Staff & Status"},i0={title:"Payment Gateway Applications",newApplication:"New Application",clientName:"Client Name",loanAmount:"Loan Amount",status:"Status",submittedBy:"Submitted By",submissionDate:"Submission Date",pending:"Pending",approved:"Approved",rejected:"Rejected"},r0={title:"Staff Management",addNew:"Add New Staff",staffName:"Staff Name",email:"Email",role:"Role",department:"Department",status:"Status",admin:"Admin",employee:"Employee",manager:"Manager",active:"Active",inactive:"Inactive"},o0={title:"Transactions",addNew:"Add New Transaction",transactionName:"Transaction Name",date:"Date",time:"Time",transactionId:"Transaction ID",amount:"Amount",completed:"Completed",failed:"Failed"},l0={save:"Save",cancel:"Cancel",submit:"Submit",update:"Update",delete:"Delete",confirm:"Confirm",required:"Required",optional:"Optional",loading:"Loading...",success:"Success",error:"Error",pleaseWait:"Please wait..."},c0={title:"Notifications",markAllRead:"Mark all as read",newEnquiry:"New Enquiry",documentUploaded:"Document Uploaded",documentVerified:"Document Verified",clientShortlisted:"Client Shortlisted",paymentApplied:"Payment Applied",loanApproved:"Loan Approved",loanRejected:"Loan Rejected",transactionCompleted:"Transaction Completed"},d0={title:"Business Loan Enquiry",subtitle:"Submit your details. Our specialists will reach out within 24 hours.",businessName:"Business Name",ownerName:"Owner Name",emailAddress:"Email Address",phoneNumber:"Phone Number",loanAmount:"Loan Amount",loanPurpose:"Loan Purpose",annualRevenue:"Annual Revenue",businessDocuments:"Business Documents (Optional)",uploadDocuments:"Upload financial documents",submitApplication:"Submit Application",submitting:"Submitting...",termsText:"By submitting this form, you agree to our terms and privacy policy.",selectAmount:"Select amount",selectPurpose:"Select purpose",selectRevenue:"Select revenue range",workingCapital:"Working Capital",equipmentPurchase:"Equipment Purchase",businessExpansion:"Business Expansion",inventory:"Inventory",realEstate:"Real Estate",other:"Other"},u0={header:Xm,sidebar:e0,dashboard:t0,enquiries:s0,documents:a0,shortlist:n0,paymentGateway:i0,staff:r0,transactions:o0,forms:l0,notifications:c0,apply:d0},m0={title:"  ",subtitle:"    ",aiAssistant:" ",settings:"",logout:" ",profile:" ",notifications:" ",security:"",preferences:""},h0={dashboard:"",enquiries:"",docVerification:" ",shortlist:"",paymentGateway:" ",applications:"",staffManagement:" ",transactions:"-"},f0={title:"",totalEnquiries:" ",documentsAwaiting:" ",clientsShortlisted:" ",paymentGatewayComplete:"  ",totalTransactions:" -",enquiryFunnel:" ",rolePermissions:" ",fullAccess:"  -  ",staffControl:"    ",accessLevel:" ",adminAccess:"  ",revenueUp:"  21% ",activeStaff:"7  "},p0={title:"",addNew:"  ",searchPlaceholder:"  ...",allStatuses:" ",clearFilters:"  ",refresh:"",name:"",mobile:"",businessType:" ",status:"",staff:"",actions:"",view:"",edit:" ",delete:"",interested:"  ",contacted:"  ",qualified:"",proposal:"",negotiation:"",closed:""},x0={title:" ",upload:" ",selectEnquiry:" ",selectEnquiryPlaceholder:"       ",documentType:" ",selectFile:" ",uploadDocument:"  ",documentList:" ",verified:"",pending:"",verify:" ",addToShortlist:"  ",allDocumentsVerified:"  !",readyForShortlist:"         ",gstCertificate:" ",udyamRegistration:" ",bankStatement:" ",panCard:" ",aadharCard:" "},g0={title:"",addNew:"  ",clientName:"  ",businessName:"  ",loanAmount:" ",assignedStaff:" ",interestStatus:" ",apply:" ",basicInfo:" ",businessInfo:" ",financialInfo:" ",staffStatus:"  "},y0={title:"  ",newApplication:" ",clientName:"  ",loanAmount:" ",status:"",submittedBy:" ",submissionDate:" ",pending:"",approved:"",rejected:""},b0={title:" ",addNew:"  ",staffName:"  ",email:"",role:"",department:"",status:"",admin:"",employee:"",manager:"",active:"",inactive:""},N0={title:"-",addNew:" - ",transactionName:"-  ",date:"",time:"",transactionId:"- ",amount:"",completed:"",failed:""},w0={save:"",cancel:" ",submit:" ",update:" ",delete:"",confirm:" ",required:"",optional:"",loading:"   ...",success:"",error:"",pleaseWait:"  ..."},v0={title:"",markAllRead:"     ",newEnquiry:" ",documentUploaded:"   ",documentVerified:" ",clientShortlisted:" ",paymentApplied:" ",loanApproved:" ",loanRejected:" ",transactionCompleted:"- "},j0={title:"  ",subtitle:"      24     ",businessName:"  ",ownerName:"  ",emailAddress:" ",phoneNumber:" ",loanAmount:" ",loanPurpose:"  ",annualRevenue:" ",businessDocuments:"  ()",uploadDocuments:"   ",submitApplication:"  ",submitting:"   ...",termsText:"    ,         ",selectAmount:" ",selectPurpose:" ",selectRevenue:"  ",workingCapital:" ",equipmentPurchase:" ",businessExpansion:" ",inventory:"",realEstate:" ",other:""},S0={header:m0,sidebar:h0,dashboard:f0,enquiries:p0,documents:x0,shortlist:g0,paymentGateway:y0,staff:b0,transactions:N0,forms:w0,notifications:v0,apply:j0},E0={title:"  ",subtitle:"    ",aiAssistant:"AI ",settings:"",logout:"",profile:" ",notifications:" ",security:"",preferences:""},A0={dashboard:"",enquiries:"",docVerification:" ",shortlist:" ",paymentGateway:" ",applications:"",staffManagement:" ",transactions:""},k0={title:"",totalEnquiries:" ",documentsAwaiting:" ",clientsShortlisted:"  ",paymentGatewayComplete:"  ",totalTransactions:" ",enquiryFunnel:" ",rolePermissions:" ",fullAccess:"  -  ",staffControl:"    ",accessLevel:" ",adminAccess:"  ",revenueUp:" 21% ",activeStaff:"7   "},T0={title:"",addNew:"  ",searchPlaceholder:" ...",allStatuses:" ",clearFilters:" ",refresh:"",name:"",mobile:"",businessType:" ",status:"",staff:"",actions:"",view:"",edit:"",delete:"",interested:"",contacted:" ",qualified:"",proposal:"",negotiation:"",closed:""},D0={title:" ",upload:" ",selectEnquiry:" ",selectEnquiryPlaceholder:"    ",documentType:" ",selectFile:" ",uploadDocument:" ",documentList:" ",verified:"",pending:"",verify:"",addToShortlist:"  ",allDocumentsVerified:"  !",readyForShortlist:"     ",gstCertificate:"GST ",udyamRegistration:" ",bankStatement:" ",panCard:"PAN ",aadharCard:" "},C0={title:" ",addNew:"   ",clientName:" ",businessName:" ",loanAmount:" ",assignedStaff:" ",interestStatus:" ",apply:"",basicInfo:" ",businessInfo:" ",financialInfo:" ",staffStatus:"  "},R0={title:"  ",newApplication:" ",clientName:" ",loanAmount:" ",status:"",submittedBy:"",submissionDate:" ",pending:"",approved:"",rejected:""},I0={title:" ",addNew:"  ",staffName:" ",email:"",role:"",department:"",status:"",admin:"",employee:"",manager:"",active:"",inactive:""},L0={title:"",addNew:"  ",transactionName:" ",date:"",time:"",transactionId:" ID",amount:"",completed:"",failed:""},O0={save:"",cancel:" ",submit:"",update:"",delete:"",confirm:"",required:"",optional:"",loading:"...",success:"",error:"",pleaseWait:" ..."},P0={title:"",markAllRead:"  ",newEnquiry:" ",documentUploaded:" ",documentVerified:" ",clientShortlisted:"  ",paymentApplied:" ",loanApproved:" ",loanRejected:" ",transactionCompleted:" "},M0={title:"  ",subtitle:"  .   24    .",businessName:" ",ownerName:" ",emailAddress:" ",phoneNumber:" ",loanAmount:" ",loanPurpose:" ",annualRevenue:" ",businessDocuments:"  ()",uploadDocuments:"  ",submitApplication:" ",submitting:"...",termsText:"   ,      .",selectAmount:" ",selectPurpose:" ",selectRevenue:"  ",workingCapital:" ",equipmentPurchase:" ",businessExpansion:" ",inventory:"",realEstate:" ",other:""},F0={header:E0,sidebar:A0,dashboard:k0,enquiries:T0,documents:D0,shortlist:C0,paymentGateway:R0,staff:I0,transactions:L0,forms:O0,notifications:P0,apply:M0},$0={title:"  ",subtitle:"    ",aiAssistant:"AI ",settings:"",logout:" ",profile:" ",notifications:" ",security:"",preferences:""},q0={dashboard:"",enquiries:"",docVerification:" ",shortlist:"",paymentGateway:" ",applications:"",staffManagement:" ",transactions:""},U0={title:"",totalEnquiries:" ",documentsAwaiting:"  ",clientsShortlisted:" ",paymentGatewayComplete:"  ",totalTransactions:" ",enquiryFunnel:" ",rolePermissions:" ",fullAccess:"  -  ",staffControl:"    ",accessLevel:" ",adminAccess:"  ",revenueUp:" 21% ",activeStaff:"7  "},V0={title:"",addNew:"  ",searchPlaceholder:" ...",allStatuses:" ",clearFilters:"  ",refresh:"",name:"",mobile:"",businessType:" ",status:"",staff:"",actions:"",view:"",edit:"",delete:"",interested:" ",contacted:"",qualified:" ",proposal:"",negotiation:"",closed:""},B0={title:" ",upload:" ",selectEnquiry:" ",selectEnquiryPlaceholder:"    ",documentType:" ",selectFile:" ",uploadDocument:"  ",documentList:" ",verified:" ",pending:"",verify:" ",addToShortlist:" ",allDocumentsVerified:"   !",readyForShortlist:"     ",gstCertificate:"GST ",udyamRegistration:" ",bankStatement:" ",panCard:"PAN ",aadharCard:" "},_0={title:"",addNew:"  ",clientName:" ",businessName:" ",loanAmount:" ",assignedStaff:" ",interestStatus:" ",apply:" ",basicInfo:" ",businessInfo:" ",financialInfo:" ",staffStatus:"  "},H0={title:"  ",newApplication:" ",clientName:" ",loanAmount:" ",status:"",submittedBy:"",submissionDate:" ",pending:"",approved:"",rejected:""},G0={title:" ",addNew:"  ",staffName:" ",email:"",role:"",department:"",status:"",admin:"",employee:"",manager:"",active:"",inactive:""},W0={title:"",addNew:"  ",transactionName:" ",date:"",time:"",transactionId:" ID",amount:"",completed:"",failed:""},Z0={save:" ",cancel:" ",submit:"",update:" ",delete:"",confirm:"",required:"",optional:"",loading:" ...",success:"",error:"",pleaseWait:"  ..."},Q0={title:"",markAllRead:"   ",newEnquiry:" ",documentUploaded:"  ",documentVerified:"  ",clientShortlisted:" ",paymentApplied:" ",loanApproved:" ",loanRejected:" ",transactionCompleted:" "},z0={title:"  ",subtitle:"  .   24  .",businessName:" ",ownerName:" ",emailAddress:" ",phoneNumber:" ",loanAmount:" ",loanPurpose:" ",annualRevenue:" ",businessDocuments:"  ()",uploadDocuments:"   ",submitApplication:" ",submitting:"...",termsText:"   ,       .",selectAmount:" ",selectPurpose:" ",selectRevenue:"  ",workingCapital:" ",equipmentPurchase:" ",businessExpansion:" ",inventory:"",realEstate:" ",other:""},K0={header:$0,sidebar:q0,dashboard:U0,enquiries:V0,documents:B0,shortlist:_0,paymentGateway:H0,staff:G0,transactions:W0,forms:Z0,notifications:Q0,apply:z0},Y0={en:{translation:u0},hi:{translation:S0},ta:{translation:F0},te:{translation:K0}};Te.use(qi).use($l).init({resources:Y0,fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator","htmlTag"],caches:["localStorage"]},react:{useSuspense:!1}});const Ui=new Ki({defaultOptions:{queries:{staleTime:5*60*1e3,cacheTime:30*60*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchOnReconnect:!0,refetchInterval:3*60*1e3,refetchIntervalInBackground:!1,suspense:!1,useErrorBoundary:!1,retry:(t,s)=>{var a,n;return((a=s==null?void 0:s.response)==null?void 0:a.status)>=400&&((n=s==null?void 0:s.response)==null?void 0:n.status)<500?!1:t<3},retryDelay:t=>{const s=Math.min(1e3*2**t,15e3);return console.log(` [RENDER] Query retry ${t+1} in ${s}ms`),s},keepPreviousData:!0,notifyOnChangeProps:["data","error","isLoading"],onError:t=>{var s,a;console.error(" [RENDER] Global query error:",{message:t.message,status:(s=t.response)==null?void 0:s.status,url:(a=t.config)==null?void 0:a.url,timestamp:new Date().toISOString()})},onSuccess:t=>{console.log(" [RENDER] Global query success:",{dataType:Array.isArray(t)?"array":typeof t,length:Array.isArray(t)?t.length:"N/A",timestamp:new Date().toISOString()})}},mutations:{retry:(t,s)=>{var a,n;return((a=s==null?void 0:s.response)==null?void 0:a.status)>=400&&((n=s==null?void 0:s.response)==null?void 0:n.status)<500?!1:t<1},retryDelay:2e3,onMutate:async()=>{console.log(" [RENDER] Mutation starting - canceling queries"),await Ui.cancelQueries()},onError:t=>{var s,a;console.error(" [RENDER] Global mutation error:",{message:t.message,status:(s=t.response)==null?void 0:s.status,url:(a=t.config)==null?void 0:a.url,timestamp:new Date().toISOString()})},onSuccess:t=>{console.log(" [RENDER] Global mutation success:",{dataType:typeof t,timestamp:new Date().toISOString()})}}}});console.log(" [RENDER] React Query client initialized with Render-optimized configuration");console.log(" [RENDER] Query settings:",{staleTime:"3 minutes",cacheTime:"20 minutes",refetchInterval:"2 minutes",retryAttempts:"3 (with smart error handling)",timestamp:new Date().toISOString()});function J0(){return console.log(" [RENDER] App component initializing..."),e.jsx(xm,{children:e.jsx(Yi,{client:Ui,children:e.jsx(Al,{children:e.jsx(fu,{children:e.jsxs(zi,{children:[e.jsx(pm,{}),e.jsx(gm,{}),e.jsx(Gr,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff"},success:{duration:3e3,iconTheme:{primary:"#4ade80",secondary:"#fff"}},error:{duration:5e3,iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})})})})}Ws.createRoot(document.getElementById("root")).render(e.jsx(be.StrictMode,{children:e.jsx(J0,{})}));
