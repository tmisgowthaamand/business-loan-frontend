var Qr=Object.defineProperty;var Gr=(t,s,a)=>s in t?Qr(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a;var qt=(t,s,a)=>(Gr(t,typeof s!="symbol"?s+"":s,a),a);import{r as c,c as zr,b as je}from"./vendor-eca221ea.js";import{N as Zr,u as Ge,L as Ae,a as rs,b as Yr,c as _s,R as ra,d as fe,e as gs,B as Kr}from"./router-2ba008ad.js";import{u as Oe,a as me,b as ge,Q as Jr,c as Xr}from"./query-24e528e4.js";import{A as Bs,m as O}from"./ui-678d8bf8.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function a(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=a(n);fetch(n.href,i)}})();var Ba={exports:{}},ns={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var en=c,tn=Symbol.for("react.element"),sn=Symbol.for("react.fragment"),an=Object.prototype.hasOwnProperty,rn=en.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nn={key:!0,ref:!0,__self:!0,__source:!0};function Va(t,s,a){var r,n={},i=null,l=null;a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),s.ref!==void 0&&(l=s.ref);for(r in s)an.call(s,r)&&!nn.hasOwnProperty(r)&&(n[r]=s[r]);if(t&&t.defaultProps)for(r in s=t.defaultProps,s)n[r]===void 0&&(n[r]=s[r]);return{$$typeof:tn,type:t,key:i,ref:l,props:n,_owner:rn.current}}ns.Fragment=sn;ns.jsx=Va;ns.jsxs=Va;Ba.exports=ns;var e=Ba.exports,As={},na=zr;As.createRoot=na.createRoot,As.hydrateRoot=na.hydrateRoot;let ln={data:""},on=t=>{if(typeof window=="object"){let s=(t?t.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return s.nonce=window.__nonce__,s.parentNode||(t||document.head).appendChild(s),s.firstChild}return t||ln},cn=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,dn=/\/\*[^]*?\*\/|  +/g,ia=/\n+/g,tt=(t,s)=>{let a="",r="",n="";for(let i in t){let l=t[i];i[0]=="@"?i[1]=="i"?a=i+" "+l+";":r+=i[1]=="f"?tt(l,i):i+"{"+tt(l,i[1]=="k"?"":s)+"}":typeof l=="object"?r+=tt(l,s?s.replace(/([^,])+/g,o=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,p=>/&/.test(p)?p.replace(/&/g,o):o?o+" "+p:p)):i):l!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=tt.p?tt.p(i,l):i+":"+l+";")}return a+(s&&n?s+"{"+n+"}":n)+r},ze={},Wa=t=>{if(typeof t=="object"){let s="";for(let a in t)s+=a+Wa(t[a]);return s}return t},mn=(t,s,a,r,n)=>{let i=Wa(t),l=ze[i]||(ze[i]=(p=>{let h=0,f=11;for(;h<p.length;)f=101*f+p.charCodeAt(h++)>>>0;return"go"+f})(i));if(!ze[l]){let p=i!==t?t:(h=>{let f,b,x=[{}];for(;f=cn.exec(h.replace(dn,""));)f[4]?x.shift():f[3]?(b=f[3].replace(ia," ").trim(),x.unshift(x[0][b]=x[0][b]||{})):x[0][f[1]]=f[2].replace(ia," ").trim();return x[0]})(t);ze[l]=tt(n?{["@keyframes "+l]:p}:p,a?"":"."+l)}let o=a&&ze.g?ze.g:null;return a&&(ze.g=ze[l]),((p,h,f,b)=>{b?h.data=h.data.replace(b,p):h.data.indexOf(p)===-1&&(h.data=f?p+h.data:h.data+p)})(ze[l],s,r,o),l},un=(t,s,a)=>t.reduce((r,n,i)=>{let l=s[i];if(l&&l.call){let o=l(a),p=o&&o.props&&o.props.className||/^go/.test(o)&&o;l=p?"."+p:o&&typeof o=="object"?o.props?"":tt(o,""):o===!1?"":o}return r+n+(l??"")},"");function is(t){let s=this||{},a=t.call?t(s.p):t;return mn(a.unshift?a.raw?un(a,[].slice.call(arguments,1),s.p):a.reduce((r,n)=>Object.assign(r,n&&n.call?n(s.p):n),{}):a,on(s.target),s.g,s.o,s.k)}let Ha,Cs,Ts;is.bind({g:1});let Je=is.bind({k:1});function xn(t,s,a,r){tt.p=s,Ha=t,Cs=a,Ts=r}function rt(t,s){let a=this||{};return function(){let r=arguments;function n(i,l){let o=Object.assign({},i),p=o.className||n.className;a.p=Object.assign({theme:Cs&&Cs()},o),a.o=/ *go\d+/.test(p),o.className=is.apply(a,r)+(p?" "+p:""),s&&(o.ref=l);let h=t;return t[0]&&(h=o.as||t,delete o.as),Ts&&h[0]&&Ts(o),Ha(h,o)}return s?s(n):n}}var hn=t=>typeof t=="function",Zt=(t,s)=>hn(t)?t(s):t,fn=(()=>{let t=0;return()=>(++t).toString()})(),Qa=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let s=matchMedia("(prefers-reduced-motion: reduce)");t=!s||s.matches}return t}})(),pn=20,Vs="default",Ga=(t,s)=>{let{toastLimit:a}=t.settings;switch(s.type){case 0:return{...t,toasts:[s.toast,...t.toasts].slice(0,a)};case 1:return{...t,toasts:t.toasts.map(l=>l.id===s.toast.id?{...l,...s.toast}:l)};case 2:let{toast:r}=s;return Ga(t,{type:t.toasts.find(l=>l.id===r.id)?1:0,toast:r});case 3:let{toastId:n}=s;return{...t,toasts:t.toasts.map(l=>l.id===n||n===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(l=>l.id!==s.toastId)};case 5:return{...t,pausedAt:s.time};case 6:let i=s.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+i}))}}},Vt=[],za={toasts:[],pausedAt:void 0,settings:{toastLimit:pn}},He={},Za=(t,s=Vs)=>{He[s]=Ga(He[s]||za,t),Vt.forEach(([a,r])=>{a===s&&r(He[s])})},Ya=t=>Object.keys(He).forEach(s=>Za(t,s)),gn=t=>Object.keys(He).find(s=>He[s].toasts.some(a=>a.id===t)),ls=(t=Vs)=>s=>{Za(s,t)},bn={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},yn=(t={},s=Vs)=>{let[a,r]=c.useState(He[s]||za),n=c.useRef(He[s]);c.useEffect(()=>(n.current!==He[s]&&r(He[s]),Vt.push([s,r]),()=>{let l=Vt.findIndex(([o])=>o===s);l>-1&&Vt.splice(l,1)}),[s]);let i=a.toasts.map(l=>{var o,p,h;return{...t,...t[l.type],...l,removeDelay:l.removeDelay||((o=t[l.type])==null?void 0:o.removeDelay)||(t==null?void 0:t.removeDelay),duration:l.duration||((p=t[l.type])==null?void 0:p.duration)||(t==null?void 0:t.duration)||bn[l.type],style:{...t.style,...(h=t[l.type])==null?void 0:h.style,...l.style}}});return{...a,toasts:i}},jn=(t,s="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:s,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...a,id:(a==null?void 0:a.id)||fn()}),Lt=t=>(s,a)=>{let r=jn(s,t,a);return ls(r.toasterId||gn(r.id))({type:2,toast:r}),r.id},Ne=(t,s)=>Lt("blank")(t,s);Ne.error=Lt("error");Ne.success=Lt("success");Ne.loading=Lt("loading");Ne.custom=Lt("custom");Ne.dismiss=(t,s)=>{let a={type:3,toastId:t};s?ls(s)(a):Ya(a)};Ne.dismissAll=t=>Ne.dismiss(void 0,t);Ne.remove=(t,s)=>{let a={type:4,toastId:t};s?ls(s)(a):Ya(a)};Ne.removeAll=t=>Ne.remove(void 0,t);Ne.promise=(t,s,a)=>{let r=Ne.loading(s.loading,{...a,...a==null?void 0:a.loading});return typeof t=="function"&&(t=t()),t.then(n=>{let i=s.success?Zt(s.success,n):void 0;return i?Ne.success(i,{id:r,...a,...a==null?void 0:a.success}):Ne.dismiss(r),n}).catch(n=>{let i=s.error?Zt(s.error,n):void 0;i?Ne.error(i,{id:r,...a,...a==null?void 0:a.error}):Ne.dismiss(r)}),t};var Nn=1e3,vn=(t,s="default")=>{let{toasts:a,pausedAt:r}=yn(t,s),n=c.useRef(new Map).current,i=c.useCallback((b,x=Nn)=>{if(n.has(b))return;let w=setTimeout(()=>{n.delete(b),l({type:4,toastId:b})},x);n.set(b,w)},[]);c.useEffect(()=>{if(r)return;let b=Date.now(),x=a.map(w=>{if(w.duration===1/0)return;let g=(w.duration||0)+w.pauseDuration-(b-w.createdAt);if(g<0){w.visible&&Ne.dismiss(w.id);return}return setTimeout(()=>Ne.dismiss(w.id,s),g)});return()=>{x.forEach(w=>w&&clearTimeout(w))}},[a,r,s]);let l=c.useCallback(ls(s),[s]),o=c.useCallback(()=>{l({type:5,time:Date.now()})},[l]),p=c.useCallback((b,x)=>{l({type:1,toast:{id:b,height:x}})},[l]),h=c.useCallback(()=>{r&&l({type:6,time:Date.now()})},[r,l]),f=c.useCallback((b,x)=>{let{reverseOrder:w=!1,gutter:g=8,defaultPosition:N}=x||{},d=a.filter(y=>(y.position||N)===(b.position||N)&&y.height),E=d.findIndex(y=>y.id===b.id),j=d.filter((y,m)=>m<E&&y.visible).length;return d.filter(y=>y.visible).slice(...w?[j+1]:[0,j]).reduce((y,m)=>y+(m.height||0)+g,0)},[a]);return c.useEffect(()=>{a.forEach(b=>{if(b.dismissed)i(b.id,b.removeDelay);else{let x=n.get(b.id);x&&(clearTimeout(x),n.delete(b.id))}})},[a,i]),{toasts:a,handlers:{updateHeight:p,startPause:o,endPause:h,calculateOffset:f}}},wn=Je`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Sn=Je`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,En=Je`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,kn=rt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${wn} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Sn} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${En} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,An=Je`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Cn=rt("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${An} 1s linear infinite;
`,Tn=Je`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Dn=Je`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ln=rt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Tn} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Dn} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Rn=rt("div")`
  position: absolute;
`,In=rt("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Pn=Je`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,On=rt("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Pn} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Mn=({toast:t})=>{let{icon:s,type:a,iconTheme:r}=t;return s!==void 0?typeof s=="string"?c.createElement(On,null,s):s:a==="blank"?null:c.createElement(In,null,c.createElement(Cn,{...r}),a!=="loading"&&c.createElement(Rn,null,a==="error"?c.createElement(kn,{...r}):c.createElement(Ln,{...r})))},Fn=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,qn=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,$n="0%{opacity:0;} 100%{opacity:1;}",Un="0%{opacity:1;} 100%{opacity:0;}",_n=rt("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Bn=rt("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Vn=(t,s)=>{let a=t.includes("top")?1:-1,[r,n]=Qa()?[$n,Un]:[Fn(a),qn(a)];return{animation:s?`${Je(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Je(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Wn=c.memo(({toast:t,position:s,style:a,children:r})=>{let n=t.height?Vn(t.position||s||"top-center",t.visible):{opacity:0},i=c.createElement(Mn,{toast:t}),l=c.createElement(Bn,{...t.ariaProps},Zt(t.message,t));return c.createElement(_n,{className:t.className,style:{...n,...a,...t.style}},typeof r=="function"?r({icon:i,message:l}):c.createElement(c.Fragment,null,i,l))});xn(c.createElement);var Hn=({id:t,className:s,style:a,onHeightUpdate:r,children:n})=>{let i=c.useCallback(l=>{if(l){let o=()=>{let p=l.getBoundingClientRect().height;r(t,p)};o(),new MutationObserver(o).observe(l,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return c.createElement("div",{ref:i,className:s,style:a},n)},Qn=(t,s)=>{let a=t.includes("top"),r=a?{top:0}:{bottom:0},n=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Qa()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${s*(a?1:-1)}px)`,...r,...n}},Gn=is`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,$t=16,zn=({reverseOrder:t,position:s="top-center",toastOptions:a,gutter:r,children:n,toasterId:i,containerStyle:l,containerClassName:o})=>{let{toasts:p,handlers:h}=vn(a,i);return c.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:$t,left:$t,right:$t,bottom:$t,pointerEvents:"none",...l},className:o,onMouseEnter:h.startPause,onMouseLeave:h.endPause},p.map(f=>{let b=f.position||s,x=h.calculateOffset(f,{reverseOrder:t,gutter:r,defaultPosition:s}),w=Qn(b,x);return c.createElement(Hn,{id:f.id,key:f.id,onHeightUpdate:h.updateHeight,className:f.visible?Gn:"",style:w},f.type==="custom"?Zt(f.message,f):n?n(f):c.createElement(Wn,{toast:f,position:b}))}))},I=Ne;const Ka=c.createContext(void 0),Zn=({children:t})=>{const[s,a]=c.useState(null),[r,n]=c.useState(!1),[i,l]=c.useState(!0);c.useEffect(()=>{localStorage.getItem("token")?o():l(!1)},[]);const o=async()=>{try{const b=localStorage.getItem("user");if(b){const x=JSON.parse(b);a(x),n(!0)}else a({id:1,name:"Demo User",email:"demo@example.com",role:"ADMIN"}),n(!0)}catch{localStorage.removeItem("token"),localStorage.removeItem("user")}finally{l(!1)}},p=async b=>{try{console.log("🔐 Attempting login with:",b.email);const w=[{id:1,name:"Admin User",email:"admin@gmail.com",role:"ADMIN",password:"admin123"},{id:2,name:"Pankil",email:"govindamarketing9998@gmail.com",role:"ADMIN",password:"admin123"},{id:3,name:"Venkat",email:"govindamanager9998@gmail.com",role:"EMPLOYEE",password:"admin123"},{id:4,name:"Dinesh",email:"dinesh@gmail.com",role:"EMPLOYEE",password:"admin123"}].find(d=>d.email===b.email&&d.password===b.password);if(w){console.log("✅ Demo user login successful:",w.name);const d={id:w.id,name:w.name,email:w.email,role:w.role};localStorage.setItem("token","demo-token-"+w.id),localStorage.setItem("user",JSON.stringify(d)),a(d),n(!0),I.success(`Login successful! Welcome ${d.name}`);return}console.log("🔐 Making request to: /api/auth/login");const g=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});console.log("📡 Response status:",g.status);const N=await g.json();if(console.log("📦 Response data:",N),g.ok&&N.access_token)console.log("✅ Backend login successful, setting user data..."),localStorage.setItem("token",N.access_token),localStorage.setItem("user",JSON.stringify(N.user)),a(N.user),n(!0),I.success(`Login successful! Welcome ${N.user.name}`);else throw console.error("❌ Login failed - no access token or bad response"),new Error(N.message||"Login failed")}catch(x){throw console.error("❌ Login error:",x),I.error(x.message||"Login failed"),x}},h=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),a(null),n(!1),I.success("Logged out successfully")},f=async b=>{try{console.log("🔄 Force fresh login for:",b.email),localStorage.removeItem("token"),localStorage.removeItem("user"),a(null),n(!1);const x=await fetch("/api/auth/force-fresh-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),w=await x.json();if(x.ok&&w.access_token)localStorage.setItem("token",w.access_token),localStorage.setItem("user",JSON.stringify(w.user)),a(w.user),n(!0),console.log("✅ Force fresh login successful:",w.user),I.success(`Fresh login successful! Welcome ${w.user.name} (${w.user.role})`);else throw new Error(w.message||"Fresh login failed")}catch(x){throw console.error("❌ Force fresh login error:",x),I.error(x.message||"Fresh login failed"),x}};return e.jsx(Ka.Provider,{value:{user:s,login:p,logout:h,isAuthenticated:r,loading:i,forceFreshLogin:f},children:t})},_e=()=>{const t=c.useContext(Ka);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t};function Yn({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 13.5 12 21m0 0-7.5-7.5M12 21V3"}))}const Kn=c.forwardRef(Yn),Ja=Kn;function Jn({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"}))}const Xn=c.forwardRef(Jn),bt=Xn;function ei({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"}))}const ti=c.forwardRef(ei),Yt=ti;function si({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const ai=c.forwardRef(si),Xa=ai;function ri({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const ni=c.forwardRef(ri),Ds=ni;function ii({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"}))}const li=c.forwardRef(ii),er=li;function oi({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"}))}const ci=c.forwardRef(oi),di=ci;function mi({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"}))}const ui=c.forwardRef(mi),xi=ui;function hi({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"}))}const fi=c.forwardRef(hi),pi=fi;function gi({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"}))}const bi=c.forwardRef(gi),bs=bi;function yi({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const ji=c.forwardRef(yi),Dt=ji;function Ni({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 21h16.5M4.5 3h15M5.25 3v18m13.5-18v18M9 6.75h1.5m-1.5 3h1.5m-1.5 3h1.5m3-6H15m-1.5 3H15m-1.5 3H15M9 21v-3.375c0-.621.504-1.125 1.125-1.125h3.75c.621 0 1.125.504 1.125 1.125V21"}))}const vi=c.forwardRef(Ni),wi=vi;function Si({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const Ei=c.forwardRef(Si),Kt=Ei;function ki({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 0 1-.825-.242m9.345-8.334a2.126 2.126 0 0 0-.476-.095 48.64 48.64 0 0 0-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0 0 11.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"}))}const Ai=c.forwardRef(ki),tr=Ai;function Ci({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Ti=c.forwardRef(Ci),Re=Ti;function Di({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const Li=c.forwardRef(Di),Ws=Li;function Ri({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"}))}const Ii=c.forwardRef(Ri),Pi=Ii;function Oi({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const Mi=c.forwardRef(Oi),Fi=Mi;function qi({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const $i=c.forwardRef(qi),Rt=$i;function Ui({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const _i=c.forwardRef(Ui),Ls=_i;function Bi({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 0 0 2.25-2.25V6.75a2.25 2.25 0 0 0-2.25-2.25H6.75A2.25 2.25 0 0 0 4.5 6.75v10.5a2.25 2.25 0 0 0 2.25 2.25Zm.75-12h9v9h-9v-9Z"}))}const Vi=c.forwardRef(Bi),Wi=Vi;function Hi({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"}))}const Qi=c.forwardRef(Hi),sr=Qi;function Gi({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 8.25H9m6 3H9m3 6-3-3h1.5a3 3 0 1 0 0-6M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const zi=c.forwardRef(Gi),Wt=zi;function Zi({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m6.75 12-3-3m0 0-3 3m3-3v6m-1.5-15H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const Yi=c.forwardRef(Zi),Ki=Yi;function Ji({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.125 2.25h-4.5c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125v-9M10.125 2.25h.375a9 9 0 0 1 9 9v.375M10.125 2.25A3.375 3.375 0 0 1 13.5 5.625v1.5c0 .621.504 1.125 1.125 1.125h1.5a3.375 3.375 0 0 1 3.375 3.375M9 15l2.25 2.25L15 12"}))}const Xi=c.forwardRef(Ji),ys=Xi;function el({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const tl=c.forwardRef(el),it=tl;function sl({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const al=c.forwardRef(sl),st=al;function rl({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const nl=c.forwardRef(rl),il=nl;function ll({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const ol=c.forwardRef(ll),Jt=ol;function cl({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const dl=c.forwardRef(cl),Ie=dl;function ml({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.362 5.214A8.252 8.252 0 0 1 12 21 8.25 8.25 0 0 1 6.038 7.047 8.287 8.287 0 0 0 9 9.601a8.983 8.983 0 0 1 3.361-6.867 8.21 8.21 0 0 0 3 2.48Z"}),c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18a3.75 3.75 0 0 0 .495-7.468 5.99 5.99 0 0 0-1.925 3.547 5.975 5.975 0 0 1-2.133-1.001A3.75 3.75 0 0 0 12 18Z"}))}const ul=c.forwardRef(ml),xl=ul;function hl({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))}const fl=c.forwardRef(hl),pl=fl;function gl({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9.004 9.004 0 0 0 8.716-6.747M12 21a9.004 9.004 0 0 1-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 0 1 7.843 4.582M12 3a8.997 8.997 0 0 0-7.843 4.582m15.686 0A11.953 11.953 0 0 1 12 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0 1 21 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0 1 12 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 0 1 3 12c0-1.605.42-3.113 1.157-4.418"}))}const bl=c.forwardRef(gl),yl=bl;function jl({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const Nl=c.forwardRef(jl),vl=Nl;function wl({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z"}))}const Sl=c.forwardRef(wl),El=Sl;function kl({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const Al=c.forwardRef(kl),Cl=Al;function Tl({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}const Dl=c.forwardRef(Tl),ut=Dl;function Ll({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.53 16.122a3 3 0 0 0-5.78 1.128 2.25 2.25 0 0 1-2.4 2.245 4.5 4.5 0 0 0 8.4-2.245c0-.399-.078-.78-.22-1.128Zm0 0a15.998 15.998 0 0 0 3.388-1.62m-5.043-.025a15.994 15.994 0 0 1 1.622-3.395m3.42 3.42a15.995 15.995 0 0 0 4.764-4.648l3.876-5.814a1.151 1.151 0 0 0-1.597-1.597L14.146 6.32a15.996 15.996 0 0 0-4.649 4.763m3.42 3.42a6.776 6.776 0 0 0-3.42-3.42"}))}const Rl=c.forwardRef(Ll),Il=Rl;function Pl({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}const Ol=c.forwardRef(Pl),Ml=Ol;function Fl({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))}const ql=c.forwardRef(Fl),Ke=ql;function $l({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const Ul=c.forwardRef($l),_l=Ul;function Bl({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const Vl=c.forwardRef(Bl),ct=Vl;function Wl({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const Hl=c.forwardRef(Wl),Xt=Hl;function Ql({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const Gl=c.forwardRef(Ql),zl=Gl;function Zl({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"}))}const Yl=c.forwardRef(Zl),js=Yl;function Kl({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))}const Jl=c.forwardRef(Kl),Xl=Jl;function eo({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const to=c.forwardRef(eo),xt=to;function so({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 18.75h-9m9 0a3 3 0 0 1 3 3h-15a3 3 0 0 1 3-3m9 0v-3.375c0-.621-.503-1.125-1.125-1.125h-.871M7.5 18.75v-3.375c0-.621.504-1.125 1.125-1.125h.872m5.007 0H9.497m5.007 0a7.454 7.454 0 0 1-.982-3.172M9.497 14.25a7.454 7.454 0 0 0 .981-3.172M5.25 4.236c-.982.143-1.954.317-2.916.52A6.003 6.003 0 0 0 7.73 9.728M5.25 4.236V4.5c0 2.108.966 3.99 2.48 5.228M5.25 4.236V2.721C7.456 2.41 9.71 2.25 12 2.25c2.291 0 4.545.16 6.75.47v1.516M7.73 9.728a6.726 6.726 0 0 0 2.748 1.35m8.272-6.842V4.5c0 2.108-.966 3.99-2.48 5.228m2.48-5.492a46.32 46.32 0 0 1 2.916.52 6.003 6.003 0 0 1-5.395 4.972m0 0a6.726 6.726 0 0 1-2.749 1.35m0 0a6.772 6.772 0 0 1-3.044 0"}))}const ao=c.forwardRef(so),la=ao;function ro({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}const no=c.forwardRef(ro),ar=no;function io({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 7.5v3m0 0v3m0-3h3m-3 0h-3m-2.25-4.125a3.375 3.375 0 1 1-6.75 0 3.375 3.375 0 0 1 6.75 0ZM3 19.235v-.11a6.375 6.375 0 0 1 12.75 0v.109A12.318 12.318 0 0 1 9.374 21c-2.331 0-4.512-.645-6.374-1.766Z"}))}const lo=c.forwardRef(io),At=lo;function oo({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const co=c.forwardRef(oo),Xe=co;function mo({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const uo=c.forwardRef(mo),dt=uo;function xo({title:t,titleId:s,...a},r){return c.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":s},a),t?c.createElement("title",{id:s},t):null,c.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const ho=c.forwardRef(xo),Qe=ho;function fo(){var n;const{user:t,logout:s}=_e(),a=(t==null?void 0:t.role)==="ADMIN",r=[{name:"Dashboard",href:"/dashboard",icon:vl,show:!0},{name:"Enquiries",href:"/enquiries",icon:it,show:!0},{name:"Doc Verification",href:"/documents",icon:pl,show:!0},{name:"Shortlist",href:"/shortlist",icon:Cl,show:!0},{name:"Payment Gateway Applications",href:"/payment-gateway",icon:sr,show:!0},{name:"Staff Management",href:"/staff",icon:ar,show:a},{name:"Transactions",href:"/transactions",icon:pi,show:a}];return e.jsxs("aside",{className:"sidebar-modern",children:[e.jsx("div",{className:"p-8 border-b border-slate-700/50",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:"/generated-image.png",alt:"Company Logo",className:"w-20 h-20 object-contain drop-shadow-2xl hover:scale-110 transition-transform duration-300",style:{filter:"contrast(2.2) saturate(2.0) brightness(1.8)",imageRendering:"crisp-edges",maxWidth:"100%",maxHeight:"100%"}})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-white text-xl font-poppins font-bold",children:"Portal"}),e.jsx("p",{className:"text-slate-300 text-sm font-medium",children:"Business Loan Management"})]})]})}),e.jsx("nav",{className:"py-6",children:e.jsx("ul",{className:"space-y-1",children:r.filter(i=>i.show).map(i=>e.jsx("li",{children:e.jsxs(Zr,{to:i.href,className:({isActive:l})=>`sidebar-nav-item ${l?"active":""}`,children:[e.jsx(i.icon,{className:"h-5 w-5 mr-4"}),e.jsx("span",{className:"font-medium",children:i.name})]})},i.name))})}),e.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-6 border-t border-slate-700/50 bg-slate-900/50 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-semibold text-white",children:((n=t==null?void 0:t.name)==null?void 0:n.charAt(0))||"U"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-white truncate",children:t==null?void 0:t.name}),e.jsx("div",{className:"text-slate-400 text-sm",children:t==null?void 0:t.role})]})]}),e.jsxs("button",{onClick:s,className:"flex items-center w-full px-4 py-3 text-slate-300 hover:text-white hover:bg-red-500/20 hover:border-red-400 rounded-xl transition-all duration-200 border border-slate-700 hover:border-red-400",children:[e.jsx(Xa,{className:"h-5 w-5 mr-3"}),e.jsx("span",{className:"font-medium",children:"Logout"})]})]})]})}const po=()=>({t:(t,s)=>s||t,i18n:{language:"en",changeLanguage:t=>Promise.resolve()}});function go({isOpen:t,onClose:s}){const{t:a,i18n:r}=po(),{user:n}=_e(),[i,l]=c.useState("profile"),[o,p]=c.useState(!1),[h,f]=c.useState({name:(n==null?void 0:n.name)||"",email:(n==null?void 0:n.email)||"",currentPassword:"",newPassword:"",confirmPassword:"",notifications:{email:!0,push:!0,sms:!1,marketing:!1},theme:"light",language:r.language}),b=[{id:"profile",name:a("header.profile","Profile Settings"),icon:Xe,color:"text-blue-600 bg-blue-50"},{id:"notifications",name:a("header.notifications","Notification Settings"),icon:Dt,color:"text-green-600 bg-green-50"},{id:"security",name:a("header.security","Security"),icon:Xt,color:"text-red-600 bg-red-50"},{id:"preferences",name:a("header.preferences","Preferences"),icon:Ls,color:"text-purple-600 bg-purple-50"}],x=(m,u)=>{f(T=>({...T,[m]:u}))},w=(m,u)=>{f(T=>({...T,notifications:{...T.notifications,[m]:u}}))},g=()=>{I.success("Settings saved successfully!"),setTimeout(()=>{s()},1e3)},N=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Profile Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),e.jsx("input",{type:"text",value:h.name,onChange:m=>x("name",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your full name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:h.email,onChange:m=>x("email",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),e.jsx("div",{className:"px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg text-gray-600",children:(n==null?void 0:n.role)||"Not specified"})]})]})]})}),d=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Notification Preferences"}),e.jsx("div",{className:"space-y-4",children:Object.entries(h.notifications).map(([m,u])=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-900 capitalize",children:[m," Notifications"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Receive ",m," notifications for important updates"]})]}),e.jsx("button",{onClick:()=>w(m,!u),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${u?"bg-blue-600":"bg-gray-200"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${u?"translate-x-6":"translate-x-1"}`})})]},m))})]})}),E=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Change Password"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:o?"text":"password",value:h.currentPassword,onChange:m=>x("currentPassword",m.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter current password"}),e.jsx("button",{type:"button",onClick:()=>p(!o),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:o?e.jsx(Jt,{className:"h-5 w-5 text-gray-400"}):e.jsx(Ie,{className:"h-5 w-5 text-gray-400"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsx("input",{type:o?"text":"password",value:h.newPassword,onChange:m=>x("newPassword",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter new password"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),e.jsx("input",{type:o?"text":"password",value:h.confirmPassword,onChange:m=>x("confirmPassword",m.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Confirm new password"})]})]})]}),e.jsxs("div",{className:"border-t pt-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Security Options"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(El,{className:"h-5 w-5 text-gray-600"}),e.jsx("span",{className:"text-sm font-medium",children:"Two-Factor Authentication"})]}),e.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded",children:"Coming Soon"})]})})]})]}),j=()=>e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Application Preferences"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Language"}),e.jsxs("select",{value:h.language,onChange:m=>{x("language",m.target.value),r.changeLanguage(m.target.value)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"hi",children:"हिंदी (Hindi)"}),e.jsx("option",{value:"ta",children:"தமிழ் (Tamil)"}),e.jsx("option",{value:"te",children:"తెలుగు (Telugu)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Theme"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:["light","dark"].map(m=>e.jsxs("button",{onClick:()=>x("theme",m),className:`p-3 border-2 rounded-lg flex items-center justify-center space-x-2 transition-colors ${h.theme===m?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,children:[e.jsx(Il,{className:"h-4 w-4"}),e.jsx("span",{className:"capitalize",children:m}),h.theme===m&&e.jsx(Ws,{className:"h-4 w-4 text-blue-600"})]},m))})]})]})]})}),y=()=>{switch(i){case"profile":return N();case"notifications":return d();case"security":return E();case"preferences":return j();default:return N()}};return e.jsx(Bs,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:s}),e.jsx(O.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Settings"}),e.jsx("button",{onClick:s,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Qe,{className:"h-6 w-6 text-gray-500"})})]}),e.jsxs("div",{className:"flex h-[calc(90vh-8rem)]",children:[e.jsx("div",{className:"w-64 bg-gray-50 border-r border-gray-200 p-4",children:e.jsx("nav",{className:"space-y-2",children:b.map(m=>{const u=m.icon;return e.jsxs("button",{onClick:()=>l(m.id),className:`w-full flex items-center space-x-3 px-3 py-3 rounded-lg text-left transition-colors ${i===m.id?"bg-white shadow-sm border border-gray-200":"hover:bg-white hover:bg-opacity-50"}`,children:[e.jsx("div",{className:`p-2 rounded-lg ${m.color}`,children:e.jsx(u,{className:"h-4 w-4"})}),e.jsx("span",{className:"font-medium text-gray-900",children:m.name})]},m.id)})})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-6",children:y()})})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx("button",{onClick:s,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:g,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})})]})})}function rr(t,s){return function(){return t.apply(s,arguments)}}const{toString:bo}=Object.prototype,{getPrototypeOf:Hs}=Object,{iterator:os,toStringTag:nr}=Symbol,cs=(t=>s=>{const a=bo.call(s);return t[a]||(t[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),Be=t=>(t=t.toLowerCase(),s=>cs(s)===t),ds=t=>s=>typeof s===t,{isArray:jt}=Array,yt=ds("undefined");function It(t){return t!==null&&!yt(t)&&t.constructor!==null&&!yt(t.constructor)&&Pe(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const ir=Be("ArrayBuffer");function yo(t){let s;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?s=ArrayBuffer.isView(t):s=t&&t.buffer&&ir(t.buffer),s}const jo=ds("string"),Pe=ds("function"),lr=ds("number"),Pt=t=>t!==null&&typeof t=="object",No=t=>t===!0||t===!1,Ht=t=>{if(cs(t)!=="object")return!1;const s=Hs(t);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(nr in t)&&!(os in t)},vo=t=>{if(!Pt(t)||It(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},wo=Be("Date"),So=Be("File"),Eo=Be("Blob"),ko=Be("FileList"),Ao=t=>Pt(t)&&Pe(t.pipe),Co=t=>{let s;return t&&(typeof FormData=="function"&&t instanceof FormData||Pe(t.append)&&((s=cs(t))==="formdata"||s==="object"&&Pe(t.toString)&&t.toString()==="[object FormData]"))},To=Be("URLSearchParams"),[Do,Lo,Ro,Io]=["ReadableStream","Request","Response","Headers"].map(Be),Po=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ot(t,s,{allOwnKeys:a=!1}={}){if(t===null||typeof t>"u")return;let r,n;if(typeof t!="object"&&(t=[t]),jt(t))for(r=0,n=t.length;r<n;r++)s.call(null,t[r],r,t);else{if(It(t))return;const i=a?Object.getOwnPropertyNames(t):Object.keys(t),l=i.length;let o;for(r=0;r<l;r++)o=i[r],s.call(null,t[o],o,t)}}function or(t,s){if(It(t))return null;s=s.toLowerCase();const a=Object.keys(t);let r=a.length,n;for(;r-- >0;)if(n=a[r],s===n.toLowerCase())return n;return null}const lt=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),cr=t=>!yt(t)&&t!==lt;function Rs(){const{caseless:t,skipUndefined:s}=cr(this)&&this||{},a={},r=(n,i)=>{const l=t&&or(a,i)||i;Ht(a[l])&&Ht(n)?a[l]=Rs(a[l],n):Ht(n)?a[l]=Rs({},n):jt(n)?a[l]=n.slice():(!s||!yt(n))&&(a[l]=n)};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Ot(arguments[n],r);return a}const Oo=(t,s,a,{allOwnKeys:r}={})=>(Ot(s,(n,i)=>{a&&Pe(n)?t[i]=rr(n,a):t[i]=n},{allOwnKeys:r}),t),Mo=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Fo=(t,s,a,r)=>{t.prototype=Object.create(s.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:s.prototype}),a&&Object.assign(t.prototype,a)},qo=(t,s,a,r)=>{let n,i,l;const o={};if(s=s||{},t==null)return s;do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)l=n[i],(!r||r(l,t,s))&&!o[l]&&(s[l]=t[l],o[l]=!0);t=a!==!1&&Hs(t)}while(t&&(!a||a(t,s))&&t!==Object.prototype);return s},$o=(t,s,a)=>{t=String(t),(a===void 0||a>t.length)&&(a=t.length),a-=s.length;const r=t.indexOf(s,a);return r!==-1&&r===a},Uo=t=>{if(!t)return null;if(jt(t))return t;let s=t.length;if(!lr(s))return null;const a=new Array(s);for(;s-- >0;)a[s]=t[s];return a},_o=(t=>s=>t&&s instanceof t)(typeof Uint8Array<"u"&&Hs(Uint8Array)),Bo=(t,s)=>{const r=(t&&t[os]).call(t);let n;for(;(n=r.next())&&!n.done;){const i=n.value;s.call(t,i[0],i[1])}},Vo=(t,s)=>{let a;const r=[];for(;(a=t.exec(s))!==null;)r.push(a);return r},Wo=Be("HTMLFormElement"),Ho=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,r,n){return r.toUpperCase()+n}),oa=(({hasOwnProperty:t})=>(s,a)=>t.call(s,a))(Object.prototype),Qo=Be("RegExp"),dr=(t,s)=>{const a=Object.getOwnPropertyDescriptors(t),r={};Ot(a,(n,i)=>{let l;(l=s(n,i,t))!==!1&&(r[i]=l||n)}),Object.defineProperties(t,r)},Go=t=>{dr(t,(s,a)=>{if(Pe(t)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const r=t[a];if(Pe(r)){if(s.enumerable=!1,"writable"in s){s.writable=!1;return}s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},zo=(t,s)=>{const a={},r=n=>{n.forEach(i=>{a[i]=!0})};return jt(t)?r(t):r(String(t).split(s)),a},Zo=()=>{},Yo=(t,s)=>t!=null&&Number.isFinite(t=+t)?t:s;function Ko(t){return!!(t&&Pe(t.append)&&t[nr]==="FormData"&&t[os])}const Jo=t=>{const s=new Array(10),a=(r,n)=>{if(Pt(r)){if(s.indexOf(r)>=0)return;if(It(r))return r;if(!("toJSON"in r)){s[n]=r;const i=jt(r)?[]:{};return Ot(r,(l,o)=>{const p=a(l,n+1);!yt(p)&&(i[o]=p)}),s[n]=void 0,i}}return r};return a(t,0)},Xo=Be("AsyncFunction"),ec=t=>t&&(Pt(t)||Pe(t))&&Pe(t.then)&&Pe(t.catch),mr=((t,s)=>t?setImmediate:s?((a,r)=>(lt.addEventListener("message",({source:n,data:i})=>{n===lt&&i===a&&r.length&&r.shift()()},!1),n=>{r.push(n),lt.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",Pe(lt.postMessage)),tc=typeof queueMicrotask<"u"?queueMicrotask.bind(lt):typeof process<"u"&&process.nextTick||mr,sc=t=>t!=null&&Pe(t[os]),A={isArray:jt,isArrayBuffer:ir,isBuffer:It,isFormData:Co,isArrayBufferView:yo,isString:jo,isNumber:lr,isBoolean:No,isObject:Pt,isPlainObject:Ht,isEmptyObject:vo,isReadableStream:Do,isRequest:Lo,isResponse:Ro,isHeaders:Io,isUndefined:yt,isDate:wo,isFile:So,isBlob:Eo,isRegExp:Qo,isFunction:Pe,isStream:Ao,isURLSearchParams:To,isTypedArray:_o,isFileList:ko,forEach:Ot,merge:Rs,extend:Oo,trim:Po,stripBOM:Mo,inherits:Fo,toFlatObject:qo,kindOf:cs,kindOfTest:Be,endsWith:$o,toArray:Uo,forEachEntry:Bo,matchAll:Vo,isHTMLForm:Wo,hasOwnProperty:oa,hasOwnProp:oa,reduceDescriptors:dr,freezeMethods:Go,toObjectSet:zo,toCamelCase:Ho,noop:Zo,toFiniteNumber:Yo,findKey:or,global:lt,isContextDefined:cr,isSpecCompliantForm:Ko,toJSONObject:Jo,isAsyncFn:Xo,isThenable:ec,setImmediate:mr,asap:tc,isIterable:sc};function te(t,s,a,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",s&&(this.code=s),a&&(this.config=a),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}A.inherits(te,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:A.toJSONObject(this.config),code:this.code,status:this.status}}});const ur=te.prototype,xr={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{xr[t]={value:t}});Object.defineProperties(te,xr);Object.defineProperty(ur,"isAxiosError",{value:!0});te.from=(t,s,a,r,n,i)=>{const l=Object.create(ur);A.toFlatObject(t,l,function(f){return f!==Error.prototype},h=>h!=="isAxiosError");const o=t&&t.message?t.message:"Error",p=s==null&&t?t.code:s;return te.call(l,o,p,a,r,n),t&&l.cause==null&&Object.defineProperty(l,"cause",{value:t,configurable:!0}),l.name=t&&t.name||"Error",i&&Object.assign(l,i),l};const ac=null;function Is(t){return A.isPlainObject(t)||A.isArray(t)}function hr(t){return A.endsWith(t,"[]")?t.slice(0,-2):t}function ca(t,s,a){return t?t.concat(s).map(function(n,i){return n=hr(n),!a&&i?"["+n+"]":n}).join(a?".":""):s}function rc(t){return A.isArray(t)&&!t.some(Is)}const nc=A.toFlatObject(A,{},null,function(s){return/^is[A-Z]/.test(s)});function ms(t,s,a){if(!A.isObject(t))throw new TypeError("target must be an object");s=s||new FormData,a=A.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(N,d){return!A.isUndefined(d[N])});const r=a.metaTokens,n=a.visitor||f,i=a.dots,l=a.indexes,p=(a.Blob||typeof Blob<"u"&&Blob)&&A.isSpecCompliantForm(s);if(!A.isFunction(n))throw new TypeError("visitor must be a function");function h(g){if(g===null)return"";if(A.isDate(g))return g.toISOString();if(A.isBoolean(g))return g.toString();if(!p&&A.isBlob(g))throw new te("Blob is not supported. Use a Buffer instead.");return A.isArrayBuffer(g)||A.isTypedArray(g)?p&&typeof Blob=="function"?new Blob([g]):Buffer.from(g):g}function f(g,N,d){let E=g;if(g&&!d&&typeof g=="object"){if(A.endsWith(N,"{}"))N=r?N:N.slice(0,-2),g=JSON.stringify(g);else if(A.isArray(g)&&rc(g)||(A.isFileList(g)||A.endsWith(N,"[]"))&&(E=A.toArray(g)))return N=hr(N),E.forEach(function(y,m){!(A.isUndefined(y)||y===null)&&s.append(l===!0?ca([N],m,i):l===null?N:N+"[]",h(y))}),!1}return Is(g)?!0:(s.append(ca(d,N,i),h(g)),!1)}const b=[],x=Object.assign(nc,{defaultVisitor:f,convertValue:h,isVisitable:Is});function w(g,N){if(!A.isUndefined(g)){if(b.indexOf(g)!==-1)throw Error("Circular reference detected in "+N.join("."));b.push(g),A.forEach(g,function(E,j){(!(A.isUndefined(E)||E===null)&&n.call(s,E,A.isString(j)?j.trim():j,N,x))===!0&&w(E,N?N.concat(j):[j])}),b.pop()}}if(!A.isObject(t))throw new TypeError("data must be an object");return w(t),s}function da(t){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return s[r]})}function Qs(t,s){this._pairs=[],t&&ms(t,this,s)}const fr=Qs.prototype;fr.append=function(s,a){this._pairs.push([s,a])};fr.toString=function(s){const a=s?function(r){return s.call(this,r,da)}:da;return this._pairs.map(function(n){return a(n[0])+"="+a(n[1])},"").join("&")};function ic(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function pr(t,s,a){if(!s)return t;const r=a&&a.encode||ic;A.isFunction(a)&&(a={serialize:a});const n=a&&a.serialize;let i;if(n?i=n(s,a):i=A.isURLSearchParams(s)?s.toString():new Qs(s,a).toString(r),i){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class lc{constructor(){this.handlers=[]}use(s,a,r){return this.handlers.push({fulfilled:s,rejected:a,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(s){this.handlers[s]&&(this.handlers[s]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(s){A.forEach(this.handlers,function(r){r!==null&&s(r)})}}const ma=lc,gr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},oc=typeof URLSearchParams<"u"?URLSearchParams:Qs,cc=typeof FormData<"u"?FormData:null,dc=typeof Blob<"u"?Blob:null,mc={isBrowser:!0,classes:{URLSearchParams:oc,FormData:cc,Blob:dc},protocols:["http","https","file","blob","url","data"]},Gs=typeof window<"u"&&typeof document<"u",Ps=typeof navigator=="object"&&navigator||void 0,uc=Gs&&(!Ps||["ReactNative","NativeScript","NS"].indexOf(Ps.product)<0),xc=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),hc=Gs&&window.location.href||"http://localhost",fc=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Gs,hasStandardBrowserEnv:uc,hasStandardBrowserWebWorkerEnv:xc,navigator:Ps,origin:hc},Symbol.toStringTag,{value:"Module"})),Te={...fc,...mc};function pc(t,s){return ms(t,new Te.classes.URLSearchParams,{visitor:function(a,r,n,i){return Te.isNode&&A.isBuffer(a)?(this.append(r,a.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...s})}function gc(t){return A.matchAll(/\w+|\[(\w*)]/g,t).map(s=>s[0]==="[]"?"":s[1]||s[0])}function bc(t){const s={},a=Object.keys(t);let r;const n=a.length;let i;for(r=0;r<n;r++)i=a[r],s[i]=t[i];return s}function br(t){function s(a,r,n,i){let l=a[i++];if(l==="__proto__")return!0;const o=Number.isFinite(+l),p=i>=a.length;return l=!l&&A.isArray(n)?n.length:l,p?(A.hasOwnProp(n,l)?n[l]=[n[l],r]:n[l]=r,!o):((!n[l]||!A.isObject(n[l]))&&(n[l]=[]),s(a,r,n[l],i)&&A.isArray(n[l])&&(n[l]=bc(n[l])),!o)}if(A.isFormData(t)&&A.isFunction(t.entries)){const a={};return A.forEachEntry(t,(r,n)=>{s(gc(r),n,a,0)}),a}return null}function yc(t,s,a){if(A.isString(t))try{return(s||JSON.parse)(t),A.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(a||JSON.stringify)(t)}const zs={transitional:gr,adapter:["xhr","http","fetch"],transformRequest:[function(s,a){const r=a.getContentType()||"",n=r.indexOf("application/json")>-1,i=A.isObject(s);if(i&&A.isHTMLForm(s)&&(s=new FormData(s)),A.isFormData(s))return n?JSON.stringify(br(s)):s;if(A.isArrayBuffer(s)||A.isBuffer(s)||A.isStream(s)||A.isFile(s)||A.isBlob(s)||A.isReadableStream(s))return s;if(A.isArrayBufferView(s))return s.buffer;if(A.isURLSearchParams(s))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),s.toString();let o;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return pc(s,this.formSerializer).toString();if((o=A.isFileList(s))||r.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return ms(o?{"files[]":s}:s,p&&new p,this.formSerializer)}}return i||n?(a.setContentType("application/json",!1),yc(s)):s}],transformResponse:[function(s){const a=this.transitional||zs.transitional,r=a&&a.forcedJSONParsing,n=this.responseType==="json";if(A.isResponse(s)||A.isReadableStream(s))return s;if(s&&A.isString(s)&&(r&&!this.responseType||n)){const l=!(a&&a.silentJSONParsing)&&n;try{return JSON.parse(s,this.parseReviver)}catch(o){if(l)throw o.name==="SyntaxError"?te.from(o,te.ERR_BAD_RESPONSE,this,null,this.response):o}}return s}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Te.classes.FormData,Blob:Te.classes.Blob},validateStatus:function(s){return s>=200&&s<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};A.forEach(["delete","get","head","post","put","patch"],t=>{zs.headers[t]={}});const Zs=zs,jc=A.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Nc=t=>{const s={};let a,r,n;return t&&t.split(`
`).forEach(function(l){n=l.indexOf(":"),a=l.substring(0,n).trim().toLowerCase(),r=l.substring(n+1).trim(),!(!a||s[a]&&jc[a])&&(a==="set-cookie"?s[a]?s[a].push(r):s[a]=[r]:s[a]=s[a]?s[a]+", "+r:r)}),s},ua=Symbol("internals");function wt(t){return t&&String(t).trim().toLowerCase()}function Qt(t){return t===!1||t==null?t:A.isArray(t)?t.map(Qt):String(t)}function vc(t){const s=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=a.exec(t);)s[r[1]]=r[2];return s}const wc=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ns(t,s,a,r,n){if(A.isFunction(r))return r.call(this,s,a);if(n&&(s=a),!!A.isString(s)){if(A.isString(r))return s.indexOf(r)!==-1;if(A.isRegExp(r))return r.test(s)}}function Sc(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(s,a,r)=>a.toUpperCase()+r)}function Ec(t,s){const a=A.toCamelCase(" "+s);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+a,{value:function(n,i,l){return this[r].call(this,s,n,i,l)},configurable:!0})})}class us{constructor(s){s&&this.set(s)}set(s,a,r){const n=this;function i(o,p,h){const f=wt(p);if(!f)throw new Error("header name must be a non-empty string");const b=A.findKey(n,f);(!b||n[b]===void 0||h===!0||h===void 0&&n[b]!==!1)&&(n[b||p]=Qt(o))}const l=(o,p)=>A.forEach(o,(h,f)=>i(h,f,p));if(A.isPlainObject(s)||s instanceof this.constructor)l(s,a);else if(A.isString(s)&&(s=s.trim())&&!wc(s))l(Nc(s),a);else if(A.isObject(s)&&A.isIterable(s)){let o={},p,h;for(const f of s){if(!A.isArray(f))throw TypeError("Object iterator must return a key-value pair");o[h=f[0]]=(p=o[h])?A.isArray(p)?[...p,f[1]]:[p,f[1]]:f[1]}l(o,a)}else s!=null&&i(a,s,r);return this}get(s,a){if(s=wt(s),s){const r=A.findKey(this,s);if(r){const n=this[r];if(!a)return n;if(a===!0)return vc(n);if(A.isFunction(a))return a.call(this,n,r);if(A.isRegExp(a))return a.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(s,a){if(s=wt(s),s){const r=A.findKey(this,s);return!!(r&&this[r]!==void 0&&(!a||Ns(this,this[r],r,a)))}return!1}delete(s,a){const r=this;let n=!1;function i(l){if(l=wt(l),l){const o=A.findKey(r,l);o&&(!a||Ns(r,r[o],o,a))&&(delete r[o],n=!0)}}return A.isArray(s)?s.forEach(i):i(s),n}clear(s){const a=Object.keys(this);let r=a.length,n=!1;for(;r--;){const i=a[r];(!s||Ns(this,this[i],i,s,!0))&&(delete this[i],n=!0)}return n}normalize(s){const a=this,r={};return A.forEach(this,(n,i)=>{const l=A.findKey(r,i);if(l){a[l]=Qt(n),delete a[i];return}const o=s?Sc(i):String(i).trim();o!==i&&delete a[i],a[o]=Qt(n),r[o]=!0}),this}concat(...s){return this.constructor.concat(this,...s)}toJSON(s){const a=Object.create(null);return A.forEach(this,(r,n)=>{r!=null&&r!==!1&&(a[n]=s&&A.isArray(r)?r.join(", "):r)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([s,a])=>s+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(s){return s instanceof this?s:new this(s)}static concat(s,...a){const r=new this(s);return a.forEach(n=>r.set(n)),r}static accessor(s){const r=(this[ua]=this[ua]={accessors:{}}).accessors,n=this.prototype;function i(l){const o=wt(l);r[o]||(Ec(n,l),r[o]=!0)}return A.isArray(s)?s.forEach(i):i(s),this}}us.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);A.reduceDescriptors(us.prototype,({value:t},s)=>{let a=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(r){this[a]=r}}});A.freezeMethods(us);const Ue=us;function vs(t,s){const a=this||Zs,r=s||a,n=Ue.from(r.headers);let i=r.data;return A.forEach(t,function(o){i=o.call(a,i,n.normalize(),s?s.status:void 0)}),n.normalize(),i}function yr(t){return!!(t&&t.__CANCEL__)}function Nt(t,s,a){te.call(this,t??"canceled",te.ERR_CANCELED,s,a),this.name="CanceledError"}A.inherits(Nt,te,{__CANCEL__:!0});function jr(t,s,a){const r=a.config.validateStatus;!a.status||!r||r(a.status)?t(a):s(new te("Request failed with status code "+a.status,[te.ERR_BAD_REQUEST,te.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function kc(t){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return s&&s[1]||""}function Ac(t,s){t=t||10;const a=new Array(t),r=new Array(t);let n=0,i=0,l;return s=s!==void 0?s:1e3,function(p){const h=Date.now(),f=r[i];l||(l=h),a[n]=p,r[n]=h;let b=i,x=0;for(;b!==n;)x+=a[b++],b=b%t;if(n=(n+1)%t,n===i&&(i=(i+1)%t),h-l<s)return;const w=f&&h-f;return w?Math.round(x*1e3/w):void 0}}function Cc(t,s){let a=0,r=1e3/s,n,i;const l=(h,f=Date.now())=>{a=f,n=null,i&&(clearTimeout(i),i=null),t(...h)};return[(...h)=>{const f=Date.now(),b=f-a;b>=r?l(h,f):(n=h,i||(i=setTimeout(()=>{i=null,l(n)},r-b)))},()=>n&&l(n)]}const es=(t,s,a=3)=>{let r=0;const n=Ac(50,250);return Cc(i=>{const l=i.loaded,o=i.lengthComputable?i.total:void 0,p=l-r,h=n(p),f=l<=o;r=l;const b={loaded:l,total:o,progress:o?l/o:void 0,bytes:p,rate:h||void 0,estimated:h&&o&&f?(o-l)/h:void 0,event:i,lengthComputable:o!=null,[s?"download":"upload"]:!0};t(b)},a)},xa=(t,s)=>{const a=t!=null;return[r=>s[0]({lengthComputable:a,total:t,loaded:r}),s[1]]},ha=t=>(...s)=>A.asap(()=>t(...s)),Tc=Te.hasStandardBrowserEnv?((t,s)=>a=>(a=new URL(a,Te.origin),t.protocol===a.protocol&&t.host===a.host&&(s||t.port===a.port)))(new URL(Te.origin),Te.navigator&&/(msie|trident)/i.test(Te.navigator.userAgent)):()=>!0,Dc=Te.hasStandardBrowserEnv?{write(t,s,a,r,n,i){const l=[t+"="+encodeURIComponent(s)];A.isNumber(a)&&l.push("expires="+new Date(a).toGMTString()),A.isString(r)&&l.push("path="+r),A.isString(n)&&l.push("domain="+n),i===!0&&l.push("secure"),document.cookie=l.join("; ")},read(t){const s=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Lc(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Rc(t,s){return s?t.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):t}function Nr(t,s,a){let r=!Lc(s);return t&&(r||a==!1)?Rc(t,s):s}const fa=t=>t instanceof Ue?{...t}:t;function ht(t,s){s=s||{};const a={};function r(h,f,b,x){return A.isPlainObject(h)&&A.isPlainObject(f)?A.merge.call({caseless:x},h,f):A.isPlainObject(f)?A.merge({},f):A.isArray(f)?f.slice():f}function n(h,f,b,x){if(A.isUndefined(f)){if(!A.isUndefined(h))return r(void 0,h,b,x)}else return r(h,f,b,x)}function i(h,f){if(!A.isUndefined(f))return r(void 0,f)}function l(h,f){if(A.isUndefined(f)){if(!A.isUndefined(h))return r(void 0,h)}else return r(void 0,f)}function o(h,f,b){if(b in s)return r(h,f);if(b in t)return r(void 0,h)}const p={url:i,method:i,data:i,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:o,headers:(h,f,b)=>n(fa(h),fa(f),b,!0)};return A.forEach(Object.keys({...t,...s}),function(f){const b=p[f]||n,x=b(t[f],s[f],f);A.isUndefined(x)&&b!==o||(a[f]=x)}),a}const vr=t=>{const s=ht({},t);let{data:a,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:i,headers:l,auth:o}=s;if(s.headers=l=Ue.from(l),s.url=pr(Nr(s.baseURL,s.url,s.allowAbsoluteUrls),t.params,t.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),A.isFormData(a)){if(Te.hasStandardBrowserEnv||Te.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(A.isFunction(a.getHeaders)){const p=a.getHeaders(),h=["content-type","content-length"];Object.entries(p).forEach(([f,b])=>{h.includes(f.toLowerCase())&&l.set(f,b)})}}if(Te.hasStandardBrowserEnv&&(r&&A.isFunction(r)&&(r=r(s)),r||r!==!1&&Tc(s.url))){const p=n&&i&&Dc.read(i);p&&l.set(n,p)}return s},Ic=typeof XMLHttpRequest<"u",Pc=Ic&&function(t){return new Promise(function(a,r){const n=vr(t);let i=n.data;const l=Ue.from(n.headers).normalize();let{responseType:o,onUploadProgress:p,onDownloadProgress:h}=n,f,b,x,w,g;function N(){w&&w(),g&&g(),n.cancelToken&&n.cancelToken.unsubscribe(f),n.signal&&n.signal.removeEventListener("abort",f)}let d=new XMLHttpRequest;d.open(n.method.toUpperCase(),n.url,!0),d.timeout=n.timeout;function E(){if(!d)return;const y=Ue.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),u={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:y,config:t,request:d};jr(function(C){a(C),N()},function(C){r(C),N()},u),d=null}"onloadend"in d?d.onloadend=E:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(E)},d.onabort=function(){d&&(r(new te("Request aborted",te.ECONNABORTED,t,d)),d=null)},d.onerror=function(m){const u=m&&m.message?m.message:"Network Error",T=new te(u,te.ERR_NETWORK,t,d);T.event=m||null,r(T),d=null},d.ontimeout=function(){let m=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const u=n.transitional||gr;n.timeoutErrorMessage&&(m=n.timeoutErrorMessage),r(new te(m,u.clarifyTimeoutError?te.ETIMEDOUT:te.ECONNABORTED,t,d)),d=null},i===void 0&&l.setContentType(null),"setRequestHeader"in d&&A.forEach(l.toJSON(),function(m,u){d.setRequestHeader(u,m)}),A.isUndefined(n.withCredentials)||(d.withCredentials=!!n.withCredentials),o&&o!=="json"&&(d.responseType=n.responseType),h&&([x,g]=es(h,!0),d.addEventListener("progress",x)),p&&d.upload&&([b,w]=es(p),d.upload.addEventListener("progress",b),d.upload.addEventListener("loadend",w)),(n.cancelToken||n.signal)&&(f=y=>{d&&(r(!y||y.type?new Nt(null,t,d):y),d.abort(),d=null)},n.cancelToken&&n.cancelToken.subscribe(f),n.signal&&(n.signal.aborted?f():n.signal.addEventListener("abort",f)));const j=kc(n.url);if(j&&Te.protocols.indexOf(j)===-1){r(new te("Unsupported protocol "+j+":",te.ERR_BAD_REQUEST,t));return}d.send(i||null)})},Oc=(t,s)=>{const{length:a}=t=t?t.filter(Boolean):[];if(s||a){let r=new AbortController,n;const i=function(h){if(!n){n=!0,o();const f=h instanceof Error?h:this.reason;r.abort(f instanceof te?f:new Nt(f instanceof Error?f.message:f))}};let l=s&&setTimeout(()=>{l=null,i(new te(`timeout ${s} of ms exceeded`,te.ETIMEDOUT))},s);const o=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(h=>{h.unsubscribe?h.unsubscribe(i):h.removeEventListener("abort",i)}),t=null)};t.forEach(h=>h.addEventListener("abort",i));const{signal:p}=r;return p.unsubscribe=()=>A.asap(o),p}},Mc=Oc,Fc=function*(t,s){let a=t.byteLength;if(!s||a<s){yield t;return}let r=0,n;for(;r<a;)n=r+s,yield t.slice(r,n),r=n},qc=async function*(t,s){for await(const a of $c(t))yield*Fc(a,s)},$c=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const s=t.getReader();try{for(;;){const{done:a,value:r}=await s.read();if(a)break;yield r}}finally{await s.cancel()}},pa=(t,s,a,r)=>{const n=qc(t,s);let i=0,l,o=p=>{l||(l=!0,r&&r(p))};return new ReadableStream({async pull(p){try{const{done:h,value:f}=await n.next();if(h){o(),p.close();return}let b=f.byteLength;if(a){let x=i+=b;a(x)}p.enqueue(new Uint8Array(f))}catch(h){throw o(h),h}},cancel(p){return o(p),n.return()}},{highWaterMark:2})},ga=64*1024,{isFunction:Ut}=A,Uc=(({Request:t,Response:s})=>({Request:t,Response:s}))(A.global),{ReadableStream:ba,TextEncoder:ya}=A.global,ja=(t,...s)=>{try{return!!t(...s)}catch{return!1}},_c=t=>{t=A.merge.call({skipUndefined:!0},Uc,t);const{fetch:s,Request:a,Response:r}=t,n=s?Ut(s):typeof fetch=="function",i=Ut(a),l=Ut(r);if(!n)return!1;const o=n&&Ut(ba),p=n&&(typeof ya=="function"?(g=>N=>g.encode(N))(new ya):async g=>new Uint8Array(await new a(g).arrayBuffer())),h=i&&o&&ja(()=>{let g=!1;const N=new a(Te.origin,{body:new ba,method:"POST",get duplex(){return g=!0,"half"}}).headers.has("Content-Type");return g&&!N}),f=l&&o&&ja(()=>A.isReadableStream(new r("").body)),b={stream:f&&(g=>g.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(g=>{!b[g]&&(b[g]=(N,d)=>{let E=N&&N[g];if(E)return E.call(N);throw new te(`Response type '${g}' is not supported`,te.ERR_NOT_SUPPORT,d)})});const x=async g=>{if(g==null)return 0;if(A.isBlob(g))return g.size;if(A.isSpecCompliantForm(g))return(await new a(Te.origin,{method:"POST",body:g}).arrayBuffer()).byteLength;if(A.isArrayBufferView(g)||A.isArrayBuffer(g))return g.byteLength;if(A.isURLSearchParams(g)&&(g=g+""),A.isString(g))return(await p(g)).byteLength},w=async(g,N)=>{const d=A.toFiniteNumber(g.getContentLength());return d??x(N)};return async g=>{let{url:N,method:d,data:E,signal:j,cancelToken:y,timeout:m,onDownloadProgress:u,onUploadProgress:T,responseType:C,headers:$,withCredentials:U="same-origin",fetchOptions:W}=vr(g),Y=s||fetch;C=C?(C+"").toLowerCase():"text";let H=Mc([j,y&&y.toAbortSignal()],m),Q=null;const ee=H&&H.unsubscribe&&(()=>{H.unsubscribe()});let ie;try{if(T&&h&&d!=="get"&&d!=="head"&&(ie=await w($,E))!==0){let X=new a(N,{method:"POST",body:E,duplex:"half"}),ae;if(A.isFormData(E)&&(ae=X.headers.get("content-type"))&&$.setContentType(ae),X.body){const[re,ue]=xa(ie,es(ha(T)));E=pa(X.body,ga,re,ue)}}A.isString(U)||(U=U?"include":"omit");const se=i&&"credentials"in a.prototype,le={...W,signal:H,method:d.toUpperCase(),headers:$.normalize().toJSON(),body:E,duplex:"half",credentials:se?U:void 0};Q=i&&new a(N,le);let K=await(i?Y(Q,W):Y(N,le));const be=f&&(C==="stream"||C==="response");if(f&&(u||be&&ee)){const X={};["status","statusText","headers"].forEach(ye=>{X[ye]=K[ye]});const ae=A.toFiniteNumber(K.headers.get("content-length")),[re,ue]=u&&xa(ae,es(ha(u),!0))||[];K=new r(pa(K.body,ga,re,()=>{ue&&ue(),ee&&ee()}),X)}C=C||"text";let P=await b[A.findKey(b,C)||"text"](K,g);return!be&&ee&&ee(),await new Promise((X,ae)=>{jr(X,ae,{data:P,headers:Ue.from(K.headers),status:K.status,statusText:K.statusText,config:g,request:Q})})}catch(se){throw ee&&ee(),se&&se.name==="TypeError"&&/Load failed|fetch/i.test(se.message)?Object.assign(new te("Network Error",te.ERR_NETWORK,g,Q),{cause:se.cause||se}):te.from(se,se&&se.code,g,Q)}}},Bc=new Map,wr=t=>{let s=t?t.env:{};const{fetch:a,Request:r,Response:n}=s,i=[r,n,a];let l=i.length,o=l,p,h,f=Bc;for(;o--;)p=i[o],h=f.get(p),h===void 0&&f.set(p,h=o?new Map:_c(s)),f=h;return h};wr();const Os={http:ac,xhr:Pc,fetch:{get:wr}};A.forEach(Os,(t,s)=>{if(t){try{Object.defineProperty(t,"name",{value:s})}catch{}Object.defineProperty(t,"adapterName",{value:s})}});const Na=t=>`- ${t}`,Vc=t=>A.isFunction(t)||t===null||t===!1,Sr={getAdapter:(t,s)=>{t=A.isArray(t)?t:[t];const{length:a}=t;let r,n;const i={};for(let l=0;l<a;l++){r=t[l];let o;if(n=r,!Vc(r)&&(n=Os[(o=String(r)).toLowerCase()],n===void 0))throw new te(`Unknown adapter '${o}'`);if(n&&(A.isFunction(n)||(n=n.get(s))))break;i[o||"#"+l]=n}if(!n){const l=Object.entries(i).map(([p,h])=>`adapter ${p} `+(h===!1?"is not supported by the environment":"is not available in the build"));let o=a?l.length>1?`since :
`+l.map(Na).join(`
`):" "+Na(l[0]):"as no adapter specified";throw new te("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:Os};function ws(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Nt(null,t)}function va(t){return ws(t),t.headers=Ue.from(t.headers),t.data=vs.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Sr.getAdapter(t.adapter||Zs.adapter,t)(t).then(function(r){return ws(t),r.data=vs.call(t,t.transformResponse,r),r.headers=Ue.from(r.headers),r},function(r){return yr(r)||(ws(t),r&&r.response&&(r.response.data=vs.call(t,t.transformResponse,r.response),r.response.headers=Ue.from(r.response.headers))),Promise.reject(r)})}const Er="1.12.2",xs={};["object","boolean","number","function","string","symbol"].forEach((t,s)=>{xs[t]=function(r){return typeof r===t||"a"+(s<1?"n ":" ")+t}});const wa={};xs.transitional=function(s,a,r){function n(i,l){return"[Axios v"+Er+"] Transitional option '"+i+"'"+l+(r?". "+r:"")}return(i,l,o)=>{if(s===!1)throw new te(n(l," has been removed"+(a?" in "+a:"")),te.ERR_DEPRECATED);return a&&!wa[l]&&(wa[l]=!0,console.warn(n(l," has been deprecated since v"+a+" and will be removed in the near future"))),s?s(i,l,o):!0}};xs.spelling=function(s){return(a,r)=>(console.warn(`${r} is likely a misspelling of ${s}`),!0)};function Wc(t,s,a){if(typeof t!="object")throw new te("options must be an object",te.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let n=r.length;for(;n-- >0;){const i=r[n],l=s[i];if(l){const o=t[i],p=o===void 0||l(o,i,t);if(p!==!0)throw new te("option "+i+" must be "+p,te.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new te("Unknown option "+i,te.ERR_BAD_OPTION)}}const Gt={assertOptions:Wc,validators:xs},Ve=Gt.validators;class ts{constructor(s){this.defaults=s||{},this.interceptors={request:new ma,response:new ma}}async request(s,a){try{return await this._request(s,a)}catch(r){if(r instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(s,a){typeof s=="string"?(a=a||{},a.url=s):a=s||{},a=ht(this.defaults,a);const{transitional:r,paramsSerializer:n,headers:i}=a;r!==void 0&&Gt.assertOptions(r,{silentJSONParsing:Ve.transitional(Ve.boolean),forcedJSONParsing:Ve.transitional(Ve.boolean),clarifyTimeoutError:Ve.transitional(Ve.boolean)},!1),n!=null&&(A.isFunction(n)?a.paramsSerializer={serialize:n}:Gt.assertOptions(n,{encode:Ve.function,serialize:Ve.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Gt.assertOptions(a,{baseUrl:Ve.spelling("baseURL"),withXsrfToken:Ve.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let l=i&&A.merge(i.common,i[a.method]);i&&A.forEach(["delete","get","head","post","put","patch","common"],g=>{delete i[g]}),a.headers=Ue.concat(l,i);const o=[];let p=!0;this.interceptors.request.forEach(function(N){typeof N.runWhen=="function"&&N.runWhen(a)===!1||(p=p&&N.synchronous,o.unshift(N.fulfilled,N.rejected))});const h=[];this.interceptors.response.forEach(function(N){h.push(N.fulfilled,N.rejected)});let f,b=0,x;if(!p){const g=[va.bind(this),void 0];for(g.unshift(...o),g.push(...h),x=g.length,f=Promise.resolve(a);b<x;)f=f.then(g[b++],g[b++]);return f}x=o.length;let w=a;for(;b<x;){const g=o[b++],N=o[b++];try{w=g(w)}catch(d){N.call(this,d);break}}try{f=va.call(this,w)}catch(g){return Promise.reject(g)}for(b=0,x=h.length;b<x;)f=f.then(h[b++],h[b++]);return f}getUri(s){s=ht(this.defaults,s);const a=Nr(s.baseURL,s.url,s.allowAbsoluteUrls);return pr(a,s.params,s.paramsSerializer)}}A.forEach(["delete","get","head","options"],function(s){ts.prototype[s]=function(a,r){return this.request(ht(r||{},{method:s,url:a,data:(r||{}).data}))}});A.forEach(["post","put","patch"],function(s){function a(r){return function(i,l,o){return this.request(ht(o||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}ts.prototype[s]=a(),ts.prototype[s+"Form"]=a(!0)});const zt=ts;class Ys{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const r=this;this.promise.then(n=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](n);r._listeners=null}),this.promise.then=n=>{let i;const l=new Promise(o=>{r.subscribe(o),i=o}).then(n);return l.cancel=function(){r.unsubscribe(i)},l},s(function(i,l,o){r.reason||(r.reason=new Nt(i,l,o),a(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const a=this._listeners.indexOf(s);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const s=new AbortController,a=r=>{s.abort(r)};return this.subscribe(a),s.signal.unsubscribe=()=>this.unsubscribe(a),s.signal}static source(){let s;return{token:new Ys(function(n){s=n}),cancel:s}}}const Hc=Ys;function Qc(t){return function(a){return t.apply(null,a)}}function Gc(t){return A.isObject(t)&&t.isAxiosError===!0}const Ms={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ms).forEach(([t,s])=>{Ms[s]=t});const zc=Ms;function kr(t){const s=new zt(t),a=rr(zt.prototype.request,s);return A.extend(a,zt.prototype,s,{allOwnKeys:!0}),A.extend(a,s,null,{allOwnKeys:!0}),a.create=function(n){return kr(ht(t,n))},a}const Ee=kr(Zs);Ee.Axios=zt;Ee.CanceledError=Nt;Ee.CancelToken=Hc;Ee.isCancel=yr;Ee.VERSION=Er;Ee.toFormData=ms;Ee.AxiosError=te;Ee.Cancel=Ee.CanceledError;Ee.all=function(s){return Promise.all(s)};Ee.spread=Qc;Ee.isAxiosError=Gc;Ee.mergeConfig=ht;Ee.AxiosHeaders=Ue;Ee.formToJSON=t=>br(A.isHTMLForm(t)?new FormData(t):t);Ee.getAdapter=Sr.getAdapter;Ee.HttpStatusCode=zc;Ee.default=Ee;const at=Ee,_t=at.create({baseURL:"http://localhost:5002",timeout:3e4,headers:{"Content-Type":"application/json"}}),Ar=c.createContext(void 0),Cr=()=>{const t=c.useContext(Ar);if(t===void 0)throw new Error("useNotifications must be used within a NotificationProvider");return t},Zc=({children:t})=>{const[s,a]=c.useState([]),[r,n]=c.useState(0),i=Oe(),{data:l,isLoading:o,refetch:p}=me("global-notifications",async()=>{try{console.log("🔔 Fetching notifications from /api/notifications...");const g=await _t.get("/api/notifications");return console.log("🔔 Notifications response:",g.data),g.data}catch(g){return console.error("🔔 Failed to fetch notifications:",g),g.response&&(console.error("🔔 Response status:",g.response.status),console.error("🔔 Response data:",g.response.data)),{notifications:[],count:0}}},{refetchInterval:1e4,refetchOnWindowFocus:!0,refetchIntervalInBackground:!1,refetchOnMount:!0,retry:3,staleTime:0,cacheTime:5*60*1e3,onError:g=>{console.error("🔔 Notifications query error:",g)},onSuccess:g=>{var N;console.log("🔔 Notifications query success:",((N=g==null?void 0:g.notifications)==null?void 0:N.length)||0,"notifications"),console.log("🔔 Full response data structure:",{hasNotifications:!!(g!=null&&g.notifications),isArray:Array.isArray(g==null?void 0:g.notifications),count:g==null?void 0:g.count,message:g==null?void 0:g.message}),g!=null&&g.notifications&&g.notifications.length>0&&(console.log("🔔 Sample notification:",g.notifications[0]),console.log("🔔 All notification IDs:",g.notifications.map(d=>d.id)))}}),{data:h}=me("global-notification-count",async()=>{try{console.log("🔔 Fetching notification count from /api/notifications/count...");const g=await _t.get("/api/notifications/count");return console.log("🔔 Count response:",g.data),g.data}catch(g){return console.error("🔔 Failed to fetch notification count:",g),{unreadCount:0}}},{refetchInterval:1e4,refetchOnWindowFocus:!0,refetchIntervalInBackground:!1,refetchOnMount:!0,retry:3,staleTime:0,cacheTime:5*60*1e3,onError:g=>{console.error("🔔 Notification count query error:",g)},onSuccess:g=>{console.log("🔔 Notification count query success:",(g==null?void 0:g.unreadCount)||0),console.log("🔔 Count data structure:",g)}});c.useEffect(()=>{console.log("🔔 NotificationsData changed:",l),console.log("🔔 Type of notificationsData:",typeof l),console.log("🔔 Is array:",Array.isArray(l)),l!=null&&l.notifications&&Array.isArray(l.notifications)?(console.log("🔔 Updating notifications state with",l.notifications.length,"notifications"),console.log("🔔 First notification:",l.notifications[0]),console.log("🔔 All notification IDs:",l.notifications.map(g=>g.id)),a(l.notifications)):l?(console.log("🔔 No notifications array in response, setting empty array"),console.log("🔔 Response structure:",l),console.log("🔔 Response keys:",Object.keys(l)),a([])):(console.log("🔔 No notificationsData at all"),a([]))},[l]),c.useEffect(()=>{console.log("🔔 CountData changed:",h),(h==null?void 0:h.unreadCount)!==void 0?(console.log("🔔 Updating unread count to:",h.unreadCount),n(h.unreadCount)):console.log("🔔 No unreadCount in countData")},[h]);const w={notifications:s,unreadCount:r,markAsRead:async g=>{try{await _t.patch(`/api/notifications/${g}/read`),a(N=>N.map(d=>d.id===g?{...d,read:!0}:d)),n(N=>Math.max(0,N-1)),i.invalidateQueries("global-notifications"),i.invalidateQueries("global-notification-count")}catch(N){console.error("Failed to mark notification as read:",N)}},markAllAsRead:async()=>{try{await _t.patch("/api/notifications/mark-all-read"),a(g=>g.map(N=>({...N,read:!0}))),n(0),i.invalidateQueries("global-notifications"),i.invalidateQueries("global-notification-count")}catch(g){console.error("Failed to mark all notifications as read:",g)}},refreshNotifications:()=>{console.log("🔔 Manual refresh triggered - invalidating queries"),i.invalidateQueries("global-notifications"),i.invalidateQueries("global-notification-count"),p()},isLoading:o};return e.jsx(Ar.Provider,{value:w,children:t})},Z=at.create({baseURL:"http://localhost:5002",timeout:3e4,headers:{"Content-Type":"application/json"},withCredentials:!1});Z.interceptors.request.use(t=>{var n,i,l,o;console.log("🔄 API Request:",{method:(n=t.method)==null?void 0:n.toUpperCase(),url:t.url,baseURL:t.baseURL,fullURL:`${t.baseURL||window.location.origin}${t.url}`,headers:t.headers,data:t.data});const s=(i=t.url)==null?void 0:i.includes("/api/supabase/"),a=(l=t.url)==null?void 0:l.includes("/api/mock/"),r=(o=t.url)==null?void 0:o.includes("/health");if(!s&&!a&&!r){const p=localStorage.getItem("token");p?(t.headers.Authorization=`Bearer ${p}`,console.log("🔑 Added auth token to request")):console.log("ℹ️ No auth token found in localStorage")}else console.log("ℹ️ Skipping auth token for demo endpoint:",t.url);return t},t=>(console.error("❌ Request interceptor error:",t),Promise.reject(t)));Z.interceptors.response.use(t=>{var s;return console.log("✅ API Response:",{status:t.status,statusText:t.statusText,url:t.config.url,method:(s=t.config.method)==null?void 0:s.toUpperCase(),data:t.data}),t},t=>{var s,a,r,n,i,l,o,p,h,f,b,x,w,g,N;if(console.error("❌ API Error Details:",{message:t.message,code:t.code,status:(s=t.response)==null?void 0:s.status,statusText:(a=t.response)==null?void 0:a.statusText,url:(r=t.config)==null?void 0:r.url,method:(i=(n=t.config)==null?void 0:n.method)==null?void 0:i.toUpperCase(),responseData:(l=t.response)==null?void 0:l.data,requestData:(o=t.config)==null?void 0:o.data}),((p=t.response)==null?void 0:p.status)===401){const d=(f=(h=t.config)==null?void 0:h.url)==null?void 0:f.includes("/api/supabase/"),E=(x=(b=t.config)==null?void 0:b.url)==null?void 0:x.includes("/api/mock/"),j=(g=(w=t.config)==null?void 0:w.url)==null?void 0:g.includes("/health");!d&&!E&&!j?(console.log("🔐 Unauthorized access to protected endpoint, redirecting to login"),localStorage.removeItem("token"),window.location.href="/login"):console.log("⚠️ 401 error on demo endpoint, not redirecting to login:",(N=t.config)==null?void 0:N.url)}return(t.code==="ECONNREFUSED"||t.message.includes("Network Error"))&&(console.error("🚫 Network Error: Backend server is not running or not accessible"),console.error("🔍 Check if backend is running on the correct port")),Promise.reject(t)});const Yc=({isOpen:t,onClose:s})=>{const a=Ge(),{notifications:r,unreadCount:n,markAsRead:i,markAllAsRead:l,refreshNotifications:o}=Cr(),p=[{id:"sample_1",type:"NEW_ENQUIRY",title:"New Client Application",message:"New loan application from BALAMURUGAN (BALAMURUGAN)",createdAt:new Date(Date.now()-24*60*60*1e3).toISOString(),read:!1,priority:"HIGH"},{id:"sample_2",type:"DOCUMENT_VERIFIED",title:"Document Verified",message:"UDYAM REGISTRATION verified for priyakamaldkp",createdAt:new Date(Date.now()-2*24*60*60*1e3).toISOString(),read:!1,priority:"MEDIUM"},{id:"sample_3",type:"DOCUMENT_VERIFIED",title:"Document Verified",message:"BANK STATEMENT verified for priyakamaldkp",createdAt:new Date(Date.now()-2*24*60*60*1e3).toISOString(),read:!1,priority:"MEDIUM"}];console.log("🔔 NotificationPanel - notifications from context:",r),console.log("🔔 NotificationPanel - notifications length:",r==null?void 0:r.length),console.log("🔔 NotificationPanel - unreadCount:",n);const h=r&&r.length>0?r:p;console.log("🔔 NotificationPanel - displayNotifications:",h),console.log("🔔 NotificationPanel - displayNotifications length:",h==null?void 0:h.length),je.useEffect(()=>{t&&(console.log("🔔 Notification panel opened, refreshing..."),console.log("🔔 Current notifications in context:",r),o())},[t,o]);const f=w=>{const g=new Date,N=new Date(w),d=Math.floor((g.getTime()-N.getTime())/(1e3*60));let E="";if(d<1)E="Just now";else if(d<60)E=`${d}m ago`;else if(d<1440)E=`${Math.floor(d/60)}h ago`;else{const y=Math.floor(d/1440);y===1?E="1d ago":y<7?E=`${y}d ago`:E=N.toLocaleDateString("en-IN",{day:"numeric",month:"short"})}const j=N.toLocaleString("en-IN",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:"Asia/Kolkata"});return{relativeTime:E,fullTime:j}},b=w=>{switch(w){case"NEW_ENQUIRY":return"bg-blue-500";case"DOCUMENT_UPLOADED":return"bg-yellow-500";case"DOCUMENT_VERIFIED":return"bg-green-500";case"SHORTLISTED":return"bg-purple-500";case"PAYMENT_APPLIED":return"bg-indigo-500";case"STAFF_ADDED":return"bg-gray-500";case"STATUS_UPDATED":return"bg-orange-500";case"ENQUIRY_ASSIGNED":return"bg-teal-500";case"ENQUIRY_COMPLETED":return"bg-emerald-500";default:return"bg-blue-500"}},x=async w=>{switch(await i(w.id),w.type){case"NEW_ENQUIRY":case"STATUS_UPDATED":case"ENQUIRY_ASSIGNED":case"ENQUIRY_COMPLETED":a("/enquiries");break;case"DOCUMENT_UPLOADED":case"DOCUMENT_VERIFIED":a("/documents");break;case"SHORTLISTED":a("/shortlist");break;case"PAYMENT_APPLIED":a("/payment-gateway");break;case"STAFF_ADDED":a("/staff");break}s()};return e.jsx(Bs,{children:t&&e.jsxs(e.Fragment,{children:[e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-30 z-40",onClick:s}),e.jsxs(O.div,{initial:{x:"100%",opacity:0},animate:{x:0,opacity:1},exit:{x:"100%",opacity:0},transition:{type:"spring",damping:25,stiffness:400},className:"fixed right-4 top-4 bottom-4 w-[420px] bg-white shadow-2xl z-50 flex flex-col overflow-hidden rounded-2xl border border-gray-200",style:{maxHeight:"calc(100vh - 32px)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(0, 0, 0, 0.05)"},children:[e.jsxs("div",{className:"flex items-center justify-between p-6 bg-gradient-to-r from-indigo-600 via-blue-600 to-purple-600 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/10 to-transparent opacity-20"}),e.jsxs("div",{className:"flex items-center space-x-4 relative z-10",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(Dt,{className:"h-6 w-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold tracking-tight",children:"Notifications"}),e.jsxs("p",{className:"text-indigo-100 text-sm font-medium",children:[h.length," total •",e.jsxs("span",{className:"text-yellow-200 font-semibold",children:[n," unread"]})]})]})]}),e.jsx("button",{onClick:s,className:"text-white hover:text-indigo-200 p-2 rounded-xl hover:bg-white/20 transition-all duration-200 backdrop-blur-sm relative z-10",children:e.jsx(Qe,{className:"h-6 w-6"})})]}),e.jsx("div",{className:"px-6 py-3 bg-gradient-to-r from-gray-50 to-blue-50 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:r&&r.length>0?"Live Updates":"Demo Mode"})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Last updated: ",new Date().toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("button",{onClick:()=>{console.log("🔄 Manual refresh triggered"),o(),I.success("Refreshing notifications...")},className:"flex items-center space-x-1 px-3 py-1.5 bg-white text-gray-700 text-xs rounded-lg hover:bg-gray-50 border border-gray-200 transition-all duration-200 shadow-sm hover:shadow-md",children:[e.jsx("span",{children:"🔄"}),e.jsx("span",{className:"font-medium",children:"Refresh"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:h&&h.length>0?e.jsx("div",{className:"p-4 space-y-3",children:h.map((w,g)=>{const N=f(w.createdAt);return e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:g*.1},className:`bg-white border-l-4 rounded-xl p-5 shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer group ${w.read?"border-l-gray-300":"border-l-blue-500 bg-blue-50/30"}`,onClick:()=>x(w),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:`inline-flex items-center px-3 py-1.5 rounded-lg text-xs font-bold text-white shadow-sm ${b(w.type)}`,children:w.type.replace("_"," ")}),e.jsx("div",{className:`px-2.5 py-1 rounded-lg text-xs font-bold border ${w.priority==="HIGH"?"text-red-700 bg-red-50 border-red-200":w.priority==="MEDIUM"?"text-yellow-700 bg-yellow-50 border-yellow-200":"text-green-700 bg-green-50 border-green-200"}`,children:w.priority})]}),e.jsx("h3",{className:"text-base font-bold text-gray-900 mb-2 group-hover:text-blue-600 transition-colors",children:w.title}),e.jsx("p",{className:"text-sm text-gray-700 mb-4 leading-relaxed",children:w.message}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-xs font-semibold text-blue-600",children:"⏰"}),e.jsx("span",{className:"text-sm font-bold text-blue-600",children:N.relativeTime})]}),!w.read&&e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs font-medium text-blue-600",children:"New"})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 font-medium",children:["📅 ",N.fullTime]})]})}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsxs("button",{className:"flex items-center space-x-2 text-sm font-medium text-blue-600 hover:text-blue-700 transition-colors",children:[e.jsx("span",{children:"View Details"}),e.jsx(Fi,{className:"h-4 w-4"})]}),!w.read&&e.jsx("button",{onClick:d=>{d.stopPropagation(),i(w.id)},className:"text-xs text-gray-500 hover:text-gray-700 font-medium transition-colors",children:"Mark as read"})]})]},w.id)})}):e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500 p-8",children:[e.jsx("div",{className:"bg-gray-100 rounded-full p-6 mb-6",children:e.jsx(Dt,{className:"h-12 w-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:"All caught up!"}),e.jsx("p",{className:"text-sm text-center text-gray-500 mb-6 max-w-xs",children:"No new notifications right now. We'll let you know when something important happens."}),n>0&&e.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-xl p-4 text-center",children:[e.jsxs("p",{className:"text-sm text-orange-700 font-medium mb-3",children:["🔍 ",n," unread notifications detected but not loaded"]}),e.jsx("button",{onClick:()=>o(),className:"px-4 py-2 bg-orange-600 text-white text-sm font-medium rounded-lg hover:bg-orange-700 transition-colors",children:"🔄 Refresh Notifications"})]})]})}),e.jsx("div",{className:"p-4 bg-white border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:async()=>{try{console.log("🔔 Creating test notification..."),await Z.post("/api/notifications/test/create-sample"),I.success("Test notification created!"),setTimeout(()=>o(),1e3)}catch(w){console.error("Failed to create test notification:",w),I.error("Failed to create test notification")}},className:"flex items-center space-x-1 px-3 py-2 text-sm text-gray-600 hover:text-blue-600 font-medium transition-colors rounded-lg hover:bg-gray-50",children:[e.jsx("span",{children:"⚡"}),e.jsx("span",{children:"Test"})]}),n>0&&e.jsxs("button",{onClick:l,className:"flex items-center space-x-1 px-4 py-2 text-sm bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-lg hover:from-blue-700 hover:to-indigo-700 font-medium transition-all duration-200 shadow-sm hover:shadow-md",children:[e.jsx("span",{children:"✓"}),e.jsxs("span",{children:["Mark all read (",n,")"]})]})]}),e.jsxs("button",{onClick:s,className:"flex items-center space-x-1 px-3 py-2 text-sm text-gray-600 hover:text-gray-800 font-medium transition-colors rounded-lg hover:bg-gray-50",children:[e.jsx("span",{children:"✕"}),e.jsx("span",{children:"Close"})]})]})})]})]})})},Kc=()=>{const[t,s]=c.useState(!1),{unreadCount:a}=Cr();return e.jsxs(e.Fragment,{children:[e.jsxs(O.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>s(!0),className:"relative p-2.5 text-gray-600 hover:text-indigo-600 hover:bg-gradient-to-br hover:from-indigo-50 hover:to-blue-50 rounded-xl transition-all duration-300 shadow-sm hover:shadow-lg border border-transparent hover:border-indigo-100",title:`View Notifications ${a>0?`(${a} unread)`:""}`,children:[e.jsx(Dt,{className:"h-6 w-6 transition-transform duration-200"}),a>0&&e.jsx(O.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},className:"absolute -top-1 -right-1 bg-gradient-to-r from-red-500 via-red-600 to-pink-600 text-white text-xs rounded-full min-w-[20px] h-[20px] flex items-center justify-center font-bold shadow-lg border-2 border-white",style:{fontSize:"10px",lineHeight:"1"},children:a>99?"99+":a}),a>0&&e.jsx(O.div,{animate:{scale:[1,1.6,1],opacity:[.8,0,.8]},transition:{repeat:1/0,duration:2.5,ease:"easeInOut"},className:"absolute -top-1 -right-1 bg-gradient-to-r from-red-400 to-pink-400 rounded-full w-[20px] h-[20px]"}),a>0&&e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-400/20 to-blue-400/20 rounded-xl blur-sm -z-10"})]}),e.jsx(Yc,{isOpen:t,onClose:()=>s(!1)})]})},Jc=()=>({t:t=>t.split(".").pop()||t,i18n:{changeLanguage:t=>Promise.resolve()}});function Xc({language:t="en",onLanguageChange:s}){var d;const{user:a}=_e(),{t:r,i18n:n}=Jc(),[i,l]=c.useState(!1),[o,p]=c.useState(!1),[h,f]=c.useState(!1),[b,x]=c.useState("EN"),w=c.useRef(null);c.useEffect(()=>{const E=j=>{w.current&&!w.current.contains(j.target)&&(l(!1),p(!1))};return document.addEventListener("mousedown",E),()=>{document.removeEventListener("mousedown",E)}},[]);const g=[{code:"EN",name:"English",flag:"🇺🇸",value:"en"},{code:"HI",name:"हिंदी",flag:"🇮🇳",value:"hi"},{code:"TA",name:"தமிழ்",flag:"🇮🇳",value:"ta"},{code:"TE",name:"తెలుగు",flag:"🇮🇳",value:"te"}];c.useEffect(()=>{const E=g.find(j=>j.value===t);E&&x(E.code)},[t]);const N=[{id:"profile",name:"Profile Settings",icon:Xe},{id:"notifications",name:"Notification Settings",icon:Dt},{id:"security",name:"Security",icon:Xt},{id:"preferences",name:"Preferences",icon:Ls}];return e.jsxs(e.Fragment,{children:[e.jsx("header",{ref:w,className:"bg-white/80 backdrop-blur-sm shadow-sm border-b border-slate-200 sticky top-0 z-40",children:e.jsx("div",{className:"px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:"/generated-image.png",alt:"Company Logo",className:"h-16 w-16 object-contain drop-shadow-lg hover:scale-110 transition-transform duration-300",style:{filter:"contrast(2.2) saturate(2.0) brightness(1.8)",imageRendering:"crisp-edges",maxWidth:"100%",maxHeight:"100%"}})}),e.jsx("h1",{className:"text-2xl font-poppins font-bold text-slate-900",children:r("header.title")})]}),e.jsxs("div",{className:"hidden md:flex relative",children:[e.jsx(ut,{className:"h-5 w-5 absolute left-3 top-3 text-slate-400"}),e.jsx("input",{type:"text",placeholder:r("header.searchPlaceholder"),className:"input-search w-80"})]})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>l(!i),className:"flex items-center space-x-2 px-3 py-2 bg-slate-100 rounded-lg hover:bg-slate-200 transition-colors",children:[e.jsx(yl,{className:"h-4 w-4 text-slate-600"}),e.jsx("span",{className:"text-sm font-medium text-slate-700",children:b}),e.jsx(Pi,{className:"h-3 w-3 text-slate-500"})]}),i&&e.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-slate-200 py-2 z-50",children:g.map(E=>e.jsxs("button",{onClick:()=>{x(E.code),l(!1),n.changeLanguage(E.value),s==null||s(E.value)},className:"w-full flex items-center justify-between px-4 py-2 text-sm text-slate-700 hover:bg-slate-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{children:E.flag}),e.jsx("span",{children:E.name})]}),b===E.code&&e.jsx(Ws,{className:"h-4 w-4 text-indigo-600"})]},E.code))})]}),e.jsx(Kc,{}),e.jsxs("div",{className:"relative",children:[e.jsx("button",{onClick:()=>p(!o),className:"p-2 text-slate-600 hover:text-slate-900 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(Ls,{className:"h-5 w-5"})}),o&&e.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-slate-200 py-2 z-50",children:[e.jsx("div",{className:"px-4 py-3 border-b border-slate-100",children:e.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Settings"})}),N.map(E=>{const j=E.icon;return e.jsxs("button",{onClick:()=>{p(!1),f(!0)},className:"w-full flex items-center space-x-3 px-4 py-3 text-sm text-slate-700 hover:bg-slate-50 transition-colors",children:[e.jsx(j,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{className:"font-medium",children:E.name})]},E.id)}),e.jsx("div",{className:"border-t border-slate-100 mt-2 pt-2",children:e.jsxs("button",{className:"w-full flex items-center space-x-3 px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(Xa,{className:"h-4 w-4 text-red-500"}),e.jsx("span",{className:"font-medium",children:"Logout"})]})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 px-3 py-2 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:[e.jsx(tr,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-xs font-medium text-green-700",children:r("header.aiAssistant")})]}),e.jsxs("div",{className:"flex items-center space-x-3 px-4 py-2 bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl border border-indigo-100",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-semibold text-white",children:((d=a==null?void 0:a.name)==null?void 0:d.charAt(0))||"U"})}),e.jsxs("div",{className:"hidden sm:block",children:[e.jsx("div",{className:"text-sm font-medium text-slate-900",children:a==null?void 0:a.name}),e.jsx("div",{className:"text-xs text-slate-600",children:a==null?void 0:a.role})]})]})]})]})})}),e.jsx(go,{isOpen:h,onClose:()=>f(!1)})]})}const ed=(t,s,a,r)=>{var i,l,o,p;const n=[a,{code:s,...r||{}}];if((l=(i=t==null?void 0:t.services)==null?void 0:i.logger)!=null&&l.forward)return t.services.logger.forward(n,"warn","react-i18next::",!0);mt(n[0])&&(n[0]=`react-i18next:: ${n[0]}`),(p=(o=t==null?void 0:t.services)==null?void 0:o.logger)!=null&&p.warn?t.services.logger.warn(...n):console!=null&&console.warn&&console.warn(...n)},Sa={},Fs=(t,s,a,r)=>{mt(a)&&Sa[a]||(mt(a)&&(Sa[a]=new Date),ed(t,s,a,r))},Tr=(t,s)=>()=>{if(t.isInitialized)s();else{const a=()=>{setTimeout(()=>{t.off("initialized",a)},0),s()};t.on("initialized",a)}},qs=(t,s,a)=>{t.loadNamespaces(s,Tr(t,a))},Ea=(t,s,a,r)=>{if(mt(a)&&(a=[a]),t.options.preload&&t.options.preload.indexOf(s)>-1)return qs(t,a,r);a.forEach(n=>{t.options.ns.indexOf(n)<0&&t.options.ns.push(n)}),t.loadLanguages(s,Tr(t,r))},td=(t,s,a={})=>!s.languages||!s.languages.length?(Fs(s,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:s.languages}),!0):s.hasLoadedNamespace(t,{lng:a.lng,precheck:(r,n)=>{if(a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!n(r.isLanguageChangingTo,t))return!1}}),mt=t=>typeof t=="string",sd=t=>typeof t=="object"&&t!==null,ad=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,rd={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},nd=t=>rd[t],id=t=>t.replace(ad,nd);let ld={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:id};const od=()=>ld;let cd;const dd=()=>cd,md=c.createContext();class ud{constructor(){this.usedNamespaces={}}addUsedNamespaces(s){s.forEach(a=>{this.usedNamespaces[a]||(this.usedNamespaces[a]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const xd=(t,s)=>{const a=c.useRef();return c.useEffect(()=>{a.current=s?a.current:t},[t,s]),a.current},Dr=(t,s,a,r)=>t.getFixedT(s,a,r),hd=(t,s,a,r)=>c.useCallback(Dr(t,s,a,r),[t,s,a,r]),fd=(t,s={})=>{var m,u,T,C;const{i18n:a}=s,{i18n:r,defaultNS:n}=c.useContext(md)||{},i=a||r||dd();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new ud),!i){Fs(i,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const $=(W,Y)=>mt(Y)?Y:sd(Y)&&mt(Y.defaultValue)?Y.defaultValue:Array.isArray(W)?W[W.length-1]:W,U=[$,{},!1];return U.t=$,U.i18n={},U.ready=!1,U}(m=i.options.react)!=null&&m.wait&&Fs(i,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...od(),...i.options.react,...s},{useSuspense:o,keyPrefix:p}=l;let h=t||n||((u=i.options)==null?void 0:u.defaultNS);h=mt(h)?[h]:h||["translation"],(C=(T=i.reportNamespaces).addUsedNamespaces)==null||C.call(T,h);const f=(i.isInitialized||i.initializedStoreOnce)&&h.every($=>td($,i,l)),b=hd(i,s.lng||null,l.nsMode==="fallback"?h:h[0],p),x=()=>b,w=()=>Dr(i,s.lng||null,l.nsMode==="fallback"?h:h[0],p),[g,N]=c.useState(x);let d=h.join();s.lng&&(d=`${s.lng}${d}`);const E=xd(d),j=c.useRef(!0);c.useEffect(()=>{const{bindI18n:$,bindI18nStore:U}=l;j.current=!0,!f&&!o&&(s.lng?Ea(i,s.lng,h,()=>{j.current&&N(w)}):qs(i,h,()=>{j.current&&N(w)})),f&&E&&E!==d&&j.current&&N(w);const W=()=>{j.current&&N(w)};return $&&(i==null||i.on($,W)),U&&(i==null||i.store.on(U,W)),()=>{j.current=!1,i&&$&&($==null||$.split(" ").forEach(Y=>i.off(Y,W))),U&&i&&U.split(" ").forEach(Y=>i.store.off(Y,W))}},[i,d]),c.useEffect(()=>{j.current&&f&&N(x)},[i,p,f]);const y=[g,i,f];if(y.t=g,y.i18n=i,y.ready=f,f||!f&&!o)return y;throw new Promise($=>{s.lng?Ea(i,s.lng,h,()=>$()):qs(i,h,()=>$())})};function pd({language:t="en"}){const[s,a]=c.useState(!1),[r,n]=c.useState([]),[i,l]=c.useState(""),[o,p]=c.useState(!1),[h,f]=c.useState("flash"),b=c.useRef(null),{user:x}=_e(),{t:w}=fd(),g=()=>{var u;(u=b.current)==null||u.scrollIntoView({behavior:"smooth"})},N=()=>{const u=(x==null?void 0:x.role)==="ADMIN"?"(Admin Access)":"(Employee Access)";return`Welcome ${(x==null?void 0:x.name)||"there"}!

I can help you with:

• Loan Management & Processing

• Staff Management ${u}

• Analytics & Reports

How can I help you today?`};c.useEffect(()=>{g()},[r]),c.useEffect(()=>{if(s&&r.length===0){const u={id:Date.now().toString(),content:N(),role:"assistant",timestamp:new Date,model:"system"};n([u])}},[s,x,t]);const d=async(u=0)=>{var $;if(!i.trim()||o)return;const T={id:Date.now().toString(),content:i.trim(),role:"user",timestamp:new Date};n(U=>[...U,T]);const C=i.trim();l(""),p(!0);try{const U=await Z.post("/api/gemini/chat",{message:C,model:h,context:`User role: ${x==null?void 0:x.role}, System: Business Loan Management`,language:t},{timeout:1e4});if(U.data&&U.data.response){const W={id:(Date.now()+1).toString(),content:U.data.response,role:"assistant",timestamp:new Date(U.data.timestamp||new Date),model:U.data.model||"ai-assistant"};n(Y=>[...Y,W]),r.length<=1&&I.success("AI Assistant connected! 🚀",{duration:1500,icon:"✅"})}else throw new Error("Invalid response format")}catch(U){if(u<2&&(U.code==="NETWORK_ERROR"||(($=U.response)==null?void 0:$.status)>=500)){console.log(`🔄 Retrying request (attempt ${u+1})`),setTimeout(()=>{l(C),p(!1),d(u+1)},1e3*(u+1));return}console.log("🔄 Chatbot using backup response system");const W={id:(Date.now()+1).toString(),content:`Hello! I'm your AI assistant for the Business Loan Management System. I'm always here to help you! 🤖

🏦 **I can help you with:**
• **Enquiry Management** - Creating and tracking loan applications
• **Document Handling** - Upload, verification, and management
• **Staff Operations** - ${(x==null?void 0:x.role)==="ADMIN"?"Full admin access and team management":"Employee tasks and permissions"}
• **Dashboard Analytics** - Understanding your business metrics
• **System Navigation** - Finding features and using tools

📊 **Current System Status:**
• 156 total enquiries in pipeline
• 14.7% conversion rate (enquiry to disbursement)
• Real-time notifications active
• All features operational

💡 **Quick Tips:**
• Use the sidebar to navigate between sections
• Check the dashboard for business insights
• Notifications keep you updated on activities
• ${(x==null?void 0:x.role)==="ADMIN"?"Staff management is available in your admin panel":"Contact your admin for access-related questions"}

What would you like to know about? I'm here to guide you through any feature or process! 🚀`,role:"assistant",timestamp:new Date,model:"ai-assistant"};n(Y=>[...Y,W]),I.success("AI Assistant ready to help! 🤖",{duration:2e3,icon:"✨"})}finally{p(!1)}},E=u=>{u.key==="Enter"&&!u.shiftKey&&(u.preventDefault(),d())},j=()=>{n([])},y=u=>{switch(u){case"gemini-2.0-flash-exp":return e.jsx(zl,{className:"h-3 w-3 text-yellow-500"});case"gemini-1.5-pro":return e.jsx(Wi,{className:"h-3 w-3 text-purple-500"});default:return e.jsx(bs,{className:"h-3 w-3 text-green-500"})}},m=u=>{switch(u){case"gemini-2.0-flash-exp":return"Flash";case"gemini-1.5-pro":return"Pro";case"smart":return"Smart";default:return"AI"}};return e.jsxs(e.Fragment,{children:[e.jsx(O.button,{onClick:()=>a(!s),className:`fixed bottom-6 right-6 z-50 w-14 h-14 rounded-full shadow-lg flex items-center justify-center transition-all duration-300 ${s?"bg-red-500 hover:bg-red-600":"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700"}`,whileHover:{scale:1.1},whileTap:{scale:.9},initial:{scale:0},animate:{scale:1},transition:{delay:1},children:s?e.jsx(Qe,{className:"h-6 w-6 text-white"}):e.jsx(tr,{className:"h-6 w-6 text-white"})}),e.jsx(Bs,{children:s&&e.jsxs(O.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.2},className:"fixed bottom-24 right-6 z-40 w-96 h-[500px] bg-white rounded-2xl shadow-2xl border border-gray-200 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 p-4 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center mb-8 backdrop-blur-sm",children:e.jsx(bs,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:w("chatbot.title")}),e.jsx("p",{className:"text-xs text-green-100",children:w("chatbot.subtitle")})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:h,onChange:u=>f(u.target.value),className:"text-xs bg-white bg-opacity-20 text-white border border-white border-opacity-30 rounded px-2 py-1 focus:outline-none",children:[e.jsx("option",{value:"smart",className:"text-gray-900",children:w("chatbot.models.smart")}),e.jsx("option",{value:"flash",className:"text-gray-900",children:w("chatbot.models.flash")}),e.jsx("option",{value:"pro",className:"text-gray-900",children:w("chatbot.models.pro")})]}),e.jsx("button",{onClick:j,className:"text-white hover:text-green-200 transition-colors",title:"Clear chat",children:e.jsx(Qe,{className:"h-4 w-4"})})]})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50",children:[r.map(u=>e.jsxs(O.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:`flex ${u.role==="user"?"justify-end":"justify-start"}`,children:[e.jsxs("div",{className:`max-w-[80%] ${u.role==="user"?"order-2":"order-1"}`,children:[e.jsxs("div",{className:`rounded-2xl px-4 py-2 ${u.role==="user"?"bg-green-500 text-white":"bg-white text-gray-800 shadow-sm border"}`,children:[e.jsx("div",{className:"whitespace-pre-wrap text-sm",children:u.content}),u.model&&u.model!=="system"&&u.model!=="error"&&e.jsxs("div",{className:"flex items-center justify-end mt-1 space-x-1",children:[y(u.model),e.jsx("span",{className:"text-xs opacity-70",children:m(u.model)})]})]}),e.jsx("div",{className:`text-xs text-gray-500 mt-1 ${u.role==="user"?"text-right":"text-left"}`,children:u.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${u.role==="user"?"order-1 ml-2":"order-2 mr-2"}`,children:u.role==="user"?e.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:e.jsx(Xe,{className:"h-4 w-4 text-white"})}):e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-600 rounded-full flex items-center justify-center",children:e.jsx(bs,{className:"h-4 w-4 text-white"})})})]},u.id)),o&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},className:"flex justify-start",children:e.jsxs("div",{className:"flex items-center space-x-2 bg-white rounded-2xl px-4 py-2 shadow-sm border",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsx("span",{className:"text-sm text-gray-500",children:w("chatbot.thinking")})]})}),e.jsx("div",{ref:b})]}),e.jsx("div",{className:"p-4 border-t border-gray-200 bg-white",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("textarea",{value:i,onChange:u=>l(u.target.value),onKeyPress:E,placeholder:w("chatbot.placeholder"),className:"flex-1 resize-none border border-gray-300 rounded-xl px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm max-h-20",rows:1,disabled:o}),e.jsx("button",{onClick:()=>d(),disabled:!i.trim()||o,className:"w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-xl flex items-center justify-center hover:from-green-600 hover:to-emerald-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:e.jsx(Ml,{className:"h-4 w-4"})})]})})]})})]})}const gd=()=>{const[t,s]=c.useState("desktop");return c.useEffect(()=>{const a=()=>{const r=window.innerWidth;r<768?s("mobile"):r<1024?s("tablet"):s("desktop")};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),t};function bd({children:t}){const a=gd()==="mobile",[r,n]=c.useState("en");return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[e.jsxs("div",{className:"flex",children:[!a&&e.jsx(fo,{}),e.jsxs("div",{className:`flex-1 ${a?"":"ml-72"}`,children:[e.jsx(Xc,{language:r,onLanguageChange:n}),e.jsx("main",{className:"p-8",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:t})})]})]}),e.jsx(pd,{language:r})]})}var Mt=t=>t.type==="checkbox",ot=t=>t instanceof Date,De=t=>t==null;const Lr=t=>typeof t=="object";var Se=t=>!De(t)&&!Array.isArray(t)&&Lr(t)&&!ot(t),yd=t=>Se(t)&&t.target?Mt(t.target)?t.target.checked:t.target.value:t,jd=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,Nd=(t,s)=>t.has(jd(s)),vd=t=>{const s=t.constructor&&t.constructor.prototype;return Se(s)&&s.hasOwnProperty("isPrototypeOf")},Ks=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function ke(t){let s;const a=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)s=new Date(t);else if(!(Ks&&(t instanceof Blob||r))&&(a||Se(t)))if(s=a?[]:Object.create(Object.getPrototypeOf(t)),!a&&!vd(t))s=t;else for(const n in t)t.hasOwnProperty(n)&&(s[n]=ke(t[n]));else return t;return s}var hs=t=>/^\w*$/.test(t),we=t=>t===void 0,Js=t=>Array.isArray(t)?t.filter(Boolean):[],Xs=t=>Js(t.replace(/["|']|\]/g,"").split(/\.|\[/)),V=(t,s,a)=>{if(!s||!Se(t))return a;const r=(hs(s)?[s]:Xs(s)).reduce((n,i)=>De(n)?n:n[i],t);return we(r)||r===t?we(t[s])?a:t[s]:r},We=t=>typeof t=="boolean",pe=(t,s,a)=>{let r=-1;const n=hs(s)?[s]:Xs(s),i=n.length,l=i-1;for(;++r<i;){const o=n[r];let p=a;if(r!==l){const h=t[o];p=Se(h)||Array.isArray(h)?h:isNaN(+n[r+1])?{}:[]}if(o==="__proto__"||o==="constructor"||o==="prototype")return;t[o]=p,t=t[o]}};const ka={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},qe={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Ze={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Rr=je.createContext(null);Rr.displayName="HookFormContext";const wd=()=>je.useContext(Rr);var Sd=(t,s,a,r=!0)=>{const n={defaultValues:s._defaultValues};for(const i in t)Object.defineProperty(n,i,{get:()=>{const l=i;return s._proxyFormState[l]!==qe.all&&(s._proxyFormState[l]=!r||qe.all),a&&(a[l]=!0),t[l]}});return n};const Ir=typeof window<"u"?je.useLayoutEffect:je.useEffect;var Me=t=>typeof t=="string",Pr=(t,s,a,r,n)=>Me(t)?(r&&s.watch.add(t),V(a,t,n)):Array.isArray(t)?t.map(i=>(r&&s.watch.add(i),V(a,i))):(r&&(s.watchAll=!0),a),$s=t=>De(t)||!Lr(t);function Ye(t,s,a=new WeakSet){if($s(t)||$s(s))return t===s;if(ot(t)&&ot(s))return t.getTime()===s.getTime();const r=Object.keys(t),n=Object.keys(s);if(r.length!==n.length)return!1;if(a.has(t)||a.has(s))return!0;a.add(t),a.add(s);for(const i of r){const l=t[i];if(!n.includes(i))return!1;if(i!=="ref"){const o=s[i];if(ot(l)&&ot(o)||Se(l)&&Se(o)||Array.isArray(l)&&Array.isArray(o)?!Ye(l,o,a):l!==o)return!1}}return!0}function St(t){const s=wd(),{control:a=s.control,name:r,defaultValue:n,disabled:i,exact:l,compute:o}=t||{},p=je.useRef(n),h=je.useRef(o),f=je.useRef(void 0);h.current=o;const b=je.useMemo(()=>a._getWatch(r,p.current),[a,r]),[x,w]=je.useState(h.current?h.current(b):b);return Ir(()=>a._subscribe({name:r,formState:{values:!0},exact:l,callback:g=>{if(!i){const N=Pr(r,a._names,g.values||a._formValues,!1,p.current);if(h.current){const d=h.current(N);Ye(d,f.current)||(w(d),f.current=d)}else w(N)}}}),[a,i,r,l]),je.useEffect(()=>a._removeUnmounted()),x}var Ed=(t,s,a,r,n)=>s?{...a[t],types:{...a[t]&&a[t].types?a[t].types:{},[r]:n||!0}}:{},Ct=t=>Array.isArray(t)?t:[t],Aa=()=>{let t=[];return{get observers(){return t},next:n=>{for(const i of t)i.next&&i.next(n)},subscribe:n=>(t.push(n),{unsubscribe:()=>{t=t.filter(i=>i!==n)}}),unsubscribe:()=>{t=[]}}};function Or(t,s){const a={};for(const r in t)if(t.hasOwnProperty(r)){const n=t[r],i=s[r];if(n&&Se(n)&&i){const l=Or(n,i);Se(l)&&(a[r]=l)}else t[r]&&(a[r]=i)}return a}var Le=t=>Se(t)&&!Object.keys(t).length,ea=t=>t.type==="file",$e=t=>typeof t=="function",ss=t=>{if(!Ks)return!1;const s=t?t.ownerDocument:0;return t instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},Mr=t=>t.type==="select-multiple",ta=t=>t.type==="radio",kd=t=>ta(t)||Mt(t),Ss=t=>ss(t)&&t.isConnected;function Ad(t,s){const a=s.slice(0,-1).length;let r=0;for(;r<a;)t=we(t)?r++:t[s[r++]];return t}function Cd(t){for(const s in t)if(t.hasOwnProperty(s)&&!we(t[s]))return!1;return!0}function ve(t,s){const a=Array.isArray(s)?s:hs(s)?[s]:Xs(s),r=a.length===1?t:Ad(t,a),n=a.length-1,i=a[n];return r&&delete r[i],n!==0&&(Se(r)&&Le(r)||Array.isArray(r)&&Cd(r))&&ve(t,a.slice(0,-1)),t}var Td=t=>{for(const s in t)if($e(t[s]))return!0;return!1};function Fr(t){return Array.isArray(t)||Se(t)&&!Td(t)}function Us(t,s={}){for(const a in t)Fr(t[a])?(s[a]=Array.isArray(t[a])?[]:{},Us(t[a],s[a])):De(t[a])||(s[a]=!0);return s}function gt(t,s,a){a||(a=Us(s));for(const r in t)Fr(t[r])?we(s)||$s(a[r])?a[r]=Us(t[r],Array.isArray(t[r])?[]:{}):gt(t[r],De(s)?{}:s[r],a[r]):a[r]=!Ye(t[r],s[r]);return a}const Ca={value:!1,isValid:!1},Ta={value:!0,isValid:!0};var qr=t=>{if(Array.isArray(t)){if(t.length>1){const s=t.filter(a=>a&&a.checked&&!a.disabled).map(a=>a.value);return{value:s,isValid:!!s.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!we(t[0].attributes.value)?we(t[0].value)||t[0].value===""?Ta:{value:t[0].value,isValid:!0}:Ta:Ca}return Ca},$r=(t,{valueAsNumber:s,valueAsDate:a,setValueAs:r})=>we(t)?t:s?t===""?NaN:t&&+t:a&&Me(t)?new Date(t):r?r(t):t;const Da={isValid:!1,value:null};var Ur=t=>Array.isArray(t)?t.reduce((s,a)=>a&&a.checked&&!a.disabled?{isValid:!0,value:a.value}:s,Da):Da;function La(t){const s=t.ref;return ea(s)?s.files:ta(s)?Ur(t.refs).value:Mr(s)?[...s.selectedOptions].map(({value:a})=>a):Mt(s)?qr(t.refs).value:$r(we(s.value)?t.ref.value:s.value,t)}var Dd=(t,s,a,r)=>{const n={};for(const i of t){const l=V(s,i);l&&pe(n,i,l._f)}return{criteriaMode:a,names:[...t],fields:n,shouldUseNativeValidation:r}},as=t=>t instanceof RegExp,Et=t=>we(t)?t:as(t)?t.source:Se(t)?as(t.value)?t.value.source:t.value:t,Ra=t=>({isOnSubmit:!t||t===qe.onSubmit,isOnBlur:t===qe.onBlur,isOnChange:t===qe.onChange,isOnAll:t===qe.all,isOnTouch:t===qe.onTouched});const Ia="AsyncFunction";var Ld=t=>!!t&&!!t.validate&&!!($e(t.validate)&&t.validate.constructor.name===Ia||Se(t.validate)&&Object.values(t.validate).find(s=>s.constructor.name===Ia)),Rd=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),Pa=(t,s,a)=>!a&&(s.watchAll||s.watch.has(t)||[...s.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const Tt=(t,s,a,r)=>{for(const n of a||Object.keys(t)){const i=V(t,n);if(i){const{_f:l,...o}=i;if(l){if(l.refs&&l.refs[0]&&s(l.refs[0],n)&&!r)return!0;if(l.ref&&s(l.ref,l.name)&&!r)return!0;if(Tt(o,s))break}else if(Se(o)&&Tt(o,s))break}}};function Oa(t,s,a){const r=V(t,a);if(r||hs(a))return{error:r,name:a};const n=a.split(".");for(;n.length;){const i=n.join("."),l=V(s,i),o=V(t,i);if(l&&!Array.isArray(l)&&a!==i)return{name:a};if(o&&o.type)return{name:i,error:o};if(o&&o.root&&o.root.type)return{name:`${i}.root`,error:o.root};n.pop()}return{name:a}}var Id=(t,s,a,r)=>{a(t);const{name:n,...i}=t;return Le(i)||Object.keys(i).length>=Object.keys(s).length||Object.keys(i).find(l=>s[l]===(!r||qe.all))},Pd=(t,s,a)=>!t||!s||t===s||Ct(t).some(r=>r&&(a?r===s:r.startsWith(s)||s.startsWith(r))),Od=(t,s,a,r,n)=>n.isOnAll?!1:!a&&n.isOnTouch?!(s||t):(a?r.isOnBlur:n.isOnBlur)?!t:(a?r.isOnChange:n.isOnChange)?t:!0,Md=(t,s)=>!Js(V(t,s)).length&&ve(t,s),Fd=(t,s,a)=>{const r=Ct(V(t,a));return pe(r,"root",s[a]),pe(t,a,r),t};function Ma(t,s,a="validate"){if(Me(t)||Array.isArray(t)&&t.every(Me)||We(t)&&!t)return{type:a,message:Me(t)?t:"",ref:s}}var pt=t=>Se(t)&&!as(t)?t:{value:t,message:""},Fa=async(t,s,a,r,n,i)=>{const{ref:l,refs:o,required:p,maxLength:h,minLength:f,min:b,max:x,pattern:w,validate:g,name:N,valueAsNumber:d,mount:E}=t._f,j=V(a,N);if(!E||s.has(N))return{};const y=o?o[0]:l,m=H=>{n&&y.reportValidity&&(y.setCustomValidity(We(H)?"":H||""),y.reportValidity())},u={},T=ta(l),C=Mt(l),$=T||C,U=(d||ea(l))&&we(l.value)&&we(j)||ss(l)&&l.value===""||j===""||Array.isArray(j)&&!j.length,W=Ed.bind(null,N,r,u),Y=(H,Q,ee,ie=Ze.maxLength,se=Ze.minLength)=>{const le=H?Q:ee;u[N]={type:H?ie:se,message:le,ref:l,...W(H?ie:se,le)}};if(i?!Array.isArray(j)||!j.length:p&&(!$&&(U||De(j))||We(j)&&!j||C&&!qr(o).isValid||T&&!Ur(o).isValid)){const{value:H,message:Q}=Me(p)?{value:!!p,message:p}:pt(p);if(H&&(u[N]={type:Ze.required,message:Q,ref:y,...W(Ze.required,Q)},!r))return m(Q),u}if(!U&&(!De(b)||!De(x))){let H,Q;const ee=pt(x),ie=pt(b);if(!De(j)&&!isNaN(j)){const se=l.valueAsNumber||j&&+j;De(ee.value)||(H=se>ee.value),De(ie.value)||(Q=se<ie.value)}else{const se=l.valueAsDate||new Date(j),le=P=>new Date(new Date().toDateString()+" "+P),K=l.type=="time",be=l.type=="week";Me(ee.value)&&j&&(H=K?le(j)>le(ee.value):be?j>ee.value:se>new Date(ee.value)),Me(ie.value)&&j&&(Q=K?le(j)<le(ie.value):be?j<ie.value:se<new Date(ie.value))}if((H||Q)&&(Y(!!H,ee.message,ie.message,Ze.max,Ze.min),!r))return m(u[N].message),u}if((h||f)&&!U&&(Me(j)||i&&Array.isArray(j))){const H=pt(h),Q=pt(f),ee=!De(H.value)&&j.length>+H.value,ie=!De(Q.value)&&j.length<+Q.value;if((ee||ie)&&(Y(ee,H.message,Q.message),!r))return m(u[N].message),u}if(w&&!U&&Me(j)){const{value:H,message:Q}=pt(w);if(as(H)&&!j.match(H)&&(u[N]={type:Ze.pattern,message:Q,ref:l,...W(Ze.pattern,Q)},!r))return m(Q),u}if(g){if($e(g)){const H=await g(j,a),Q=Ma(H,y);if(Q&&(u[N]={...Q,...W(Ze.validate,Q.message)},!r))return m(Q.message),u}else if(Se(g)){let H={};for(const Q in g){if(!Le(H)&&!r)break;const ee=Ma(await g[Q](j,a),y,Q);ee&&(H={...ee,...W(Q,ee.message)},m(ee.message),r&&(u[N]=H))}if(!Le(H)&&(u[N]={ref:y,...H},!r))return u}}return m(!0),u};const qd={mode:qe.onSubmit,reValidateMode:qe.onChange,shouldFocusError:!0};function $d(t={}){let s={...qd,...t},a={submitCount:0,isDirty:!1,isReady:!1,isLoading:$e(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},r={},n=Se(s.defaultValues)||Se(s.values)?ke(s.defaultValues||s.values)||{}:{},i=s.shouldUnregister?{}:ke(n),l={action:!1,mount:!1,watch:!1},o={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},p,h=0;const f={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let b={...f};const x={array:Aa(),state:Aa()},w=s.criteriaMode===qe.all,g=S=>k=>{clearTimeout(h),h=setTimeout(S,k)},N=async S=>{if(!s.disabled&&(f.isValid||b.isValid||S)){const k=s.resolver?Le((await C()).errors):await U(r,!0);k!==a.isValid&&x.state.next({isValid:k})}},d=(S,k)=>{!s.disabled&&(f.isValidating||f.validatingFields||b.isValidating||b.validatingFields)&&((S||Array.from(o.mount)).forEach(D=>{D&&(k?pe(a.validatingFields,D,k):ve(a.validatingFields,D))}),x.state.next({validatingFields:a.validatingFields,isValidating:!Le(a.validatingFields)}))},E=(S,k=[],D,_,q=!0,M=!0)=>{if(_&&D&&!s.disabled){if(l.action=!0,M&&Array.isArray(V(r,S))){const G=D(V(r,S),_.argA,_.argB);q&&pe(r,S,G)}if(M&&Array.isArray(V(a.errors,S))){const G=D(V(a.errors,S),_.argA,_.argB);q&&pe(a.errors,S,G),Md(a.errors,S)}if((f.touchedFields||b.touchedFields)&&M&&Array.isArray(V(a.touchedFields,S))){const G=D(V(a.touchedFields,S),_.argA,_.argB);q&&pe(a.touchedFields,S,G)}(f.dirtyFields||b.dirtyFields)&&(a.dirtyFields=gt(n,i)),x.state.next({name:S,isDirty:Y(S,k),dirtyFields:a.dirtyFields,errors:a.errors,isValid:a.isValid})}else pe(i,S,k)},j=(S,k)=>{pe(a.errors,S,k),x.state.next({errors:a.errors})},y=S=>{a.errors=S,x.state.next({errors:a.errors,isValid:!1})},m=(S,k,D,_)=>{const q=V(r,S);if(q){const M=V(i,S,we(D)?V(n,S):D);we(M)||_&&_.defaultChecked||k?pe(i,S,k?M:La(q._f)):ee(S,M),l.mount&&N()}},u=(S,k,D,_,q)=>{let M=!1,G=!1;const ce={name:S};if(!s.disabled){if(!D||_){(f.isDirty||b.isDirty)&&(G=a.isDirty,a.isDirty=ce.isDirty=Y(),M=G!==ce.isDirty);const xe=Ye(V(n,S),k);G=!!V(a.dirtyFields,S),xe?ve(a.dirtyFields,S):pe(a.dirtyFields,S,!0),ce.dirtyFields=a.dirtyFields,M=M||(f.dirtyFields||b.dirtyFields)&&G!==!xe}if(D){const xe=V(a.touchedFields,S);xe||(pe(a.touchedFields,S,D),ce.touchedFields=a.touchedFields,M=M||(f.touchedFields||b.touchedFields)&&xe!==D)}M&&q&&x.state.next(ce)}return M?ce:{}},T=(S,k,D,_)=>{const q=V(a.errors,S),M=(f.isValid||b.isValid)&&We(k)&&a.isValid!==k;if(s.delayError&&D?(p=g(()=>j(S,D)),p(s.delayError)):(clearTimeout(h),p=null,D?pe(a.errors,S,D):ve(a.errors,S)),(D?!Ye(q,D):q)||!Le(_)||M){const G={..._,...M&&We(k)?{isValid:k}:{},errors:a.errors,name:S};a={...a,...G},x.state.next(G)}},C=async S=>{d(S,!0);const k=await s.resolver(i,s.context,Dd(S||o.mount,r,s.criteriaMode,s.shouldUseNativeValidation));return d(S),k},$=async S=>{const{errors:k}=await C(S);if(S)for(const D of S){const _=V(k,D);_?pe(a.errors,D,_):ve(a.errors,D)}else a.errors=k;return k},U=async(S,k,D={valid:!0})=>{for(const _ in S){const q=S[_];if(q){const{_f:M,...G}=q;if(M){const ce=o.array.has(M.name),xe=q._f&&Ld(q._f);xe&&f.validatingFields&&d([M.name],!0);const Fe=await Fa(q,o.disabled,i,w,s.shouldUseNativeValidation&&!k,ce);if(xe&&f.validatingFields&&d([M.name]),Fe[M.name]&&(D.valid=!1,k))break;!k&&(V(Fe,M.name)?ce?Fd(a.errors,Fe,M.name):pe(a.errors,M.name,Fe[M.name]):ve(a.errors,M.name))}!Le(G)&&await U(G,k,D)}}return D.valid},W=()=>{for(const S of o.unMount){const k=V(r,S);k&&(k._f.refs?k._f.refs.every(D=>!Ss(D)):!Ss(k._f.ref))&&ne(S)}o.unMount=new Set},Y=(S,k)=>!s.disabled&&(S&&k&&pe(i,S,k),!Ye(P(),n)),H=(S,k,D)=>Pr(S,o,{...l.mount?i:we(k)?n:Me(S)?{[S]:k}:k},D,k),Q=S=>Js(V(l.mount?i:n,S,s.shouldUnregister?V(n,S,[]):[])),ee=(S,k,D={})=>{const _=V(r,S);let q=k;if(_){const M=_._f;M&&(!M.disabled&&pe(i,S,$r(k,M)),q=ss(M.ref)&&De(k)?"":k,Mr(M.ref)?[...M.ref.options].forEach(G=>G.selected=q.includes(G.value)):M.refs?Mt(M.ref)?M.refs.forEach(G=>{(!G.defaultChecked||!G.disabled)&&(Array.isArray(q)?G.checked=!!q.find(ce=>ce===G.value):G.checked=q===G.value||!!q)}):M.refs.forEach(G=>G.checked=G.value===q):ea(M.ref)?M.ref.value="":(M.ref.value=q,M.ref.type||x.state.next({name:S,values:ke(i)})))}(D.shouldDirty||D.shouldTouch)&&u(S,q,D.shouldTouch,D.shouldDirty,!0),D.shouldValidate&&be(S)},ie=(S,k,D)=>{for(const _ in k){if(!k.hasOwnProperty(_))return;const q=k[_],M=S+"."+_,G=V(r,M);(o.array.has(S)||Se(q)||G&&!G._f)&&!ot(q)?ie(M,q,D):ee(M,q,D)}},se=(S,k,D={})=>{const _=V(r,S),q=o.array.has(S),M=ke(k);pe(i,S,M),q?(x.array.next({name:S,values:ke(i)}),(f.isDirty||f.dirtyFields||b.isDirty||b.dirtyFields)&&D.shouldDirty&&x.state.next({name:S,dirtyFields:gt(n,i),isDirty:Y(S,M)})):_&&!_._f&&!De(M)?ie(S,M,D):ee(S,M,D),Pa(S,o)&&x.state.next({...a,name:S}),x.state.next({name:l.mount?S:void 0,values:ke(i)})},le=async S=>{l.mount=!0;const k=S.target;let D=k.name,_=!0;const q=V(r,D),M=xe=>{_=Number.isNaN(xe)||ot(xe)&&isNaN(xe.getTime())||Ye(xe,V(i,D,xe))},G=Ra(s.mode),ce=Ra(s.reValidateMode);if(q){let xe,Fe;const Ft=k.type?La(q._f):yd(S),et=S.type===ka.BLUR||S.type===ka.FOCUS_OUT,Vr=!Rd(q._f)&&!s.resolver&&!V(a.errors,D)&&!q._f.deps||Od(et,V(a.touchedFields,D),a.isSubmitted,ce,G),fs=Pa(D,o,et);pe(i,D,Ft),et?(!k||!k.readOnly)&&(q._f.onBlur&&q._f.onBlur(S),p&&p(0)):q._f.onChange&&q._f.onChange(S);const ps=u(D,Ft,et),Wr=!Le(ps)||fs;if(!et&&x.state.next({name:D,type:S.type,values:ke(i)}),Vr)return(f.isValid||b.isValid)&&(s.mode==="onBlur"?et&&N():et||N()),Wr&&x.state.next({name:D,...fs?{}:ps});if(!et&&fs&&x.state.next({...a}),s.resolver){const{errors:sa}=await C([D]);if(M(Ft),_){const Hr=Oa(a.errors,r,D),aa=Oa(sa,r,Hr.name||D);xe=aa.error,D=aa.name,Fe=Le(sa)}}else d([D],!0),xe=(await Fa(q,o.disabled,i,w,s.shouldUseNativeValidation))[D],d([D]),M(Ft),_&&(xe?Fe=!1:(f.isValid||b.isValid)&&(Fe=await U(r,!0)));_&&(q._f.deps&&(!Array.isArray(q._f.deps)||q._f.deps.length>0)&&be(q._f.deps),T(D,Fe,xe,ps))}},K=(S,k)=>{if(V(a.errors,k)&&S.focus)return S.focus(),1},be=async(S,k={})=>{let D,_;const q=Ct(S);if(s.resolver){const M=await $(we(S)?S:q);D=Le(M),_=S?!q.some(G=>V(M,G)):D}else S?(_=(await Promise.all(q.map(async M=>{const G=V(r,M);return await U(G&&G._f?{[M]:G}:G)}))).every(Boolean),!(!_&&!a.isValid)&&N()):_=D=await U(r);return x.state.next({...!Me(S)||(f.isValid||b.isValid)&&D!==a.isValid?{}:{name:S},...s.resolver||!S?{isValid:D}:{},errors:a.errors}),k.shouldFocus&&!_&&Tt(r,K,S?q:o.mount),_},P=(S,k)=>{let D={...l.mount?i:n};return k&&(D=Or(k.dirtyFields?a.dirtyFields:a.touchedFields,D)),we(S)?D:Me(S)?V(D,S):S.map(_=>V(D,_))},X=(S,k)=>({invalid:!!V((k||a).errors,S),isDirty:!!V((k||a).dirtyFields,S),error:V((k||a).errors,S),isValidating:!!V(a.validatingFields,S),isTouched:!!V((k||a).touchedFields,S)}),ae=S=>{S&&Ct(S).forEach(k=>ve(a.errors,k)),x.state.next({errors:S?a.errors:{}})},re=(S,k,D)=>{const _=(V(r,S,{_f:{}})._f||{}).ref,q=V(a.errors,S)||{},{ref:M,message:G,type:ce,...xe}=q;pe(a.errors,S,{...xe,...k,ref:_}),x.state.next({name:S,errors:a.errors,isValid:!1}),D&&D.shouldFocus&&_&&_.focus&&_.focus()},ue=(S,k)=>$e(S)?x.state.subscribe({next:D=>"values"in D&&S(H(void 0,k),D)}):H(S,k,!0),ye=S=>x.state.subscribe({next:k=>{Pd(S.name,k.name,S.exact)&&Id(k,S.formState||f,he,S.reRenderRoot)&&S.callback({values:{...i},...a,...k,defaultValues:n})}}).unsubscribe,L=S=>(l.mount=!0,b={...b,...S.formState},ye({...S,formState:b})),ne=(S,k={})=>{for(const D of S?Ct(S):o.mount)o.mount.delete(D),o.array.delete(D),k.keepValue||(ve(r,D),ve(i,D)),!k.keepError&&ve(a.errors,D),!k.keepDirty&&ve(a.dirtyFields,D),!k.keepTouched&&ve(a.touchedFields,D),!k.keepIsValidating&&ve(a.validatingFields,D),!s.shouldUnregister&&!k.keepDefaultValue&&ve(n,D);x.state.next({values:ke(i)}),x.state.next({...a,...k.keepDirty?{isDirty:Y()}:{}}),!k.keepIsValid&&N()},z=({disabled:S,name:k})=>{(We(S)&&l.mount||S||o.disabled.has(k))&&(S?o.disabled.add(k):o.disabled.delete(k))},oe=(S,k={})=>{let D=V(r,S);const _=We(k.disabled)||We(s.disabled);return pe(r,S,{...D||{},_f:{...D&&D._f?D._f:{ref:{name:S}},name:S,mount:!0,...k}}),o.mount.add(S),D?z({disabled:We(k.disabled)?k.disabled:s.disabled,name:S}):m(S,!0,k.value),{..._?{disabled:k.disabled||s.disabled}:{},...s.progressive?{required:!!k.required,min:Et(k.min),max:Et(k.max),minLength:Et(k.minLength),maxLength:Et(k.maxLength),pattern:Et(k.pattern)}:{},name:S,onChange:le,onBlur:le,ref:q=>{if(q){oe(S,k),D=V(r,S);const M=we(q.value)&&q.querySelectorAll&&q.querySelectorAll("input,select,textarea")[0]||q,G=kd(M),ce=D._f.refs||[];if(G?ce.find(xe=>xe===M):M===D._f.ref)return;pe(r,S,{_f:{...D._f,...G?{refs:[...ce.filter(Ss),M,...Array.isArray(V(n,S))?[{}]:[]],ref:{type:M.type,name:S}}:{ref:M}}}),m(S,!1,void 0,M)}else D=V(r,S,{}),D._f&&(D._f.mount=!1),(s.shouldUnregister||k.shouldUnregister)&&!(Nd(o.array,S)&&l.action)&&o.unMount.add(S)}}},F=()=>s.shouldFocusError&&Tt(r,K,o.mount),Ce=S=>{We(S)&&(x.state.next({disabled:S}),Tt(r,(k,D)=>{const _=V(r,D);_&&(k.disabled=_._f.disabled||S,Array.isArray(_._f.refs)&&_._f.refs.forEach(q=>{q.disabled=_._f.disabled||S}))},0,!1))},v=(S,k)=>async D=>{let _;D&&(D.preventDefault&&D.preventDefault(),D.persist&&D.persist());let q=ke(i);if(x.state.next({isSubmitting:!0}),s.resolver){const{errors:M,values:G}=await C();a.errors=M,q=ke(G)}else await U(r);if(o.disabled.size)for(const M of o.disabled)ve(q,M);if(ve(a.errors,"root"),Le(a.errors)){x.state.next({errors:{}});try{await S(q,D)}catch(M){_=M}}else k&&await k({...a.errors},D),F(),setTimeout(F);if(x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Le(a.errors)&&!_,submitCount:a.submitCount+1,errors:a.errors}),_)throw _},R=(S,k={})=>{V(r,S)&&(we(k.defaultValue)?se(S,ke(V(n,S))):(se(S,k.defaultValue),pe(n,S,ke(k.defaultValue))),k.keepTouched||ve(a.touchedFields,S),k.keepDirty||(ve(a.dirtyFields,S),a.isDirty=k.defaultValue?Y(S,ke(V(n,S))):Y()),k.keepError||(ve(a.errors,S),f.isValid&&N()),x.state.next({...a}))},B=(S,k={})=>{const D=S?ke(S):n,_=ke(D),q=Le(S),M=q?n:_;if(k.keepDefaultValues||(n=D),!k.keepValues){if(k.keepDirtyValues){const G=new Set([...o.mount,...Object.keys(gt(n,i))]);for(const ce of Array.from(G))V(a.dirtyFields,ce)?pe(M,ce,V(i,ce)):se(ce,V(M,ce))}else{if(Ks&&we(S))for(const G of o.mount){const ce=V(r,G);if(ce&&ce._f){const xe=Array.isArray(ce._f.refs)?ce._f.refs[0]:ce._f.ref;if(ss(xe)){const Fe=xe.closest("form");if(Fe){Fe.reset();break}}}}if(k.keepFieldsRef)for(const G of o.mount)se(G,V(M,G));else r={}}i=s.shouldUnregister?k.keepDefaultValues?ke(n):{}:ke(M),x.array.next({values:{...M}}),x.state.next({values:{...M}})}o={mount:k.keepDirtyValues?o.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},l.mount=!f.isValid||!!k.keepIsValid||!!k.keepDirtyValues,l.watch=!!s.shouldUnregister,x.state.next({submitCount:k.keepSubmitCount?a.submitCount:0,isDirty:q?!1:k.keepDirty?a.isDirty:!!(k.keepDefaultValues&&!Ye(S,n)),isSubmitted:k.keepIsSubmitted?a.isSubmitted:!1,dirtyFields:q?{}:k.keepDirtyValues?k.keepDefaultValues&&i?gt(n,i):a.dirtyFields:k.keepDefaultValues&&S?gt(n,S):k.keepDirty?a.dirtyFields:{},touchedFields:k.keepTouched?a.touchedFields:{},errors:k.keepErrors?a.errors:{},isSubmitSuccessful:k.keepIsSubmitSuccessful?a.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:n})},J=(S,k)=>B($e(S)?S(i):S,k),de=(S,k={})=>{const D=V(r,S),_=D&&D._f;if(_){const q=_.refs?_.refs[0]:_.ref;q.focus&&(q.focus(),k.shouldSelect&&$e(q.select)&&q.select())}},he=S=>{a={...a,...S}},vt={control:{register:oe,unregister:ne,getFieldState:X,handleSubmit:v,setError:re,_subscribe:ye,_runSchema:C,_focusError:F,_getWatch:H,_getDirty:Y,_setValid:N,_setFieldArray:E,_setDisabledField:z,_setErrors:y,_getFieldArray:Q,_reset:B,_resetDefaultValues:()=>$e(s.defaultValues)&&s.defaultValues().then(S=>{J(S,s.resetOptions),x.state.next({isLoading:!1})}),_removeUnmounted:W,_disableForm:Ce,_subjects:x,_proxyFormState:f,get _fields(){return r},get _formValues(){return i},get _state(){return l},set _state(S){l=S},get _defaultValues(){return n},get _names(){return o},set _names(S){o=S},get _formState(){return a},get _options(){return s},set _options(S){s={...s,...S}}},subscribe:L,trigger:be,register:oe,handleSubmit:v,watch:ue,setValue:se,getValues:P,reset:J,resetField:R,clearErrors:ae,unregister:ne,setError:re,setFocus:de,getFieldState:X};return{...vt,formControl:vt}}function ft(t={}){const s=je.useRef(void 0),a=je.useRef(void 0),[r,n]=je.useState({isDirty:!1,isValidating:!1,isLoading:$e(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,isReady:!1,defaultValues:$e(t.defaultValues)?void 0:t.defaultValues});if(!s.current)if(t.formControl)s.current={...t.formControl,formState:r},t.defaultValues&&!$e(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions);else{const{formControl:l,...o}=$d(t);s.current={...o,formState:r}}const i=s.current.control;return i._options=t,Ir(()=>{const l=i._subscribe({formState:i._proxyFormState,callback:()=>n({...i._formState}),reRenderRoot:!0});return n(o=>({...o,isReady:!0})),i._formState.isReady=!0,l},[i]),je.useEffect(()=>i._disableForm(t.disabled),[i,t.disabled]),je.useEffect(()=>{t.mode&&(i._options.mode=t.mode),t.reValidateMode&&(i._options.reValidateMode=t.reValidateMode)},[i,t.mode,t.reValidateMode]),je.useEffect(()=>{t.errors&&(i._setErrors(t.errors),i._focusError())},[i,t.errors]),je.useEffect(()=>{t.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,t.shouldUnregister]),je.useEffect(()=>{if(i._proxyFormState.isDirty){const l=i._getDirty();l!==r.isDirty&&i._subjects.state.next({isDirty:l})}},[i,r.isDirty]),je.useEffect(()=>{t.values&&!Ye(t.values,a.current)?(i._reset(t.values,{keepFieldsRef:!0,...i._options.resetOptions}),a.current=t.values,n(l=>({...l}))):i._resetDefaultValues()},[i,t.values]),je.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),s.current.formState=Sd(r,i),s.current}const Ud=()=>e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-green-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-emerald-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000"}),e.jsx("div",{className:"absolute top-40 left-40 w-80 h-80 bg-teal-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-4000"})]}),e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"max-w-4xl w-full flex bg-white rounded-3xl shadow-2xl overflow-hidden relative z-10",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-green-600 via-emerald-600 to-teal-600 p-12 flex-col justify-center relative",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-10"}),e.jsx("div",{className:"relative z-10",children:e.jsxs(O.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.3,duration:.8},children:[e.jsx("div",{className:"w-16 h-16 bg-white bg-opacity-30 rounded-2xl flex items-center justify-center mb-8 backdrop-blur-sm animate-pulse",children:e.jsx("div",{className:"w-8 h-8 bg-white bg-opacity-50 rounded"})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"h-10 bg-white bg-opacity-30 rounded-lg mb-2 animate-pulse"}),e.jsx("div",{className:"h-6 bg-white bg-opacity-20 rounded-lg w-3/4 animate-pulse"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("div",{className:"h-4 bg-white bg-opacity-20 rounded mb-2 animate-pulse"}),e.jsx("div",{className:"h-4 bg-white bg-opacity-20 rounded mb-2 w-5/6 animate-pulse"}),e.jsx("div",{className:"h-4 bg-white bg-opacity-20 rounded w-4/5 animate-pulse"})]}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(t=>e.jsxs("div",{className:"flex items-center animate-pulse",children:[e.jsx("div",{className:"w-2 h-2 bg-white bg-opacity-40 rounded-full mr-3"}),e.jsx("div",{className:"h-4 bg-white bg-opacity-20 rounded flex-1"})]},t))})]})})]}),e.jsxs("div",{className:"w-full lg:w-1/2 p-12 flex flex-col justify-center",children:[e.jsx(O.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{delay:.4,duration:.8},children:e.jsxs("div",{className:"text-center lg:text-left mb-8",children:[e.jsx("div",{className:"lg:hidden w-16 h-16 bg-gradient-to-r from-green-500 to-emerald-600 rounded-2xl flex items-center justify-center mx-auto lg:mx-0 mb-6 shadow-lg animate-pulse",children:e.jsx("div",{className:"w-8 h-8 bg-white bg-opacity-50 rounded"})}),e.jsx("div",{className:"h-8 bg-gray-200 rounded-lg mb-2 animate-pulse"}),e.jsx("div",{className:"h-5 bg-gray-100 rounded-lg w-3/4 animate-pulse"})]})}),e.jsx(O.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"grid grid-cols-2 gap-4 mb-6",children:[1,2].map(t=>e.jsxs("div",{className:"p-4 rounded-xl border-2 border-gray-200 bg-white animate-pulse",children:[e.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded mx-auto mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-1"}),e.jsx("div",{className:"h-3 bg-gray-100 rounded w-2/3 mx-auto"})]},t))}),e.jsxs(O.div,{className:"space-y-6",initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:[e.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 animate-pulse",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-5 h-5 bg-gray-200 rounded"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded flex-1"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-1/4 animate-pulse"}),e.jsx("div",{className:"h-12 bg-gray-100 rounded-xl animate-pulse"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-1/4 animate-pulse"}),e.jsx("div",{className:"h-12 bg-gray-100 rounded-xl animate-pulse"})]})]}),e.jsx("div",{children:e.jsx("div",{className:"w-full h-12 bg-gray-200 rounded-xl animate-pulse"})}),e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"h-3 bg-gray-100 rounded w-2/3 mx-auto animate-pulse"})})]})]})]})]});function _d(){const[t,s]=c.useState(!1),[a,r]=c.useState(!1),[n,i]=c.useState(null),[l,o]=c.useState(!0),{login:p,isAuthenticated:h}=_e(),f=Ge(),{register:b,handleSubmit:x,setValue:w,formState:{errors:g}}=ft();c.useEffect(()=>{const E=setTimeout(()=>{o(!1)},2e3);return()=>clearTimeout(E)},[]),c.useEffect(()=>{h&&(console.log("✅ User authenticated, navigating to dashboard..."),f("/dashboard"))},[h,f]);const N=E=>{i(E),w("email",""),w("password","")},d=async E=>{r(!0);try{console.log("🔐 Attempting login..."),await p(E),console.log("✅ Login successful, authentication state should update...")}catch(j){console.error("❌ Login failed:",j)}finally{r(!1)}};return l?e.jsx(Ud,{}):e.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 py-12 px-4 sm:px-6 lg:px-8 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-green-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-emerald-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-2000"}),e.jsx("div",{className:"absolute top-40 left-40 w-80 h-80 bg-teal-200 rounded-full mix-blend-multiply filter blur-xl opacity-70 animate-blob animation-delay-4000"})]}),e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,ease:"easeOut"},className:"max-w-4xl w-full flex bg-white rounded-3xl shadow-2xl overflow-hidden relative z-10",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-green-600 via-emerald-600 to-teal-600 p-12 flex-col justify-center relative",children:[e.jsx("div",{className:"absolute inset-0 bg-black opacity-10"}),e.jsx("div",{className:"relative z-10",children:e.jsxs(O.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{delay:.3,duration:.8},children:[e.jsx("div",{className:"mb-10 flex justify-center items-center",children:e.jsx("div",{className:"w-24 h-24 flex items-center justify-center rounded-3xl bg-white/90 backdrop-blur-lg border-2 border-white/50 shadow-2xl hover:bg-white hover:scale-105 transition-all duration-300",children:e.jsx("img",{src:"/generated-image.png",alt:"Company Logo",className:"w-20 h-20 object-contain",style:{filter:"contrast(1.8) saturate(1.6) brightness(1.4)",imageRendering:"crisp-edges",maxWidth:"100%",maxHeight:"100%"}})})}),e.jsx("h1",{className:"text-4xl font-bold text-white mb-4",children:"Welcome Back!"}),e.jsx("p",{className:"text-green-100 text-lg mb-8 leading-relaxed",children:"Sign in to access your business loan management dashboard and streamline your financial operations."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-green-100",children:[e.jsx("div",{className:"w-2 h-2 bg-green-300 rounded-full mr-3"}),e.jsx("span",{children:"Secure loan processing"})]}),e.jsxs("div",{className:"flex items-center text-green-100",children:[e.jsx("div",{className:"w-2 h-2 bg-green-300 rounded-full mr-3"}),e.jsx("span",{children:"Real-time application tracking"})]}),e.jsxs("div",{className:"flex items-center text-green-100",children:[e.jsx("div",{className:"w-2 h-2 bg-green-300 rounded-full mr-3"}),e.jsx("span",{children:"Comprehensive dashboard"})]})]})]})})]}),e.jsxs("div",{className:"w-full lg:w-1/2 p-12 flex flex-col justify-center",children:[e.jsx(O.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{delay:.4,duration:.8},children:e.jsxs("div",{className:"text-center lg:text-left mb-8",children:[e.jsx("div",{className:"lg:hidden mb-8 flex justify-center items-center",children:e.jsx("div",{className:"w-20 h-20 flex items-center justify-center rounded-2xl bg-white backdrop-blur-md border-2 border-gray-200 shadow-xl hover:shadow-2xl hover:scale-105 transition-all duration-300",children:e.jsx("img",{src:"/generated-image.png",alt:"Company Logo",className:"w-16 h-16 object-contain",style:{filter:"contrast(1.8) saturate(1.6) brightness(1.4)",imageRendering:"crisp-edges",maxWidth:"100%",maxHeight:"100%"}})})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Login to your account"}),e.jsx("p",{className:"text-gray-600",children:"Choose your role and enter your credentials"})]})}),e.jsxs(O.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},className:"grid grid-cols-2 gap-4 mb-6",children:[e.jsxs(O.button,{type:"button",onClick:()=>N("ADMIN"),className:`p-4 rounded-xl border-2 transition-all duration-300 ${n==="ADMIN"?"border-green-500 bg-green-50 shadow-lg ring-2 ring-green-200":"border-gray-200 bg-white hover:border-green-300 hover:shadow-md"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(Xt,{className:`h-8 w-8 mx-auto mb-2 ${n==="ADMIN"?"text-green-600":"text-gray-400"}`}),e.jsx("div",{className:`font-semibold ${n==="ADMIN"?"text-green-900":"text-gray-700"}`,children:"Admin"}),e.jsx("div",{className:`text-xs ${n==="ADMIN"?"text-green-600":"text-gray-500"}`,children:"Full Access"})]}),e.jsxs(O.button,{type:"button",onClick:()=>N("EMPLOYEE"),className:`p-4 rounded-xl border-2 transition-all duration-300 ${n==="EMPLOYEE"?"border-emerald-500 bg-emerald-50 shadow-lg ring-2 ring-emerald-200":"border-gray-200 bg-white hover:border-emerald-300 hover:shadow-md"}`,whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsx(Xe,{className:`h-8 w-8 mx-auto mb-2 ${n==="EMPLOYEE"?"text-emerald-600":"text-gray-400"}`}),e.jsx("div",{className:`font-semibold ${n==="EMPLOYEE"?"text-emerald-900":"text-gray-700"}`,children:"Employee"}),e.jsx("div",{className:`text-xs ${n==="EMPLOYEE"?"text-emerald-600":"text-gray-500"}`,children:"Limited Access"})]})]}),e.jsxs(O.form,{className:"space-y-6",onSubmit:x(d),initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},children:[n&&e.jsx(O.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[n==="ADMIN"?e.jsx(Xt,{className:"h-5 w-5 text-green-600"}):e.jsx(Xe,{className:"h-5 w-5 text-emerald-600"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Logging in as ",n==="ADMIN"?"Admin":"Employee"]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-slate-700 mb-2",children:"Email Address"}),e.jsx("input",{...b("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),type:"email",className:"input-field",placeholder:"Enter your email"}),g.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.email.message})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-slate-700 mb-2",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{...b("password",{required:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),type:t?"text":"password",className:"input-field pr-12",placeholder:"Enter your password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-4 flex items-center",onClick:()=>s(!t),children:t?e.jsx(Jt,{className:"h-5 w-5 text-slate-400 hover:text-slate-600"}):e.jsx(Ie,{className:"h-5 w-5 text-slate-400 hover:text-slate-600"})})]}),g.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:g.password.message})]})]}),e.jsx("div",{children:e.jsx(O.button,{type:"submit",disabled:a||!n,className:`w-full py-3 px-4 rounded-xl font-semibold text-white transition-all duration-300 ${n?"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-700 hover:to-emerald-700 shadow-lg hover:shadow-xl":"bg-gray-300 cursor-not-allowed"} ${a?"animate-pulse":""}`,whileHover:n&&!a?{scale:1.02}:{},whileTap:n&&!a?{scale:.98}:{},children:a?e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Signing in..."})]}):n?`Sign in as ${n==="ADMIN"?"Admin":"Employee"}`:"Select a role to continue"})}),n&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center text-xs text-gray-500",children:"Please enter your credentials to continue"})]})]})]})]})}const Bd=()=>{const{user:t}=_e(),{data:s,isLoading:a,error:r,refetch:n}=me("dashboard-data",async()=>{var d,E,j,y;console.log("📊 Fetching dashboard data...");let i=[];try{const m=await fetch("/api/enquiries");m.ok?(i=await m.json(),console.log("📊 Dashboard fetched enquiries:",i.length,"enquiries")):(console.log("📊 API response not ok, using empty data"),i=[])}catch(m){console.log("📊 Fetch error, using empty data:",m),i=[]}let l=0;try{const m=await fetch("/api/shortlist");if(m.ok){const u=await m.json();l=(u==null?void 0:u.length)||0}else l=0}catch(m){console.log("📊 Shortlist fetch error:",m),l=0}let o=0;try{const m=await fetch("/api/documents");if(m.ok){const u=await m.json();o=((d=u==null?void 0:u.filter(T=>!T.verified))==null?void 0:d.length)||0,console.log("📊 Documents awaiting verification:",o)}else o=0}catch(m){console.log("📊 Documents fetch error:",m),o=0}let p=0;try{const m=await fetch("/api/cashfree");if(m.ok){const u=await m.json();p=((E=u==null?void 0:u.filter(T=>T.status==="TRANSACTION_DONE"))==null?void 0:E.length)||0}else p=0}catch(m){console.log("📊 Payment fetch error:",m),p=0}let h=0,f=0,b=0;try{const m=await fetch("/api/transactions");if(m.ok){const u=await m.json();h=(u==null?void 0:u.length)||0,f=((j=u==null?void 0:u.filter(T=>T.status==="COMPLETED"))==null?void 0:j.length)||0,b=((y=u==null?void 0:u.filter(T=>T.status==="PENDING"))==null?void 0:y.length)||0,console.log("📊 Transactions data:",{totalTransactions:h,completedTransactions:f,pendingTransactions:b})}}catch(m){console.log("📊 Transactions fetch error:",m),h=0,f=0,b=0}const x={totalEnquiries:i.length,pendingReview:i.filter(m=>m.interestStatus==="INTERESTED").length,approved:i.filter(m=>m.interestStatus==="APPROVED").length,rejected:i.filter(m=>m.interestStatus==="NOT_INTERESTED").length,documentsAwaiting:o,clientsShortlisted:l,paymentGatewayComplete:p,totalTransactions:h,completedTransactions:f,pendingTransactions:b,totalRevenue:p*5e5,monthlyGrowth:i.length>0?Math.round(Math.random()*20+5):0,activeStaff:7},w=i.length,g=[{stage:"Initial Enquiry",count:x.totalEnquiries,percentage:w>0?100:0,color:"bg-blue-500"},{stage:"Documents Awaiting Verification",count:x.documentsAwaiting,percentage:w>0?Math.round(x.documentsAwaiting/w*100):0,color:"bg-indigo-500"},{stage:"Under Review",count:x.pendingReview,percentage:w>0?Math.round(x.pendingReview/w*100):0,color:"bg-purple-500"},{stage:"Approved",count:x.approved,percentage:w>0?Math.round(x.approved/w*100):0,color:"bg-green-500"},{stage:"Loan Disbursed",count:x.paymentGatewayComplete,percentage:w>0?Math.round(x.paymentGatewayComplete/w*100):0,color:"bg-emerald-500"},{stage:"Transactions Completed",count:x.completedTransactions,percentage:w>0?Math.round(x.completedTransactions/w*100):0,color:"bg-teal-500"}],N=i.sort((m,u)=>new Date(u.createdAt).getTime()-new Date(m.createdAt).getTime()).slice(0,10).map(m=>({id:m.id,name:m.name||m.businessName||`Client ${m.id}`,mobile:m.mobile||"N/A",businessType:m.businessType||"General Business",interestStatus:m.interestStatus||"INTERESTED",createdAt:m.createdAt||new Date().toISOString(),staff:m.staff||{name:m.assignedStaff||"Unassigned"}}));return{stats:x,enquiryFunnel:g,recentEnquiries:N}},{enabled:!!t,staleTime:30*1e3,cacheTime:5*60*1e3,refetchInterval:15*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,onSuccess:i=>{console.log("📊 Dashboard data updated:",{totalEnquiries:i.stats.totalEnquiries,shortlisted:i.stats.clientsShortlisted,payments:i.stats.paymentGatewayComplete})},onError:i=>{console.error("📊 Dashboard data fetch error:",i)},select:i=>i||{stats:{totalEnquiries:0,pendingReview:0,approved:0,rejected:0,documentsAwaiting:0,clientsShortlisted:0,paymentGatewayComplete:0,totalTransactions:0,completedTransactions:0,pendingTransactions:0,totalRevenue:0,monthlyGrowth:0,activeStaff:7},enquiryFunnel:[{stage:"Initial Enquiry",count:0,percentage:0,color:"bg-blue-500"},{stage:"Documents Awaiting Verification",count:0,percentage:0,color:"bg-indigo-500"},{stage:"Under Review",count:0,percentage:0,color:"bg-purple-500"},{stage:"Approved",count:0,percentage:0,color:"bg-green-500"},{stage:"Loan Disbursed",count:0,percentage:0,color:"bg-emerald-500"},{stage:"Transactions Completed",count:0,percentage:0,color:"bg-teal-500"}],recentEnquiries:[]}});return{data:s||{stats:{totalEnquiries:0,pendingReview:0,approved:0,rejected:0,documentsAwaiting:0,clientsShortlisted:0,paymentGatewayComplete:0,totalTransactions:0,completedTransactions:0,pendingTransactions:0,totalRevenue:0,monthlyGrowth:0,activeStaff:7},enquiryFunnel:[{stage:"Initial Enquiry",count:0,percentage:0,color:"bg-blue-500"},{stage:"Documents Awaiting Verification",count:0,percentage:0,color:"bg-indigo-500"},{stage:"Under Review",count:0,percentage:0,color:"bg-purple-500"},{stage:"Approved",count:0,percentage:0,color:"bg-green-500"},{stage:"Loan Disbursed",count:0,percentage:0,color:"bg-emerald-500"},{stage:"Transactions Completed",count:0,percentage:0,color:"bg-teal-500"}],recentEnquiries:[]},loading:a,error:r,refetch:n}},Vd=()=>{const{user:t}=_e(),{data:s,isLoading:a,error:r,refetch:n}=me(["individual-dashboard",t==null?void 0:t.id],async()=>{console.log("👤 Fetching individual dashboard data for user:",t==null?void 0:t.name);let i=[];try{const m=await fetch("/api/enquiries");m.ok&&(i=(await m.json()).filter(T=>{var C;return T.assignedStaff===(t==null?void 0:t.name)||((C=T.staff)==null?void 0:C.name)===(t==null?void 0:t.name)||T.staffId===(t==null?void 0:t.id)}),console.log("👤 My enquiries:",i.length))}catch(m){console.log("👤 Enquiries fetch error:",m),i=[]}let l=[];try{const m=await fetch("/api/documents");m.ok&&(l=(await m.json()).filter(T=>T.verifiedBy===(t==null?void 0:t.name)||T.uploadedBy===(t==null?void 0:t.name)||T.staffId===(t==null?void 0:t.id)),console.log("👤 My documents:",l.length))}catch(m){console.log("👤 Documents fetch error:",m),l=[]}let o=[];try{const m=await fetch("/api/shortlist");m.ok&&(o=(await m.json()).filter(T=>T.createdBy===(t==null?void 0:t.name)||T.staffId===(t==null?void 0:t.id)||T.assignedStaff===(t==null?void 0:t.name)),console.log("👤 My shortlists:",o.length))}catch(m){console.log("👤 Shortlists fetch error:",m),o=[]}let p=[];try{const m=await fetch("/api/cashfree");m.ok&&(p=(await m.json()).filter(T=>{var C;return((C=T.submittedBy)==null?void 0:C.name)===(t==null?void 0:t.name)||T.handledBy===(t==null?void 0:t.name)||T.staffId===(t==null?void 0:t.id)}),console.log("👤 My payments:",p.length))}catch(m){console.log("👤 Payments fetch error:",m),p=[]}const h=new Date,f=new Date(h.setDate(h.getDate()-h.getDay())),b=new Date(f);b.setDate(b.getDate()-7);const x=new Date(h.getFullYear(),h.getMonth(),1),w=i.filter(m=>new Date(m.createdAt)>=f).length,g=i.filter(m=>{const u=new Date(m.createdAt);return u>=b&&u<f}).length,N=i.filter(m=>new Date(m.createdAt)>=x).length,d={myEnquiries:i.length,myDocumentsProcessed:l.filter(m=>m.verified).length,myShortlisted:o.length,myPaymentApplications:p.length,myCompletedTasks:l.filter(m=>m.verified).length+o.length+p.filter(m=>m.status==="COMPLETED").length,myPendingTasks:l.filter(m=>!m.verified).length+p.filter(m=>m.status==="PENDING").length,totalClientsHandled:i.length,successRate:i.length>0?Math.round(p.filter(m=>m.status==="COMPLETED").length/i.length*100):0,thisMonthEnquiries:N,thisWeekEnquiries:w},E=[...i.slice(0,3).map(m=>({id:m.id,type:"ENQUIRY",clientName:m.name||"Unknown Client",action:"New enquiry received",timestamp:m.createdAt,status:m.interestStatus||"PENDING"})),...l.slice(0,2).map(m=>{var u;return{id:m.id,type:"DOCUMENT",clientName:((u=m.enquiry)==null?void 0:u.name)||"Unknown Client",action:m.verified?"Document verified":"Document uploaded",timestamp:m.createdAt,status:m.verified?"VERIFIED":"PENDING"}}),...o.slice(0,2).map(m=>({id:m.id,type:"SHORTLIST",clientName:m.name||"Unknown Client",action:"Added to shortlist",timestamp:m.createdAt,status:m.interestStatus||"ACTIVE"})),...p.slice(0,2).map(m=>{var u;return{id:m.id,type:"PAYMENT",clientName:((u=m.shortlist)==null?void 0:u.name)||"Unknown Client",action:"Payment application processed",timestamp:m.createdAt,status:m.status||"PENDING"}})].sort((m,u)=>new Date(u.timestamp).getTime()-new Date(m.timestamp).getTime()).slice(0,8),j=i.map(m=>({id:m.id,name:m.name||"Unknown Client",mobile:m.mobile,businessType:m.businessType,status:m.interestStatus,lastActivity:m.createdAt,documentsCount:l.filter(u=>u.enquiryId===m.id).length,isShortlisted:o.some(u=>u.enquiryId===m.id),hasPaymentApplication:p.some(u=>{var T,C;return((C=(T=u.shortlist)==null?void 0:T.enquiry)==null?void 0:C.id)===m.id})})),y={thisWeek:w,lastWeek:g,growth:g>0?Math.round((w-g)/g*100):0};return{stats:d,recentActivities:E,myClients:j,performanceMetrics:y}},{enabled:!!t,staleTime:60*1e3,cacheTime:5*60*1e3,refetchInterval:30*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,onSuccess:i=>{console.log("👤 Individual dashboard data updated:",{myEnquiries:i.stats.myEnquiries,myShortlisted:i.stats.myShortlisted,myPayments:i.stats.myPaymentApplications,successRate:i.stats.successRate})},onError:i=>{console.error("👤 Individual dashboard data fetch error:",i)}});return{data:s||{stats:{myEnquiries:0,myDocumentsProcessed:0,myShortlisted:0,myPaymentApplications:0,myCompletedTasks:0,myPendingTasks:0,totalClientsHandled:0,successRate:0,thisMonthEnquiries:0,thisWeekEnquiries:0},recentActivities:[],myClients:[],performanceMetrics:{thisWeek:0,lastWeek:0,growth:0}},loading:a,error:r,refetch:n}};function Wd({onSwitchToGlobal:t}){const{user:s}=_e(),{data:a,loading:r,refetch:n}=Vd(),i=o=>{switch(o==null?void 0:o.toLowerCase()){case"completed":case"verified":case"approved":return"bg-green-100 text-green-800";case"interested":case"active":return"bg-blue-100 text-blue-800";case"pending":return"bg-yellow-100 text-yellow-800";case"not_interested":case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},l=o=>{switch(o){case"ENQUIRY":return it;case"DOCUMENT":return Re;case"SHORTLIST":return js;case"PAYMENT":return Wt;default:return it}};return r?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((o,p)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded-xl"},p))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"h-96 bg-gray-200 rounded-xl"}),e.jsx("div",{className:"h-96 bg-gray-200 rounded-xl"})]})]})}):e.jsxs("div",{className:"p-8 space-y-8 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 min-h-screen",children:[e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-purple-600 via-blue-600 to-indigo-600 rounded-2xl p-8 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"My Personal Dashboard"}),e.jsxs("p",{className:"text-blue-100 text-lg",children:["Welcome back, ",s==null?void 0:s.name,"! Here's your personal performance overview."]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center justify-end space-x-2 mb-1",children:[e.jsx(la,{className:"h-5 w-5 text-yellow-300"}),e.jsxs("p",{className:"text-blue-100 text-sm",children:["Success Rate: ",a.stats.successRate,"%"]})]}),e.jsxs("p",{className:"text-blue-200 text-xs",children:[a.stats.totalClientsHandled," clients handled • Role: ",s==null?void 0:s.role]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[t&&e.jsxs("button",{onClick:t,className:"inline-flex items-center px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-white transition-all duration-200",title:"Switch to Global Dashboard",children:[e.jsx(wi,{className:"h-4 w-4 mr-2"}),"Global Dashboard"]}),e.jsxs("button",{onClick:()=>n(),disabled:r,className:`inline-flex items-center px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-white transition-all duration-200 ${r?"opacity-50 cursor-not-allowed":""}`,title:"Refresh my dashboard data",children:[e.jsx("svg",{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),r?"Updating...":"Refresh"]})]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ds,{className:"h-5 w-5 text-green-300"}),e.jsxs("span",{className:"text-sm",children:["Growth: ",a.performanceMetrics.growth,"%"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xl,{className:"h-5 w-5 text-orange-300"}),e.jsxs("span",{className:"text-sm",children:["This Week: ",a.performanceMetrics.thisWeek," enquiries"]})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[{title:"My Enquiries",value:a.stats.myEnquiries,icon:it,color:"from-blue-500 to-blue-600",change:`+${a.stats.thisWeekEnquiries} this week`,trend:"up"},{title:"Documents Processed",value:a.stats.myDocumentsProcessed,icon:Re,color:"from-green-500 to-emerald-600",change:"Verified",trend:"up"},{title:"Clients Shortlisted",value:a.stats.myShortlisted,icon:js,color:"from-yellow-500 to-orange-500",change:"Active",trend:"up"},{title:"Payment Applications",value:a.stats.myPaymentApplications,icon:Wt,color:"from-purple-500 to-indigo-600",change:"Processed",trend:"up"},{title:"Pending Tasks",value:a.stats.myPendingTasks,icon:Rt,color:"from-red-500 to-pink-600",change:"To Complete",trend:a.stats.myPendingTasks>0?"down":"up"}].map((o,p)=>{const h=o.icon;return e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:p*.1},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-r ${o.color}`,children:e.jsx(h,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:`flex items-center space-x-1 text-sm ${o.trend==="up"?"text-green-600":"text-red-600"}`,children:[o.trend==="up"?e.jsx(er,{className:"h-4 w-4"}):e.jsx(Ja,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:o.change})]})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:o.value}),e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:o.title})]},p)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(O.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"My Recent Activities"}),e.jsx(Kt,{className:"h-6 w-6 text-gray-400"})]}),e.jsx("div",{className:"space-y-4",children:a.recentActivities.length>0?a.recentActivities.map((o,p)=>{const h=l(o.type);return e.jsxs(O.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4+p*.1},className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(h,{className:"h-8 w-8 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:o.action}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Client: ",o.clientName]}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(o.timestamp).toLocaleString()})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i(o.status)}`,children:o.status})})]},o.id)}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(it,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No recent activities"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Your activities will appear here"})]})})]}),e.jsxs(O.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900",children:["My Clients (",a.myClients.length,")"]}),e.jsx(Xe,{className:"h-6 w-6 text-gray-400"})]}),e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:a.myClients.length>0?a.myClients.map((o,p)=>e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5+p*.1},className:"flex items-center justify-between p-4 bg-gray-50 rounded-xl hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:o.name}),o.isShortlisted&&e.jsx(js,{className:"h-4 w-4 text-yellow-500"}),o.hasPaymentApplication&&e.jsx(Wt,{className:"h-4 w-4 text-green-500"})]}),e.jsx("p",{className:"text-sm text-gray-600",children:o.mobile}),e.jsx("p",{className:"text-xs text-gray-500",children:o.businessType}),e.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[o.documentsCount," docs"]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i(o.status)}`,children:o.status})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-1 text-blue-600 hover:text-blue-800",title:"View Client",children:e.jsx(Ie,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-1 text-indigo-600 hover:text-indigo-800",title:"Edit Client",children:e.jsx(Ke,{className:"h-4 w-4"})})]})]},o.id)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Xe,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"No clients assigned"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Clients will appear here when assigned to you"})]})})]})]}),e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Performance Summary"}),e.jsx(la,{className:"h-6 w-6 text-yellow-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600 mb-1",children:[a.stats.successRate,"%"]}),e.jsx("div",{className:"text-sm text-blue-700 font-medium",children:"Success Rate"}),e.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"Conversion to Payment"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 mb-1",children:a.stats.myCompletedTasks}),e.jsx("div",{className:"text-sm text-green-700 font-medium",children:"Completed Tasks"}),e.jsx("div",{className:"text-xs text-green-600 mt-1",children:"This Month"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 mb-1",children:a.stats.thisMonthEnquiries}),e.jsx("div",{className:"text-sm text-purple-700 font-medium",children:"This Month"}),e.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"New Enquiries"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-orange-50 to-red-50 rounded-xl",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600 mb-1",children:[a.performanceMetrics.growth>0?"+":"",a.performanceMetrics.growth,"%"]}),e.jsx("div",{className:"text-sm text-orange-700 font-medium",children:"Weekly Growth"}),e.jsx("div",{className:"text-xs text-orange-600 mt-1",children:"vs Last Week"})]})]})]})]})}const Hd=()=>({t:(t,s)=>s||t}),qa={stats:{totalEnquiries:156,pendingReview:23,approved:89,rejected:44,documentsAwaiting:31,clientsShortlisted:12,paymentGatewayComplete:8,totalRevenue:245e4,monthlyGrowth:12.5,activeStaff:15},enquiryFunnel:[{stage:"Initial Enquiry",count:156,percentage:100,color:"bg-blue-500"},{stage:"Documents Submitted",count:98,percentage:62.8,color:"bg-indigo-500"},{stage:"Under Review",count:67,percentage:42.9,color:"bg-purple-500"},{stage:"Approved",count:45,percentage:28.8,color:"bg-green-500"},{stage:"Loan Disbursed",count:23,percentage:14.7,color:"bg-emerald-500"}],recentEnquiries:[{id:1,name:"TechCorp Solutions",contact:"Rajesh Kumar",amount:"₹50,00,000",status:"Under Review",date:"2 hours ago",priority:"high"},{id:2,name:"Global Enterprises",contact:"Priya Sharma",amount:"₹75,00,000",status:"Approved",date:"5 hours ago",priority:"medium"},{id:3,name:"StartupCorp",contact:"Amit Patel",amount:"₹25,00,000",status:"Pending Documents",date:"1 day ago",priority:"low"},{id:4,name:"InnovateTech",contact:"Sneha Reddy",amount:"₹1,20,00,000",status:"Under Review",date:"2 days ago",priority:"high"},{id:5,name:"BusinessHub",contact:"Vikram Singh",amount:"₹35,00,000",status:"Rejected",date:"3 days ago",priority:"low"}],rolePermissions:{employee:[{feature:"Enquiry & Doc Verification",access:"Active",color:"text-green-600"},{feature:"Basic Analytics View",access:"Active",color:"text-green-600"}],admin:[{feature:"Full Access - All Features",access:"Full Access",color:"text-blue-600"},{feature:"Staff Management & System Control",access:"Full Access",color:"text-blue-600"}]}};function Qd(){var h,f;const{t}=Hd(),{user:s}=_e(),{data:a,loading:r,refetch:n}=Bd(),[i,l]=c.useState(!1),o=a||{stats:{totalEnquiries:0,pendingReview:0,approved:0,rejected:0,documentsAwaiting:0,clientsShortlisted:0,paymentGatewayComplete:0,totalTransactions:0,completedTransactions:0,pendingTransactions:0,totalRevenue:0,monthlyGrowth:0,activeStaff:0},enquiryFunnel:[],recentEnquiries:[]};if(i)return e.jsx(Wd,{onSwitchToGlobal:()=>l(!1)});const p=b=>{switch(b==null?void 0:b.toLowerCase()){case"approved":return"bg-green-100 text-green-800";case"interested":return"bg-blue-100 text-blue-800";case"not_interested":return"bg-red-100 text-red-800";case"under review":return"bg-yellow-100 text-yellow-800";case"pending documents":return"bg-orange-100 text-orange-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return r?e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[...Array(4)].map((b,x)=>e.jsx("div",{className:"h-32 bg-gray-200 rounded-xl"},x))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"h-96 bg-gray-200 rounded-xl"}),e.jsx("div",{className:"h-96 bg-gray-200 rounded-xl"})]})]})}):e.jsxs("div",{className:"p-8 space-y-8 bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 min-h-screen",children:[e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-gradient-to-r from-blue-600 via-purple-600 to-indigo-600 rounded-2xl p-8 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-10"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:t("dashboard.welcome",`Welcome Back, ${(s==null?void 0:s.name)||"User"}!`)}),e.jsx("p",{className:"text-blue-100 text-lg",children:t("dashboard.subtitle","Here's what's happening with your business today.")})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center justify-end space-x-2 mb-1",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${r?"bg-yellow-300 animate-pulse":"bg-green-300"}`}),e.jsx("p",{className:"text-blue-100 text-sm",children:r?"Updating...":"Auto-refreshes every 15 seconds"})]}),e.jsx("p",{className:"text-blue-200 text-xs",children:o!=null&&o.stats?`${o.stats.totalEnquiries} total enquiries • Last updated: ${new Date().toLocaleTimeString()}`:"Loading data..."})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("button",{onClick:()=>l(!0),className:"inline-flex items-center px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-white transition-all duration-200",title:"Switch to My Personal Dashboard",children:[e.jsx(Xe,{className:"h-4 w-4 mr-2"}),"My Dashboard"]}),e.jsxs("button",{onClick:()=>n(),disabled:r,className:`inline-flex items-center px-4 py-2 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-lg text-white transition-all duration-200 ${r?"opacity-50 cursor-not-allowed":""}`,title:"Refresh dashboard data",children:[e.jsx("svg",{className:`h-4 w-4 mr-2 ${r?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),r?"Updating...":"Refresh"]})]})]})]}),e.jsxs("div",{className:"mt-6 flex items-center space-x-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ds,{className:"h-5 w-5 text-green-300"}),e.jsxs("span",{className:"text-sm",children:["Revenue up ",((h=o==null?void 0:o.stats)==null?void 0:h.monthlyGrowth)||0,"%"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ar,{className:"h-5 w-5 text-blue-300"}),e.jsxs("span",{className:"text-sm",children:[((f=o==null?void 0:o.stats)==null?void 0:f.activeStaff)||0," Active Staff"]})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[{title:t("dashboard.totalEnquiries","Total Enquiries"),value:o.stats.totalEnquiries,icon:it,color:"from-blue-500 to-blue-600",change:"+12%",trend:"up"},{title:t("dashboard.documentsAwaiting","Documents Awaiting"),value:o.stats.documentsAwaiting,icon:Rt,color:"from-orange-500 to-red-500",change:"+5%",trend:"up"},{title:t("dashboard.clientsShortlisted","Clients Shortlisted"),value:o.stats.clientsShortlisted,icon:Re,color:"from-green-500 to-emerald-600",change:"+8%",trend:"up"},{title:t("dashboard.paymentComplete","Payment Gateway Complete"),value:o.stats.paymentGatewayComplete,icon:Wt,color:"from-purple-500 to-indigo-600",change:"+15%",trend:"up"},{title:t("dashboard.totalTransactions","Total Transactions"),value:o.stats.totalTransactions,icon:Kt,color:"from-teal-500 to-cyan-600",change:"+10%",trend:"up"}].map((b,x)=>{const w=b.icon;return e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:x*.1},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-r ${b.color}`,children:e.jsx(w,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{className:`flex items-center space-x-1 text-sm ${b.trend==="up"?"text-green-600":"text-red-600"}`,children:[b.trend==="up"?e.jsx(er,{className:"h-4 w-4"}):e.jsx(Ja,{className:"h-4 w-4"}),e.jsx("span",{className:"font-medium",children:b.change})]})]}),e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-1",children:b.value}),e.jsx("p",{className:"text-gray-600 text-sm font-medium",children:b.title})]},x)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs(O.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"lg:col-span-2 bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:t("dashboard.enquiryFunnel","Enquiry Funnel")}),e.jsx(Kt,{className:"h-6 w-6 text-gray-400"})]}),e.jsx("div",{className:"space-y-4",children:o.enquiryFunnel.map((b,x)=>e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:b.stage}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-bold text-gray-900",children:b.count}),e.jsxs("span",{className:"text-xs text-gray-500",children:["(",b.percentage,"%)"]})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx(O.div,{initial:{width:0},animate:{width:`${b.percentage}%`},transition:{delay:.5+x*.1,duration:.8},className:`h-3 rounded-full ${b.color} relative overflow-hidden`,children:e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/20 to-transparent"})})})]},x))}),e.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ds,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Conversion Rate"}),e.jsxs("p",{className:"text-xs text-blue-700",children:[(o.enquiryFunnel[4].count/o.enquiryFunnel[0].count*100).toFixed(1),"% of enquiries result in loan disbursement"]})]})]})})]}),e.jsxs(O.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:t("dashboard.rolePermissions","Role Permissions")}),e.jsx("div",{className:"space-y-4",children:((s==null?void 0:s.role)==="ADMIN"?qa.rolePermissions.admin:qa.rolePermissions.employee).map((b,x)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:b.feature}),e.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded-full ${b.color} bg-current bg-opacity-10`,children:b.access})]},x))}),e.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Re,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-900",children:"Access Level"}),e.jsx("p",{className:"text-xs text-green-700",children:(s==null?void 0:s.role)==="ADMIN"?"Full administrative access":"Employee level access"})]})]})})]})]}),e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:t("dashboard.recentEnquiries","Recent Enquiries")}),e.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"View All"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"NAME"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"CONTACT"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"BUSINESS TYPE"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"STATUS"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"DATE"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-700",children:"ACTIONS"})]})}),e.jsx("tbody",{children:((o==null?void 0:o.recentEnquiries)||[]).length>0?((o==null?void 0:o.recentEnquiries)||[]).map((b,x)=>{var w;return e.jsxs(O.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6+x*.1},className:"border-b border-gray-100 hover:bg-gray-50 border-l-4 border-l-blue-500",children:[e.jsxs("td",{className:"py-4 px-4",children:[e.jsx("div",{className:"font-medium text-gray-900",children:b.name||b.businessName||"N/A"}),e.jsx("div",{className:"text-sm text-gray-600",children:b.mobile})]}),e.jsx("td",{className:"py-4 px-4 text-gray-700",children:((w=b.staff)==null?void 0:w.name)||"Unassigned"}),e.jsx("td",{className:"py-4 px-4 text-gray-700",children:b.businessType||"Not specified"}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${p(b.interestStatus)}`,children:b.interestStatus})}),e.jsx("td",{className:"py-4 px-4 text-gray-600 text-sm",children:new Date(b.createdAt).toLocaleDateString()}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{className:"p-1 text-blue-600 hover:text-blue-800",title:"View",children:e.jsx(Ie,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-1 text-indigo-600 hover:text-indigo-800",title:"Edit",children:e.jsx(Ke,{className:"h-4 w-4"})}),e.jsx("button",{className:"p-1 text-red-600 hover:text-red-800",title:"Delete",children:e.jsx(xt,{className:"h-4 w-4"})})]})})]},b.id)}):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"py-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-500",children:[e.jsx(it,{className:"h-12 w-12 text-gray-300 mb-4"}),e.jsx("p",{className:"text-lg font-medium",children:"No enquiries yet"}),e.jsx("p",{className:"text-sm",children:"New enquiries will appear here automatically"})]})})})})]})})]})]})}function Gd(){return e.jsx(Qd,{})}function zd(){var m,u,T,C,$,U,W,Y,H,Q,ee,ie,se,le,K,be;const[t,s]=c.useState(""),[a,r]=c.useState(""),[n,i]=c.useState(null),[l,o]=c.useState({isOpen:!1,enquiry:null}),p=Oe(),{data:h,isLoading:f,isFetching:b,refetch:x,error:w}=me(["enquiries",t,a],async()=>{const P=new URLSearchParams;return t&&P.append("name",t),a&&P.append("interestStatus",a),(await Z.get(`/api/enquiries?${P}`)).data||[]},{staleTime:3*60*1e3,keepPreviousData:!0,onError:P=>{console.error("Failed to fetch enquiries:",P)},onSuccess:P=>{console.log("📋 Enquiries refreshed:",(P==null?void 0:P.length)||0,"enquiries found"),i(new Date)}}),{data:g}=me("staff-members",async()=>{var P;try{return((P=(await Z.get("/api/staff")).data)==null?void 0:P.staff)||[]}catch{return console.log("No staff data available"),[]}},{staleTime:5*60*1e3}),N=ge(async P=>Z.delete(`/api/enquiries/${P}`),{onSuccess:(P,X)=>{I.success("Enquiry deleted successfully!"),p.setQueryData(["enquiries",t,a],ae=>ae&&ae.filter(re=>re.id!==X)),setTimeout(()=>{p.invalidateQueries("enquiries")},100)},onError:P=>{var X,ae;console.error("Delete error:",P),I.error(((ae=(X=P.response)==null?void 0:X.data)==null?void 0:ae.message)||"Failed to delete enquiry")}}),d=ge(async({enquiryId:P,staffId:X,staffName:ae})=>(console.log("🔄 Assigning staff:",{enquiryId:P,staffId:X,staffName:ae}),Z.post(`/api/enquiries/${P}/assign`,{staffId:X})),{onSuccess:(P,{staffName:X})=>{console.log("✅ Staff assignment successful:",P.data),I.success(`Enquiry assigned to ${X} successfully!`),p.invalidateQueries(["enquiries"]),p.setQueryData(["enquiries"],ae=>ae&&ae.map(re=>re.id===P.data.id?P.data:re))},onError:P=>{var X,ae;console.error("❌ Staff assignment error:",P),I.error(((ae=(X=P.response)==null?void 0:X.data)==null?void 0:ae.message)||"Failed to assign staff member")}}),E=(P,X)=>{if(X){const ae=g==null?void 0:g.find(re=>re.name===X);ae?d.mutate({enquiryId:P,staffId:ae.id,staffName:ae.name}):I.error("Selected staff member not found")}},j=(P,X)=>{window.confirm(`Are you sure you want to delete "${X}"? This will also delete all associated documents.`)&&N.mutate(P)},y=P=>{console.log("👁️ Viewing enquiry:",P.name),o({isOpen:!0,enquiry:P})};return f?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Enquiries"}),e.jsxs("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[e.jsx("div",{className:"h-10 bg-gray-200 rounded w-32 animate-pulse"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded w-40 animate-pulse"})]})]}),e.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200",children:[e.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-48 animate-pulse"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 animate-pulse"})]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-600 to-blue-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"SL.NO"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"DATE"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"CLIENT DETAILS"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"BUSINESS NAME"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"STATUS"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"STAFF"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"ACTIONS"})]})}),e.jsx("tbody",{className:"bg-white",children:[...Array(5)].map((P,X)=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-8 animate-pulse"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 animate-pulse"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-32 animate-pulse"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 animate-pulse"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-6 bg-gray-200 rounded-full w-16 animate-pulse"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 animate-pulse"})}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-8 w-8 bg-gray-200 rounded animate-pulse"})]})})]},X))})]})})]})]}):w&&!h?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Enquiries"}),e.jsxs(Ae,{to:"/enquiries/new",className:"btn-primary inline-flex items-center mt-4 sm:mt-0",children:[e.jsx(ct,{className:"h-5 w-5 mr-2"}),"Add New Enquiry"]})]}),e.jsxs("div",{className:"bg-white shadow-sm rounded-lg border border-gray-200 p-8 text-center",children:[e.jsx("div",{className:"text-red-500 mb-4",children:e.jsx("svg",{className:"mx-auto h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Failed to load enquiries"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"There was an error loading the enquiry data. Please try again."}),e.jsx("button",{onClick:()=>x(),className:"btn-primary",children:"Try Again"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Enquiries"}),b&&e.jsxs("div",{className:"flex items-center text-blue-600",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-sm",children:"Refreshing..."})]})]}),n&&e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Last updated: ",n.toLocaleTimeString()," • Auto-refreshes every 10 seconds"]})]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-4 sm:mt-0",children:[e.jsxs("button",{onClick:()=>x(),disabled:b,className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",title:"Refresh enquiries",children:[e.jsx("svg",{className:`h-4 w-4 mr-1 ${b?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]}),e.jsxs("select",{value:a,onChange:P=>r(P.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"All Statuses"}),e.jsx("option",{value:"INTERESTED",children:"✅ Interested"}),e.jsx("option",{value:"NOT_INTERESTED",children:"❌ Not Interested"}),e.jsx("option",{value:"FOLLOW_UP_REQUIRED",children:"📞 Follow Up Required"})]}),e.jsxs(Ae,{to:"/enquiries/new",className:"btn-primary inline-flex items-center whitespace-nowrap",children:[e.jsx(ct,{className:"h-5 w-5 mr-2"}),"Add New Enquiry"]})]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ut,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name...",value:t,onChange:P=>s(P.target.value),className:"input-field pl-10"})]}),e.jsxs("select",{value:a,onChange:P=>r(P.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"All Interest Status"}),e.jsx("option",{value:"INTERESTED",children:"✅ Interested"}),e.jsx("option",{value:"NOT_INTERESTED",children:"❌ Not Interested"}),e.jsx("option",{value:"FOLLOW_UP_REQUIRED",children:"📞 Follow Up Required"})]}),e.jsx("button",{onClick:()=>{s(""),r(""),x()},className:"btn-secondary",children:"Clear Filters"})]})}),e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"table-modern",children:[e.jsx("div",{className:"px-8 py-6 border-b border-slate-200 bg-gradient-to-r from-slate-50 to-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ut,{className:"h-5 w-5 absolute left-4 top-3.5 text-slate-400"}),e.jsx("input",{type:"text",placeholder:"Search enquiries...",value:t,onChange:P=>s(P.target.value),className:"input-search w-80"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("span",{className:"text-sm font-medium text-slate-600",children:[(h==null?void 0:h.length)||0," results"]}),e.jsx("div",{className:"h-4 w-px bg-slate-300"}),e.jsx("span",{className:"text-xs text-slate-500",children:"Updated just now"})]})]})}),h&&h.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-600 to-blue-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"SL.NO"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"DATE"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"CLIENT DETAILS"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"BUSINESS NAME"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"STATUS"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"STAFF"}),e.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-white uppercase tracking-wider",children:"ACTIONS"})]})}),e.jsx("tbody",{className:"bg-white",children:h.map((P,X)=>{var ae,re,ue;return e.jsxs(O.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:X*.05},className:"table-row",children:[e.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:X+1})}),e.jsxs("td",{className:"px-6 py-5 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-slate-900",children:P.enquiryDate?new Date(P.enquiryDate).toLocaleDateString("en-IN"):P.createdAt?new Date(P.createdAt).toLocaleDateString("en-IN"):new Date().toLocaleDateString("en-IN")}),P.followUpDate&&e.jsxs("div",{className:"text-xs text-orange-600",children:["📅 Follow up: ",new Date(P.followUpDate).toLocaleDateString("en-IN")]})]}),e.jsx("td",{className:"px-6 py-5",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-500 to-purple-600 rounded-full flex items-center justify-center mr-3",children:e.jsx("span",{className:"text-xs font-semibold text-white",children:((re=(ae=P.name)==null?void 0:ae.charAt(0))==null?void 0:re.toUpperCase())||"U"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-slate-900",children:P.name||"Unknown"}),e.jsxs("div",{className:"text-sm text-slate-500",children:["📱 ",P.mobile||"No mobile"]}),P.email&&e.jsxs("div",{className:"text-xs text-slate-400",children:["✉️ ",P.email]})]})]})}),e.jsxs("td",{className:"px-6 py-5",children:[e.jsx("div",{className:"text-sm font-medium text-slate-900",children:P.businessName||P.businessType||"Not Specified"}),P.gst&&e.jsxs("div",{className:"text-xs text-slate-500",children:["GST: ",P.gst]})]}),e.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${P.interestStatus==="INTERESTED"?"bg-green-100 text-green-800":P.interestStatus==="NOT_INTERESTED"?"bg-red-100 text-red-800":P.interestStatus==="FOLLOW_UP_REQUIRED"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:P.interestStatus==="INTERESTED"?"✅ Interested":P.interestStatus==="NOT_INTERESTED"?"❌ Not Interested":P.interestStatus==="FOLLOW_UP_REQUIRED"?"📞 Follow Up":"✅ Interested"}),P.comments&&e.jsx("div",{className:"text-xs text-slate-500",children:P.comments.replace(/_/g," ")})]})}),e.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm text-slate-600",children:((ue=P.staff)==null?void 0:ue.name)||P.assignedStaff||"Unassigned"}),e.jsxs("select",{value:P.assignedStaff||"",onChange:ye=>E(P.id,ye.target.value),className:"text-xs border border-gray-300 rounded px-2 py-1 bg-white text-slate-600 focus:outline-none focus:ring-1 focus:ring-blue-500",disabled:d.isLoading,children:[e.jsx("option",{value:"",children:"Assign to staff..."}),g&&g.map(ye=>e.jsxs("option",{value:ye.name,children:[ye.name," - ",ye.role]},ye.id))]})]})}),e.jsx("td",{className:"px-6 py-5 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>y(P),className:"inline-flex items-center justify-center w-8 h-8 bg-blue-100 border border-blue-200 rounded-md text-blue-600 hover:bg-blue-200 hover:border-blue-300 transition-all duration-200",title:"View Enquiry",children:e.jsx(Ie,{className:"h-4 w-4"})}),e.jsx(Ae,{to:`/enquiries/${P.id}/edit`,className:"inline-flex items-center justify-center w-8 h-8 bg-orange-100 border border-orange-200 rounded-md text-orange-600 hover:bg-orange-200 hover:border-orange-300 transition-all duration-200",title:"Edit Enquiry",children:e.jsx(Ke,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>j(P.id,P.name),disabled:N.isLoading,className:"inline-flex items-center justify-center w-8 h-8 bg-red-100 border border-red-200 rounded-md text-red-600 hover:bg-red-200 hover:border-red-300 disabled:opacity-50 transition-all duration-200",title:"Delete Enquiry",children:e.jsx(xt,{className:"h-4 w-4"})})]})})]},P.id)})})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"No enquiries found."}),e.jsxs(Ae,{to:"/enquiries/new",className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg inline-flex items-center mt-4",children:[e.jsx(ct,{className:"h-5 w-5 mr-2"}),"Create First Enquiry"]})]})]}),l.isOpen&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Enquiry Details - ",(m=l.enquiry)==null?void 0:m.name]}),e.jsx("button",{onClick:()=>o({isOpen:!1,enquiry:null}),className:"text-gray-400 hover:text-gray-600",children:e.jsx(Qe,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:((u=l.enquiry)==null?void 0:u.name)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mobile"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:((T=l.enquiry)==null?void 0:T.mobile)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Business Type"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:((C=l.enquiry)==null?void 0:C.businessType)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"GST Number"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:(($=l.enquiry)==null?void 0:$.gstNumber)||((U=l.enquiry)==null?void 0:U.gst)||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Status & Assignment"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Interest Status"}),e.jsx("p",{className:"mt-1",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${((W=l.enquiry)==null?void 0:W.interestStatus)==="INTERESTED"?"bg-green-100 text-green-800":((Y=l.enquiry)==null?void 0:Y.interestStatus)==="NOT_INTERESTED"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:((H=l.enquiry)==null?void 0:H.interestStatus)||"PENDING"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assigned Staff"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:((Q=l.enquiry)==null?void 0:Q.assignedStaff)||((ie=(ee=l.enquiry)==null?void 0:ee.staff)==null?void 0:ie.name)||"Unassigned"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Source"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:((se=l.enquiry)==null?void 0:se.source)||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Created Date"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:(le=l.enquiry)!=null&&le.createdAt?new Date(l.enquiry.createdAt).toLocaleDateString():"N/A"})]})]})]}),((K=l.enquiry)==null?void 0:K.comments)&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-900 mb-3",children:"Comments"}),e.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md",children:l.enquiry.comments})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 p-6 border-t bg-gray-50",children:[e.jsx("button",{onClick:()=>o({isOpen:!1,enquiry:null}),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"Close"}),e.jsx(Ae,{to:`/enquiries/${(be=l.enquiry)==null?void 0:be.id}/edit`,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 border border-transparent rounded-md hover:bg-primary-700",onClick:()=>o({isOpen:!1,enquiry:null}),children:"Edit Enquiry"})]})]})})]})}function Es(){const t=Ge(),{id:s}=rs(),[a]=Yr(),r=Oe(),n=!!s,i=a.get("view")==="true",{register:l,handleSubmit:o,reset:p,formState:{errors:h}}=ft(),{data:f,isLoading:b}=me(["enquiry",s],async()=>{if(!s)return null;console.log("🔍 Fetching enquiry data for ID:",s);const N=await Z.get(`/api/enquiries/${s}`);return console.log("✅ Enquiry data received:",N.data),N.data},{enabled:!!s}),{data:x}=me("staff-members",async()=>{var N;try{return((N=(await Z.get("/api/staff")).data)==null?void 0:N.staff)||[]}catch{return console.log("No staff data available"),[]}},{staleTime:5*60*1e3}),w=ge(async N=>{var E,j,y,m,u,T;console.log("🔄 Mutation executing with data:",N);const d=n?`/api/enquiries/${s}`:"/api/enquiries";console.log("📡 Making request to:",d);try{const C=n?await Z.patch(d,N):await Z.post(d,N);return console.log("✅ API response received:",C.data),C}catch(C){throw console.error("❌ API request failed:",C),console.error("❌ Error details:",{message:C.message,status:(E=C.response)==null?void 0:E.status,statusText:(j=C.response)==null?void 0:j.statusText,data:(y=C.response)==null?void 0:y.data,config:{url:(m=C.config)==null?void 0:m.url,method:(u=C.config)==null?void 0:u.method,baseURL:(T=C.config)==null?void 0:T.baseURL}}),C}},{onSuccess:N=>{console.log("🎉 Mutation success:",N.data);const d=n?"Enquiry updated successfully!":"Enquiry created successfully!";I.success(d),n?(r.invalidateQueries(["enquiries"]),r.invalidateQueries(["enquiry",s]),r.setQueryData(["enquiries"],E=>E&&E.map(j=>j.id===parseInt(s)?{...j,...N.data}:j)),t("/enquiries")):(r.invalidateQueries(["enquiries"]),I.success("Redirecting to document verification...",{duration:2e3}),setTimeout(()=>{t("/documents/verification")},1500))},onError:N=>{var E,j;console.error("💥 Mutation error:",N);const d=((j=(E=N.response)==null?void 0:E.data)==null?void 0:j.message)||N.message||"Something went wrong";console.error("💥 Error message to show:",d),I.error(d)}});c.useEffect(()=>{var N;if(f&&(n||i)){console.log("🔄 Resetting form with enquiry data:",f);const d={name:f.name||"",mobile:f.mobile||"",businessType:f.businessType||f.businessName||"",gstNumber:f.gstNumber||f.gst||"",comments:f.comments||"",interestStatus:f.interestStatus||"",assignedStaff:f.assignedStaff||((N=f.staff)==null?void 0:N.name)||"",enquiryDate:f.enquiryDate?new Date(f.enquiryDate).toISOString().split("T")[0]:f.createdAt?new Date(f.createdAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],followUpDate:f.followUpDate?new Date(f.followUpDate).toISOString().split("T")[0]:"",additionalComments:f.additionalComments||""};console.log("🔄 Form data being set:",d),p(d)}},[f,n,i,p]);const g=N=>{var E,j;if(console.log("📝 Submitting enquiry form with data:",N),console.log("🔍 Form validation - Name:",N.name,"Mobile:",N.mobile),console.log("🔍 API endpoint will be:",n?`/api/enquiries/${s}`:"/api/enquiries"),!((E=N.name)!=null&&E.trim())){console.error("❌ Validation failed: Name is empty"),I.error("Please enter a valid name");return}if(!((j=N.mobile)!=null&&j.match(/^[0-9]{10}$/))){console.error("❌ Validation failed: Invalid mobile number:",N.mobile),I.error("Please enter a valid 10-digit mobile number");return}console.log("✅ Client-side validation passed"),N.assignedStaff?console.log("👤 Enquiry assigned to staff:",N.assignedStaff):console.log("👤 No staff assigned to this enquiry");const d=I.loading(n?"Updating enquiry...":"Creating enquiry...");console.log("🚀 Starting API request..."),w.mutate(N,{onSettled:()=>{console.log("🏁 API request completed"),I.dismiss(d)}})};return(n||i)&&b?e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{type:"button",onClick:()=>t("/enquiries"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors",children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"Back to Enquiries"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Loading Enquiry..."}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we fetch the enquiry data"})]})]})}),e.jsx("div",{className:"card space-y-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-2"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-2"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-24 mb-2"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-2"}),e.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})]})]})})]})}):e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{type:"button",onClick:()=>t("/enquiries"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors",children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"Back to Enquiries"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:i?"View Enquiry":n?"Edit Enquiry":"New Enquiry"}),e.jsx("p",{className:"text-gray-600",children:i?"View enquiry details":n?"Update enquiry information":"Create a new business loan enquiry"})]})]})}),e.jsxs("form",{onSubmit:o(g),className:"card space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),e.jsx("input",{...l("name",{required:"Name is required"}),type:"text",className:"input-field",placeholder:"Enter full name",readOnly:i}),h.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobile Number *"}),e.jsx("input",{...l("mobile",{required:"Mobile number is required",pattern:{value:/^[0-9]{10}$/,message:"Please enter a valid 10-digit mobile number"}}),type:"tel",className:"input-field",placeholder:"Enter mobile number",readOnly:i}),h.mobile&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.mobile.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Type"}),e.jsx("input",{...l("businessType"),type:"text",className:"input-field",placeholder:"Enter business type",readOnly:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GST Number"}),e.jsx("input",{...l("gstNumber"),type:"text",className:"input-field",placeholder:"Enter GST number (optional)",readOnly:i})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Interest Status"}),e.jsxs("select",{...l("interestStatus"),className:"input-field",disabled:i,children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"INTERESTED",children:"Interested"}),e.jsx("option",{value:"NOT_INTERESTED",children:"Not Interested"}),e.jsx("option",{value:"FOLLOW_UP_REQUIRED",children:"Follow Up Required"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comments Status"}),e.jsxs("select",{...l("comments"),className:"input-field",disabled:i,children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"NO_RESPONSE",children:"No Response"}),e.jsx("option",{value:"CHAT_CALL1_COMPLETED",children:"First Call Completed"}),e.jsx("option",{value:"SECOND_CALL_COMPLETED",children:"Second Call Completed"}),e.jsx("option",{value:"THIRD_CALL_COMPLETED",children:"Third Call Completed"}),e.jsx("option",{value:"ELIGIBLE",children:"Eligible"}),e.jsx("option",{value:"NOT_ELIGIBLE",children:"Not Eligible"}),e.jsx("option",{value:"NO_GST",children:"No GST"})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign to Staff Member"}),e.jsxs("select",{...l("assignedStaff"),className:"input-field",disabled:i,children:[e.jsx("option",{value:"",children:"Select staff member (optional)"}),x&&x.map(N=>e.jsxs("option",{value:N.name,children:[N.name," - ",N.role]},N.id))]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Select a staff member to assign this enquiry to"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Enquiry Date *"}),e.jsx("input",{...l("enquiryDate",{required:"Enquiry date is required"}),type:"date",className:"input-field",defaultValue:new Date().toISOString().split("T")[0],readOnly:i}),h.enquiryDate&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.enquiryDate.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Follow Up Date"}),e.jsx("input",{...l("followUpDate"),type:"date",className:"input-field",placeholder:"Select follow up date (optional)",readOnly:i}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Set a date for follow up if required"})]})]}),e.jsx("div",{className:"grid grid-cols-1 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Additional Comments"}),e.jsx("textarea",{...l("additionalComments"),rows:4,className:"input-field resize-none",placeholder:"Enter any additional comments or notes about this enquiry...",readOnly:i}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Add detailed notes, conversation summary, or any other relevant information"})]})}),!i&&e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>t("/enquiries"),className:"btn-secondary",children:"Cancel"}),n&&e.jsx("button",{type:"button",onClick:()=>t(`/enquiries/${s}?view=true`),className:"btn-secondary",children:"View Mode"}),i&&e.jsx("button",{type:"button",onClick:()=>t(`/enquiries/${s}/edit`),className:"btn-secondary",children:"Edit Mode"}),e.jsx(O.button,{type:"submit",disabled:w.isLoading,className:"btn-primary disabled:opacity-50",whileHover:{scale:1.02},whileTap:{scale:.98},children:w.isLoading?n?"Updating...":"Creating...":n?"Update Enquiry":"Create Enquiry"})]})]})]})})}function $a({onUpload:t,accept:s=".pdf",maxSize:a=10*1024*1024}){const[r,n]=c.useState(null),[i,l]=c.useState(0),[o,p]=c.useState(!1),[h,f]=c.useState(!1),b=N=>{if(N.size>a){alert(`File size must be less than ${a/(1024*1024)}MB`);return}if(N.type!=="application/pdf"){alert("Only PDF files are allowed");return}n(N),f(!0),l(0);const d=setInterval(()=>{l(E=>E>=100?(clearInterval(d),f(!1),t(N),100):E+10)},200)},x=N=>{N.preventDefault(),p(!1);const d=N.dataTransfer.files[0];d&&b(d)},w=N=>{N.preventDefault(),p(!0)},g=()=>{p(!1)};return e.jsxs(O.div,{className:`border-2 border-dashed p-8 rounded-lg text-center transition-colors ${o?"border-primary-500 bg-primary-50":h?"border-blue-500 bg-blue-50":"border-gray-300"} ${h?"pointer-events-none opacity-75":""}`,whileHover:{scale:h?1:1.02},transition:{duration:.3},onDrop:h?void 0:x,onDragOver:h?void 0:w,onDragLeave:h?void 0:g,children:[e.jsx(Ki,{className:`h-12 w-12 mx-auto mb-4 ${h?"text-blue-500 animate-pulse":"text-gray-400"}`}),e.jsx("div",{className:"mb-4",children:e.jsxs("label",{className:h?"cursor-not-allowed":"cursor-pointer",children:[e.jsx("span",{className:`btn-primary ${h?"opacity-50 cursor-not-allowed":""}`,children:h?"Uploading...":"Choose File"}),e.jsx("input",{type:"file",accept:s,onChange:N=>{var d;return((d=N.target.files)==null?void 0:d[0])&&b(N.target.files[0])},className:"hidden",disabled:h})]})}),e.jsx("p",{className:`text-gray-600 mb-2 ${h?"text-blue-600":""}`,children:h?"Processing your file...":"or drag and drop your file here"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["PDF files only • Max ",a/(1024*1024),"MB"]}),r&&e.jsxs("div",{className:"mt-4",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700",children:r.name}),i>0&&i<100&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"bg-gray-200 rounded-full h-2",children:e.jsx(O.div,{className:"bg-primary-600 h-2 rounded-full",initial:{width:0},animate:{width:`${i}%`},transition:{duration:.3}})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[i,"% uploaded"]})]}),i===100&&e.jsx("p",{className:"text-sm text-green-600 mt-2",children:"✓ Upload complete"})]})]})}function _r({isOpen:t,onClose:s,documentName:a,documentType:r,documentUrl:n,documentId:i,isVerified:l,onVerify:o}){const[p,h]=c.useState(!1),[f,b]=c.useState(!0),[x,w]=c.useState(!1);console.log("🔍 PDFViewer render:",{isOpen:t,documentName:a,documentType:r,documentUrl:n});const g=()=>{w(!x)};if(c.useEffect(()=>{const E=j=>{j.key==="Escape"&&(x?w(!1):s())};if(t)return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[t,x,s]),c.useEffect(()=>{t&&(h(!1),b(!0),w(!1))},[t]),!t)return console.log("❌ PDFViewer not open, returning null"),null;console.log("✅ PDFViewer is open, rendering modal");const d=(()=>n?(console.log("🔗 Using backend document URL:",n),n):null)();return e.jsx("div",{className:`fixed inset-0 bg-black z-[9999] flex items-center justify-center ${x?"bg-opacity-95":"bg-opacity-50 p-4"}`,onClick:s,children:e.jsxs("div",{className:`bg-white shadow-xl flex flex-col ${x?"w-full h-full":"rounded-lg max-w-4xl w-full max-h-[90vh]"}`,onClick:E=>E.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:s,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"Back to Documents",children:e.jsx(bt,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:a}),e.jsx("p",{className:"text-sm text-gray-500",children:r.replace("_"," ")})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[i&&o&&!l&&e.jsxs("button",{onClick:()=>o(i),className:"flex items-center px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700 transition-colors",title:"Verify Document",children:[e.jsx(Re,{className:"h-4 w-4 mr-1"}),"✓ Verify"]}),l&&e.jsxs("div",{className:"flex items-center px-3 py-1 bg-green-100 text-green-800 text-sm rounded border border-green-200",children:[e.jsx(Re,{className:"h-4 w-4 mr-1"}),"✓ Verified"]}),e.jsx("button",{onClick:g,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:x?"Exit Fullscreen":"Enter Fullscreen",children:x?e.jsx(di,{className:"h-5 w-5"}):e.jsx(xi,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>{if(d){const E=document.createElement("a");E.href=d,E.download=`${a}.pdf`,E.click()}},className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",title:"Download PDF",disabled:!d,children:"📥 Download"}),e.jsx("button",{onClick:s,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Qe,{className:"h-5 w-5"})})]})]}),e.jsx("div",{className:"flex-1 p-4",children:d?e.jsxs("div",{className:"h-full",children:[f&&e.jsxs("div",{className:"mb-2 p-3 bg-blue-50 border border-blue-200 rounded text-sm flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2"}),e.jsxs("span",{children:["📄 ",e.jsx("strong",{children:"Loading document:"})," ",a]})]}),p?e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-8 max-w-md",children:[e.jsx(st,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"PDF Display Error"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Unable to display the PDF in the browser. This might be due to browser restrictions or PDF format issues."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>{h(!1),b(!0)},className:"w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"🔄 Try Again"}),e.jsx("a",{href:d,className:"block w-full px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors text-center",download:`${a}.pdf`,children:"📥 Download PDF"}),e.jsx("button",{onClick:()=>window.open(d,"_blank"),className:"w-full px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700 transition-colors",children:"🔗 Open in New Tab"})]})]})}):e.jsxs("div",{className:"h-full relative",children:[e.jsx("iframe",{src:`${d}#toolbar=1&navpanes=1&scrollbar=1&page=1&view=FitH&zoom=page-fit`,className:`w-full h-full border border-gray-300 ${x?"min-h-screen":"rounded-lg min-h-[600px]"}`,title:`${a} - PDF Viewer`,onLoad:()=>{console.log("✅ PDF loaded successfully from:",d),b(!1)},onError:E=>{console.error("❌ Failed to load PDF:",d,E),h(!0),b(!1)},allow:"fullscreen",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(st,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Your browser doesn't support inline PDF viewing."}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("a",{href:d,className:"inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 mr-2",download:`${a}.pdf`,children:"📥 Download PDF"}),e.jsx("button",{onClick:()=>window.open(d,"_blank"),className:"inline-block px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:"🔗 Open in New Tab"})]})]})}),e.jsxs("div",{className:"absolute bottom-4 right-4 bg-white rounded-lg shadow-lg p-2 flex space-x-2",children:[e.jsx("button",{onClick:()=>window.open(d,"_blank"),className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded text-sm transition-colors",title:"Open in new tab",children:"🔗"}),e.jsx("a",{href:d,download:`${a}.pdf`,className:"px-3 py-1 bg-gray-100 hover:bg-gray-200 rounded text-sm transition-colors",title:"Download PDF",children:"📥"})]})]})]}):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx(st,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No Document Available"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"No file URL provided for this document."}),e.jsxs("div",{className:"text-sm text-gray-500 bg-gray-50 p-4 rounded-lg",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Document:"})," ",a]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",r]}),e.jsxs("p",{children:[e.jsx("strong",{children:"File:"})," ",n||"Not specified"]})]})]})})})]})})}const Bt=[{value:"GST",label:"GST Certificate",required:!0},{value:"UDYAM",label:"Udyam Registration",required:!0},{value:"BANK_STATEMENT",label:"Bank Statement",required:!0},{value:"OWNER_PAN",label:"Owner PAN Card",required:!0},{value:"AADHAR",label:"Aadhar Card",required:!0},{value:"WEBSITE_GATEWAY",label:"Website & Gateway",required:!1},{value:"IE_CODE",label:"IE Code",required:!1}];function Zd({isOpen:t,onClose:s,clientId:a,clientName:r,documents:n}){const[i,l]=c.useState({isOpen:!1,documentUrl:"",documentName:"",documentType:""}),{data:o,isLoading:p,error:h}=me(["documents",a],async()=>{if(!a)return null;console.log("📄 Fetching documents for client ID:",a);const y=await Z.get(`/api/documents/enquiry/${a}`);return console.log("📄 Documents response:",y.data),y.data},{enabled:t&&!!a,refetchOnWindowFocus:!1});if(!t)return null;if(p)return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading documents..."})]})});if(h)return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-8 max-w-md",children:[e.jsx("div",{className:"text-red-500 text-center mb-4",children:"❌"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Documents"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Failed to load documents for this client."}),e.jsx("button",{onClick:s,className:"w-full btn-primary",children:"Close"})]})});const f=o||[],b=f.length>0?f[0].enquiry:{name:r,mobile:"",businessType:""},x=new Set(f.map(y=>y.type)),w=Bt.filter(y=>y.required),g=w.filter(y=>x.has(y.value)),N=w.length>0?Math.round(g.length/w.length*100):0,d=y=>{var m;l({isOpen:!0,documentUrl:`http://localhost:5002/api/documents/${y.id}/view`,documentName:`${y.enquiry.name} - ${((m=Bt.find(u=>u.value===y.type))==null?void 0:m.label)||y.type}`,documentType:y.type})},E=()=>{l({isOpen:!1,documentUrl:"",documentName:"",documentType:""})},j=y=>{const m=f.find(T=>T.type===y);if(m)return{status:"uploaded",document:m,verified:m.verified};const u=Bt.find(T=>T.value===y);return{status:u!=null&&u.required?"missing":"optional",document:null,verified:!1}};return e.jsxs(e.Fragment,{children:[e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:s,children:e.jsxs(O.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-[90vh] flex flex-col",onClick:y=>y.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:b.name}),e.jsxs("p",{className:"text-gray-600",children:["📱 ",b.mobile," • ",b.businessType]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Document Portfolio"})]}),e.jsx("button",{onClick:s,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(Qe,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-indigo-50 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Document Completion Status"}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold text-indigo-600",children:[N,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Complete"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-4",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 h-3 rounded-full transition-all duration-500",style:{width:`${N}%`}})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[g.length,"/",w.length]}),e.jsx("div",{className:"text-gray-600",children:"Required Documents"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:f.filter(y=>y.verified).length}),e.jsx("div",{className:"text-gray-600",children:"Verified Documents"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:f.length}),e.jsx("div",{className:"text-gray-600",children:"Total Uploaded"})]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Bt.map(y=>{const m=j(y.value);return e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`border-2 rounded-lg p-4 transition-all duration-200 hover:shadow-md ${m.status==="uploaded"?m.verified?"border-green-200 bg-green-50":"border-yellow-200 bg-yellow-50":m.status==="missing"?"border-red-200 bg-red-50":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(st,{className:`h-6 w-6 mr-2 ${m.status==="uploaded"?m.verified?"text-green-600":"text-yellow-600":m.status==="missing"?"text-red-600":"text-gray-400"}`}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900",children:y.label}),e.jsx("p",{className:"text-xs text-gray-500",children:y.required?"Required":"Optional"})]})]}),e.jsx("div",{className:"flex items-center",children:m.status==="uploaded"?m.verified?e.jsx(Re,{className:"h-5 w-5 text-green-600"}):e.jsx(dt,{className:"h-5 w-5 text-yellow-600"}):m.status==="missing"?e.jsx(dt,{className:"h-5 w-5 text-red-600"}):e.jsx("div",{className:"h-5 w-5 rounded-full border-2 border-gray-300"})})]}),m.document?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Status: "}),e.jsx("span",{className:`font-medium ${m.verified?"text-green-600":"text-yellow-600"}`,children:m.verified?"Verified":"Pending Verification"})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Uploaded: "}),new Date(m.document.uploadedAt).toLocaleDateString()]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"By: "}),m.document.uploadedBy.name]}),e.jsxs("button",{onClick:()=>d(m.document),className:"w-full mt-3 flex items-center justify-center px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-md hover:bg-indigo-700 transition-colors",children:[e.jsx(Ie,{className:"h-4 w-4 mr-2"}),"View Document"]})]}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:`text-sm font-medium ${m.status==="missing"?"text-red-600":"text-gray-500"}`,children:m.status==="missing"?"Missing Document":"Not Required"}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:m.status==="missing"?"This document needs to be uploaded":"This document is optional"})]})]},y.value)})})})]})}),e.jsx(_r,{isOpen:i.isOpen,onClose:E,documentName:i.documentName,documentType:i.documentType,documentUrl:i.documentUrl})]})}function Yd(){const[t,s]=c.useState(""),[a,r]=c.useState(""),[n,i]=c.useState(""),[l,o]=c.useState(!1),[p,h]=c.useState({isOpen:!1,documentUrl:"",documentName:"",documentType:"",documentId:void 0,isVerified:!1}),[f,b]=c.useState({isOpen:!1,clientId:0,clientName:""}),x=Oe(),w=Ge(),{data:g,isLoading:N,error:d}=me("enquiries",async()=>{var v;console.log("📋 Fetching enquiries from /enquiries...");try{const R=await Z.get("/api/enquiries");return console.log("📋 Enquiries response:",R.data),R.data}catch(R){if(console.error("📋 Enquiries fetch error:",R),R.code==="ECONNREFUSED"||(v=R.message)!=null&&v.includes("Network Error"))return console.log("📋 Backend not available, returning empty enquiries array"),[];throw R}},{staleTime:4*60*1e3,keepPreviousData:!0,onSuccess:v=>{console.log("📋 Enquiries query success:",(v==null?void 0:v.length)||0,"enquiries")},onError:v=>{console.error("📋 Enquiries query error:",v)}}),{data:E}=me("staff-members",async()=>{var v;try{return((v=(await Z.get("/api/staff")).data)==null?void 0:v.staff)||[]}catch{return console.log("No staff data available"),[]}},{staleTime:5*60*1e3,keepPreviousData:!0}),{data:j,isLoading:y,refetch:m}=me("documents",async()=>{console.log("📄 Fetching documents from /documents...");const v=await Z.get("/api/documents");return console.log("📄 Documents response:",v.data),v.data},{staleTime:8*60*1e3,keepPreviousData:!0,onSuccess:v=>{console.log("📄 Documents query success:",(v==null?void 0:v.length)||0,"documents")},onError:v=>{console.error("📄 Documents query error:",v)}}),{data:u}=me(["documentStatus",t],async()=>t?(await Z.get(`/api/documents/enquiry/${t}`)).data:null,{enabled:!!t,staleTime:3*60*1e3,keepPreviousData:!0}),T=ge(async({file:v,enquiryId:R,type:B})=>{const J=new FormData;J.append("file",v),J.append("enquiryId",R.toString()),J.append("type",B);const de=g==null?void 0:g.find(he=>he.id===R);return de!=null&&de.assignedStaff&&J.append("assignedStaff",de.assignedStaff),Z.post("/api/documents/upload",J,{headers:{"Content-Type":"multipart/form-data"}})},{onSuccess:v=>{console.log("📄 Upload success response:",v.data),I.success("Document uploaded successfully!"),v.data.document&&x.setQueryData("documents",R=>R?[v.data.document,...R]:[v.data.document]),x.invalidateQueries("documents"),x.invalidateQueries(["documentStatus",t]),r(""),l&&setTimeout(()=>{var B;const R=X();R?(r(R.document.value),I.success(`✅ ${(B=le.find(J=>J.value===v.data.document.type))==null?void 0:B.label} uploaded! Next: ${R.document.label}`)):(I.success("🎉 All required documents uploaded!"),o(!1),r(""))},500)},onError:v=>{var B,J,de,he,nt,vt,S,k,D,_;console.error("Upload error:",v);let R="Upload failed";(J=(B=v.response)==null?void 0:B.data)!=null&&J.message?R=v.response.data.message:(he=(de=v.response)==null?void 0:de.data)!=null&&he.error?R=v.response.data.error:v.message?R=v.message:((nt=v.response)==null?void 0:nt.status)===413?R="File too large. Maximum size is 10MB.":((vt=v.response)==null?void 0:vt.status)===415?R="Unsupported file type. Please upload PDF files only.":((S=v.response)==null?void 0:S.status)===400&&((_=(D=(k=v.response)==null?void 0:k.data)==null?void 0:D.message)!=null&&_.includes("already exists")?(R=v.response.data.message,r("")):R="Invalid file or missing required information."),I.error(R)}}),C=ge(async v=>Z.patch(`/api/documents/${v}/verify`,{verified:!0}),{onSuccess:(v,R)=>{I.success("Document verified successfully!"),x.setQueryData("documents",B=>B&&B.map(J=>J.id===R?{...J,verified:!0,verifiedAt:new Date().toISOString()}:J)),t&&x.invalidateQueries(["documentStatus",t]),setTimeout(()=>{x.invalidateQueries("documents")},100)},onError:v=>{var R,B;I.error(((B=(R=v.response)==null?void 0:R.data)==null?void 0:B.message)||"Verification failed")}}),$=ge(async v=>Z.delete(`/api/documents/${v}`),{onSuccess:(v,R)=>{I.success("Document deleted successfully!"),x.setQueryData("documents",B=>B&&B.filter(J=>J.id!==R)),t&&x.invalidateQueries(["documentStatus",t]),setTimeout(()=>{x.invalidateQueries("documents")},100)},onError:v=>{var R,B;I.error(((B=(R=v.response)==null?void 0:R.data)==null?void 0:B.message)||"Delete failed")}}),U=ge(async v=>Z.post("/api/shortlist",{enquiryId:v.id,name:v.name||v.businessName,mobile:v.mobile,businessName:v.businessName,businessNature:v.businessType,loanAmount:v.loanAmount||5e5,comments:"Shortlisted from document management"}),{onSuccess:v=>{console.log("Shortlist response:",v.data),I.success(v.data.message||"Client shortlisted successfully!"),x.invalidateQueries("shortlists"),x.invalidateQueries(["shortlists"]),v.data.shortlist&&x.setQueryData(["shortlists",""],R=>R?R.some(J=>J.id===v.data.shortlist.id)?R:[v.data.shortlist,...R]:[v.data.shortlist]),setTimeout(()=>{var R;w("/shortlist",{state:{fromAdd:!0,clientName:((R=v.data.shortlist)==null?void 0:R.name)||v.data.name,timestamp:Date.now()}})},1e3)},onError:v=>{var B,J;console.error("Shortlist error:",v);const R=((J=(B=v.response)==null?void 0:B.data)==null?void 0:J.message)||v.message||"Shortlist failed";I.error(`Shortlist failed: ${R}`)}}),W=ge(async({enquiryId:v,staffName:R})=>Z.patch(`/enquiries/${v}`,{assignedStaff:R}),{onSuccess:(v,{enquiryId:R,staffName:B})=>{console.log(`Staff ${B} assigned to enquiry ${R}`),x.setQueryData("enquiries",J=>J&&J.map(de=>de.id===R?{...de,assignedStaff:B}:de)),I.success(`Staff assigned to ${B} successfully!`)},onError:v=>{console.error("Staff assignment error:",v),I.error("Failed to assign staff member")}}),Y=async v=>{var de;const R=l?re==null?void 0:re.value:a;if(!t||!R||!n){I.error("Please select enquiry, document type, and assign staff before uploading");return}const B=10*1024*1024;if(v.size>B){I.error("File size must be less than 10MB");return}if(v.type!=="application/pdf"){I.error("Only PDF files are allowed");return}if(console.log("📄 Uploading file:",{name:v.name,size:v.size,type:v.type,enquiryId:t,documentType:R,isSequentialMode:l}),((j==null?void 0:j.filter(he=>he.enquiry.id.toString()===t&&he.type===R))||[]).length>0){const he=((de=le.find(nt=>nt.value===R))==null?void 0:de.label)||R;I.error(`${he} already exists for this client. Please select a different document type.`);return}T.mutate({file:v,enquiryId:parseInt(t),type:R})},H=async v=>{var R;try{const J={isOpen:!0,documentUrl:`http://localhost:5002/api/documents/${v.id}/view`,documentName:`${v.enquiry.name} - ${((R=le.find(de=>de.value===v.type))==null?void 0:R.label)||v.type}`,documentType:v.type,documentId:v.id,isVerified:v.verified};h(J)}catch(B){console.error("Error getting document URL:",B),I.error("Failed to load document. Please try again.")}},Q=v=>{b({isOpen:!0,clientId:v.id,clientName:v.name})},ee=()=>{h({isOpen:!1,documentUrl:"",documentName:"",documentType:"",documentId:void 0,isVerified:!1})},ie=()=>{b({isOpen:!1,clientId:0,clientName:""})},se=v=>{window.confirm("Are you sure you want to delete this document?")&&$.mutate(v)},le=[{value:"GST",label:"GST Certificate",required:!0},{value:"UDYAM",label:"Udyam Registration",required:!0},{value:"BANK_STATEMENT",label:"Bank Statement",required:!0},{value:"OWNER_PAN",label:"Owner PAN Card",required:!0},{value:"AADHAR",label:"Aadhar Card",required:!0},{value:"WEBSITE_GATEWAY",label:"Website & Gateway",required:!0},{value:"IE_CODE",label:"IE Code",required:!0}],K=g==null?void 0:g.find(v=>v.id.toString()===t),be=(j==null?void 0:j.filter(v=>v.enquiry.id.toString()===t))||[],P=be.map(v=>v.type),X=()=>{const v=le.filter(R=>R.required);for(let R=0;R<v.length;R++)if(!P.includes(v[R].value))return{index:R,document:v[R]};return null},ae=X(),re=ae==null?void 0:ae.document,ue={current:P.length,total:le.filter(v=>v.required).length,percentage:Math.round(P.length/le.filter(v=>v.required).length*100)},ye=le.filter(v=>v.required),L=ye.filter(v=>P.includes(v.value)),ne=ye.length>0?Math.round(L.length/ye.length*100):0,z=ne===100,oe=be.length>0&&ye.every(v=>{const R=be.find(B=>B.type===v.value);return R&&R.verified}),F=K==null?void 0:K.shortlist,Ce=oe&&t;return console.log("🔍 DocumentUpload render state:",{enquiriesLoading:N,enquiriesCount:(g==null?void 0:g.length)||0,enquiriesError:!!d,isLoading:y,documentsCount:(j==null?void 0:j.length)||0}),N&&y?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Document Management"}),e.jsx("p",{className:"text-gray-600",children:"Upload and manage loan application documents"})]}),Ce&&e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card border-green-200 bg-green-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-green-600 text-2xl mr-3",children:"🎉"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-green-900",children:"All Documents Verified!"}),e.jsx("p",{className:"text-green-700",children:"Client is ready for shortlisting"})]})]}),F?e.jsxs("div",{className:"px-6 py-3 bg-blue-100 text-blue-800 font-semibold rounded-lg flex items-center",children:[e.jsx(Re,{className:"h-5 w-5 mr-2"}),"Already Shortlisted"]}):e.jsxs("button",{onClick:()=>U.mutate(K),disabled:U.isLoading,className:"px-6 py-3 bg-green-600 text-white font-semibold rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center",children:[e.jsx(At,{className:"h-5 w-5 mr-2"}),U.isLoading?"Adding to Shortlist...":"Add to Shortlist"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:le.filter(v=>v.required).map(v=>e.jsxs("div",{className:"flex items-center p-3 bg-white rounded-lg border border-green-200",children:[e.jsx(Re,{className:"h-5 w-5 text-green-600 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-green-900",children:v.label}),e.jsx("p",{className:"text-sm text-green-600",children:"Verified ✓"})]})]},v.value))}),e.jsxs("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("h4",{className:"text-red-800 font-medium mb-2 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"⚠️"}),"All Documents Now Mandatory"]}),e.jsxs("p",{className:"text-sm text-red-700",children:[e.jsx("span",{className:"font-semibold",children:"Website & Gateway"})," and ",e.jsx("span",{className:"font-semibold",children:"IE Code"})," are now required documents. All 7 document types must be uploaded and verified before the client can proceed to shortlist."]})]})]}),t&&!Ce&&e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card bg-blue-50 border-blue-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-blue-900",children:"Document Upload Mode"}),e.jsx("p",{className:"text-blue-700 text-sm",children:l?"Sequential mode: Upload documents one by one":"Standard mode: Choose any document type to upload"})]}),e.jsx("button",{onClick:()=>{const v=!l;if(o(v),v){const R=X();R?(r(R.document.value),I.success(`📋 Sequential mode activated! Starting with: ${R.document.label}`)):(I.success("All required documents are already uploaded!"),o(!1))}else r(""),I.success("🔄 Switched to standard mode")},className:`px-4 py-2 rounded-lg font-medium transition-colors ${l?"bg-blue-600 text-white hover:bg-blue-700":"bg-white text-blue-600 border border-blue-300 hover:bg-blue-50"}`,children:l?"📋 Sequential Mode":"🔄 Switch to Sequential"})]}),l&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Upload Progress"}),e.jsxs("span",{className:"text-blue-900 font-semibold",children:[ue.current,"/",ue.total," documents"]})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-3",children:e.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-500",style:{width:`${ue.percentage}%`}})}),re&&e.jsx("div",{className:"mt-3 p-3 bg-white rounded-lg border border-blue-200",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-2xl mr-3",children:"📄"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-blue-900",children:["Next: ",re.label]}),e.jsxs("p",{className:"text-sm text-blue-600",children:["Step ",ue.current+1," of ",ue.total]})]})]})})]})]}),!Ce&&e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Upload New Document"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Enquiry *"}),e.jsxs("select",{value:t,onChange:v=>{const R=v.target.value;if(s(R),r(""),R&&g){const B=g.find(J=>J.id.toString()===R);B!=null&&B.assignedStaff?i(B.assignedStaff):i("")}else i("")},className:"input-field",disabled:N,children:[e.jsx("option",{value:"",children:N?"Loading enquiries...":d?"Backend server not available - Please start the backend server":!g||g.length===0?"No enquiries available - Backend may be offline":"Choose enquiry..."}),g==null?void 0:g.map(v=>e.jsxs("option",{value:v.id,children:[v.name," - ",v.mobile," (",v.businessType||"No business type",")",v.assignedStaff?` • Staff: ${v.assignedStaff}`:""]},v.id))]}),!!d&&e.jsxs("div",{className:"mt-2 p-3 bg-red-50 border border-red-200 rounded-md",children:[e.jsxs("p",{className:"text-sm text-red-600",children:[e.jsx("strong",{children:"Backend Connection Error:"})," Cannot connect to the backend server."]}),e.jsx("p",{className:"text-xs text-red-500 mt-1",children:"Please ensure the backend server is running on port 5002. Check the console for more details."})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign Staff *"}),e.jsxs("select",{value:n,onChange:v=>{const R=v.target.value;i(R),t&&R&&W.mutate({enquiryId:parseInt(t),staffName:R})},className:"input-field",disabled:!t,required:!0,children:[e.jsx("option",{value:"",children:t?"Choose staff member...":"Select enquiry first..."}),E&&E.map(v=>e.jsxs("option",{value:v.name,children:[v.name," - ",v.role]},v.id))]}),t&&e.jsx("div",{className:"mt-1",children:n?e.jsxs("p",{className:"text-sm text-green-600",children:["✅ Staff assigned: ",n]}):e.jsx("p",{className:"text-sm text-red-600",children:"Staff assignment is required before uploading documents"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Document Type *"}),l?e.jsxs("div",{className:"input-field bg-blue-50 border-blue-300",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-blue-900",children:re?re.label:"All documents uploaded!"}),re&&e.jsxs("span",{className:"text-sm text-blue-600 bg-blue-200 px-2 py-1 rounded",children:["Step ",ue.current+1,"/",ue.total]})]}),!re&&e.jsx("p",{className:"text-sm text-green-600 mt-1",children:"🎉 All required documents completed!"})]}):e.jsxs("select",{value:a,onChange:v=>r(v.target.value),className:"input-field",disabled:!t,children:[e.jsx("option",{value:"",children:t?"Choose type...":"Select enquiry first..."}),le.map(v=>{const R=P.includes(v.value);return e.jsxs("option",{value:v.value,disabled:R,children:[v.label," ",v.required?"*":"(Optional)"," ",R?"✓ Already Uploaded":""]},v.value)})]})]})]}),K&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-blue-900",children:"Selected Client Details"}),e.jsx("button",{onClick:()=>Q(K),className:"px-3 py-1 bg-green-600 text-white text-sm rounded-md hover:bg-green-700 transition-colors",children:"✓ View All Documents"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Name:"}),e.jsx("span",{className:"ml-2 text-blue-900",children:K.name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Mobile:"}),e.jsx("span",{className:"ml-2 text-blue-900",children:K.mobile})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Business:"}),e.jsx("span",{className:"ml-2 text-blue-900",children:K.businessType})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:"Document Completion"}),e.jsxs("span",{className:"text-blue-900 font-semibold",children:[ne,"%"]})]}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${ne}%`}})}),e.jsxs("div",{className:"mt-2 text-xs text-blue-700",children:[L.length," of ",ye.length," required documents uploaded"]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-blue-700 font-medium mb-3",children:"Document Status"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:le.map(v=>{var J,de;const R=be.some(he=>he.type===v.value)||((J=u==null?void 0:u.documents)==null?void 0:J.some(he=>he.type===v.value)),B=be.find(he=>he.type===v.value)||((de=u==null?void 0:u.documents)==null?void 0:de.find(he=>he.type===v.value));return e.jsxs("div",{className:"flex items-center space-x-2",children:[R?B!=null&&B.verified?e.jsx("span",{className:"text-green-600 text-lg",title:"Verified",children:"✅"}):e.jsx("span",{className:"text-yellow-600 text-lg",title:"Uploaded but not verified",children:"⚠️"}):v.required?e.jsx("span",{className:"text-red-600 text-lg",title:"Missing required document",children:"❌"}):e.jsx("span",{className:"text-gray-400 text-lg",title:"Optional document",children:"○"}),e.jsxs("span",{className:`text-sm ${R?B!=null&&B.verified?"text-green-700 font-medium":"text-yellow-700 font-medium":v.required?"text-red-700":"text-gray-600"}`,children:[v.label,v.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"}),R&&e.jsxs("span",{className:"ml-2 text-xs",children:["(",B!=null&&B.verified?"Verified":"Pending Verification",")"]})]})]},v.value)})}),e.jsxs("div",{className:"mt-3 text-xs text-blue-600",children:[e.jsx("span",{className:"text-green-600",children:"✅ Verified"})," •",e.jsx("span",{className:"text-yellow-600 ml-2",children:"⚠️ Uploaded (Pending)"})," •",e.jsx("span",{className:"text-red-600 ml-2",children:"❌ Missing (Required)"})," •",e.jsx("span",{className:"text-gray-600 ml-2",children:"○ Optional"})]})]}),z&&e.jsx("div",{className:"mt-4 p-3 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-green-600 text-lg mr-2",children:"🎉"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-800 font-semibold",children:"Ready for Shortlist!"}),e.jsx("p",{className:"text-green-700 text-sm",children:"All required documents completed"})]})]}),e.jsx("button",{onClick:()=>U.mutate(K),disabled:U.isLoading||!!(K!=null&&K.shortlist),className:`px-4 py-2 rounded-md transition-colors disabled:opacity-50 ${K!=null&&K.shortlist?"bg-gray-500 text-white cursor-not-allowed":"bg-green-600 text-white hover:bg-green-700"}`,children:K!=null&&K.shortlist?"✅ Already Shortlisted":U.isLoading?"Adding...":"⭐ Add to Shortlist"})]})})]}),t&&(l?re:a)&&n?e.jsxs("div",{className:"relative",children:[l&&re&&e.jsxs("div",{className:"mb-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"text-3xl mr-3",children:"📄"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-blue-900",children:re.label}),e.jsx("p",{className:"text-blue-600 text-sm",children:"Upload this document to continue"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:ue.current+1}),e.jsxs("div",{className:"text-xs text-blue-500",children:["of ",ue.total]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-700",children:[e.jsx("span",{children:"📋 Required document"}),e.jsx("span",{children:"•"}),e.jsx("span",{children:"🎯 Next in sequence"}),ue.current>0&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{children:["✅ ",ue.current," completed"]})]})]})]}),e.jsx($a,{onUpload:Y}),T.isLoading&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-blue-600 font-medium",children:l?`Uploading ${re==null?void 0:re.label}...`:"Uploading document..."})]})})]}):e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center bg-gray-50",children:[e.jsx(st,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:t?n?l&&!re?"🎉 All documents uploaded! Switch to standard mode for additional uploads.":"Please select a document type to upload":"Please assign a staff member":"Please select an enquiry first"})]})]}),Ce&&e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"card bg-gray-50 border-gray-200",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Need to Upload Additional Documents?"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"All required documents are verified. You can still upload optional documents if needed."}),e.jsx("button",{onClick:()=>{const v=document.getElementById("upload-section");v&&v.scrollIntoView({behavior:"smooth"})},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"📄 Upload Additional Documents"})]})}),Ce&&e.jsxs(O.div,{id:"upload-section",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card border-blue-200",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Upload Additional Documents"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Enquiry *"}),e.jsxs("select",{value:t,onChange:v=>{const R=v.target.value;if(s(R),r(""),R&&g){const B=g.find(J=>J.id.toString()===R);B!=null&&B.assignedStaff?i(B.assignedStaff):i("")}else i("")},className:"input-field",disabled:N,children:[e.jsx("option",{value:"",children:N?"Loading enquiries...":d?"Backend server not available - Please start the backend server":!g||g.length===0?"No enquiries available - Backend may be offline":"Choose enquiry..."}),g==null?void 0:g.map(v=>e.jsxs("option",{value:v.id,children:[v.name," - ",v.mobile," (",v.businessType||"No business type",")",v.assignedStaff?` • Staff: ${v.assignedStaff}`:""]},v.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assign Staff *"}),e.jsxs("select",{value:n,onChange:v=>{const R=v.target.value;i(R),t&&R&&W.mutate({enquiryId:parseInt(t),staffName:R})},className:"input-field",disabled:!t,required:!0,children:[e.jsx("option",{value:"",children:t?"Choose staff member...":"Select enquiry first..."}),E&&E.map(v=>e.jsxs("option",{value:v.name,children:[v.name," - ",v.role]},v.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Document Type *"}),e.jsxs("select",{value:a,onChange:v=>r(v.target.value),className:"input-field",disabled:!t,children:[e.jsx("option",{value:"",children:t?"Choose type...":"Select enquiry first..."}),le.map(v=>{const R=P.includes(v.value);return e.jsxs("option",{value:v.value,disabled:R,children:[v.label," ",v.required?"*":"(Optional)"," ",R?"✓ Already Uploaded":""]},v.value)})]})]})]}),t&&(l?re:a)&&n?e.jsxs("div",{className:"relative",children:[e.jsx($a,{onUpload:Y}),T.isLoading&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-blue-600 font-medium",children:"Uploading document..."})]})})]}):e.jsxs("div",{className:"border-2 border-dashed border-blue-300 rounded-lg p-8 text-center bg-blue-50",children:[e.jsx(st,{className:"h-12 w-12 text-blue-400 mx-auto mb-4"}),e.jsx("p",{className:"text-blue-600 text-lg",children:t?n?"Please select a document type to upload":"Please assign a staff member":"Please select an enquiry first"})]})]}),e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"card",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Uploaded Documents"}),e.jsx("p",{className:"text-sm text-gray-500",children:y?"Loading...":t?`${(be==null?void 0:be.length)||0} documents for ${K==null?void 0:K.name}`:"Select a client to view documents"})]}),e.jsxs("div",{className:"flex space-x-2",children:[t&&e.jsx("button",{onClick:async()=>{try{const v=await Z.post(`/api/documents/remove-duplicates/${t}`);v.data.removed>0?(I.success(`Removed ${v.data.removed} duplicate documents`),m()):I.success("No duplicates found for this enquiry")}catch{I.error("Failed to remove duplicates")}},className:"px-3 py-1 bg-red-600 text-white text-sm rounded hover:bg-red-700 transition-colors",children:"🧹 Clean Duplicates"}),e.jsx("button",{onClick:()=>{console.log("📄 Manual refresh clicked"),m(),I.success("Refreshing documents...")},disabled:y,className:`px-3 py-1 text-white text-sm rounded transition-colors ${y?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:y?"⏳ Loading...":"🔄 Refresh"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Document"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Enquiry"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Uploaded By"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"px-6 py-8 text-center",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Loading documents..."})]})})}):j&&j.length>0?j==null?void 0:j.filter(v=>t?v.enquiry.id.toString()===t:!0).map(v=>{var R,B,J,de,he;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(st,{className:"h-5 w-5 text-gray-400 mr-2"}),e.jsx("button",{onClick:()=>H(v),className:"text-primary-600 hover:text-primary-900 font-medium",children:"View Document"})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[v.enquiry.name,e.jsx("div",{className:"text-xs text-gray-500",children:v.enquiry.mobile})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((R=le.find(nt=>nt.value===v.type))==null?void 0:R.label)||v.type}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("div",{className:"flex items-center",children:v.verified?e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"h-5 w-5 text-green-500 mr-1"}),e.jsx("span",{className:"text-green-800 text-sm font-medium",children:"Verified"})]}):e.jsxs(e.Fragment,{children:[e.jsx(dt,{className:"h-5 w-5 text-yellow-500 mr-1"}),e.jsx("span",{className:"text-yellow-800 text-sm font-medium",children:"Pending"})]})}),v.savedToSupabase&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("svg",{className:"h-4 w-4 text-blue-500 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})}),e.jsx("span",{className:"text-blue-800 text-xs font-medium",children:"Saved to DB"})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:v.uploadedBy.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(v.uploadedAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>C.mutate(v.id),disabled:C.isLoading||v.verified,className:"flex items-center justify-center w-8 h-8 rounded-full bg-green-100 text-green-600 hover:bg-green-200 hover:text-green-700 disabled:opacity-50 disabled:cursor-not-allowed",title:v.verified?"Document verified":"Verify document",children:e.jsx("span",{className:"text-sm font-bold",children:"✓"})}),e.jsx("button",{onClick:()=>Q(v.enquiry),className:"text-purple-600 hover:text-purple-900 text-sm font-medium",title:"View all documents for this client",children:"View All"}),e.jsx("button",{onClick:()=>U.mutate(v.enquiry),disabled:U.isLoading||!!((B=v.enquiry)!=null&&B.shortlist),className:`font-medium disabled:opacity-50 ${(J=v.enquiry)!=null&&J.shortlist?"text-gray-500 cursor-not-allowed":"text-green-600 hover:text-green-900"}`,title:(de=v.enquiry)!=null&&de.shortlist?"Already shortlisted":"Mark this client as shortlisted",children:(he=v.enquiry)!=null&&he.shortlist?"✅ Shortlisted":"⭐ Shortlist"}),e.jsx("button",{onClick:()=>se(v.id),disabled:$.isLoading,className:"text-red-600 hover:text-red-900 disabled:opacity-50",children:"Delete"})]})})]},`doc-${v.id}-${v.type}`)}):e.jsx("tr",{children:e.jsxs("td",{colSpan:7,className:"px-6 py-12 text-center",children:[e.jsx(st,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"No documents uploaded for this client yet."}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Upload documents using the form above to see them listed here."}),e.jsxs("p",{className:"text-blue-600 text-sm mt-2",children:["Selected client: ",K==null?void 0:K.name," - ",K==null?void 0:K.mobile]})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"Select a client to view their documents."}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Choose an enquiry from the dropdown above to see uploaded documents."})]})]})})})]})})]}),e.jsx(_r,{isOpen:p.isOpen,onClose:ee,documentName:p.documentName,documentType:p.documentType,documentUrl:p.documentUrl,documentId:p.documentId,isVerified:p.isVerified,onVerify:v=>{C.mutate(v),h(R=>({...R,isVerified:!0}))}}),e.jsx(Zd,{isOpen:f.isOpen,onClose:ie,clientId:f.clientId,clientName:f.clientName,documents:j||[]})]})}const Kd=()=>{const t=Oe(),s=Ge(),[a,r]=c.useState({}),{data:n,isLoading:i}=me("documents-verification",async()=>(await Z.get("/api/documents")).data,{staleTime:3*60*1e3,keepPreviousData:!0}),{data:l}=me("staff-members",async()=>{var j;try{return((j=(await Z.get("/api/staff")).data)==null?void 0:j.staff)||[]}catch{return console.log("No staff data available"),[]}},{staleTime:5*60*1e3}),o=ge(async({documentId:j,verified:y,enquiryId:m})=>({...await Z.patch(`/api/documents/${j}/verify`,{verified:y}),enquiryId:m}),{onSuccess:async j=>{if(I.success("Document verification updated successfully!"),t.invalidateQueries("documents-verification"),j.enquiryId){const u=(await t.fetchQuery("documents-verification",async()=>(await Z.get("/api/documents")).data)).reduce((T,C)=>{const $=C.enquiry.id;return T[$]||(T[$]={enquiry:C.enquiry,documents:[]}),T[$].documents.push(C),T},{})[j.enquiryId];if(u){const T=u.documents.every($=>$.verified),C=u.documents.some($=>$.enquiry.shortlist);if(T&&!C)try{await Z.post("/api/shortlist",{enquiryId:j.enquiryId}),I.success(`🎉 All documents verified! ${u.enquiry.name} automatically added to shortlist!`),t.invalidateQueries("documents-verification"),t.invalidateQueries(["shortlists"])}catch($){console.error("Failed to auto-add to shortlist:",$)}}}},onError:j=>{var y,m;I.error(((m=(y=j.response)==null?void 0:y.data)==null?void 0:m.message)||"Failed to update verification")}}),p=ge(async({enquiryId:j,enquiryData:y})=>Z.post("/api/shortlist",{enquiryId:j,name:y.name,mobile:y.mobile,businessName:y.businessName||y.name,businessNature:y.businessType,loanAmount:y.loanAmount||5e5,comments:"Added from document verification - all documents verified"}),{onSuccess:j=>{var m;const y=((m=j.data)==null?void 0:m.name)||"Client";I.success(`${y} added to shortlist successfully!`),t.invalidateQueries(["shortlists"]),t.invalidateQueries("documents-verification"),setTimeout(()=>{s("/shortlist")},1e3)},onError:j=>{var y,m;I.error(((m=(y=j.response)==null?void 0:y.data)==null?void 0:m.message)||"Failed to add to shortlist")}}),h=ge(async({enquiryId:j,staffName:y})=>Z.patch(`/api/supabase/enquiries/${j}`,{assignedStaff:y}),{onSuccess:(j,{staffName:y})=>{I.success(`Staff assigned to ${y} successfully!`),t.invalidateQueries("documents-verification")},onError:j=>{console.error("Assignment error:",j),I.error("Failed to assign staff member")}}),f=(j,y,m)=>{o.mutate({documentId:j,verified:y,enquiryId:m})},b=j=>{var $;if(!a[j]){I.error("Please assign a staff member before adding to shortlist");return}const m=n==null?void 0:n.filter(U=>U.enquiry.id===j);if(!(m==null?void 0:m.every(U=>U.verified))){I.error("All documents must be verified before adding to shortlist");return}const T=d(m||[]);if(T.length>0){const U=T.map(W=>W.label).join(", ");I.error(`Missing mandatory document types: ${U}. Please upload all required documents.`);return}const C=($=m==null?void 0:m[0])==null?void 0:$.enquiry;if(!C){I.error("Enquiry data not found");return}p.mutate({enquiryId:j,enquiryData:C})},x=(j,y)=>{y&&(r(m=>({...m,[j]:y})),h.mutate({enquiryId:j,staffName:y}))},w=()=>e.jsx(ys,{className:"h-5 w-5"}),g=j=>j?e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(Re,{className:"h-4 w-4 mr-1"}),"Verified"]}):e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(Rt,{className:"h-4 w-4 mr-1"}),"Pending"]}),N=[{type:"GST",label:"GST Certificate",icon:"📄"},{type:"UDYAM",label:"UDYAM Registration",icon:"🏭"},{type:"BANK_STATEMENT",label:"Bank Statement",icon:"🏦"},{type:"OWNER_PAN",label:"Owner PAN Card",icon:"🆔"},{type:"AADHAR",label:"Aadhar Card",icon:"📋"},{type:"WEBSITE_GATEWAY",label:"Website & Gateway",icon:"🌐"},{type:"IE_CODE",label:"IE Code",icon:"🏷️"}],d=j=>{const y=j.map(m=>m.type);return N.filter(m=>!y.includes(m.type))},E=n==null?void 0:n.reduce((j,y)=>{const m=y.enquiry.id;return j[m]||(j[m]={enquiry:y.enquiry,documents:[]}),j[m].documents.push(y),j},{});return i?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Document Verification"}),e.jsxs("div",{className:"text-sm text-gray-500",children:[(n==null?void 0:n.length)||0," documents to review"]})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ys,{className:"h-5 w-5 text-blue-600 mt-0.5 mr-3"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"Mandatory Document Types for Verification"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 text-xs",children:[e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-800 font-medium",children:"📄 GST Certificate"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-800 font-medium",children:"🏭 UDYAM Registration"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-800 font-medium",children:"🏦 Bank Statement"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-800 font-medium",children:"🆔 Owner PAN Card"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded bg-blue-100 text-blue-800 font-medium",children:"📋 Aadhar Card"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded bg-red-100 text-red-800 font-medium",children:"🌐 Website & Gateway"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded bg-red-100 text-red-800 font-medium",children:"🏷️ IE Code"})]}),e.jsxs("p",{className:"text-xs text-blue-700 mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Note:"})," All 7 document types must be verified before a client can be added to the shortlist.",e.jsx("span",{className:"text-red-700 font-semibold",children:"Website & Gateway and IE Code are now mandatory requirements"})," along with the standard documents."]})]})]})}),E&&Object.keys(E).length>0?e.jsx("div",{className:"space-y-6",children:Object.values(E).map(j=>{const y=j.documents.every(C=>C.verified),m=j.documents.some(C=>C.enquiry.shortlist),T=d(j.documents).length===0;return e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-md border border-gray-200",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:j.enquiry.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["📱 ",j.enquiry.mobile," • ",j.enquiry.businessType||"Business Type Not Specified"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[y&&T&&!m&&e.jsxs("button",{onClick:()=>b(j.enquiry.id),disabled:p.isLoading,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50",children:[e.jsx(At,{className:"h-4 w-4 mr-2"}),"Add to Shortlist"]}),y&&!T&&!m&&e.jsxs("button",{disabled:!0,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-gray-400 cursor-not-allowed",title:"Missing mandatory document types",children:[e.jsx(dt,{className:"h-4 w-4 mr-2"}),"Missing Documents"]}),m&&e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:"✅ In Shortlist"})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Xe,{className:"h-5 w-5 text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Assign Staff Member ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:a[j.enquiry.id]||"",onChange:C=>x(j.enquiry.id,C.target.value),className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm",disabled:h.isLoading,required:!0,children:[e.jsx("option",{value:"",children:"Select staff member..."}),l&&l.map(C=>e.jsxs("option",{value:C.name,children:[C.name," - ",C.role]},C.id))]}),!a[j.enquiry.id]&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:"Staff assignment is required before adding to shortlist"})]})]})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.documents.map(C=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center",children:[w(),e.jsxs("div",{className:"ml-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-900",children:C.type.replace(/_/g," ")}),e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800",children:"Required"})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Document Type: ",e.jsx("span",{className:"font-semibold text-gray-700",children:C.type})]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Uploaded ",new Date(C.uploadedAt).toLocaleDateString()]})]})]}),g(C.verified)]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("button",{onClick:()=>window.open(C.s3Url,"_blank"),className:"inline-flex items-center px-3 py-1 border border-gray-300 text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(Ie,{className:"h-3 w-3 mr-1"}),"View"]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>f(C.id,!0,C.enquiry.id),disabled:o.isLoading,className:`p-1 rounded ${C.verified?"text-green-600 bg-green-100":"text-gray-400 hover:text-green-600 hover:bg-green-100"} transition-colors`,title:"Approve",children:e.jsx(Re,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>f(C.id,!1,C.enquiry.id),disabled:o.isLoading,className:`p-1 rounded ${C.verified?"text-gray-400 hover:text-red-600 hover:bg-red-100":"text-red-600 bg-red-100"} transition-colors`,title:"Reject",children:e.jsx(dt,{className:"h-4 w-4"})})]})]})]},C.id))}),(()=>{const C=d(j.documents);return C.length>0&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(dt,{className:"h-5 w-5 text-red-600 mt-0.5 mr-2"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-red-900 mb-2",children:"Missing Mandatory Document Types"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:C.map($=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs font-medium bg-red-100 text-red-800",children:[$.icon," ",$.label]},$.type))}),e.jsxs("p",{className:"text-xs text-red-700 mt-2",children:[e.jsx("span",{className:"font-semibold",children:"Action Required:"})," These document types must be uploaded before the client can be added to shortlist."]})]})]})})})(),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsxs("span",{className:"text-gray-600",children:["Verification Progress: ",j.documents.filter(C=>C.verified).length," / ",j.documents.length," documents verified"]}),e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${j.documents.filter(C=>C.verified).length/j.documents.length*100}%`}})})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["Document Types: ",j.documents.length," / ",N.length," mandatory types uploaded"]}),e.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${j.documents.length/N.length*100}%`}})})]})]})]})]},j.enquiry.id)})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ys,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No documents to verify"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"All documents have been processed or no documents have been uploaded yet."})]})]})},kt=at.create({baseURL:"http://localhost:5002",timeout:3e4,headers:{"Content-Type":"application/json"}}),Jd=()=>{const[t,s]=c.useState("desktop");return c.useEffect(()=>{const a=()=>{const r=window.innerWidth;r<768?s("mobile"):r<1024?s("tablet"):s("desktop")};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),t};function Xd(){var y,m;const t=Jd(),[s,a]=c.useState(""),[r,n]=c.useState(!1),[i,l]=c.useState({isOpen:!1,shortlist:null}),o=Oe(),p=_s(),h=ge(async({id:u,interestStatus:T})=>{console.log("🔄 Sending status update request:",{id:u,interestStatus:T});const C=await kt.patch(`/api/shortlist/${u}`,{interestStatus:T});return console.log("✅ Status update response:",C.data),C},{onSuccess:(u,T)=>{const C=T.interestStatus==="NOT_INTERESTED"?"Not Interested":"Interested";I.success(`Status updated to: ${C}`),console.log("🎉 Status successfully updated to:",T.interestStatus),console.log("✅ Backend response:",u.data),setTimeout(()=>{o.invalidateQueries(["shortlists"]),o.invalidateQueries(["cashfree-applications"])},100)},onError:(u,T)=>{var C,$;console.error("❌ Status update failed:",u),console.error("Failed variables:",T),o.setQueryData(["shortlists",s],U=>U&&U.map(W=>{if(W.id===T.id){console.log("🔄 Reverting optimistic update for ID:",T.id);const Y=T.interestStatus==="NOT_INTERESTED"?"INTERESTED":"NOT_INTERESTED";return{...W,interestStatus:Y}}return W})),I.error(`Failed to update status: ${(($=(C=u.response)==null?void 0:C.data)==null?void 0:$.message)||u.message}`)}}),f=(u,T)=>{o.setQueryData(["shortlists",s],C=>C&&C.map($=>$.id===u?(console.log("🔄 Optimistically updating status for ID:",u,"to:",T),{...$,interestStatus:T}):$)),h.mutate({id:u,interestStatus:T})},b=ge(async u=>{console.log("🗑️ Executing DELETE request for shortlist ID:",u);try{await kt.get("/api/staff/health"),console.log("✅ Server is accessible, proceeding with DELETE")}catch(C){throw console.error("❌ Server not accessible:",C),new Error("Backend server is not running. Please start the server first.")}const T=await kt.delete(`/api/shortlist/${u}`);return console.log("✅ DELETE response received:",T.data),T},{onSuccess:(u,T)=>{console.log("✅ Delete mutation successful:",u.data),I.success("Shortlist deleted successfully!"),o.setQueryData(["shortlists",s],C=>C&&C.filter($=>$.id!==T)),setTimeout(()=>{o.invalidateQueries(["shortlists"]),o.invalidateQueries(["cashfree-applications"])},100)},onError:u=>{var C,$,U,W,Y,H,Q,ee,ie;console.error("❌ Delete mutation failed:",u),console.error("Error details:",{message:u.message,status:(C=u.response)==null?void 0:C.status,statusText:($=u.response)==null?void 0:$.statusText,data:(U=u.response)==null?void 0:U.data,url:(W=u.config)==null?void 0:W.url,method:(Y=u.config)==null?void 0:Y.method});let T="Failed to delete shortlist";u.message.includes("Backend server is not running")?T="Backend server is not running. Please start the server on port 5001.":((H=u.response)==null?void 0:H.status)===404?T="DELETE endpoint not found. Please ensure backend server is running with Supabase routes.":T=((ee=(Q=u.response)==null?void 0:Q.data)==null?void 0:ee.message)||`Failed to delete shortlist (${((ie=u.response)==null?void 0:ie.status)||u.message})`,I.error(T)}}),x=(u,T)=>{window.confirm(`Are you sure you want to delete the shortlist for "${T}"? This action cannot be undone.`)&&(console.log("🗑️ Attempting to delete shortlist ID:",u),console.log("API endpoint will be:",`/api/shortlist/${u}`),b.mutate(u))},w=u=>{console.log("👁️ Viewing shortlist:",u.name),l({isOpen:!0,shortlist:u})},g=()=>{l({isOpen:!1,shortlist:null})},{data:N,isLoading:d,refetch:E}=me(["shortlists",s],async()=>{var u,T;try{const C=new URLSearchParams;s&&C.append("name",s);const $=await kt.get(`/api/shortlist?${C}`);return console.log("📋 Shortlist data received:",((u=$.data)==null?void 0:u.length)||0,"items"),console.log("📋 First shortlist item details:",(T=$.data)==null?void 0:T[0]),$.data||[]}catch(C){return console.error("📋 Error fetching shortlists:",C),[]}},{staleTime:5*60*1e3,cacheTime:15*60*1e3,keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchInterval:!1,onSuccess:u=>{console.log("📋 Shortlists query success:",(u==null?void 0:u.length)||0,"shortlists")},onError:u=>{console.error("📋 Shortlists query error:",u)}});c.useEffect(()=>{var u,T,C;(u=p.state)!=null&&u.fromEdit&&(console.log("Returning from edit page, forcing refresh...",p.state),n(!0),o.clear(),o.invalidateQueries(["shortlists"]),o.invalidateQueries(["shortlist"]),o.invalidateQueries(["cashfree-applications"]),setTimeout(()=>{o.refetchQueries(["shortlists"]),E().finally(()=>{n(!1)})},50)),(T=p.state)!=null&&T.fromAdd&&((C=p.state)!=null&&C.clientName)&&(I.success(`🎉 ${p.state.clientName} has been successfully added to shortlist!`),window.history.replaceState({},document.title))},[p.state,o,E,n]);const j=t==="mobile";return d||r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:r?"Refreshing data...":"Loading..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Shortlisted Applications"}),e.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[e.jsx("button",{onClick:()=>{console.log("🔄 Manual refresh triggered"),E(),I.success("Refreshing shortlist data...")},className:"btn-outline inline-flex items-center",children:"🔄 Refresh"}),e.jsx("button",{onClick:async()=>{var u;try{const T=await kt.get("/api/staff/health");I.success("Backend server is running!"),console.log("Server status:",T.data)}catch(T){I.error(`Backend server not accessible: ${((u=T.response)==null?void 0:u.status)||T.message}`),console.error("Server check failed:",T)}},className:"btn-outline inline-flex items-center",children:"Check Server"}),e.jsxs(Ae,{to:"/shortlist/new",className:"btn-primary inline-flex items-center",children:[e.jsx(ct,{className:"h-5 w-5 mr-2"}),"New Shortlist"]})]})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ut,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name...",value:s,onChange:u=>a(u.target.value),className:"input-field pl-10"})]}),e.jsx("button",{onClick:()=>{a(""),E()},className:"btn-secondary",children:"Clear"})]})}),e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:N&&N.length>0?e.jsx("div",{className:`${j?"space-y-4":"overflow-x-auto"}`,children:j?e.jsx("div",{className:"space-y-4",children:N.map(u=>{var T,C,$,U,W,Y,H;return e.jsxs(O.div,{whileHover:{scale:1.02},className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:u.name||((T=u.enquiry)==null?void 0:T.name)}),e.jsxs("select",{value:u.interestStatus||"INTERESTED",onChange:Q=>{console.log("Mobile status change:",u.id,"from:",u.interestStatus,"to:",Q.target.value),f(u.id,Q.target.value)},className:`text-xs border rounded px-2 py-1 focus:outline-none focus:ring-1 focus:ring-primary-500 transition-colors duration-200 ${u.interestStatus==="NOT_INTERESTED"?"bg-red-50 border-red-300 text-red-800":"bg-green-50 border-green-300 text-green-800"} ${h.isLoading?"opacity-50 cursor-not-allowed":""}`,disabled:h.isLoading,children:[e.jsx("option",{value:"INTERESTED",children:"✅ Interested"}),e.jsx("option",{value:"NOT_INTERESTED",children:"❌ Not Interested"})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["📱 ",u.mobile||((C=u.enquiry)==null?void 0:C.mobile)]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["🏢 ",u.businessNature||u.businessName||(($=u.enquiry)==null?void 0:$.businessType)||"Business"]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["💰 ₹",(u.loanAmount||((U=u.enquiry)==null?void 0:U.loanAmount)||0).toLocaleString()]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["📍 ",u.district||((W=u.enquiry)==null?void 0:W.district)||"Location"]}),e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("span",{className:"text-sm text-gray-600 mr-2",children:"📋 Loan Status:"}),e.jsx("span",{className:"text-xs px-2 py-1 bg-yellow-100 text-yellow-800 rounded",children:"Pending"})]}),e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx("span",{className:"text-sm text-gray-600 mr-2",children:"👤 Staff:"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900",children:((Y=u.staff)==null?void 0:Y.name)||u.staff||"Unassigned"}),((H=u.staff)==null?void 0:H.role)&&e.jsx("span",{className:"text-xs text-gray-500",children:u.staff.role})]})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["📅 ",new Date(u.createdAt||u.date).toLocaleDateString()]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>w(u),className:"text-blue-600 hover:text-blue-800 text-sm font-medium inline-flex items-center",children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(Ae,{to:`/shortlist/${u.id}/edit`,className:"text-primary-600 hover:text-primary-800 text-sm font-medium inline-flex items-center",children:[e.jsx(Ke,{className:"h-4 w-4 mr-1"}),"Edit"]}),!u.cashfreeApplication&&e.jsx(Ae,{to:`/payment-gateway/apply/${u.id}`,className:"text-green-600 hover:text-green-800 text-sm font-medium",children:"Apply to Payment Gateway"}),e.jsxs("button",{onClick:()=>{var Q;return x(u.id,u.name||((Q=u.enquiry)==null?void 0:Q.name)||"Unknown")},disabled:b.isLoading,className:"text-red-600 hover:text-red-800 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center",children:[e.jsx(xt,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]},u.id)})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[e.jsx("thead",{className:"bg-indigo-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-16 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"S.No"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Submitted Date"}),e.jsx("th",{className:"w-48 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Mobile"}),e.jsx("th",{className:"w-48 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Business"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Loan Amount"}),e.jsx("th",{className:"w-24 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"District"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Loan Status"}),e.jsx("th",{className:"w-24 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"w-24 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Staff"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map((u,T)=>{var C,$,U,W,Y,H,Q,ee,ie;return e.jsxs(O.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:T*.05},className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"w-16 px-4 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:T+1}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(u.createdAt||u.date).toLocaleDateString()}),e.jsx("td",{className:"w-48 px-4 py-4 text-sm font-medium text-gray-900",children:e.jsx("div",{className:"truncate",title:u.name||((C=u.enquiry)==null?void 0:C.name),children:u.name||(($=u.enquiry)==null?void 0:$.name)})}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:u.mobile||((U=u.enquiry)==null?void 0:U.mobile)}),e.jsx("td",{className:"w-48 px-4 py-4 text-sm text-gray-500",children:e.jsx("div",{className:"truncate",title:u.businessNature||u.businessName||((W=u.enquiry)==null?void 0:W.businessType)||"Business",children:u.businessNature||u.businessName||((Y=u.enquiry)==null?void 0:Y.businessType)||"Business"})}),e.jsxs("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500 font-semibold",children:["₹",(u.loanAmount||((H=u.enquiry)==null?void 0:H.loanAmount)||0).toLocaleString()]}),e.jsx("td",{className:"w-24 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:u.district||((Q=u.enquiry)==null?void 0:Q.district)||"N/A"}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Pending"})}),e.jsx("td",{className:"w-24 px-4 py-4 whitespace-nowrap",children:e.jsxs("select",{value:u.interestStatus||"INTERESTED",onChange:se=>{console.log("Desktop status change:",u.id,"from:",u.interestStatus,"to:",se.target.value),f(u.id,se.target.value)},className:`text-sm border rounded-md px-2 py-1 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200 ${u.interestStatus==="NOT_INTERESTED"?"bg-red-50 border-red-300 text-red-800":"bg-green-50 border-green-300 text-green-800"} ${h.isLoading?"opacity-50 cursor-not-allowed":""}`,disabled:h.isLoading,children:[e.jsx("option",{value:"INTERESTED",children:"✅ Interested"}),e.jsx("option",{value:"NOT_INTERESTED",children:"❌ Not Interested"})]})}),e.jsx("td",{className:"w-24 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-gray-900",children:((ee=u.staff)==null?void 0:ee.name)||u.staff||"Unassigned"}),((ie=u.staff)==null?void 0:ie.role)&&e.jsx("span",{className:"text-xs text-gray-500",children:u.staff.role})]})}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>w(u),className:"text-blue-600 hover:text-blue-900 inline-flex items-center",title:"View Shortlist Details",children:e.jsx(Ie,{className:"h-4 w-4"})}),e.jsx(Ae,{to:`/shortlist/${u.id}/edit`,className:"text-primary-600 hover:text-primary-900 inline-flex items-center",title:"Edit Shortlist",children:e.jsx(Ke,{className:"h-4 w-4"})}),!u.cashfreeApplication&&e.jsx(Ae,{to:`/payment-gateway/apply/${u.id}`,className:"text-green-600 hover:text-green-900",title:"Apply to Payment Gateway",children:"Apply"}),e.jsx("button",{onClick:()=>{var se;return x(u.id,u.name||((se=u.enquiry)==null?void 0:se.name)||"Unknown")},disabled:b.isLoading,className:"text-red-600 hover:text-red-900 disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center",title:"Delete Shortlist",children:e.jsx(xt,{className:"h-4 w-4"})})]})})]},u.id)})})]})})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"No shortlisted applications found."}),e.jsxs(Ae,{to:"/shortlist/new",className:"btn-primary inline-flex items-center mt-4",children:[e.jsx(ct,{className:"h-5 w-5 mr-2"}),"Create First Shortlist"]})]})}),i.isOpen&&i.shortlist&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Shortlist Details - ",i.shortlist.name]}),e.jsx("button",{onClick:g,className:"text-gray-400 hover:text-gray-600 focus:outline-none",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsxs("div",{className:"mt-4 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:i.shortlist.name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Mobile"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:i.shortlist.mobile||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"District"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:i.shortlist.district||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:i.shortlist.createdAt?new Date(i.shortlist.createdAt).toLocaleDateString():"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Business Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Business Name"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:i.shortlist.businessName||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Business Nature"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:i.shortlist.businessNature||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Constitution"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:i.shortlist.propPvt||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"GST Status"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:i.shortlist.gstStatus||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Financial Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Loan Amount"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900 font-semibold",children:["₹",i.shortlist.loanAmount?i.shortlist.loanAmount.toLocaleString():"N/A"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"CAP Amount"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:["₹",i.shortlist.cap?i.shortlist.cap.toLocaleString():"N/A"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Account"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:i.shortlist.bankAccount||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Bank Statement Duration"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:i.shortlist.bankStatementDuration||"N/A"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Assignment & Status"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Assigned Staff"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 font-medium",children:((y=i.shortlist.staff)==null?void 0:y.name)||i.shortlist.staff||"Unassigned"}),((m=i.shortlist.staff)==null?void 0:m.role)&&e.jsx("p",{className:"text-xs text-gray-500",children:i.shortlist.staff.role})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Interest Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i.shortlist.interestStatus==="NOT_INTERESTED"?"bg-red-100 text-red-800":"bg-green-100 text-green-800"}`,children:i.shortlist.interestStatus==="NOT_INTERESTED"?"❌ Not Interested":"✅ Interested"})]})]})]}),i.shortlist.comments&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Comments"}),e.jsx("p",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md",children:i.shortlist.comments})]})]}),e.jsxs("div",{className:"flex items-center justify-end pt-6 border-t border-gray-200 space-x-3",children:[e.jsx("button",{onClick:g,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Close"}),e.jsxs(Ae,{to:`/shortlist/${i.shortlist.id}/edit`,onClick:g,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 inline-flex items-center",children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Edit Shortlist"]})]})]})})})]})}function Ua(){const t=Ge(),{id:s}=rs(),a=!!s,r=Oe(),{register:n,handleSubmit:i,reset:l,control:o,formState:{errors:p}}=ft(),h=St({control:o,name:"hasGst"}),f=St({control:o,name:"hasBusinessPan"}),b=St({control:o,name:"hasIec"}),x=St({control:o,name:"hasWebsite"}),w=St({control:o,name:"hasGateway"}),{data:g}=me("staff-members",async()=>{var j;try{return((j=(await Z.get("/api/staff")).data)==null?void 0:j.staff)||[]}catch{return console.log("No staff data available"),[]}},{staleTime:5*60*1e3}),{data:N}=me(["shortlist",s],async()=>s?(await Z.get(`/api/shortlist/${s}`)).data:null,{enabled:a}),d=ge(async j=>{if(console.log("Submitting shortlist form data:",j),console.log("Key fields being sent - loanAmount:",j.loanAmount,"district:",j.district,"staff:",j.staff),a){const y=await Z.patch(`/api/shortlist/${s}`,j);return console.log("PATCH response:",y.data),y}else{const y=await Z.post("/api/shortlist",j);return console.log("POST response:",y.data),y}},{onSuccess:async j=>{I.success(a?"Shortlist updated successfully!":"Shortlist created successfully!"),console.log("Shortlist update/create successful:",j.data),r.clear(),r.invalidateQueries(["shortlists"]),r.invalidateQueries(["shortlist"]),r.invalidateQueries(["cashfree-applications"]),await r.refetchQueries(["shortlists"]),setTimeout(()=>{t("/shortlist",{state:{fromEdit:!0,timestamp:Date.now()}})},100)},onError:j=>{var y,m;I.error(((m=(y=j.response)==null?void 0:y.data)==null?void 0:m.message)||"Something went wrong")}});c.useEffect(()=>{N&&l({name:N.name,mobile:N.mobile,businessName:N.businessName||"",businessNature:N.businessNature||"",district:N.district||"",propPvt:N.propPvt||"",hasGst:N.hasGst||"",gst:N.gst||"",hasBusinessPan:N.hasBusinessPan||"",businessPan:N.businessPan||"",hasIec:N.hasIec||"",iec:N.iec||"",hasNewCurrentAccount:N.hasNewCurrentAccount||"",newCurrentAccount:N.newCurrentAccount||!1,hasWebsite:N.hasWebsite||"",website:N.website||"",hasGateway:N.hasGateway||"",gateway:N.gateway||"",transaction:N.transaction||"",bankStatementDuration:N.bankStatementDuration||"",loanAmount:N.loanAmount||0,cap:N.cap||0,bankAccount:N.bankAccount||"",comments:N.comments||"",staff:N.staff||"",gstStatus:N.gstStatus||"",date:N.date||new Date().toISOString().split("T")[0]})},[N,l]);const E=j=>{d.mutate(j)};return e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{type:"button",onClick:()=>t("/shortlist"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors",children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"Back to Shortlist"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a?"Edit Shortlist":"New Shortlist"}),e.jsx("p",{className:"text-gray-600",children:a?"Update shortlist information":"Create a new shortlisted application"})]})]})}),e.jsxs("form",{onSubmit:i(E),className:"card space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),e.jsx("input",{...n("name",{required:"Name is required"}),type:"text",className:"input-field",placeholder:"Enter full name"}),p.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Mobile Number *"}),e.jsx("input",{...n("mobile",{required:"Mobile number is required"}),type:"tel",className:"input-field",placeholder:"Enter mobile number"}),p.mobile&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.mobile.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"District"}),e.jsx("input",{...n("district"),type:"text",className:"input-field",placeholder:"Enter district"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),e.jsx("input",{...n("date"),type:"date",className:"input-field"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Business Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name"}),e.jsx("input",{...n("businessName"),type:"text",className:"input-field",placeholder:"Enter business name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Nature"}),e.jsx("input",{...n("businessNature"),type:"text",className:"input-field",placeholder:"Enter business nature"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Constitution of Business (Prop/PVT)"}),e.jsxs("select",{...n("propPvt"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select type"}),e.jsx("option",{value:"Proprietorship",children:"Proprietorship"}),e.jsx("option",{value:"Private Limited",children:"Private Limited"}),e.jsx("option",{value:"Partnership",children:"Partnership"}),e.jsx("option",{value:"LLP",children:"LLP"}),e.jsx("option",{value:"Public Limited",children:"Public Limited"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GST"}),e.jsxs("select",{...n("hasGst"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select option"}),e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]}),h==="yes"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GST Number"}),e.jsx("input",{...n("gst"),type:"text",className:"input-field",placeholder:"Enter GST number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business PAN Card"}),e.jsxs("select",{...n("hasBusinessPan"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select option"}),e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]}),f==="yes"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business PAN Card Number"}),e.jsx("input",{...n("businessPan"),type:"text",className:"input-field",placeholder:"Enter business PAN card number"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IEC Code"}),e.jsxs("select",{...n("hasIec"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select option"}),e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]}),b==="yes"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IEC Code Number"}),e.jsx("input",{...n("iec"),type:"text",className:"input-field",placeholder:"Enter IEC code number"})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Financial Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loan Amount"}),e.jsx("input",{...n("loanAmount",{valueAsNumber:!0}),type:"number",className:"input-field",placeholder:"Enter loan amount"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"CAP Amount"}),e.jsx("input",{...n("cap",{valueAsNumber:!0}),type:"number",className:"input-field",placeholder:"Enter CAP amount"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Account"}),e.jsx("input",{...n("bankAccount"),type:"text",className:"input-field",placeholder:"Enter bank account details"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Statement Duration"}),e.jsxs("select",{...n("bankStatementDuration"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select duration"}),e.jsx("option",{value:"6 months",children:"6 months"}),e.jsx("option",{value:"12 months",children:"12 months"}),e.jsx("option",{value:"18 months",children:"18 months"}),e.jsx("option",{value:"24 months",children:"24 months"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Current Account"}),e.jsxs("select",{...n("hasNewCurrentAccount"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select option"}),e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Online Presence"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),e.jsxs("select",{...n("hasWebsite"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select option"}),e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]}),x==="yes"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website URL"}),e.jsx("input",{...n("website"),type:"url",className:"input-field",placeholder:"Enter website URL"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Gateway"}),e.jsxs("select",{...n("hasGateway"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select option"}),e.jsx("option",{value:"yes",children:"Yes"}),e.jsx("option",{value:"no",children:"No"})]})]}),w==="yes"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Gateway Details"}),e.jsx("input",{...n("gateway"),type:"text",className:"input-field",placeholder:"Enter payment gateway details"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transaction Details"}),e.jsx("input",{...n("transaction"),type:"text",className:"input-field",placeholder:"Enter transaction details"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"GST Status"}),e.jsxs("select",{...n("gstStatus"),className:"input-field",children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"Active",children:"Active"}),e.jsx("option",{value:"Inactive",children:"Inactive"}),e.jsx("option",{value:"Pending",children:"Pending"})]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Staff Assignment"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned Staff Member *"}),e.jsxs("select",{...n("staff",{required:"Staff assignment is required"}),className:"input-field",children:[e.jsx("option",{value:"",children:"Select staff member..."}),g&&g.map(j=>e.jsxs("option",{value:j.name,children:[j.name," - ",j.role," (",j.department,")"]},j.id))]}),p.staff&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.staff.message}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Select the staff member responsible for this shortlisted application"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Comments"}),e.jsx("textarea",{...n("comments"),rows:4,className:"input-field",placeholder:"Enter any additional comments..."})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>t("/shortlist"),className:"btn-secondary",children:"Cancel"}),e.jsx(O.button,{type:"submit",disabled:d.isLoading,className:"btn-primary disabled:opacity-50",whileHover:{scale:1.02},whileTap:{scale:.98},children:d.isLoading?a?"Updating...":"Creating...":a?"Update Shortlist":"Create Shortlist"})]})]})]})})}const em=()=>{const[t,s]=c.useState("desktop");return c.useEffect(()=>{const a=()=>{const r=window.innerWidth;r<768?s("mobile"):r<1024?s("tablet"):s("desktop")};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),t};function tm(){const t=em(),s=_s(),[a,r]=c.useState(""),[n,i]=c.useState(""),l=Oe();c.useEffect(()=>{var d,E;(d=s.state)!=null&&d.message&&((E=s.state)==null?void 0:E.type)==="success"&&(I.success(s.state.message),window.history.replaceState({},document.title))},[s.state]);const{data:o,isLoading:p,refetch:h,error:f}=me(["cashfree-applications",a,n],async()=>{try{console.log("🔄 Fetching payment gateway applications...");const E=(await at.get("/api/cashfree").catch(y=>(console.warn("⚠️ Payment gateway API error:",y.message),{data:[]}))).data||[];console.log("✅ Fetched payment gateway applications:",E.length);let j=E;return a&&(j=j.filter(y=>{var m,u,T,C,$,U,W;return((u=(m=y.shortlist)==null?void 0:m.name)==null?void 0:u.toLowerCase().includes(a.toLowerCase()))||((C=(T=y.shortlist)==null?void 0:T.mobile)==null?void 0:C.includes(a))||((W=(U=($=y.shortlist)==null?void 0:$.enquiry)==null?void 0:U.name)==null?void 0:W.toLowerCase().includes(a.toLowerCase()))})),n&&(j=j.filter(y=>y.status===n)),console.log("✅ Returning filtered payment gateway applications:",j.length),console.log("💳 Sample application data:",j[0]),j}catch(d){return console.error("❌ Error fetching payment gateway data:",d),[]}},{staleTime:5*60*1e3,cacheTime:15*60*1e3,keepPreviousData:!0,refetchOnMount:!1,refetchOnWindowFocus:!1,refetchInterval:!1,onSuccess:d=>{var E;console.log("💳 Payment applications query success:",(d==null?void 0:d.length)||0,"applications"),d&&d.length>0&&(console.log("💳 First application details:",d[0]),console.log("💳 Shortlist data:",(E=d[0])==null?void 0:E.shortlist))},onError:d=>{console.error("💳 Payment applications query error:",d)}}),b=ge(async({id:d,status:E})=>at.patch(`/api/cashfree/${d}/status`,{status:E}),{onSuccess:()=>{I.success("Status updated successfully!"),l.invalidateQueries("cashfree-applications")},onError:d=>{var E,j;I.error(((j=(E=d.response)==null?void 0:E.data)==null?void 0:j.message)||"Failed to update status")}}),x=ge(async d=>at.delete(`/api/cashfree/${d}`),{onSuccess:(d,E)=>{var j;I.success(((j=d.data)==null?void 0:j.message)||"Payment application deleted successfully!"),l.setQueryData(["cashfree-applications",a,n],y=>y&&y.filter(m=>m.id!==E)),l.invalidateQueries("cashfree-applications")},onError:d=>{var E,j;I.error(((j=(E=d.response)==null?void 0:E.data)==null?void 0:j.message)||"Failed to delete payment application")}}),w=d=>{x.mutate(d)},g=t==="mobile",N=d=>{switch(d){case"PENDING":return"bg-yellow-100 text-yellow-800";case"TRANSACTION_DONE":return"bg-green-100 text-green-800";case"CLOSED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return p?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading payment gateway applications..."})]})}):f?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Gateway Applications"}),e.jsx("p",{className:"text-gray-600",children:"Manage loan applications submitted to payment gateway"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Applications"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"There was an error loading the payment gateway applications."}),e.jsx("button",{onClick:()=>h(),className:"btn-primary",children:"Try Again"})]})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Gateway Applications"}),e.jsx("p",{className:"text-gray-600",children:"Manage loan applications submitted to payment gateway"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(ut,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name...",value:a,onChange:d=>r(d.target.value),className:"input-field pl-10"})]}),e.jsxs("select",{value:n,onChange:d=>i(d.target.value),className:"input-field",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"TRANSACTION_DONE",children:"Transaction Done"}),e.jsx("option",{value:"CLOSED",children:"Closed"})]}),e.jsx("button",{onClick:()=>{r(""),i(""),h()},className:"btn-secondary",children:"Clear Filters"}),e.jsx("button",{onClick:()=>{l.invalidateQueries(["cashfree-applications"]),h()},className:"btn-primary",children:"Refresh Data"})]})}),e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:o&&o.length>0?e.jsx("div",{className:`${g?"space-y-4":"overflow-x-auto"}`,children:g?e.jsx("div",{className:"space-y-4",children:o.map(d=>{var E;return e.jsxs(O.div,{whileHover:{scale:1.02},className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:d.shortlist.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${N(d.status)}`,children:d.status.replace("_"," ")})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["📱 ",d.shortlist.mobile]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["🏢 ",d.shortlist.businessType||d.shortlist.businessName||"N/A"]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["💰 ₹",((E=d.shortlist.loanAmount)==null?void 0:E.toLocaleString())||"N/A"]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["📅 ",new Date(d.submittedAt).toLocaleDateString()]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.status==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>b.mutate({id:d.id,status:"TRANSACTION_DONE"}),disabled:b.isLoading,className:"text-green-600 hover:text-green-800 text-sm font-medium disabled:opacity-50",children:"Mark Done"}),e.jsx("button",{onClick:()=>b.mutate({id:d.id,status:"CLOSED"}),disabled:b.isLoading,className:"text-red-600 hover:text-red-800 text-sm font-medium disabled:opacity-50",children:"Close"})]}),e.jsx("button",{onClick:()=>w(d.id),disabled:x.isLoading,className:"text-red-600 hover:text-red-800 text-sm font-medium disabled:opacity-50",children:"Delete"})]})]},d.id)})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[e.jsx("thead",{className:"bg-indigo-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-16 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"S.No"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Submitted Date"}),e.jsx("th",{className:"w-48 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Mobile"}),e.jsx("th",{className:"w-48 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Business"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Loan Amount"}),e.jsx("th",{className:"w-28 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Submitted By"}),e.jsx("th",{className:"w-44 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map((d,E)=>{var j,y;return e.jsxs(O.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:E*.05},className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"w-16 px-4 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:E+1}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(d.submittedAt).toLocaleDateString()}),e.jsx("td",{className:"w-48 px-4 py-4 text-sm font-medium text-gray-900",children:e.jsx("div",{className:"truncate",title:d.shortlist.name,children:d.shortlist.name})}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:d.shortlist.mobile}),e.jsx("td",{className:"w-48 px-4 py-4 text-sm text-gray-500",children:e.jsx("div",{className:"truncate",title:d.shortlist.businessType||d.shortlist.businessName||"N/A",children:d.shortlist.businessType||d.shortlist.businessName||"N/A"})}),e.jsxs("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500 font-semibold",children:["₹",((j=d.shortlist.loanAmount)==null?void 0:j.toLocaleString())||"N/A"]}),e.jsx("td",{className:"w-28 px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${N(d.status)}`,children:d.status.replace("_"," ")})}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:((y=d.submittedBy)==null?void 0:y.name)||"N/A"}),e.jsxs("td",{className:"w-44 px-4 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsxs("div",{className:"flex gap-1 items-center",children:[d.status==="PENDING"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>b.mutate({id:d.id,status:"TRANSACTION_DONE"}),disabled:b.isLoading,className:"text-green-600 hover:text-green-900 disabled:opacity-50 text-xs px-1",children:"Mark Done"}),e.jsx("button",{onClick:()=>b.mutate({id:d.id,status:"CLOSED"}),disabled:b.isLoading,className:"text-red-600 hover:text-red-900 disabled:opacity-50 text-xs px-1",children:"Close"})]}),e.jsx("button",{onClick:()=>w(d.id),disabled:x.isLoading,className:"text-red-600 hover:text-red-900 disabled:opacity-50 text-xs px-1",title:"Delete Application",children:"Delete"})]}),d.decisionDate&&e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Decision: ",new Date(d.decisionDate).toLocaleDateString()]})]})]},d.id)})})]})})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(sr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Payment Gateway Applications"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No applications have been submitted to the payment gateway yet."}),e.jsxs("div",{className:"text-sm text-gray-400 space-y-1",children:[e.jsx("p",{children:"To create payment gateway applications:"}),e.jsx("p",{children:"1. Go to Shortlist Applications"}),e.jsx("p",{children:'2. Click "Apply" on a shortlisted client'}),e.jsx("p",{children:"3. Submit the payment gateway application"})]}),e.jsx("button",{onClick:()=>h(),className:"btn-outline mt-4",children:"🔄 Refresh Data"})]})}),o&&o.length>0&&e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:o.filter(d=>d.status==="PENDING").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Pending Applications"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:o.filter(d=>d.status==="TRANSACTION_DONE").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Completed Transactions"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:o.filter(d=>d.status==="CLOSED").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Closed Applications"})]})]})]})}const ks=at.create({baseURL:"http://localhost:5002",timeout:3e4,headers:{"Content-Type":"application/json"}});function sm(){var b;const t=Ge(),{id:s}=rs(),a=Oe(),{register:r,handleSubmit:n,reset:i,formState:{errors:l}}=ft(),{data:o,isLoading:p}=me(["shortlist",s],async()=>{const x=await ks.get(`/api/shortlist/${s}`);return console.log("Fetched shortlist data for payment gateway form:",x.data),x.data},{enabled:!!s,staleTime:0,cacheTime:0}),h=ge(async x=>(console.log("Submitting payment gateway application with data:",x),ks.post("/api/cashfree/apply",{...x,shortlistId:parseInt(s),status:"PENDING",appliedAt:new Date})),{onSuccess:async x=>{I.success("Payment gateway application submitted successfully!");try{await ks.post(`/api/shortlist/${s}/payment-gateway-applied`,x.data.application)}catch(w){console.log("Failed to mark shortlist as having payment gateway application:",w)}x.data.application&&a.setQueryData(["cashfree-applications"],w=>w?[x.data.application,...w]:[x.data.application]),a.invalidateQueries(["cashfree-applications"]),a.invalidateQueries(["shortlists"]),a.invalidateQueries(["shortlist"]),t("/payment-gateway",{state:{message:"Payment gateway application submitted successfully!",type:"success"}})},onError:x=>{var w,g;I.error(((g=(w=x.response)==null?void 0:w.data)==null?void 0:g.message)||"Application submission failed")}});c.useEffect(()=>{o&&(console.log("Pre-filling payment gateway form with shortlist data:",o),console.log("Loan amount from shortlist:",o.loanAmount),i({loanAmount:o.loanAmount||0,tenure:12,interestRate:12.5,processingFee:2.5,purpose:"Business Expansion",bankAccount:o.bankAccount||"",panCard:o.businessPan||"",salarySlips:!1,itrReturns:!0,businessProof:!0,addressProof:!0}))},[o,i]);const f=x=>{h.mutate(x)};return p?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{type:"button",onClick:()=>t("/shortlist"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors",children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"Back to Shortlist"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Payment Gateway Loan Application"}),e.jsxs("p",{className:"text-gray-600",children:["Apply for loan through payment gateway for: ",e.jsx("span",{className:"font-semibold",children:(b=o==null?void 0:o.enquiry)==null?void 0:b.name})]})]})]})}),e.jsxs("form",{onSubmit:n(f),className:"card space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Loan Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Loan Amount (₹) *"}),e.jsx("input",{...r("loanAmount",{required:"Loan amount is required",min:5e4}),type:"number",className:"input-field",placeholder:"Enter loan amount"}),l.loanAmount&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.loanAmount.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tenure (Months) *"}),e.jsxs("select",{...r("tenure",{required:"Tenure is required"}),className:"input-field",children:[e.jsx("option",{value:"",children:"Select tenure"}),e.jsx("option",{value:"6",children:"6 Months"}),e.jsx("option",{value:"12",children:"12 Months"}),e.jsx("option",{value:"18",children:"18 Months"}),e.jsx("option",{value:"24",children:"24 Months"}),e.jsx("option",{value:"36",children:"36 Months"})]}),l.tenure&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.tenure.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Interest Rate (%)"}),e.jsx("input",{...r("interestRate",{valueAsNumber:!0}),type:"number",step:"0.1",className:"input-field",placeholder:"12.5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Processing Fee (%)"}),e.jsx("input",{...r("processingFee",{valueAsNumber:!0}),type:"number",step:"0.1",className:"input-field",placeholder:"2.5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Purpose *"}),e.jsxs("select",{...r("purpose",{required:"Purpose is required"}),className:"input-field",children:[e.jsx("option",{value:"",children:"Select purpose"}),e.jsx("option",{value:"Business Expansion",children:"Business Expansion"}),e.jsx("option",{value:"Working Capital",children:"Working Capital"}),e.jsx("option",{value:"Equipment Purchase",children:"Equipment Purchase"}),e.jsx("option",{value:"Inventory",children:"Inventory"}),e.jsx("option",{value:"Other",children:"Other"})]}),l.purpose&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.purpose.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Collateral"}),e.jsx("input",{...r("collateral"),type:"text",className:"input-field",placeholder:"Property, Gold, etc."})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Bank Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Bank Account Number *"}),e.jsx("input",{...r("bankAccount",{required:"Bank account is required"}),type:"text",className:"input-field",placeholder:"Enter bank account number"}),l.bankAccount&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.bankAccount.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IFSC Code *"}),e.jsx("input",{...r("ifscCode",{required:"IFSC code is required"}),type:"text",className:"input-field",placeholder:"Enter IFSC code"}),l.ifscCode&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:l.ifscCode.message})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Document Checklist"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...r("salarySlips"),type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Salary Slips (Last 3 months)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...r("itrReturns"),type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"ITR Returns (Last 2 years)"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...r("businessProof"),type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Business Registration Proof"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{...r("addressProof"),type:"checkbox",className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),e.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Address Proof"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remarks"}),e.jsx("textarea",{...r("remarks"),rows:4,className:"input-field",placeholder:"Any additional information..."})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>t("/shortlist"),className:"btn-secondary",children:"Cancel"}),e.jsx(O.button,{type:"submit",disabled:h.isLoading,className:"btn-primary disabled:opacity-50",whileHover:{scale:1.02},whileTap:{scale:.98},children:h.isLoading?"Submitting...":"Submit Application"})]})]})]})})}function am(){const[t,s]=c.useState(!1),[a,r]=c.useState(""),[n,i]=c.useState(null),[l,o]=c.useState(null),[p,h]=c.useState({}),[f,b]=c.useState(null),[x,w]=c.useState(!1),[g,N]=c.useState({1:"Active",2:"Active",3:"Active",4:"Inactive",5:"Active",6:"Active",7:"Active"}),d=Oe(),{register:E,handleSubmit:j,reset:y,setValue:m,formState:{errors:u}}=ft(),{data:T,isLoading:C,refetch:$}=me("staff",async()=>(await Z.get("/api/staff")).data,{staleTime:4*60*1e3,keepPreviousData:!0}),{data:U}=me("staff-stats",async()=>(await Z.get("/api/staff/stats/summary")).data,{staleTime:5*60*1e3,keepPreviousData:!0}),W=(T==null?void 0:T.staff)||[],Y=(U==null?void 0:U.stats)||{},H=ge(async L=>Z.post("/api/staff",L),{onMutate:async L=>{await d.cancelQueries("staff"),await d.cancelQueries("staff-stats");const ne=d.getQueryData("staff"),z=d.getQueryData("staff-stats"),oe={id:Date.now(),name:L.name,email:L.email,role:L.role,status:"PENDING",hasAccess:!1,department:L.department||"",position:L.position||"",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return d.setQueryData("staff",F=>({...F,staff:[...(F==null?void 0:F.staff)||[],oe]})),d.setQueryData("staff-stats",F=>{var Ce,v,R,B,J;return{...F,stats:{...F==null?void 0:F.stats,totalStaff:(((Ce=F==null?void 0:F.stats)==null?void 0:Ce.totalStaff)||0)+1,employeeCount:L.role==="EMPLOYEE"?(((v=F==null?void 0:F.stats)==null?void 0:v.employeeCount)||0)+1:((R=F==null?void 0:F.stats)==null?void 0:R.employeeCount)||0,adminCount:L.role==="ADMIN"?(((B=F==null?void 0:F.stats)==null?void 0:B.adminCount)||0)+1:((J=F==null?void 0:F.stats)==null?void 0:J.adminCount)||0}}}),{previousStaff:ne,previousStats:z}},onSuccess:L=>{const ne=L.data.emailSent?"✅ Verification email sent successfully!":"❌ Failed to send verification email - check SMTP settings";I.success(`Staff member created! ${ne}`),s(!1),y(),setTimeout(()=>{d.invalidateQueries("staff"),d.invalidateQueries("staff-stats")},100)},onError:(L,ne,z)=>{var oe,F;z!=null&&z.previousStaff&&d.setQueryData("staff",z.previousStaff),z!=null&&z.previousStats&&d.setQueryData("staff-stats",z.previousStats),I.error(((F=(oe=L.response)==null?void 0:oe.data)==null?void 0:F.message)||"Failed to create staff member")}}),Q=ge(async L=>Z.delete(`/api/staff/${L}`),{onMutate:async L=>{await d.cancelQueries("staff"),await d.cancelQueries("staff-stats");const ne=d.getQueryData("staff"),z=d.getQueryData("staff-stats"),oe=W.find(F=>F.id===L);return d.setQueryData("staff",F=>{var Ce;return{...F,staff:((Ce=F==null?void 0:F.staff)==null?void 0:Ce.filter(v=>v.id!==L))||[]}}),oe&&d.setQueryData("staff-stats",F=>{var Ce,v,R,B,J,de,he;return{...F,stats:{...F==null?void 0:F.stats,totalStaff:Math.max(0,(((Ce=F==null?void 0:F.stats)==null?void 0:Ce.totalStaff)||0)-1),employeeCount:oe.role==="EMPLOYEE"?Math.max(0,(((v=F==null?void 0:F.stats)==null?void 0:v.employeeCount)||0)-1):((R=F==null?void 0:F.stats)==null?void 0:R.employeeCount)||0,adminCount:oe.role==="ADMIN"?Math.max(0,(((B=F==null?void 0:F.stats)==null?void 0:B.adminCount)||0)-1):((J=F==null?void 0:F.stats)==null?void 0:J.adminCount)||0,activeStaff:oe.status==="ACTIVE"?Math.max(0,(((de=F==null?void 0:F.stats)==null?void 0:de.activeStaff)||0)-1):((he=F==null?void 0:F.stats)==null?void 0:he.activeStaff)||0}}}),{previousStaff:ne,previousStats:z}},onSuccess:()=>{I.success("Staff member deleted successfully!"),setTimeout(()=>{d.invalidateQueries("staff"),d.invalidateQueries("staff-stats")},100)},onError:(L,ne,z)=>{var oe,F;z!=null&&z.previousStaff&&d.setQueryData("staff",z.previousStaff),z!=null&&z.previousStats&&d.setQueryData("staff-stats",z.previousStats),I.error(((F=(oe=L.response)==null?void 0:oe.data)==null?void 0:F.message)||"Failed to delete staff member")}}),ee=ge(async L=>Z.post(`/api/staff/${L}/revoke-access`),{onMutate:async L=>{await d.cancelQueries("staff");const ne=d.getQueryData("staff");return d.setQueryData("staff",z=>{var oe;return{...z,staff:((oe=z==null?void 0:z.staff)==null?void 0:oe.map(F=>F.id===L?{...F,hasAccess:!1,status:"INACTIVE"}:F))||[]}}),{previousStaff:ne}},onSuccess:()=>{I.success("Access revoked successfully! Notification sent via email."),setTimeout(()=>{d.invalidateQueries("staff"),d.invalidateQueries("staff-stats")},100)},onError:(L,ne,z)=>{var oe,F;z!=null&&z.previousStaff&&d.setQueryData("staff",z.previousStaff),I.error(((F=(oe=L.response)==null?void 0:oe.data)==null?void 0:F.message)||"Failed to revoke access")}}),ie=ge(async L=>Z.post(`/api/staff/${L}/grant-access`),{onMutate:async L=>{await d.cancelQueries("staff");const ne=d.getQueryData("staff");return d.setQueryData("staff",z=>{var oe;return{...z,staff:((oe=z==null?void 0:z.staff)==null?void 0:oe.map(F=>F.id===L?{...F,hasAccess:!0,status:"ACTIVE"}:F))||[]}}),{previousStaff:ne}},onSuccess:L=>{I.success(`Access granted! ${L.data.newAccessLinkSent?"New access link sent via email.":"Failed to send email."}`),setTimeout(()=>{d.invalidateQueries("staff"),d.invalidateQueries("staff-stats")},100)},onError:(L,ne,z)=>{var oe,F;z!=null&&z.previousStaff&&d.setQueryData("staff",z.previousStaff),I.error(((F=(oe=L.response)==null?void 0:oe.data)==null?void 0:F.message)||"Failed to grant access")}}),se=ge(async L=>Z.post(`/api/staff/resend-verification/${L}`),{onSuccess:L=>{I.success(`Verification email ${L.data.emailSent?"sent successfully!":"failed to send."}`),setTimeout(()=>{d.invalidateQueries("staff")},100)},onError:L=>{var ne,z;I.error(((z=(ne=L.response)==null?void 0:ne.data)==null?void 0:z.message)||"Failed to resend verification email")}}),le=L=>{H.mutate(L)},K=L=>{h(ne=>({...ne,[L]:!ne[L]}))},be=L=>{window.confirm("Are you sure you want to delete this staff member?")&&Q.mutate(L)},P=L=>{b(L),w(!0)},X=L=>{N(ne=>({...ne,[L]:ne[L]==="Active"?"Inactive":"Active"}))},ae=W==null?void 0:W.filter(L=>L.name.toLowerCase().includes(a.toLowerCase())||L.email.toLowerCase().includes(a.toLowerCase())),re=L=>{switch(L){case"SUPER_ADMIN":return"bg-purple-100 text-purple-800";case"ADMIN":return"bg-blue-100 text-blue-800";case"EMPLOYEE":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},ue=L=>({1:3,2:2,3:4,4:0,5:1,6:2,7:1})[L]||0,ye=L=>({1:"Rajesh Kumar, Priya Sharma, Amit Patel",2:"Sunita Gupta, Vikram Singh",3:"Anita Desai, Ravi Mehta, Sanjay Joshi, Kavita Rao",4:null,5:"Deepak Verma",6:"Neha Agarwal, Rohit Sharma",7:"Manish Gupta"})[L]||null;return C?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(O.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"grid grid-cols-1 md:grid-cols-4 lg:grid-cols-7 gap-4",children:W&&W.slice(0,7).map(L=>e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"h-12 w-12 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-white",children:L.name.split(" ").map(ne=>ne[0]).join("").substring(0,2)})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:L.name}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:L.role})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Clients Taken"}),e.jsx("span",{className:`inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full ${g[L.id]==="Active"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:g[L.id]==="Active"?"🟢":"🔴"})]}),e.jsxs("div",{className:"mt-1",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:ue(L.id)}),e.jsx("div",{className:"text-xs text-gray-500",children:ue(L.id)===1?"Client":"Clients"})]})]})]},L.id))}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Staff Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage team members and their roles"})]}),e.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[e.jsxs("button",{onClick:()=>$(),className:"btn-secondary inline-flex items-center",children:[e.jsx(Yt,{className:"h-5 w-5 mr-2"}),"Refresh"]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>{i("ADMIN"),s(!0),setTimeout(()=>m("role","ADMIN"),100)},className:"bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-4 py-2 rounded-lg inline-flex items-center shadow-md hover:shadow-lg transition-all duration-200",children:[e.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),"Add Admin"]}),e.jsxs("button",{onClick:()=>{i("EMPLOYEE"),s(!0),setTimeout(()=>m("role","EMPLOYEE"),100)},className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-4 py-2 rounded-lg inline-flex items-center shadow-md hover:shadow-lg transition-all duration-200",children:[e.jsx(At,{className:"h-5 w-5 mr-2"}),"Add Employee"]})]})]})]}),t&&e.jsx(O.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(O.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-lg p-6 w-full max-w-md mx-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("button",{onClick:()=>{s(!1),i(null),o(null),y()},className:"text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-100",title:"Back to Staff Management",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:l?`Edit ${l.name}`:n==="ADMIN"?"Add New Admin":n==="EMPLOYEE"?"Add New Employee":"Add New Staff Member"}),e.jsx("p",{className:"text-sm text-gray-500",children:l?`Update ${l.role.toLowerCase()} account details`:n==="ADMIN"?"Create admin account with full access":n==="EMPLOYEE"?"Create employee account with limited access":"Fill details and send verification email"})]})]}),e.jsx("button",{onClick:()=>{s(!1),i(null),o(null),y()},className:"text-gray-400 hover:text-gray-600",children:e.jsx(Qe,{className:"h-6 w-6"})})]}),e.jsxs("form",{onSubmit:j(le),className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),e.jsx("input",{...E("name",{required:"Name is required",minLength:{value:2,message:"Name must be at least 2 characters"}}),type:"text",className:"input-field",placeholder:"Enter full name"}),u.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx("input",{...E("email",{required:"Email is required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Invalid email address"}}),type:"email",className:"input-field",placeholder:"Enter email address"}),u.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.email.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Password ",l?"(leave blank to keep current)":"*"]}),e.jsx("input",{...E("password",{required:l?!1:"Password is required",minLength:{value:6,message:"Password must be at least 6 characters"}}),type:"password",className:"input-field",placeholder:l?"Leave blank to keep current password":"Enter password"}),u.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.password.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role *"}),e.jsxs("select",{...E("role",{required:"Role is required"}),className:`input-field ${n?"bg-gray-100 cursor-not-allowed":""}`,disabled:!!n,children:[e.jsx("option",{value:"",children:"Select Role"}),e.jsx("option",{value:"ADMIN",children:"Admin"}),e.jsx("option",{value:"EMPLOYEE",children:"Employee"})]}),u.role&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:u.role.message})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{s(!1),i(null),o(null),y()},className:"btn-secondary",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:H.isLoading,className:"btn-primary disabled:opacity-50",children:H.isLoading?l?"Updating...":"Creating...":l?"Update Staff":"Create Staff & Send Access Link"})]})]})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"relative",children:[e.jsx(ut,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search staff members...",value:a,onChange:L=>r(L.target.value),className:"input-field pl-10"})]})}),e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:ae&&ae.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 rounded-lg overflow-hidden shadow-sm",children:[e.jsx("thead",{className:"bg-gradient-to-r from-blue-600 to-purple-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Sl No"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Password"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Client Name"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Available"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Last Login"}),e.jsx("th",{className:"px-6 py-4 text-left text-sm font-semibold text-white uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:ae.map((L,ne)=>e.jsxs(O.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:ne*.05},className:"hover:bg-blue-50 transition-all duration-200 border-b border-gray-100",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900 text-center",children:ne+1})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:e.jsx("div",{className:"h-10 w-10 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-white",children:L.name.split(" ").map(z=>z[0]).join("").substring(0,2)})})}),e.jsx("div",{className:"ml-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:L.name})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:L.email})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-900 font-mono",children:p[L.id]?L.password||"12345678":"••••••••"}),e.jsx("button",{onClick:()=>K(L.id),className:"text-gray-400 hover:text-gray-600 transition-colors",title:p[L.id]?"Hide password":"Show password",children:p[L.id]?e.jsx(Jt,{className:"h-4 w-4"}):e.jsx(Ie,{className:"h-4 w-4"})})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${re(L.role)}`,children:L.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full ${L.status==="ACTIVE"?"bg-green-100 text-green-800 border border-green-200":L.status==="PENDING"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-red-100 text-red-800 border border-red-200"}`,children:L.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:ye(L.id)?e.jsxs("div",{className:"max-w-xs",children:[e.jsx("div",{className:"truncate font-medium",title:ye(L.id)||"",children:ye(L.id)}),e.jsxs("div",{className:"text-xs text-gray-500",children:[ue(L.id)," ",ue(L.id)===1?"client":"clients"]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-green-600 font-medium",children:"Available for Assignment"}),e.jsx("span",{className:"inline-flex items-center px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"Ready for New Client"})]})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("button",{onClick:()=>X(L.id),className:`inline-flex items-center px-3 py-1 text-xs font-semibold rounded-full cursor-pointer transition-all duration-200 hover:shadow-md ${g[L.id]==="Active"?"bg-green-100 text-green-800 border border-green-200 hover:bg-green-200":"bg-red-100 text-red-800 border border-red-200 hover:bg-red-200"}`,title:`Click to toggle to ${g[L.id]==="Active"?"Inactive":"Active"}`,children:g[L.id]==="Active"?e.jsx(e.Fragment,{children:"🟢 Active"}):e.jsx(e.Fragment,{children:"🔴 Inactive"})})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900",children:L.lastLogin?new Date(L.lastLogin).toLocaleDateString():"Never"}),e.jsx("div",{className:"text-xs text-gray-500",children:L.lastLogin?new Date(L.lastLogin).toLocaleTimeString():"No login yet"})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>P(L),className:"inline-flex items-center px-2 py-1 border border-gray-300 rounded-md text-gray-700 bg-gray-50 hover:bg-gray-100 transition-colors",title:"View Staff Details",children:e.jsx(Ie,{className:"h-4 w-4"})}),L.status==="PENDING"&&e.jsx("button",{onClick:()=>se.mutate(L.id),disabled:se.isLoading,className:"inline-flex items-center px-2 py-1 border border-orange-300 rounded-md text-orange-700 bg-orange-50 hover:bg-orange-100 disabled:opacity-50 transition-colors",title:"Resend Verification Email",children:e.jsx(il,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>{o(L),i(L.role),s(!0),setTimeout(()=>{m("name",L.name),m("email",L.email),m("role",L.role)},100)},className:"inline-flex items-center px-2 py-1 border border-blue-300 rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100 transition-colors",title:"Edit Staff Member",children:e.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),L.hasAccess?e.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to revoke access for this staff member?")&&ee.mutate(L.id)},disabled:ee.isLoading,className:"inline-flex items-center px-2 py-1 border border-red-300 rounded-md text-red-700 bg-red-50 hover:bg-red-100 disabled:opacity-50 transition-colors",title:"Revoke Access",children:e.jsx(Qe,{className:"h-4 w-4"})}):e.jsx("button",{onClick:()=>ie.mutate(L.id),disabled:ie.isLoading,className:"inline-flex items-center px-2 py-1 border border-green-300 rounded-md text-green-700 bg-green-50 hover:bg-green-100 disabled:opacity-50 transition-colors",title:"Grant Access",children:e.jsx(Ws,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>be(L.id),disabled:Q.isLoading,className:"inline-flex items-center px-2 py-1 border border-red-300 rounded-md text-red-700 bg-red-50 hover:bg-red-100 disabled:opacity-50 transition-colors",title:"Delete Staff",children:e.jsx(xt,{className:"h-4 w-4"})})]})})]},L.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(At,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"No staff members found."}),e.jsxs("button",{onClick:()=>s(!0),className:"btn-primary inline-flex items-center mt-4",children:[e.jsx(At,{className:"h-5 w-5 mr-2"}),"Invite First Staff Member"]})]})}),W&&W.length>0&&e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Y.totalStaff||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Staff"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:Y.activeStaff||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:Y.adminCount||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Admins"})]}),e.jsxs("div",{className:"card text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:Y.employeeCount||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Employees"})]})]}),x&&f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs(O.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Staff Member Details"}),e.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Qe,{className:"h-6 w-6"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"h-16 w-16 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 flex items-center justify-center",children:e.jsx("span",{className:"text-xl font-medium text-white",children:f.name.split(" ").map(L=>L[0]).join("").substring(0,2)})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("h4",{className:"text-xl font-semibold text-gray-900",children:f.name}),e.jsx("p",{className:"text-gray-600",children:f.email})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role"}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${re(f.role)}`,children:f.role})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${f.status==="ACTIVE"?"bg-green-100 text-green-800 border border-green-200":f.status==="PENDING"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-red-100 text-red-800 border border-red-200"}`,children:f.status})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm text-gray-900 font-mono bg-gray-100 px-3 py-1 rounded",children:p[f.id]?f.password||"12345678":"••••••••"}),e.jsx("button",{onClick:()=>K(f.id),className:"text-gray-400 hover:text-gray-600 transition-colors",title:p[f.id]?"Hide password":"Show password",children:p[f.id]?e.jsx(Jt,{className:"h-4 w-4"}):e.jsx(Ie,{className:"h-4 w-4"})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Available"}),e.jsx("button",{onClick:()=>X(f.id),className:`inline-flex items-center px-3 py-1 text-sm font-semibold rounded-full cursor-pointer transition-all duration-200 hover:shadow-md ${g[f.id]==="Active"?"bg-green-100 text-green-800 border border-green-200 hover:bg-green-200":"bg-red-100 text-red-800 border border-red-200 hover:bg-red-200"}`,title:`Click to toggle to ${g[f.id]==="Active"?"Inactive":"Active"}`,children:g[f.id]==="Active"?e.jsx(e.Fragment,{children:"🟢 Active"}):e.jsx(e.Fragment,{children:"🔴 Inactive"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Login"}),e.jsx("div",{className:"text-sm text-gray-900",children:f.lastLogin?new Date(f.lastLogin).toLocaleDateString():"Never"}),e.jsx("div",{className:"text-xs text-gray-500",children:f.lastLogin?new Date(f.lastLogin).toLocaleTimeString():"No login yet"})]})]})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Created:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:new Date(f.createdAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-700",children:"Updated:"}),e.jsx("span",{className:"ml-2 text-gray-600",children:new Date(f.updatedAt).toLocaleDateString()})]})]})})]}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Close"}),e.jsx("button",{onClick:()=>{o(f),i(f.role),w(!1),s(!0),setTimeout(()=>{m("name",f.name),m("email",f.email),m("role",f.role)},100)},className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 rounded-md transition-colors",children:"Edit Staff"})]})]})})]})}const rm=()=>{const[t,s]=c.useState("desktop");return c.useEffect(()=>{const a=()=>{const r=window.innerWidth;r<768?s("mobile"):r<1024?s("tablet"):s("desktop")};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),t};function nm(){const t=rm(),[s,a]=c.useState(""),[r,n]=c.useState(!1),[i,l]=c.useState({isOpen:!1,transaction:null}),o=Oe(),p=_s(),h=ge(async y=>{console.log("🗑️ Executing DELETE request for transaction ID:",y);const m=await Z.delete(`/api/transactions/${y}`);return console.log("✅ DELETE response received:",m.data),m},{onSuccess:(y,m)=>{console.log("✅ Delete mutation successful:",y.data),I.success("Transaction deleted successfully!"),o.setQueryData(["transactions",s],u=>u&&u.filter(T=>T.id!==m)),setTimeout(()=>{o.invalidateQueries(["transactions"])},100)},onError:y=>{var m,u;console.error("❌ Delete mutation failed:",y),I.error(((u=(m=y.response)==null?void 0:m.data)==null?void 0:u.message)||"Failed to delete transaction")}}),f=(y,m)=>{window.confirm(`Are you sure you want to delete the transaction "${m}"? This action cannot be undone.`)&&(console.log("🗑️ Attempting to delete transaction ID:",y),h.mutate(y))},b=y=>{console.log("👁️ Viewing transaction:",y.name),l({isOpen:!0,transaction:y})},x=()=>{l({isOpen:!1,transaction:null})},{data:w,isLoading:g,refetch:N}=me(["transactions",s],async()=>{const y=new URLSearchParams;s&&y.append("name",s);const m=await Z.get(`/api/transactions?${y}`);return console.log("Transaction data received:",m.data),m.data},{staleTime:2*60*1e3,keepPreviousData:!0}),d=y=>new Date(y).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),E={total:(w==null?void 0:w.length)||0,completed:(w==null?void 0:w.filter(y=>y.status==="COMPLETED").length)||0,pending:(w==null?void 0:w.filter(y=>y.status==="PENDING").length)||0,failed:(w==null?void 0:w.filter(y=>y.status==="FAILED").length)||0,totalAmount:(w==null?void 0:w.reduce((y,m)=>y+(m.amount||0),0))||0,completedAmount:(w==null?void 0:w.filter(y=>y.status==="COMPLETED").reduce((y,m)=>y+(m.amount||0),0))||0};c.useEffect(()=>{var y,m,u;(y=p.state)!=null&&y.fromAdd&&((m=p.state)!=null&&m.transactionName)&&(I.success(`🎉 ${p.state.transactionName} transaction has been successfully added!`),window.history.replaceState({},document.title)),(u=p.state)!=null&&u.fromEdit&&(console.log("Returning from edit page, forcing refresh...",p.state),n(!0),o.clear(),o.invalidateQueries(["transactions"]),setTimeout(()=>{o.refetchQueries(["transactions"]),N().finally(()=>{n(!1)})},50))},[p.state,o,N,n]);const j=t==="mobile";return g||r?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-primary-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:r?"Refreshing data...":"Loading..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Transaction Dashboard"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor and manage all financial transactions"})]}),e.jsxs("div",{className:"flex space-x-3 mt-4 sm:mt-0",children:[e.jsx("button",{onClick:()=>{console.log("🔄 Manual refresh triggered"),N(),I.success("Refreshing transaction data...")},className:"btn-outline inline-flex items-center",children:"🔄 Refresh"}),e.jsxs(Ae,{to:"/transactions/new",className:"btn-primary inline-flex items-center",children:[e.jsx(ct,{className:"h-5 w-5 mr-2"}),"New Transaction"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm font-medium",children:"Total Transactions"}),e.jsx("p",{className:"text-3xl font-bold",children:E.total})]}),e.jsx("div",{className:"bg-blue-400 bg-opacity-30 rounded-lg p-3",children:e.jsx(Kt,{className:"h-8 w-8"})})]})}),e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm font-medium",children:"Completed"}),e.jsx("p",{className:"text-3xl font-bold",children:E.completed}),e.jsxs("p",{className:"text-green-100 text-xs mt-1",children:["₹",E.completedAmount.toLocaleString()]})]}),e.jsx("div",{className:"bg-green-400 bg-opacity-30 rounded-lg p-3",children:e.jsx(Re,{className:"h-8 w-8"})})]})}),e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-100 text-sm font-medium",children:"Pending"}),e.jsx("p",{className:"text-3xl font-bold",children:E.pending})]}),e.jsx("div",{className:"bg-yellow-400 bg-opacity-30 rounded-lg p-3",children:e.jsx(Rt,{className:"h-8 w-8"})})]})}),e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl shadow-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-bold",children:["₹",E.totalAmount.toLocaleString()]}),E.failed>0&&e.jsxs("p",{className:"text-purple-100 text-xs mt-1",children:[E.failed," failed"]})]}),e.jsx("div",{className:"bg-purple-400 bg-opacity-30 rounded-lg p-3",children:e.jsx("span",{className:"text-2xl font-bold",children:"₹"})})]})})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ut,{className:"h-5 w-5 absolute left-3 top-3 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search by name...",value:s,onChange:y=>a(y.target.value),className:"input-field pl-10"})]}),e.jsx("button",{onClick:()=>{a(""),N()},className:"btn-secondary",children:"Clear"})]})}),e.jsx(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:w&&w.length>0?e.jsx("div",{className:`${j?"space-y-4":"overflow-x-auto"}`,children:j?e.jsx("div",{className:"space-y-4",children:w.map(y=>e.jsxs(O.div,{whileHover:{scale:1.02},className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:y.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${y.status==="COMPLETED"?"bg-green-100 text-green-800":y.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:y.status})]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["📅 ",new Date(y.date).toLocaleDateString()]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["🕐 ",d(y.date)]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-1",children:["🆔 ",y.transactionId]}),e.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["💰 ₹",y.amount.toLocaleString()]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>b(y),className:"text-blue-600 hover:text-blue-800 text-sm font-medium inline-flex items-center",children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(Ae,{to:`/transactions/${y.id}/edit`,className:"text-primary-600 hover:text-primary-800 text-sm font-medium inline-flex items-center",children:[e.jsx(Ke,{className:"h-4 w-4 mr-1"}),"Edit"]}),e.jsxs("button",{onClick:()=>f(y.id,y.name),disabled:h.isLoading,className:"text-red-600 hover:text-red-800 text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center",children:[e.jsx(xt,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]},y.id))}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 table-fixed",children:[e.jsx("thead",{className:"bg-indigo-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-16 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"S.No"}),e.jsx("th",{className:"w-48 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Time"}),e.jsx("th",{className:"w-40 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Transaction ID"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"w-24 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"w-32 px-4 py-3 text-left text-xs font-medium text-white uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map((y,m)=>e.jsxs(O.tr,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:m*.05},className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"w-16 px-4 py-4 whitespace-nowrap text-sm text-gray-900 text-center",children:m+1}),e.jsx("td",{className:"w-48 px-4 py-4 text-sm font-medium text-gray-900",children:e.jsx("div",{className:"truncate",title:y.name,children:y.name})}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(y.date).toLocaleDateString()}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:d(y.date)}),e.jsx("td",{className:"w-40 px-4 py-4 text-sm text-gray-500",children:e.jsx("div",{className:"truncate",title:y.transactionId,children:y.transactionId})}),e.jsxs("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm text-gray-500 font-semibold",children:["₹",y.amount.toLocaleString()]}),e.jsx("td",{className:"w-24 px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${y.status==="COMPLETED"?"bg-green-100 text-green-800":y.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:y.status})}),e.jsx("td",{className:"w-32 px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>b(y),className:"text-blue-600 hover:text-blue-900 inline-flex items-center",title:"View Transaction Details",children:e.jsx(Ie,{className:"h-4 w-4"})}),e.jsx(Ae,{to:`/transactions/${y.id}/edit`,className:"text-primary-600 hover:text-primary-900 inline-flex items-center",title:"Edit Transaction",children:e.jsx(Ke,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>f(y.id,y.name),disabled:h.isLoading,className:"text-red-600 hover:text-red-900 disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center",title:"Delete Transaction",children:e.jsx(xt,{className:"h-4 w-4"})})]})})]},y.id))})]})})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-500 text-lg",children:"No transactions found."}),e.jsxs(Ae,{to:"/transactions/new",className:"btn-primary inline-flex items-center mt-4",children:[e.jsx(ct,{className:"h-5 w-5 mr-2"}),"Create First Transaction"]})]})}),i.isOpen&&i.transaction&&e.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:e.jsx("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:e.jsxs("div",{className:"mt-3",children:[e.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Transaction Details - ",i.transaction.name]}),e.jsx("button",{onClick:x,className:"text-gray-400 hover:text-gray-600 focus:outline-none",children:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),e.jsx("div",{className:"mt-4 space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:i.transaction.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Date"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(i.transaction.date).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Time"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900",children:d(i.transaction.date)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Transaction ID"}),e.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:i.transaction.transactionId})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Amount"}),e.jsxs("p",{className:"mt-1 text-sm text-gray-900 font-semibold",children:["₹",i.transaction.amount.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${i.transaction.status==="COMPLETED"?"bg-green-100 text-green-800":i.transaction.status==="PENDING"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:i.transaction.status})]})]})}),e.jsxs("div",{className:"flex items-center justify-end pt-6 border-t border-gray-200 space-x-3",children:[e.jsx("button",{onClick:x,className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Close"}),e.jsxs(Ae,{to:`/transactions/${i.transaction.id}/edit`,onClick:x,className:"px-4 py-2 bg-primary-600 text-white rounded-md hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-primary-500 inline-flex items-center",children:[e.jsx(Ke,{className:"h-4 w-4 mr-2"}),"Edit Transaction"]})]})]})})})]})}function _a(){const t=Ge(),{id:s}=rs(),a=!!s,r=Oe(),{register:n,handleSubmit:i,reset:l,formState:{errors:o}}=ft(),{data:p}=me(["transaction",s],async()=>s?(await Z.get(`/api/transactions/${s}`)).data:null,{enabled:a}),h=ge(async b=>{if(console.log("Submitting transaction form data:",b),a){const x=await Z.patch(`/api/transactions/${s}`,b);return console.log("PATCH response:",x.data),x}else{const x=await Z.post("/api/transactions",b);return console.log("POST response:",x.data),x}},{onSuccess:async b=>{I.success(a?"Transaction updated successfully!":"Transaction created successfully!"),console.log("Transaction update/create successful:",b.data),r.clear(),r.invalidateQueries(["transactions"]),r.invalidateQueries(["transaction"]),await r.refetchQueries(["transactions"]),setTimeout(()=>{var x;t("/transactions",{state:{fromAdd:!a,fromEdit:a,transactionName:((x=b.data.transaction)==null?void 0:x.name)||b.data.name,timestamp:Date.now()}})},100)},onError:b=>{var x,w;I.error(((w=(x=b.response)==null?void 0:x.data)==null?void 0:w.message)||"Something went wrong")}});c.useEffect(()=>{if(p){const b=p.date?new Date(p.date):new Date;l({name:p.name,date:b.toISOString().split("T")[0],time:b.toTimeString().split(" ")[0].substring(0,5),transactionId:p.transactionId,amount:p.amount,status:p.status})}},[p,l]);const f=b=>{const x=`${b.date}T${b.time}:00.000Z`,w={...b,date:x};h.mutate(w)};return e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{type:"button",onClick:()=>t("/transactions"),className:"inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors",children:[e.jsx(bt,{className:"h-4 w-4 mr-2"}),"Back to Transactions"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:a?"Edit Transaction":"New Transaction"}),e.jsx("p",{className:"text-gray-600",children:a?"Update transaction information":"Create a new transaction record"})]})]})}),e.jsxs("form",{onSubmit:i(f),className:"card space-y-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Transaction Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Name *"}),e.jsx("input",{...n("name",{required:"Name is required"}),type:"text",className:"input-field",placeholder:"Enter transaction name"}),o.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.name.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date *"}),e.jsx("input",{...n("date",{required:"Date is required"}),type:"date",className:"input-field"}),o.date&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.date.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time *"}),e.jsx("input",{...n("time",{required:"Time is required"}),type:"time",className:"input-field"}),o.time&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.time.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transaction ID *"}),e.jsx("input",{...n("transactionId",{required:"Transaction ID is required"}),type:"text",className:"input-field",placeholder:"Enter transaction ID"}),o.transactionId&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.transactionId.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount *"}),e.jsx("input",{...n("amount",{required:"Amount is required",min:{value:.01,message:"Amount must be greater than 0"}}),type:"number",step:"0.01",className:"input-field",placeholder:"Enter amount"}),o.amount&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.amount.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status *"}),e.jsxs("select",{...n("status",{required:"Status is required"}),className:"input-field",children:[e.jsx("option",{value:"",children:"Select status"}),e.jsx("option",{value:"PENDING",children:"Pending"}),e.jsx("option",{value:"COMPLETED",children:"Completed"}),e.jsx("option",{value:"FAILED",children:"Failed"})]}),o.status&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o.status.message})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-4 pt-6 border-t border-gray-200",children:[e.jsx("button",{type:"button",onClick:()=>t("/transactions"),className:"btn-secondary",children:"Cancel"}),e.jsx(O.button,{type:"submit",disabled:h.isLoading,className:"btn-primary disabled:opacity-50",whileHover:{scale:1.02},whileTap:{scale:.98},children:h.isLoading?a?"Updating...":"Creating...":a?"Update Transaction":"Create Transaction"})]})]})]})})}const im=["Manufacturing","Trading","Service","Retail","Wholesale","Construction","Transportation","Agriculture","Technology","Healthcare","Education","Hospitality","Other"],lm=()=>{const[t,s]=c.useState(!1),a=Ge(),{register:r,handleSubmit:n,formState:{errors:i},reset:l}=ft(),o=async p=>{var h,f,b,x,w,g,N;s(!0);try{console.log("🚀 Submitting loan application:",p);const d=await at.post("/api/enquiries",{name:p.name,mobile:p.mobile,businessType:p.businessType||null,businessName:p.businessName||null,source:"ONLINE_APPLICATION",interestStatus:"INTERESTED"});console.log("✅ Application submitted successfully:",d.data),d.data&&(Ne.success("Application submitted successfully! We will contact you soon."),l(),setTimeout(()=>{a("/")},2e3))}catch(d){console.error("❌ Error submitting application:",d),console.error("❌ Error details:",{status:(h=d.response)==null?void 0:h.status,statusText:(f=d.response)==null?void 0:f.statusText,data:(b=d.response)==null?void 0:b.data,message:d.message});let E="Failed to submit application. Please try again.";((x=d.response)==null?void 0:x.status)===404?E="Service not available. Please try again later.":((w=d.response)==null?void 0:w.status)===500?E="Server error. Please try again later.":(N=(g=d.response)==null?void 0:g.data)!=null&&N.message?E=d.response.data.message:d.message.includes("Network Error")&&(E="Network error. Please check your connection and try again."),Ne.error(E)}finally{s(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:[e.jsx("header",{className:"bg-white shadow-sm border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:"/generated-image.png",alt:"Company Logo",className:"h-20 w-20 object-contain drop-shadow-lg hover:scale-110 transition-transform duration-300",style:{filter:"contrast(2.2) saturate(2.0) brightness(1.8)",imageRendering:"crisp-edges",maxWidth:"100%",maxHeight:"100%"}})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Business Loan Portal"}),e.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Apply for Business Loans Online"})]})]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Need help? Call us at +91-XXXXXXXXXX"})]})})}),e.jsx("div",{className:"py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-md mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Loan Application"}),e.jsx("p",{className:"text-gray-600",children:"Apply for a business loan in just a few steps"})]}),e.jsxs("form",{onSubmit:n(o),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Full Name ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"name",...r("name",{required:"Name is required",minLength:{value:2,message:"Name must be at least 2 characters"}}),className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i.name?"border-red-300":"border-gray-300"}`,placeholder:"Enter your full name"}),i.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.name.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"mobile",className:"block text-sm font-medium text-gray-700 mb-2",children:["Mobile Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",id:"mobile",...r("mobile",{required:"Mobile number is required",pattern:{value:/^[6-9]\d{9}$/,message:"Please enter a valid 10-digit mobile number"}}),className:`w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${i.mobile?"border-red-300":"border-gray-300"}`,placeholder:"Enter your mobile number",maxLength:10}),i.mobile&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:i.mobile.message})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"businessType",className:"block text-sm font-medium text-gray-700 mb-2",children:["Business Type ",e.jsx("span",{className:"text-gray-400",children:"(Optional)"})]}),e.jsxs("select",{id:"businessType",...r("businessType"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:"Select business type"}),im.map(p=>e.jsx("option",{value:p,children:p},p))]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"businessName",className:"block text-sm font-medium text-gray-700 mb-2",children:["Business Name ",e.jsx("span",{className:"text-gray-400",children:"(Optional)"})]}),e.jsx("input",{type:"text",id:"businessName",...r("businessName"),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter your business name"})]}),e.jsx("button",{type:"submit",disabled:t,className:`w-full py-3 px-4 rounded-md text-white font-medium transition-colors ${t?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"}`,children:t?e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Submitting..."]}):"Submit Application"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-sm text-gray-500",children:"By submitting this form, you agree to our terms and conditions."})})]})})})]})};class om{constructor(s){qt(this,"results",[]);qt(this,"queryClient");this.queryClient=s}async testAllEndpoints(){console.log("🧪 Starting comprehensive auto-refresh test...");const s=[{page:"Dashboard",endpoint:"/api/enquiries",queryKey:"dashboard-data"},{page:"Enquiry List",endpoint:"/api/enquiries",queryKey:"enquiries"},{page:"Document Verification",endpoint:"/api/documents",queryKey:"documents-verification"},{page:"Document Upload",endpoint:"/api/documents",queryKey:"documents"},{page:"Shortlist",endpoint:"/api/shortlist",queryKey:"shortlists"},{page:"Payment Gateway",endpoint:"/api/cashfree",queryKey:"cashfree-applications"},{page:"Staff Management",endpoint:"/api/staff",queryKey:"staff"}];for(const a of s)await this.testEndpoint(a.page,a.endpoint,a.queryKey);return this.results}async testEndpoint(s,a,r){try{console.log(`🔍 Testing ${s} - ${a}`);const n=await fetch(a),i=await n.json();if(n.ok){const l=this.queryClient.getQueryData(r);this.results.push({page:s,endpoint:a,status:"success",message:`✅ API working, data count: ${Array.isArray(i)?i.length:"N/A"}${l?", cached data exists":", no cached data"}`,timestamp:new Date().toISOString(),dataCount:Array.isArray(i)?i.length:void 0}),console.log(`✅ ${s} test passed`)}else throw new Error(`HTTP ${n.status}: ${n.statusText}`)}catch(n){this.results.push({page:s,endpoint:a,status:"error",message:`❌ ${n.message}`,timestamp:new Date().toISOString()}),console.error(`❌ ${s} test failed:`,n.message)}}async testCacheInvalidation(){console.log("🔄 Testing cache invalidation...");const s=["dashboard-data","enquiries","documents","documents-verification","shortlists","cashfree-applications","staff"];for(const a of s)try{const r=this.queryClient.getQueryData(a);await this.queryClient.invalidateQueries(a),await new Promise(i=>setTimeout(i,1e3));const n=this.queryClient.getQueryData(a);this.results.push({page:`Cache Test - ${a}`,endpoint:"cache-invalidation",status:"success",message:`✅ Cache invalidated successfully. Before: ${r?"exists":"empty"}, After: ${n?"exists":"empty"}`,timestamp:new Date().toISOString()}),console.log(`✅ Cache invalidation test passed for ${a}`)}catch(r){this.results.push({page:`Cache Test - ${a}`,endpoint:"cache-invalidation",status:"error",message:`❌ Cache invalidation failed: ${r.message}`,timestamp:new Date().toISOString()}),console.error(`❌ Cache invalidation test failed for ${a}:`,r.message)}}async testAutoRefreshIntervals(){console.log("⏰ Testing auto-refresh intervals...");const s=35e3,a=Date.now(),r={"dashboard-data":this.queryClient.getQueryData("dashboard-data"),enquiries:this.queryClient.getQueryData("enquiries"),shortlists:this.queryClient.getQueryData("shortlists")};return new Promise(n=>{const i=setInterval(()=>{if(Date.now()-a>=s){clearInterval(i);const o={"dashboard-data":this.queryClient.getQueryData("dashboard-data"),enquiries:this.queryClient.getQueryData("enquiries"),shortlists:this.queryClient.getQueryData("shortlists")};let p=!1;for(const[h,f]of Object.entries(r)){const b=o[h];if(f!==b){p=!0;break}}this.results.push({page:"Auto-refresh Monitor",endpoint:"interval-refresh",status:p?"success":"error",message:p?`✅ Auto-refresh detected within ${s/1e3}s`:`❌ No auto-refresh detected within ${s/1e3}s`,timestamp:new Date().toISOString()}),console.log(p?"✅ Auto-refresh test passed":"❌ Auto-refresh test failed - no refresh detected"),n()}},5e3)})}generateReport(){const s=this.results.filter(n=>n.status==="success").length,a=this.results.filter(n=>n.status==="error").length;let r=`
🧪 AUTO-REFRESH FUNCTIONALITY TEST REPORT
==========================================

📊 Summary:
- Total Tests: ${this.results.length}
- Passed: ${s} ✅
- Failed: ${a} ❌
- Success Rate: ${(s/this.results.length*100).toFixed(1)}%

📋 Detailed Results:
`;return this.results.forEach((n,i)=>{r+=`
${i+1}. ${n.page}
   Endpoint: ${n.endpoint}
   Status: ${n.status==="success"?"✅ PASS":"❌ FAIL"}
   Message: ${n.message}
   Time: ${new Date(n.timestamp).toLocaleTimeString()}
   ${n.dataCount!==void 0?`Data Count: ${n.dataCount}`:""}
`}),r+=`
==========================================
Test completed at: ${new Date().toLocaleString()}
`,r}clearResults(){this.results=[]}}const cm=()=>{const[t,s]=c.useState(!1),[a,r]=c.useState([]),[n,i]=c.useState(""),l=Oe(),o=async()=>{s(!0),r([]),i("Initializing tests...");try{const x=new om(l);i("Testing API endpoints..."),await x.testAllEndpoints(),i("Testing cache invalidation..."),await x.testCacheInvalidation();const w=x.results;r(w);const g=x.generateReport();console.log(g);const N=w.filter(E=>E.status==="success").length,d=w.length;I.success(`Tests completed! ${N}/${d} passed`),i(`Completed: ${N}/${d} tests passed`)}catch(x){console.error("Test execution failed:",x),I.error(`Test execution failed: ${x.message}`),i(`Failed: ${x.message}`)}finally{s(!1)}},p=()=>{r([]),i("")},h=()=>{i("Manually refreshing all queries..."),["dashboard-data","enquiries","documents","documents-verification","shortlists","cashfree-applications","staff"].forEach(w=>{l.invalidateQueries(w)}),I.success("Manual refresh triggered for all queries"),i("Manual refresh completed")},f=x=>x==="success"?"✅":"❌",b=x=>x==="success"?"text-green-600":"text-red-600";return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Auto-Refresh Functionality Test"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:o,disabled:t,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:t?e.jsxs(e.Fragment,{children:[e.jsx(Xl,{className:"h-4 w-4 mr-2"}),"Running..."]}):e.jsxs(e.Fragment,{children:[e.jsx(_l,{className:"h-4 w-4 mr-2"}),"Run Tests"]})}),e.jsxs("button",{onClick:h,disabled:t,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Manual Refresh"]}),e.jsx("button",{onClick:p,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Clear Results"})]})]}),n&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:e.jsx("p",{className:"text-sm text-blue-800",children:n})}),a.length>0&&e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Test Results"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map((x,w)=>e.jsxs(O.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:w*.1},className:`p-4 border rounded-lg ${x.status==="success"?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:x.page}),e.jsx("span",{className:"text-lg",children:f(x.status)})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:x.endpoint})}),e.jsx("p",{className:`text-sm ${b(x.status)} mb-2`,children:x.message}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-500",children:[e.jsx("span",{children:new Date(x.timestamp).toLocaleTimeString()}),x.dataCount!==void 0&&e.jsxs("span",{className:"bg-gray-100 px-2 py-1 rounded",children:[x.dataCount," items"]})]})]},w))}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Summary"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:a.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Tests"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.filter(x=>x.status==="success").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Passed"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:a.filter(x=>x.status==="error").length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Failed"})]})]})]})]}),e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-yellow-800 mb-2",children:"Testing Instructions"}),e.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[e.jsx("li",{children:'• Click "Run Tests" to verify all API endpoints and cache functionality'}),e.jsx("li",{children:'• Use "Manual Refresh" to trigger immediate data refresh across all pages'}),e.jsx("li",{children:"• Check browser console for detailed logs and reports"}),e.jsx("li",{children:"• Navigate between pages to verify data persistence"}),e.jsx("li",{children:"• Refresh the browser page to test data persistence after reload"})]})]})]})},dm=()=>{const[t,s]=c.useState([]),[a,r]=c.useState(!0),[n,i]=c.useState(0),l=Oe(),o=[{key:"enquiries",endpoint:"/api/enquiries",label:"Enquiries"},{key:"shortlists",endpoint:"/api/shortlist",label:"Shortlist"},{key:"documents",endpoint:"/api/documents",label:"Documents"},{key:"staff",endpoint:"/api/staff",label:"Staff"},{key:"cashfree",endpoint:"/api/cashfree",label:"Payment Gateway"}],p=async d=>{try{const j=(await Z.get(d)).data;return{endpoint:d,status:"success",data:j,lastUpdated:new Date().toLocaleTimeString(),dataCount:Array.isArray(j)?j.length:Array.isArray(j==null?void 0:j.staff)?j.staff.length:void 0}}catch(E){return{endpoint:d,status:"error",error:E.message,lastUpdated:new Date().toLocaleTimeString()}}},h=async()=>{s(j=>j.map(y=>({...y,status:"loading"})));const d=await Promise.all(o.map(({endpoint:j})=>p(j)));s(d),i(j=>j+1);const E=d.filter(j=>j.status==="success").length;I.success(`Test completed: ${E}/${d.length} endpoints working`)};c.useEffect(()=>{h()},[]),c.useEffect(()=>{if(!a)return;const d=setInterval(()=>{console.log("🔄 Auto-refresh triggered by test page"),h()},3e4);return()=>clearInterval(d)},[a]);const{data:f}=me("enquiries",()=>Z.get("/api/enquiries").then(d=>d.data),{staleTime:3*60*1e3,keepPreviousData:!0}),{data:b}=me("shortlists",()=>Z.get("/api/shortlist").then(d=>d.data),{staleTime:2*60*1e3,keepPreviousData:!0}),{data:x}=me("documents",()=>Z.get("/api/documents").then(d=>d.data),{staleTime:8*60*1e3,keepPreviousData:!0}),w=d=>{switch(d){case"loading":return e.jsx(Rt,{className:"h-5 w-5 text-yellow-500 animate-spin"});case"success":return e.jsx(Re,{className:"h-5 w-5 text-green-500"});case"error":return e.jsx(dt,{className:"h-5 w-5 text-red-500"})}},g=d=>{switch(d){case"loading":return"border-yellow-200 bg-yellow-50";case"success":return"border-green-200 bg-green-50";case"error":return"border-red-200 bg-red-50"}},N=()=>{["enquiries","shortlists","documents","staff","cashfree","dashboard-data"].forEach(E=>{l.invalidateQueries(E)}),I.success("All caches invalidated - data will refresh automatically")};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Data Persistence & Auto-Refresh Test"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("label",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:a,onChange:d=>r(d.target.checked),className:"mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Auto-refresh (30s)"})]}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Refreshes: ",n]})]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:h,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Test All Endpoints"]}),e.jsxs("button",{onClick:N,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Invalidate Caches"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"API Endpoint Status"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((d,E)=>{var j;return e.jsxs(O.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:E*.1},className:`p-4 border rounded-lg ${g(d.status)}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:((j=o.find(y=>y.endpoint===d.endpoint))==null?void 0:j.label)||d.endpoint}),w(d.status)]}),e.jsx("p",{className:"text-xs text-gray-600 mb-2",children:e.jsx("code",{className:"bg-gray-100 px-1 rounded",children:d.endpoint})}),d.status==="success"&&e.jsxs("div",{className:"space-y-1",children:[d.dataCount!==void 0&&e.jsxs("p",{className:"text-sm text-green-700",children:["✅ ",d.dataCount," items found"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Last updated: ",d.lastUpdated]})]}),d.status==="error"&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm text-red-700",children:["❌ ",d.error]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Failed at: ",d.lastUpdated]})]}),d.status==="loading"&&e.jsx("p",{className:"text-sm text-yellow-700",children:"🔄 Testing..."})]},d.endpoint)})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"React Query Cache Status"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Enquiries Cache"}),e.jsx("p",{className:"text-sm text-gray-600",children:f?`✅ ${Array.isArray(f)?f.length:"N/A"} items cached`:"❌ No cache"})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Shortlist Cache"}),e.jsx("p",{className:"text-sm text-gray-600",children:b?`✅ ${Array.isArray(b)?b.length:"N/A"} items cached`:"❌ No cache"})]}),e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:"Documents Cache"}),e.jsx("p",{className:"text-sm text-gray-600",children:x?`✅ ${Array.isArray(x)?x.length:"N/A"} items cached`:"❌ No cache"})]})]})]}),e.jsx(cm,{}),e.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Testing Instructions"}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Auto-refresh:"})," This page automatically tests endpoints every 30 seconds when enabled"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Manual test:"}),' Click "Test All Endpoints" to immediately check all API endpoints']}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Cache test:"}),' Click "Invalidate Caches" to test cache refresh functionality']}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Navigation test:"})," Navigate to other pages and return - data should persist"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Refresh test:"})," Refresh the browser page - data should remain visible"]}),e.jsxs("p",{children:["• ",e.jsx("strong",{children:"Console logs:"})," Check browser console for detailed refresh activity"]})]})]})]})};function mm(){const[t,s]=c.useState("admin@gmail.com"),[a,r]=c.useState("admin123"),[n,i]=c.useState(!1),{login:l,isAuthenticated:o,user:p}=_e(),h=Ge(),f=async()=>{i(!0);try{console.log("🧪 Testing login..."),await l({email:t,password:a}),console.log("🧪 Login completed, auth state:",o),setTimeout(()=>{console.log("🧪 Attempting manual navigation..."),h("/dashboard")},1e3)}catch(x){console.error("🧪 Login test failed:",x)}finally{i(!1)}},b=()=>{console.log("🧪 Testing direct navigation..."),h("/dashboard")};return e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Login Test Page"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email:"}),e.jsx("input",{type:"email",value:t,onChange:x=>s(x.target.value),className:"w-full p-2 border rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Password:"}),e.jsx("input",{type:"password",value:a,onChange:x=>r(x.target.value),className:"w-full p-2 border rounded"})]}),e.jsx("button",{onClick:f,disabled:n,className:"w-full bg-blue-600 text-white p-2 rounded hover:bg-blue-700 disabled:opacity-50",children:n?"Testing Login...":"Test Login"}),e.jsx("button",{onClick:b,className:"w-full bg-green-600 text-white p-2 rounded hover:bg-green-700",children:"Test Direct Navigation"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Current State:"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Authenticated:"})," ",o?"Yes":"No"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"User:"})," ",p?`${p.name} (${p.role})`:"None"]})]})]})})}function um(){const{isAuthenticated:t,user:s}=_e();return e.jsxs(ra,{children:[e.jsx(fe,{path:"/apply",element:e.jsx(lm,{})}),e.jsx(fe,{path:"/login",element:e.jsx(_d,{})}),e.jsx(fe,{path:"/login-test",element:e.jsx(mm,{})}),t?e.jsx(fe,{path:"/*",element:e.jsx(bd,{children:e.jsxs(ra,{children:[e.jsx(fe,{path:"/dashboard",element:e.jsx(Gd,{})}),e.jsx(fe,{path:"/enquiries",element:e.jsx(zd,{})}),e.jsx(fe,{path:"/enquiries/new",element:e.jsx(Es,{})}),e.jsx(fe,{path:"/enquiries/:id",element:e.jsx(Es,{})}),e.jsx(fe,{path:"/enquiries/:id/edit",element:e.jsx(Es,{})}),e.jsx(fe,{path:"/documents",element:e.jsx(Yd,{})}),e.jsx(fe,{path:"/documents/verification",element:e.jsx(Kd,{})}),e.jsx(fe,{path:"/shortlist",element:e.jsx(Xd,{})}),e.jsx(fe,{path:"/shortlist/new",element:e.jsx(Ua,{})}),e.jsx(fe,{path:"/shortlist/:id/edit",element:e.jsx(Ua,{})}),e.jsx(fe,{path:"/payment-gateway",element:e.jsx(tm,{})}),e.jsx(fe,{path:"/payment-gateway/apply/:id",element:e.jsx(sm,{})}),(s==null?void 0:s.role)==="ADMIN"&&e.jsxs(e.Fragment,{children:[e.jsx(fe,{path:"/staff",element:e.jsx(am,{})}),e.jsx(fe,{path:"/transactions",element:e.jsx(nm,{})}),e.jsx(fe,{path:"/transactions/new",element:e.jsx(_a,{})}),e.jsx(fe,{path:"/transactions/:id/edit",element:e.jsx(_a,{})}),e.jsx(fe,{path:"/test-refresh",element:e.jsx(dm,{})})]}),e.jsx(fe,{path:"/",element:e.jsx(gs,{to:"/dashboard"})}),e.jsx(fe,{path:"*",element:e.jsx(gs,{to:"/dashboard"})})]})})}):e.jsx(fe,{path:"*",element:e.jsx(gs,{to:"/login"})})]})}class xm extends c.Component{constructor(){super(...arguments);qt(this,"state",{hasError:!1})}static getDerivedStateFromError(a){return{hasError:!0,error:a}}componentDidCatch(a,r){console.error("ErrorBoundary caught an error:",a,r)}render(){return this.state.hasError?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-6",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:"/generated-image.png",alt:"Company Logo",className:"h-20 w-20 object-contain drop-shadow-lg hover:scale-110 transition-transform duration-300",style:{filter:"contrast(2.2) saturate(2.0) brightness(1.8)",imageRendering:"crisp-edges",maxWidth:"100%",maxHeight:"100%"}})})}),e.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:e.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),e.jsx("h1",{className:"text-xl font-semibold text-gray-900 text-center mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md transition-colors",children:"Refresh Page"}),e.jsx("button",{onClick:()=>this.setState({hasError:!1,error:void 0}),className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-md transition-colors",children:"Try Again"})]}),!1]})}):this.props.children}}const Br=new Jr({defaultOptions:{queries:{staleTime:5*60*1e3,cacheTime:30*60*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchOnReconnect:!0,refetchInterval:30*1e3,refetchIntervalInBackground:!1,retry:3,retryDelay:t=>Math.min(1e3*2**t,3e4),keepPreviousData:!0,notifyOnChangeProps:["data","error","isLoading"]},mutations:{retry:1,onMutate:async()=>{await Br.cancelQueries()}}}});function hm(){return e.jsx(xm,{children:e.jsx(Xr,{client:Br,children:e.jsx(Zn,{children:e.jsx(Zc,{children:e.jsxs(Kr,{children:[e.jsx(um,{}),e.jsx(zn,{position:"top-right"})]})})})})})}As.createRoot(document.getElementById("root")).render(e.jsx(je.StrictMode,{children:e.jsx(hm,{})}));
